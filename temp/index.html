<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
    <title>気象庁｜統合地図ページ</title>
    <link rel="stylesheet" href="common/lib/leaflet.css" />
    <link rel="stylesheet" href="common/lib/leaflet-gesture-handling.css" />
<style>
@charset "UTF-8";/*!
 * Bootstrap Reboot v4.1.3 (https://getbootstrap.com/)
 * Copyright 2011-2018 The Bootstrap Authors
 * Copyright 2011-2018 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md)
 */*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent}@-ms-viewport{width:device-width}article,aside,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus{outline:0!important}hr{box-sizing:content-box;height:0;overflow:visible}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}abbr[data-original-title],abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;border-bottom:0}address{margin-bottom:1rem;font-style:normal;line-height:inherit}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}dfn{font-style:italic}b,strong{font-weight:bolder}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#007bff;text-decoration:none;background-color:transparent;-webkit-text-decoration-skip:objects}a:hover{color:#0056b3;text-decoration:underline}a:not([href]):not([tabindex]){text-decoration:none}a:not([href]):not([tabindex]):focus,a:not([href]):not([tabindex]):hover{text-decoration:none}a:not([href]):not([tabindex]):focus{outline:0}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto;-ms-overflow-style:scrollbar}figure{margin:0 0 1rem}img{vertical-align:middle;border-style:none;box-sizing:content-box}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}caption{padding-top:.75rem;padding-bottom:.75rem;color:#6c757d;text-align:left;caption-side:bottom}th{text-align:inherit}label{display:inline-block;margin-bottom:.5rem}button{border-radius:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}textarea{overflow:auto;resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{display:block;width:100%;max-width:100%;padding:0;margin-bottom:.5rem;font-size:1.5rem;line-height:inherit;color:inherit;white-space:normal}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}summary{display:list-item;cursor:pointer}template{display:none}[hidden]{display:none!important}
</style>
<style>
.area-nav{display:flex;position:relative;width:100%;min-width:320px;margin-bottom:10px;box-shadow:0 1px 3px #d3d6dd;background-color:#0060af;-webkit-user-select:none;user-select:none;z-index:10}.area-nav>div{height:50px}.area-nav a{position:relative;cursor:pointer}.area-logo{display:flex;align-items:center;margin-left:10px;margin-right:10px}.area-logo img.area-icon{display:none;flex:none}.area-logo img:not(.area-icon){display:block;width:101px;height:40px}.area-home{display:flex;align-items:center;margin-right:10px}.area-map{display:flex;align-items:center;margin-right:10px}.area-dropdown{order:4;flex-grow:1;display:flex;align-items:center;margin-right:10px;border-left:1px solid #f9fafb;border-right:1px solid #f9fafb}.area-gps{order:5;display:flex;align-items:center;margin-right:10px}.area-gps-searching::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,.3);z-index:15}.area-gps-searching::after{content:attr(title);display:inline-block;position:fixed;top:0;left:50%;transform:translate(-50%,0);margin-top:55px;padding:15px;background-color:rgba(0,96,175,.8);border-radius:5px;box-shadow:0 0 20px #ddd;font-weight:700;text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff;z-index:20;white-space:nowrap}.area-reload{order:6;display:flex;align-items:center;margin-right:10px}.area-question{order:8;display:flex;align-items:center;margin-right:10px}.area-question a{display:block}.area-question a.area-question-active::before{content:"";position:absolute;bottom:-10px;left:7px;width:0;height:0;border-top:15px solid transparent;border-right:15px solid transparent;border-bottom:15px solid #0060af;border-left:15px solid transparent;pointer-events:none;z-index:3}.bosaitop-pro .area-question a.area-question-active::before{border-bottom:15px solid #40566a}.area-sns{order:9;display:flex;align-items:center;margin-right:10px}.area-sns img{width:30px;height:30px}.area-search{order:10;display:flex;align-items:center;width:250px;margin-right:10px}.area-search>a{display:none}.area-search>a>img{width:30px;height:30px}.area-search form{width:100%;position:relative}.area-search form input[type=text]{min-width:100%;max-width:100%;min-height:30px;padding:2px 2px 2px 22px;border-radius:5px;border:1px solid #7e9db9;outline:0}.area-search form input[type=text]:active{outline:0}.area-search form:not(#cse-search-box)::before{content:"";display:inline-block;position:absolute;top:0;bottom:0;left:2px;height:20px;width:20px;margin:auto 0;background-image:url(common/image/hbg_search.svg);background-size:contain;background-repeat:no-repeat}.area-search .area-search-dropdown{display:none;position:absolute;top:30px;left:0;border-top:1px solid #f9fafb;width:100%}.area-search .area-search-dropdown .area-search-list{display:block;margin:0;padding:0;list-style-type:none}.area-search .area-search-dropdown .area-search-list li{display:flex;align-items:center;width:100%}.area-search .area-search-dropdown .area-search-list li a{display:block;padding:5px;width:100%;word-break:break-all}.area-search .area-search-dropdown .area-search-list li.area-search-selected a{background-color:#0060af}.area-toggle{order:10;display:none}#bosaitop-header .area-home{display:none}@media (max-width:1200px){.area-search{width:180px}.area-gps-searching::after{top:50px}}@media (max-width:992px){.area-utility-active#unitmap-header::before{content:"";position:absolute;top:50px;left:0;right:0;height:60px;background-color:rgba(0,96,175,.8);box-shadow:0 4px 3px #ccc;overflow:hidden;z-index:10}.area-utility-active:not(#unitmap-header)::before{content:"";position:absolute;top:50px;left:0;right:0;height:60px;background-color:rgba(0,96,175,.8);box-shadow:0 4px 3px #ccc;overflow:hidden;z-index:5}.bosaitop-pro .area-utility-active:not(#unitmap-header)::before{background-color:rgba(64,86,106,.8)}.area-home+.area-dropdown{max-width:calc(100% - 112px)}.area-home+.area-map+.area-dropdown{max-width:calc(100% - 216px)}.area-dropdown{margin-right:0;max-width:calc(100% - 164px)}.area-gps{display:none;position:absolute;top:60px;right:330px;margin-right:0}.area-reload{display:none;position:absolute;top:60px;right:280px;margin-right:0}.area-search{display:none;position:absolute;top:60px;right:50px;margin-right:0;width:220px}.area-search form input[type=text]{min-height:42px}.area-search .area-search-dropdown{top:42px}.area-question{display:none;position:absolute;top:60px;margin-right:0}.area-sns{display:none;position:absolute;top:66px;right:10px;margin-right:0}.area-toggle{display:flex;align-items:center;width:50px}.area-toggle a{height:100%;width:100%;background-image:url(common/image/icon_utility_white.svg);background-size:30px;background-position:center;background-repeat:no-repeat}.area-utility-active .area-gps,.area-utility-active .area-question,.area-utility-active .area-reload,.area-utility-active .area-search,.area-utility-active .area-sns,.area-utility-active .area-upper{display:block}.area-utility-active .area-toggle{background-color:#f9fafb}.area-utility-active .area-toggle a{background-image:url(common/image/icon_utility_black.svg)}#bosaitop-header .area-gps{right:380px}#bosaitop-header .area-reload{right:330px}#bosaitop-header .area-question{right:280px}#unitmap-header .area-gps{right:380px}#unitmap-header .area-reload{right:330px}#unitmap-header .area-question{right:280px}}@media (max-width:767px){:not(#unitmap-header) .area-nav{margin-bottom:30px}.area-logo{margin-left:0;margin-right:0}.area-logo a{padding-left:2px;padding-right:10px;background-color:#0060af}.area-logo img.area-icon{display:block;width:50px;height:50px}.area-logo img:not(.area-icon){display:none}.area-gps{right:290px}.area-reload{right:240px}.area-search{width:180px}#bosaitop-header .area-gps{right:340px}#bosaitop-header .area-reload{right:290px}#bosaitop-header .area-question{right:240px}#unitmap-header .area-gps{right:340px}#unitmap-header .area-reload{right:290px}#unitmap-header .area-question{right:240px}}@media (max-width:576px){.area-utility-active#unitmap-header::before{top:0;bottom:50px;height:auto;background-color:rgba(0,96,175,.8);box-shadow:none;z-index:9}.area-utility-active:not(#unitmap-header)::before{top:40px;height:100px}.area-nav>div{height:40px}.area-logo a{padding-right:3px}.area-logo img.area-icon{width:40px;height:40px}.area-home{display:none;position:absolute;top:50px;left:10px;margin-right:0}.area-home+.area-dropdown{max-width:calc(100% - 85px)}.area-home+.area-map+.area-dropdown{max-width:calc(100% - 85px)}.area-map{display:none;position:absolute;top:50px;left:50px;margin-right:0}.area-dropdown{max-width:calc(100% - 85px)}.area-gps{top:50px;right:85px}.area-reload{top:50px;right:45px}.area-question a.area-question-active::before{left:3px}.area-search{top:95px;left:10px;right:10px;width:calc(100% - 20px)}.area-search form input[type=text]{height:35px}.area-search .area-search-dropdown{top:35px;font-size:.9rem}.area-search .area-search-dropdown .area-search-list{display:flex;flex-wrap:wrap}.area-search .area-search-dropdown .area-search-list li{width:50%;align-items:stretch}.area-search .area-search-dropdown .area-search-list li:nth-child(even){border-left:none}.area-search .area-search-dropdown .area-search-list li:first-child:last-child{width:100%}.area-sns{top:52px;right:5px}.area-toggle{width:40px}.area-toggle a{background-size:25px}.area-utility-active .area-home,.area-utility-active .area-map{display:block}#bosaitop-header .area-map{left:auto;right:165px}#bosaitop-header .area-gps{right:125px}#bosaitop-header .area-reload{right:85px}#bosaitop-header .area-question{top:50px;right:45px}#unitmap-header .area-gps{right:125px}#unitmap-header .area-reload{right:85px}#unitmap-header .area-question{top:50px;right:45px}}@media (max-width:992px) and (max-height:500px){.area-utility-active#unitmap-header::before{top:40px;bottom:0;height:auto;background-color:rgba(0,96,175,.8);box-shadow:none;z-index:9}.area-utility-active#unitmap-header .area-toggle a::before{content:none}.area-utility-active:not(#unitmap-header)::before{top:40px;height:55px}#unitmap-header .area-nav{background-color:transparent;box-shadow:none}#unitmap-header .area-logo{margin-left:0;margin-right:0}#unitmap-header .area-logo a{padding-left:3px;padding-right:3px;background-color:#0060af}#unitmap-header .area-home{display:none}#unitmap-header .area-dropdown{display:none}#unitmap-header .area-toggle a{position:relative;background-image:url(common/image/icon_utility_black.svg)}#unitmap-header .area-toggle a::before{content:"";display:block;position:absolute;top:-5px;left:-5px;width:35px;height:35px;background-color:#f9fafb;border:1px solid #999;border-radius:50%;z-index:-1}#unitmap-header.area-utility-active .area-nav{background-color:#0060af;box-shadow:0 1px 3px #d3d6dd}#unitmap-header.area-utility-active .area-home{display:flex}#unitmap-header.area-utility-active .area-dropdown{display:flex}.area-nav{justify-content:space-between}.area-nav>div{height:40px}.area-logo a{padding-right:3px}.area-logo img.area-icon{width:40px;height:40px}.area-home{margin-right:5px}.area-home+.area-dropdown{max-width:calc(100% - 85px)}.area-home+.area-map+.area-dropdown{max-width:calc(100% - 85px)}.area-map{margin-right:5px}.area-dropdown{max-width:calc(100% - 85px)}.area-upper{top:50px;left:auto;right:320px}.area-reload{top:50px;left:auto;right:240px}.area-gps{top:50px;left:auto;right:280px}.area-question a.area-question-active::before{left:3px}.area-search{top:50px;right:45px;width:180px}.area-sns{top:53px;right:5px}.area-search{top:50px;right:45px;width:180px}.area-search form input[type=text]{height:35px}.area-search .area-search-dropdown .area-search-list{max-height:200px;overflow-y:auto}.area-toggle{width:40px}.area-toggle a{height:25px;width:25px;background-size:contain;margin:auto}#bosaitop-header .area-gps{left:auto;right:320px}#bosaitop-header .area-reload{left:auto;right:280px}#bosaitop-header .area-question{top:50px;left:auto;right:240px}#unitmap-header .area-gps{left:auto;right:320px}#unitmap-header .area-reload{left:auto;right:280px}#unitmap-header .area-question{top:50px;left:auto;right:240px}}@media (max-width:576px) and (max-height:500px){.area-utility-active#unitmap-header::before{top:0;bottom:0;height:auto;background-color:rgba(0,96,175,.8);z-index:9}.area-utility-active#unitmap-header .area-home{display:block}.area-utility-active:not(#unitmap-header)::before{height:100px}.area-home{display:none;margin-right:0}.area-home+.area-dropdown{max-width:calc(100% - 85px)}.area-home+.area-map+.area-dropdown{max-width:calc(100% - 85px)}.area-map{display:none;margin-right:0}.area-dropdown{display:flex;max-width:calc(100% - 85px)}.area-reload{top:50px;left:auto;right:45px}.area-gps{top:50px;left:auto;right:85px}.area-question a.area-question-active::before{left:3px}.area-search{top:95px;left:10px;right:10px;width:calc(100% - 20px)}.area-search .area-search-dropdown .area-search-list{max-height:200px;overflow-y:auto}.area-search .area-search-dropdown .area-search-list li{width:100%}.area-sns{top:52px;right:5px}.area-utility-active .area-home,.area-utility-active .area-map{display:block}#bosaitop-header .area-gps{right:125px}#bosaitop-header .area-reload{right:85px}#bosaitop-header .area-question{top:50px;right:45px}#unitmap-header .area-home{right:120px}#unitmap-header .area-gps{right:125px}#unitmap-header .area-reload{right:85px}#unitmap-header .area-question{top:50px;right:45px}}.area-pagetop{display:none;position:fixed;bottom:60px;right:10px;width:60px;height:60px;border:1px solid #f9fafb;border-radius:50px;background-image:url(common/image/pagetop.svg);background-repeat:no-repeat;background-position:center center;background-size:contain;cursor:pointer;opacity:.7;z-index:20}.header-background{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(128,128,128,.5);cursor:pointer;z-index:9}.disable{opacity:.8}a.disabled{opacity:.8;pointer-events:none}.area-icon{height:42px;width:42px}a.area-item-navy{padding-left:3px;padding-right:3px;color:#f9fafb;background-color:#0060af;background-image:-webkit-linear-gradient(top,#0060af,#003e70);background-image:linear-gradient(to bottom,#0060af,#003e70);text-align:center;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}a.area-item-navy.disabled{opacity:1;background-image:none;color:#303f4c}.area-active a.area-item-navy{color:#000;background-color:#f9fafb;background-image:none}li.area-item-gray a,li.area-item-white a{color:#000}li.area-item-gray a.area-selected,li.area-item-white a.area-selected{color:#f9fafb;background-color:#0060af;background-image:-webkit-linear-gradient(top,#0060af,#003e70);background-image:linear-gradient(to bottom,#0060af,#003e70);cursor:inherit;pointer-events:none}li.area-item-gray a.selected,li.area-item-white a.selected{color:#f9fafb;background-color:#0060af;background-image:-webkit-linear-gradient(top,#0060af,#003e70);background-image:linear-gradient(to bottom,#0060af,#003e70);cursor:inherit;pointer-events:none}a.area-category-elem-item{color:#000;background-color:#f9fafb}a.area-category-elem-item.selected{color:#f9fafb;background-color:#0060af;background-image:-webkit-linear-gradient(top,#0060af,#003e70);background-image:linear-gradient(to bottom,#0060af,#003e70);cursor:inherit;pointer-events:none}li.area-search-list-item{border:1px solid #f9fafb;border-top:none}a.area-search-list-label{background-color:rgba(0,96,175,.8);color:#f9fafb}.area-test-message{position:absolute;top:50px;right:0;padding:3px 5px;background-color:#ff0;border-bottom:1px solid #ccc;border-left:1px solid #ccc;font-size:.8rem;font-weight:700;text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff;user-select:none;-webkit-user-select:none;pointer-events:none;z-index:1}@media (min-width:993px){.area-reload a:hover::before{opacity:.7}.area-pagetop:hover{opacity:1}.area-icon:hover{opacity:.7}a.area-item-navy:hover{background-color:#f9fafb;background-image:none;color:#000}li.area-item-gray:not(:first-child) a:hover,li.area-item-white:not(:first-child) a:hover{color:#f9fafb;background-color:#0060af;background-image:none}a.area-category-elem-item.selected:hover,a.area-category-elem-item:hover{color:#f9fafb;background-color:#0060af;background-image:none}li.area-search-list-item:hover{border:1px solid #ccc;border-top:none}a.area-search-list-label:hover{background-color:#f9fafb;color:#000}}@media (max-width:992px){.area-pagetop{bottom:calc(env(safe-area-inset-bottom) + 10px);right:5px}}@media (max-width:576px){.area-pagetop{width:45px;height:45px}.area-icon{width:35px;height:35px}.area-test-message{top:40px}}@media (max-width:992px) and (max-height:500px){.area-pagetop{width:45px;height:45px}.area-icon{width:35px;height:35px}.area-test-message{top:40px}}.area-dropdown.area-no-category .area-map-contents{border-right:none;max-width:initial}.area-dropdown.area-no-category .area-category{display:none}.area-megamenu{display:none;position:absolute;top:auto;left:0;width:100%;min-height:0;max-height:600px;border-top:1px solid #ccc;overflow-y:auto;z-index:300}@media (-ms-high-contrast:none),(-ms-high-contrast:active){.area-megamenu{overflow-y:scroll}}img.area-contents-menu-icon{width:35px;height:35px;margin-right:5px;order:0}span.area-contents-menu-name{order:1;max-width:14rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.area-contents>a span,.area-map-contents>a span{position:relative}.area-contents>a span::before,.area-contents>a::before,.area-map-contents>a span::before,li.area-category-list>a::before,li.area-select-list>a::before{position:absolute;right:0;left:0;margin:0 auto;width:0;height:0;border-top:5px solid;border-right:5px solid transparent;border-bottom:0;border-left:5px solid transparent}.area-contents.area-active>a span::before,.area-map-contents.area-active>a span::before,li.area-category-list.area-active>a::before,li.area-select-list.area-active>a::before{border-top:0;border-right:5px solid transparent;border-bottom:5px solid;border-left:5px solid transparent}.area-contents>a.disabled span::before,.area-map-contents>a.disabled span::before,li.area-category-list>a.disabled::before,li.area-select-list>a.disabled::before{border-top:5px solid transparent}.area-contents>a::before{content:none}.area-contents>a span::before,.area-map-contents>a span::before{content:"";bottom:-8px}li.area-category-list>a::before,li.area-select-list>a::before{content:"";bottom:8px}.area-contents,.area-map-contents{flex-grow:1;border-right:1px solid #f9fafb}.area-contents>a.area-item-navy,.area-map-contents>a.area-item-navy{flex-grow:1;display:block;line-height:50px}.area-contents.area-active>.area-megamenu,.area-map-contents.area-active>.area-megamenu{display:block}.area-contents{width:40%}.area-map-contents{width:50%}ul.area-contents-menu{display:flex;flex-wrap:wrap;flex-direction:row;width:100%;margin:0;padding:0;list-style-type:none;background-color:#f9fafb;border-bottom:1px solid #ccc}ul.area-contents-menu:nth-child(even){background-color:#e4eef4}ul.area-contents-menu>li:first-child{display:flex;align-items:center;margin:0 0 0 5px;height:35px;width:100%}ul.area-contents-menu>li:not(:first-child){width:16.6%;margin:0 0 5px;padding:0 5px;height:35px}ul.area-contents-menu>li>a{display:flex;align-items:center;border-radius:20px}ul.area-contents-menu>li>a.area-contents-menu-group-name{pointer-events:none;cursor:inherit;text-shadow:-1px -1px 0 #fff,1px 1px 0 #d4d3d3;font-weight:bolder}.area-select{width:60%}ul.area-select-ul{display:flex;margin:0;padding:0;list-style-type:none}ul.area-select-ul>li{position:static;width:50%}ul.area-select-ul>li:first-child{border-right:1px dotted #f9fafb}ul.area-select-ul>li.area-active .area-megamenu{display:flex;flex-wrap:wrap;border-top:1px solid #ccc}ul.area-select-ul>li>a{display:block;line-height:50px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}ul.area-select-menu{display:flex;align-content:flex-start;flex-wrap:wrap;flex-direction:row;width:50%;margin:0;padding:0;list-style-type:none;background-color:#f9fafb;border-bottom:1px solid #ccc}ul.area-select-menu:nth-child(odd){border-right:1px solid #ccc}ul.area-select-menu:nth-child(4n+2),ul.area-select-menu:nth-child(4n+3){background-color:#e4eef4}ul.area-select-menu>li:first-child{display:flex;align-items:center;margin:0 0 0 5px;height:35px;width:100%}ul.area-select-menu>li:first-child>a{pointer-events:none;text-shadow:-1px -1px 0 #fff,1px 1px 0 #d4d3d3;font-weight:bolder}ul.area-select-menu>li:not(:first-child){border-right:1px solid #ccc;margin:0 0 5px 10px}ul.area-select-menu>li:not(:first-child)>a{max-width:15.5rem;border-radius:20px;padding:0 10px;margin:0 10px 0 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}ul.area-select-menu>li:last-child{border-right:none}.area-category{flex-grow:1;width:50%}ul.area-category-ul{display:flex;margin:0;padding:0;list-style-type:none}ul.area-category-ul>li{position:relative;border-right:1px dotted #ccc;text-align:center;flex-grow:1;min-width:50%}ul.area-category-ul>li:last-child{border-right:none}ul.area-category-ul>li.area-active .area-megamenu{display:block;border-top:1px solid #ccc}ul.area-category-ul>li>a{display:block;line-height:50px;white-space:nowrap}ul.area-category-menu{display:flex;flex-direction:column;max-height:500px;max-width:100%;margin:0;padding:0;list-style-type:none}ul.area-category-menu>li>a{display:block;width:100%;padding:5px;text-align:left;border-bottom:1px solid #ccc}ul.area-category-menu>li>a:not(.area-category-elem-item){border-bottom:none;background-color:#e4eef4;color:#000;font-weight:700;cursor:auto}ul.area-category-menu>li:last-child>a{border-bottom:none}ul.area-category-menu>li:not(:first-child)>a:not(.area-category-elem-item){border-top:1px solid #ccc}ul.area-category-menu>li>ul{margin:0;padding:0;list-style-type:none;background-color:#f9fafb}ul.area-category-menu>li>ul>li>a{display:block;padding:5px;text-align:left;border-bottom:1px dotted #ccc}ul.area-category-menu>li>ul>li:first-child>a{border-top:1px solid #ccc}ul.area-category-menu>li>ul>li:last-child>a{border-bottom:none}@media (max-width:1600px){ul.area-contents-menu>li:not(:first-child){width:20%}}@media (max-width:1200px){ul.area-contents-menu>li:not(:first-child){width:25%}}@media (max-width:992px){.area-megamenu{max-height:500px;-webkit-overflow-scrolling:touch}ul.area-contents-menu>li:first-child~li{display:none}ul.area-contents-menu>li:not(:first-child){width:50%;margin:0 0 5px 0;padding:0 0 0 5px;overflow:hidden}ul.area-contents-menu>li:not(:first-child)>a{padding:0 10px 0 0}ul.area-contents-menu>li>a.area-contents-menu-group-name{pointer-events:all;cursor:pointer;padding-left:25px;flex-grow:1}ul.area-contents-menu.area-group-active>li:first-child~li{display:flex}ul.area-select-menu{width:100%}ul.area-select-menu:nth-child(odd){border-right:none}ul.area-select-menu:nth-child(4n+2),ul.area-select-menu:nth-child(4n+3){background-color:#f9fafb}ul.area-select-menu:nth-child(even){background-color:#e4eef4}ul.area-select-menu>li:first-child>a{flex-grow:1;pointer-events:all;cursor:pointer;padding-left:25px}ul.area-select-menu>li:first-child~li{display:none}ul.area-select-menu>li:not(:first-child){width:50%;margin:0;padding:0 0 5px 5px;border-right:none}ul.area-select-menu>li:not(:first-child):nth-child(even){border-right:1px solid #ccc}ul.area-select-menu>li>a{padding:0}ul.area-select-menu.area-group-active>li:first-child~li{display:flex}ul.area-contents-menu>li>a.area-contents-menu-group-name::before,ul.area-select-menu>li:first-child>a::before{position:absolute;top:0;bottom:0;left:0;margin:auto;content:"";width:20px;height:20px;border:2px solid #0060af;border-radius:10px}ul.area-contents-menu>li>a.area-contents-menu-group-name::after,ul.area-select-menu>li:first-child>a::after{position:absolute;top:9px;bottom:0;left:5px;content:"";width:3px;height:10px;border:5px solid transparent;border-top:7px solid #0060af}ul.area-contents-menu.area-group-active>li:first-child>a::after,ul.area-select-menu.area-group-active>li:first-child>a::after{top:3px;border:5px solid transparent;border-bottom:7px solid #0060af}}@media (max-height:768px){.area-megamenu{max-height:350px}}@media (max-height:576px){.area-megamenu{max-height:200px}}@media (max-width:767px){.area-contents{max-width:40%}.area-map-contents{max-width:50%}.area-category{width:50%}}@media (max-width:576px){.area-megamenu{max-height:400px}.area-map-contents{width:100%;max-width:100%;border-right:none}img.area-contents-menu-icon{width:25px;height:25px;margin-right:3px}span.area-contents-menu-name{max-width:9rem}.area-contents>a.area-item-navy,.area-map-contents>a.area-item-navy,ul.area-select-ul>li>a.area-item-navy{font-size:.85rem;font-weight:700;line-height:40px}.area-contents>a::before{content:"";bottom:6px}.area-contents>a span::before{content:none}li.area-category-list>a::before,li.area-select-list>a::before{bottom:6px}ul.area-category-menu>li>a,ul.area-contents-menu>li>a,ul.area-select-menu>li>a{font-size:.85rem}ul.area-contents-menu>li:first-child,ul.area-select-menu>li:first-child{height:30px}ul.area-contents-menu>li>a.area-contents-menu-group-name,ul.area-select-menu>li:first-child>a{line-height:30px}ul.area-contents-menu>li>a.area-contents-menu-group-name::after,ul.area-select-menu>li:first-child>a::after{top:12px}ul.area-contents-menu.area-group-active>li:first-child>a::after,ul.area-select-menu.area-group-active>li:first-child>a::after{top:6px}ul.area-contents-menu>li:not(:first-child){height:25px}ul.area-contents-menu>li:not(:first-child)>a{height:25px;line-height:25px;padding:0 5px 0 0}ul.area-select-menu>li:not(:first-child)>a{padding:0 5px;margin:0}.area-category{position:absolute;top:40px;left:0;width:100%}.area-category::before{content:"";display:block;position:absolute;top:0;left:0;background-color:rgba(255,255,255,.8);box-shadow:0 1px 5px 0 rgba(0,0,0,.2);width:100%;height:20px}ul.area-category-ul>li{display:flex;justify-content:space-between}ul.area-category-ul>li>a.area-item-navy{line-height:20px;font-size:12px;background-color:transparent;background-image:none;pointer-events:none;cursor:inherit;color:#000;z-index:1}ul.area-category-ul>li>a.area-item-navy::before{content:none}ul.area-category-menu{flex-direction:row;flex-wrap:wrap;max-height:300px}ul.area-category-menu>li{width:50%;display:flex;flex-wrap:wrap;align-content:flex-start}ul.area-category-menu>li>ul{width:100%}ul.area-category-menu>li:first-child>a,ul.area-category-menu>li:nth-child(2)>a{border-top:1px solid #ccc}ul.area-category-menu>li:nth-child(odd){border-left:1px solid #ccc}ul.area-category-menu>li:nth-child(even)>a{border-left:1px solid #ccc;border-right:1px solid #ccc}ul.area-category-menu>li:nth-child(even)>ul>li>a{border-left:1px solid #ccc}ul.area-category-menu>li:last-child>a{border-right:1px solid #ccc;border-bottom:1px solid #ccc}.area-utility-active .area-category{top:140px}.area-utility-active .area-category::before{display:none}.area-utility-active .area-category .area-megamenu{display:block;position:relative;padding:0 10px;border-top:none;z-index:200}.area-utility-active ul.area-category-ul{flex-direction:column;margin:5px 0}.area-utility-active ul.area-category-ul>li{width:100%}.area-utility-active ul.area-category-ul>li:nth-child(n+2){margin-top:1em}.area-utility-active ul.area-category-ul>li>a{display:none}.area-utility-active:not(#unitmap-header) .area-category{background-color:rgba(0,96,175,.8);box-shadow:0 4px 3px #ccc}}@media (max-width:992px) and (max-height:500px){.area-megamenu{max-height:200px}img.area-contents-menu-icon{width:25px;height:25px;margin-right:3px}.area-contents>a.area-item-navy,.area-map-contents>a.area-item-navy,ul.area-category-ul>li>a,ul.area-select-ul>li>a.area-item-navy{font-size:.85rem;font-weight:700;line-height:40px}.area-contents>a span::before,.area-map-contents>a span::before{bottom:-6px}li.area-category-list>a::before,li.area-select-list>a::before{bottom:6px}ul.area-category-menu>li>a,ul.area-contents-menu>li>a,ul.area-select-menu>li>a{font-size:.85rem}ul.area-contents-menu>li:first-child,ul.area-select-menu>li:first-child{height:30px}ul.area-contents-menu>li>a.area-contents-menu-group-name,ul.area-select-menu>li:first-child>a{line-height:30px}ul.area-contents-menu>li>a.area-contents-menu-group-name::after,ul.area-select-menu>li:first-child>a::after{top:12px}ul.area-contents-menu.area-group-active>li:first-child>a::after,ul.area-select-menu.area-group-active>li:first-child>a::after{top:6px}ul.area-contents-menu>li:not(:first-child){height:25px}ul.area-contents-menu>li:not(:first-child)>a{height:25px;line-height:25px;padding:0 5px 0 0}ul.area-category-menu{max-height:200px}ul.area-select-menu>li:not(:first-child)>a{padding:0 5px;margin:0}}@media (max-width:576px) and (max-height:500px){.area-megamenu{max-height:200px}.area-utility-active ul.area-category-menu{max-height:100px}.area-contents>a::before{content:"";bottom:6px}}
</style>
<style>
@charset "UTF-8";.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:576px){.container{max-width:540px}}@media (min-width:768px){.container{max-width:720px}}@media (min-width:992px){.container{max-width:960px}}@media (min-width:1200px){.container{max-width:1140px}}.bg_black{background-color:#000}.bg_silver{background-color:silver}.bg_gray{background-color:gray}.bg_white{background-color:#fff}.bg_maroon{background-color:maroon}.bg_red{background-color:red}.bg_purple{background-color:purple}.bg_fuchsia{background-color:#f0f}.bg_green{background-color:green}.bg_lime{background-color:#0f0}.bg_olive{background-color:olive}.bg_yellow{background-color:#ff0}.bg_navy{background-color:navy}.bg_blue{background-color:#00f}.bg_teal{background-color:teal}.bg_aqua{background-color:#0ff}.bg_level1{background-color:#fff}.bg_level2{background-color:#ffd200}.bg_level3{background-color:#ff2800}.bg_level4{background-color:#c80bff}.bg_level5{background-color:#6c008c}.bd_black{border:1px solid #000}.bd_red{border:1px solid red}.clr_both{clear:both}.clr_left{clear:left}.clr_right{clear:right}.cs_default{cursor:default}.cs_inherit{cursor:inherit!important}.cs_pointer{cursor:pointer}.cs_grab{cursor:grab}.cs_grabbing{cursor:grabbing}.cS_wait{cursor:wait}.disp_none{display:none}.disp_block{display:block}.fc_black{color:#000}.fc_silver{color:silver}.fc_gray{color:gray}.fc_white{color:#fff}.fc_maroon{color:maroon}.fc_red{color:red}.fc_purple{color:purple}.fc_fuchsia{color:#f0f}.fc_green{color:green}.fc_lime{color:#0f0}.fc_olive{color:olive}.fc_yellow{color:#ff0}.fc_navy{color:navy}.fc_blue{color:#00f}.fc_teal{color:teal}.fc_aqua{color:#0ff}.fc_level1{color:#fff}.fc_level2{color:#ffd200}.fc_level3{color:#ff2800}.fc_level4{color:#c80bff}.fc_level5{color:#6c008c}.fs_0{font-size:0}.fs_01em{font-size:.1em}.fs_02em{font-size:.2em}.fs_03em{font-size:.3em}.fs_04em{font-size:.4em}.fs_05em{font-size:.5em}.fs_06em{font-size:.6em}.fs_07em{font-size:.7em}.fs_08em{font-size:.8em}.fs_09em{font-size:.9em}.fs_1em{font-size:1em}.fs_2em{font-size:2em}.fs_3em{font-size:3em}.fs_1rem{font-size:1rem}.fs_2rem{font-size:2rem}.fs_3rem{font-size:3rem}.fs_10px{font-size:10px}.fs_11px{font-size:11px}.fs_12px{font-size:12px}.fs_13px{font-size:13px}.fs_14px{font-size:14px}.fs_15px{font-size:15px}.fs_16px{font-size:16px}.fs_17px{font-size:17px}.fs_18px{font-size:18px}.fs_19px{font-size:19px}.fs_20px{font-size:20px}.fw_bold{font-weight:700}.fw_normal{font-weight:400}.float_left{float:left}.float_right{float:right}.mlr_auto{margin-left:auto;margin-right:auto}.m_0{margin:0!important}.mt_0{margin-top:0!important}.mb_0{margin-bottom:0!important}.ml_0{margin-left:0!important}.mr_0{margin-right:0!important}.ml_1em{margin-left:1em}.ml_2em{margin-left:2em}.ml_3em{margin-left:3em}.ml_4em{margin-left:4em}.ml_5em{margin-left:5em}.mt_5px{margin-top:5px}.mt_10px{margin-top:10px}.mt_15px{margin-top:15px}.mt_20px{margin-top:20px}.mt_25px{margin-top:25px}.mb_5px{margin-bottom:5px}.mb_10px{margin-bottom:10px}.mb_15px{margin-bottom:15px}.mb_20px{margin-bottom:20px}.mb_25px{margin-bottom:25px}.ml_5px{margin-left:5px}.ml_10px{margin-left:10px}.ml_15px{margin-left:15px}.ml_20px{margin-left:20px}.ml_25px{margin-left:25px}.mr_5px{margin-right:5px}.mr_10px{margin-right:10px}.mr_15px{margin-right:15px}.mr_20px{margin-right:20px}.mr_25px{margin-right:25px}.op_0{opacity:0}.op_01{opacity:.1}.op_02{opacity:.2}.op_03{opacity:.3}.op_04{opacity:.4}.op_05{opacity:.5}.op_06{opacity:.6}.op_07{opacity:.7}.op_08{opacity:.8}.op_09{opacity:.9}.op_1{opacity:1}.p_0{padding:0!important}.pt_0{padding-top:0!important}.pb_0{padding-bottom:0!important}.pl_0{padding-left:0!important}.pr_0{padding-right:0!important}.pl_1em{padding-left:1em}.pl_2em{padding-left:2em}.pl_3em{padding-left:3em}.pl_4em{padding-left:4em}.pl_5em{padding-left:5em}.pt_5px{padding-top:5px}.pt_10px{padding-top:10px}.pt_15px{padding-top:15px}.pt_20px{padding-top:20px}.pt_25px{padding-top:25px}.pb_5px{padding-bottom:5px}.pb_10px{padding-bottom:10px}.pb_15px{padding-bottom:15px}.pb_20px{padding-bottom:20px}.pb_25px{padding-bottom:25px}.pl_5px{padding-left:5px}.pl_10px{padding-left:10px}.pl_15px{padding-left:15px}.pl_20px{padding-left:20px}.pl_25px{padding-left:25px}.pr_5px{padding-right:5px}.pr_10px{padding-right:10px}.pr_15px{padding-right:15px}.pr_20px{padding-right:20px}.pr_25px{padding-right:25px}.posi_absolute{position:absolute}.posi_relative{position:relative}.posi_fixed{position:fixed}.posi_static{position:static}.talign_left{text-align:left}.talign_right{text-align:right}.talign_center{text-align:center}.tshadow_stroke{text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff}.valign_top{vertical-align:top}.valign_middle{vertical-align:middle}.valign_bottom{vertical-align:bottom}.zi_0{z-index:0!important}.zi_100{z-index:100!important}.zi_200{z-index:200!important}.zi_300{z-index:300!important}.zi_400{z-index:400!important}.zi_500{z-index:500!important}.zi_600{z-index:600!important}.zi_700{z-index:700!important}.zi_800{z-index:800!important}.zi_900{z-index:900!important}.zi_1000{z-index:1000!important}.fl_black{fill:#000}.fl_silver{fill:silver}.fl_gray{fill:gray}.fl_white{fill:#fff}.fl_maroon{fill:maroon}.fl_red{fill:red}.fl_purple{fill:purple}.fl_fuchsia{fill:#f0f}.fl_green{fill:green}.fl_lime{fill:#0f0}.fl_olive{fill:olive}.fl_yellow{fill:#ff0}.fl_navy{fill:navy}.fl_blue{fill:#00f}.fl_teal{fill:teal}.fl_aqua{fill:#0ff}.fl_none{fill:none}.fl_level1{fill:#fff}.fl_level2{fill:#ffd200}.fl_level3{fill:#ff2800}.fl_level4{fill:#c80bff}.fl_level5{fill:#6c008c}.flop_0{fill-opacity:0}.flop_01{fill-opacity:.1}.flop_02{fill-opacity:.2}.flop_03{fill-opacity:.3}.flop_04{fill-opacity:.4}.flop_05{fill-opacity:.5}.flop_06{fill-opacity:.6}.flop_07{fill-opacity:.7}.flop_08{fill-opacity:.8}.flop_09{fill-opacity:.9}.flop_1{fill-opacity:1}.stk_black{stroke:#000}.stk_silver{stroke:silver}.stk_gray{stroke:gray}.stk_white{stroke:#fff}.stk_maroon{stroke:maroon}.stk_red{stroke:red}.stk_purple{stroke:purple}.stk_fuchsia{stroke:#f0f}.stk_green{stroke:green}.stk_lime{stroke:#0f0}.stk_olive{stroke:olive}.stk_yellow{stroke:#ff0}.stk_navy{stroke:navy}.stk_blue{stroke:#00f}.stk_teal{stroke:teal}.stk_aqua{stroke:#0ff}.stk_none{stroke:none}.stk_level1{stroke:#fff}.stk_level2{stroke:#ffd200}.stk_level3{stroke:#ff2800}.stk_level4{stroke:#c80bff}.stk_level5{stroke:#6c008c}.stkwid_0{stroke-width:0}.stkwid_1{stroke-width:1}.stkwid_2{stroke-width:2}.stkwid_3{stroke-width:3}.stkwid_4{stroke-width:4}.stkwid_5{stroke-width:5}.stkdary_1{stroke-dasharray:1}.stkdary_2{stroke-dasharray:2}.stkdary_3{stroke-dasharray:3}.stkdary_4{stroke-dasharray:4}.stkdary_5{stroke-dasharray:5}.stkop_0{stroke-opacity:0}.stkop_01{stroke-opacity:.1}.stkop_02{stroke-opacity:.2}.stkop_03{stroke-opacity:.3}.stkop_04{stroke-opacity:.4}.stkop_05{stroke-opacity:.5}.stkop_06{stroke-opacity:.6}.stkop_07{stroke-opacity:.7}.stkop_08{stroke-opacity:.8}.stkop_09{stroke-opacity:.9}.stkop_1{stroke-opacity:1}.clearfix::after{content:"";display:block;clear:both}.table_type_a{border-collapse:collapse;margin-bottom:1rem}.table_type_a tr th{background-color:#6060c0;color:#fff;text-align:center;border:1px solid #fff;padding:3px 5px}.table_type_a tr td{background-color:#e0e0ff;color:#000;text-align:left;border:1px solid #fff;padding:3px 5px}.table_type_b{border-collapse:collapse;margin-bottom:1rem}.table_type_b tr th{background-color:#343a40;color:#fff;text-align:center;border:1px solid #ddd;padding:3px 5px}.table_type_b tr td{text-align:left;border:1px solid #ddd;padding:3px 5px}ul.legend_type_a{margin:0;padding:10px;list-style-type:none;border-radius:5px}ul.legend_type_a li{font-size:18px;line-height:18px;margin-bottom:3px}ul.legend_type_a li span{display:inline-block;width:18px;height:18px;border:1px solid #666;margin-right:8px;vertical-align:top}
</style>
<style>
div.contents-block{font-size:14px;margin-top:10px;margin-bottom:10px}div.contents-block table{border-collapse:collapse;border:solid 2px #000;width:100%}div.contents-block td,div.contents-block th{padding-top:2px;padding-bottom:2px;border:solid 1px #000;font-weight:400}td.contents-area,th.contents-area{font-weight:700}tr.contents-bold-top td,tr.contents-bold-top th{border-top:solid 2px #000}tr.contents-title th{background-color:#0060af;color:#fff;padding-left:10px}th.contents-header,tr.contents-header th{background-color:#dbeeff;text-align:center}div.contents-legends{font-size:12px;white-space:nowrap;text-align:left}div.contents-legend{display:inline-block}div.contents-legend-box{margin:2px;width:15px;height:15px;margin-right:5px;border:solid 1px #000;display:inline-block;vertical-align:top;line-height:12px;text-align:center}img.contents-legend-image{margin:2px;width:15px;height:15px;display:inline-block;vertical-align:top}div.contents-legend-mark{margin-right:2px;display:inline-block;vertical-align:top}div.contents-legend-text{margin-right:10px;display:inline-block;vertical-align:top}div.contents-legend-map{background-color:rgba(255,255,255,.7);padding:5px}div.contents-legends table{width:auto}div.contents-legends td,div.contents-legends th{padding-top:2px;padding-bottom:2px;padding-left:5px;padding-right:5px;border:solid 1px #000;font-weight:400}div.contents-legends th{background-color:#0060af;color:#fff;text-align:center}div.contents-message{border:solid 1px #000;padding:2px;font-size:14px}.contents-clickable{cursor:pointer}.contents-clickable:hover{text-decoration:underline}.contents-clickable-highlight:hover{color:#000;background-color:#a3d4ff}div.contents-radio-button{display:inline-block;margin-top:2px;margin-bottom:2px;margin-left:2px;margin-right:2px;padding-left:5px;padding-right:5px;border-radius:3px;border:solid 1px #0060af;transition:.2s;text-align:center}div.contents-radio-button-on{background-color:#0060af;color:#fff}div.contents-radio-button-off{background-color:#e0e0e0;color:grey;cursor:pointer}div.contents-radio-button-off:hover{background-color:#f0f0f0}div.contents-radio-button-disabled{background-color:grey;pointer-events:none}div.contents-button{display:inline-block;margin-left:2px;margin-right:2px;padding-left:5px;padding-right:5px;border-radius:3px;border:solid 1px #0060af;transition:.2s;text-align:center;background-color:#0060af;color:#fff;cursor:pointer}div.contents-button:hover{background-color:#78a5d2}div.contents-area-button{display:inline-block;padding:0 20px;height:48px;line-height:48px;background-color:#40566a;color:#f9fafb;border-radius:5px;box-shadow:1px 1px 1px 1px #b9b7b7;cursor:pointer;margin-right:1em}div.contents-area-button:hover{background-color:#f9fafb;color:#000}div.contents-area-button:last-child{margin-right:0}div.contents-link{display:inline-block;margin-right:10px;transition:.2s;color:#00f;cursor:pointer;text-decoration:underline}div.contents-link:hover{color:#a0a0ff}div.contents-close-box-button{font-size:14px;margin-top:10px;margin-bottom:10px;transition:.2s;color:#00f;cursor:pointer;text-decoration:underline}div.contents-close-box-button:hover{color:#a0a0ff}div.contents-explain{font-size:14px;border:2px solid grey;padding-left:20px;padding-right:20px}div.contents-explain table{border-collapse:collapse;border:solid 2px #000;width:100%;margin-top:10px;margin-bottom:10px}div.contents-explain td,div.contents-explain th{padding-top:2px;padding-bottom:2px;padding-left:5px;padding-right:5px;border:solid 1px #000;font-weight:400}div.contents-explain th{background-color:#0060af;color:#fff;text-align:center}div.contents-explain b{text-decoration:underline}div.contents-explain li,div.contents-explain p{margin-top:10px;margin-bottom:10px}.contents-level0{background-color:#fff;color:#000}.contents-level10{background-color:#faf5c0;color:#000}.contents-level20{background-color:#f2e700;color:#000}.contents-level25{background-color:#fa0;color:#000}.contents-level30{background-color:#ff2800;color:#fff}.contents-level40{background-color:#a0a;color:#fff}.contents-level45{background-color:#6c008c;color:#fff}.contents-level50{background-color:#0c000c;color:#fff}.contents-missing{background-color:#c8c8cb;color:#000}.contents-map-border{stroke:#000;stroke-opacity:1;stroke-width:.5;fill-opacity:0}.contents-map-border-gray{stroke:gray;stroke-opacity:1;stroke-width:.5;fill-opacity:0}.contents-map-border-bold{stroke:#000;stroke-opacity:1;stroke-width:2;fill-opacity:0}.contents-map-none{stroke-opacity:0;fill-opacity:0}.contents-map-missing{stroke:#c8c8cb;stroke-opacity:1;stroke-width:1;fill:#c8c8cb;fill-opacity:1}.contents-map-level0{stroke:#fff;stroke-opacity:1;stroke-width:1;fill:#fff;fill-opacity:1}.contents-map-level20{stroke:#f2e700;stroke-opacity:1;stroke-width:1;fill:#f2e700;fill-opacity:1}.contents-map-level25{stroke:#fa0;stroke-opacity:1;stroke-width:1;fill:#fa0;fill-opacity:1}.contents-map-level30{stroke:#ff2800;stroke-opacity:1;stroke-width:1;fill:#ff2800;fill-opacity:1}.contents-map-level40{stroke:#a0a;stroke-opacity:1;stroke-width:1;fill:#a0a;fill-opacity:1}.contents-map-level45{stroke:#6c008c;stroke-opacity:1;stroke-width:1;fill:#6c008c;fill-opacity:1}.contents-map-level50{stroke:#0c000c;stroke-opacity:1;stroke-width:1;fill:#0c000c;fill-opacity:1}ul.contents-area-breadcrumb{display:flex;margin:0;padding:0;list-style-type:none}ul.contents-area-breadcrumb li{display:flex;align-items:center;position:relative;height:34px;margin-right:11px;margin-left:11px;border-radius:5px 0 0 5px;font-size:.9rem}ul.contents-area-breadcrumb li a{display:flex;align-items:center;position:relative;height:100%;padding:0 18px;cursor:pointer;text-decoration:none}ul.contents-area-breadcrumb li:first-child{margin-left:0;background-color:#0060af}ul.contents-area-breadcrumb li:first-child a{color:#fff}ul.contents-area-breadcrumb li:first-child::before{content:"";position:absolute;top:6px;left:8px;width:4px;height:22px;border-radius:3px;background:#fff}ul.contents-area-breadcrumb li:first-child::after{content:"";top:0;right:-34px;position:absolute;width:0;height:0;border-top:17px solid transparent;border-right:17px solid transparent;border-bottom:17px solid transparent;border-left:17px solid #0060af;z-index:-1}_:lang(x)::-moz-placeholder,ul.contents-area-breadcrumb li:first-child a::after{content:"";display:inline-block;position:absolute;top:0;right:-1px;width:1px;height:100%;background-color:#0060af;border-radius:1px;z-index:-1}_:-ms-lang(x)::-ms-backdrop,ul.contents-area-breadcrumb li:first-child a::after{content:"";display:inline-block;position:absolute;top:0;right:0;width:1px;height:100%;background-color:#0060af;z-index:-1}ul.contents-area-breadcrumb li:nth-child(2){background-color:#a3d4ff;border-radius:0}ul.contents-area-breadcrumb li:nth-child(2) a{color:#000}ul.contents-area-breadcrumb li:nth-child(2)::before{content:"";top:0;left:-17px;position:absolute;width:0;height:0;border-top:17px solid #a3d4ff;border-right:17px solid transparent;border-bottom:17px solid #a3d4ff;border-left:17px solid transparent;z-index:-1}_:lang(x)::-moz-placeholder,ul.contents-area-breadcrumb li:nth-child(2) a::before{content:"";display:inline-block;position:absolute;bottom:0;left:-16px;width:16px;height:1px;background-color:#a3d4ff;border-radius:1px;z-index:-1}_:lang(x)::-moz-placeholder,ul.contents-area-breadcrumb li:nth-child(2) a::after{content:"";display:inline-block;position:absolute;top:0;right:-1px;width:1px;height:100%;background-color:#a3d4ff;border-radius:1px;z-index:-1}ul.contents-area-breadcrumb li:nth-child(2)::after{content:"";top:0;right:-34px;position:absolute;width:0;height:0;border-top:17px solid transparent;border-right:17px solid transparent;border-bottom:17px solid transparent;border-left:17px solid #a3d4ff;z-index:-1}ul.contents-area-breadcrumb li:nth-child(2):last-child::before{content:"";top:0;left:-17px;position:absolute;width:0;height:0;border-top:17px solid #a3d4ff;border-right:17px solid transparent;border-bottom:17px solid #a3d4ff;border-left:17px solid transparent;z-index:1}_:lang(x)::-moz-placeholder,ul.contents-area-breadcrumb li:nth-child(2):last-child::after{content:"";display:inline-block;position:absolute;top:auto;bottom:0;left:-16px;right:auto;width:16px;height:1px;background-color:#a3d4ff;border:none;z-index:-1}ul.contents-area-breadcrumb li:nth-child(3){background-color:#dbeeff;color:#000}ul.contents-area-breadcrumb li:nth-child(3)::before{content:"";top:0;left:-17px;position:absolute;width:0;height:0;border-top:17px solid #dbeeff;border-right:17px solid transparent;border-bottom:17px solid #dbeeff;border-left:17px solid transparent;z-index:1}ul.contents-area-breadcrumb li:last-child{margin-right:0;padding:0 18px;border-radius:0 5px 5px 0}ul.contents-area-breadcrumb li:last-child::after{content:none}ul.contents-area-breadcrumb li:first-child:last-child{margin-right:0;border-radius:5px;color:#fff}_:lang(x)::-moz-placeholder,ul.contents-area-breadcrumb li:nth-child(3):last-child::after{content:"";display:inline-block;position:absolute;top:auto;bottom:0;left:-16px;right:auto;width:16px;height:1px;background-color:#dbeeff;border:none;z-index:-1}@media (max-width:768px){ul.contents-area-breadcrumb{flex-wrap:wrap}ul.contents-area-breadcrumb li a{width:100%}ul.contents-area-breadcrumb li:nth-child(2){flex-grow:1;margin-right:0;border-radius:5px}ul.contents-area-breadcrumb li:nth-child(2)::after{content:none}ul.contents-area-breadcrumb li:nth-child(3):last-child{width:100%;margin-left:0;margin-top:5px;border-radius:5px}ul.contents-area-breadcrumb li:nth-child(3)::before{content:none}ul.contents-area-breadcrumb li:first-child:last-child{width:100%}_:lang(x)::-moz-placeholder,ul.contents-area-breadcrumb li:nth-child(3):last-child::after{content:none}}@media (max-width:576px){ul.contents-area-breadcrumb li{font-size:.8rem;font-weight:700}ul.contents-area-breadcrumb li a{padding:0 5px}ul.contents-area-breadcrumb li:last-child{padding:0 5px}ul.contents-area-breadcrumb li:first-child a{padding:0 5px 0 18px}ul.contents-area-breadcrumb li:first-child:last-child{padding:0 5px 0 18px}}
</style>
<style>
@charset "UTF-8";.leaflet-container{background-color:transparent}.IslHighLight{stroke-width:10!important}.gridLine{stroke-width:1;stroke:rgba(34,34,34,.8);cursor:inherit}.gridtxtlat{font-size:12px!important;color:rgba(34,34,34,.8);margin-left:6px!important;margin-top:-15px!important;text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff;cursor:inherit}.gridtxtlon{font-size:12px!important;color:rgba(34,34,34,.8);margin-left:3px!important;margin-top:-15px!important;text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff;cursor:inherit}#centerbuttons{position:absolute;z-index:10000;height:70%;width:7%;bottom:0}#centerbuttons td{background-color:#ff9;text-align:center;margin:auto}.jmamap-namesupport{pointer-events:none;font-size:12px;text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff}.jmamap-events-none{pointer-events:none}.leaflet-div-icon,.leaflet-marker-icon{background:0 0;border:none;white-space:nowrap;vertical-align:top}.leaflet-overlay-pane{z-index:1}.leaflet-overlay-pane text{color:#000;text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff}.leaflet-map-pane .leaflet-popup-pane,.leaflet-map-pane .leaflet-tooltip-pane{z-index:2147483647}.leaflet-map-pane canvas{z-index:auto}
</style>
<style>
#calcmap{width:5px;height:5px;display:none}
</style>
<style>
div.contents-wide-table{border:solid 1px #000;margin-top:10px;margin-bottom:10px}div.contents-wide-table-body{position:relative}div.contents-wide-table-fix{position:absolute;overflow-x:hidden;z-index:1}div.contents-wide-table-scroll{overflow-x:auto;z-index:0;-webkit-overflow-scrolling:touch}div.contents-wide-table-scroll::-webkit-scrollbar{display:none}img.contents-wide-table-icon{position:absolute;z-index:2;width:30px;height:30px}
</style>
<style>
#timeslider{position:absolute;top:200px;left:15px;background:#fff;border-radius:3px;box-shadow:0 0 15px rgba(0,0,0,.2);padding:.5rem;opacity:.8;z-index:1}.selecton{background-color:#5f5}
</style>
<style>
body,html{padding:0;height:100%;overflow:hidden}body::before{content:none;position:absolute;top:0;left:0;width:117px;height:47px;background-image:url(./common/image/logo_print.png);background-size:contain;background-repeat:no-repeat;z-index:100}#unitmap-header .area-nav{margin-bottom:0}#unitmap-help{display:block;position:absolute;right:10px;top:55px;max-height:90%;max-width:100%;padding:5px;background-color:#0060af;border-radius:5px;box-shadow:4px 4px 3px #0060af;color:#fff;overflow-y:auto;z-index:10}#unitmap-help.unitmap-void{display:none}#unitmap-help ul{color:#f9fafb;padding-left:25px;margin-bottom:0}#unitmap-help ul a{color:#fff;text-decoration:underline}#unitmap-help p{margin:.5em 0 .5em .5em}#unitmap-help p a{padding:3px;border:1px solid #666;border-radius:5px;background-color:#f9fafb;background-image:-webkit-linear-gradient(top,#fff,#ddd);background-image:linear-gradient(to bottom,#fff,#ddd);color:#000;text-decoration:none}#unitmap-ad{display:none;position:absolute;top:60px;right:10px;width:320px;height:50px;z-index:9;touch-action:none}#unitmap-print{display:none}@media (min-width:993px){#unitmap-help p a:hover{border-color:#f9fafb;background-color:#0060af;background-image:none;color:#f9fafb}#unitmap-help ul a:hover{text-decoration:none}}@media (max-width:992px){#unitmap-header:not(.area-utility-active)~#unitmap-help{display:none}#unitmap-help{top:105px}}@media (max-width:576px){#unitmap-header:not(.area-utility-active)~#unitmap-switches{display:none}#unitmap-header:not(.area-utility-active)~#unitmap-help{display:none}#unitmap-header:not(.area-utility-active)~#unitmap-timeslider #unitmap-moviebutton div:last-child{display:none}#unitmap-header.area-utility-active~#unitmap-infotime,#unitmap-header.area-utility-active~.unitmap-information-space{display:none}#unitmap-header.area-utility-active~#unitmap-timeslider{z-index:9}#unitmap-header.area-utility-active~#unitmap-timeslider table{display:none}#unitmap-header.area-utility-active~#unitmap-timeslider #unitmap-timeslider-togglebutton{display:none}#unitmap-header.area-utility-active~#unitmap-timeslider #unitmap-moviebutton div:first-child{display:none}#unitmap-help{top:90px;left:10px;right:auto;width:calc(100% - 20px);box-shadow:4px 4px 3px #f9fafb;font-size:.9rem}#unitmap-ad{display:block;top:auto;bottom:0;right:0;left:0;width:auto;background-color:#0060af}}@media (max-width:992px) and (max-height:500px){#unitmap-header:not(.area-utility-active)~#unitmap-switches{display:none}#unitmap-header:not(.area-utility-active)~#unitmap-timeslider #unitmap-moviebutton div:last-child{display:none}#unitmap-header.area-utility-active~#unitmap-timeslider{z-index:9}#unitmap-header.area-utility-active~#unitmap-timeslider table{display:none}#unitmap-header.area-utility-active~#unitmap-timeslider #unitmap-timeslider-togglebutton{display:none}#unitmap-header.area-utility-active~#unitmap-timeslider #unitmap-moviebutton div:first-child{display:none}#unitmap-help{top:90px;box-shadow:4px 4px 3px #f9fafb;font-size:.9rem}#unitmap-ad{top:auto;bottom:3px;right:3px;left:auto}}@media (max-width:576px) and (max-height:500px){#unitmap-help{left:10px;right:auto;width:calc(100% - 20px)}#unitmap-ad{display:block;top:auto;bottom:0;right:0;left:0;width:auto;background-color:#0060af}}#responsive-mode::before{content:'pc1';position:fixed;visibility:hidden;top:-1000px;left:-1000px}@media (max-width:1600px){#responsive-mode::before{content:'pc2'}}@media (max-width:1200px){#responsive-mode::before{content:'pc3'}}@media (max-width:992px){#responsive-mode::before{content:'tablet1'}}@media (max-width:768px){#responsive-mode::before{content:'tablet2'}}@media (max-width:992px) and (max-height:500px){#responsive-mode::before{content:'mobile1'}}@media (max-width:576px){#responsive-mode::before{content:'mobile1'}}@media (max-width:414px){#responsive-mode::before{content:'mobile2'}}@media (max-width:320px){#responsive-mode::before{content:'mobile3'}}#unitmap-loading{display:block;position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(255,255,255,.5);z-index:3}#unitmap-loading div{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:1.2rem;font-weight:700}#unitmap-loading div p.unitmap-harerun{position:relative;width:50px;height:50px;margin:auto;overflow:hidden}#unitmap-loading div p.unitmap-harerun>span{display:block;position:absolute;width:200%;top:0;left:0;bottom:0;right:0;background-image:url(./common/image/hetoheto_1.svg),url(./common/image/hetoheto_2.svg);background-position:0 0,50px 0;background-size:contain;background-repeat:no-repeat;animation:hetoheto .5s steps(2) infinite alternate}#unitmap-loading div p.unitmap-hashirun{width:49px;height:50px;animation:loop 15s -2s linear infinite;margin-bottom:0}#unitmap-loading div p.unitmap-hashirun>span{display:block;width:100%;height:100%;background-image:url(./common/image/hashirun.svg);background-size:cover;overflow:hidden;animation:run .3s steps(7,end) infinite}#unitmap-loading.unitmap-fail{background-color:rgba(255,255,255,.8)}#unitmap-loading.unitmap-fail div p.unitmap-hashirun{display:none}#unitmap-loading.unitmap-fail div p.unitmap-hashirun+p{display:none}#unitmap-loading.unitmap-fail~div:not(#unitmap):not(#unitmap-header):not(#unitmap-ad){display:none}#unitmap-loading.unitmap-fail~#unitmap-timeslider *{display:none}#unitmap-loading:not(.unitmap-fail) div p.unitmap-harerun{display:none}#unitmap-loading:not(.unitmap-fail) div p.unitmap-harerun+p{display:none}@keyframes hetoheto{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}@keyframes run{100%{background-position:-1015px}}@keyframes loop{0%{transform:translateX(-400%)}to{transform:translateX(400%)}}@media (max-width:576px){#unitmap-loading{top:40px;bottom:50px}#unitmap-loading div{font-size:1rem}#unitmap-loading.unitmap-fail div{top:40%;left:0;margin-left:15px;margin-right:15px;transform:none}}#unitmap-centertext,#unitmap-contentsinfo,#unitmap-contentsinfo-toggle,#unitmap-freespace,#unitmap-freespace-toggle,#unitmap-infotime,#unitmap-message{display:none;position:absolute;touch-action:manipulation;z-index:1}.unitmap-exist#unitmap-centertext,.unitmap-exist#unitmap-contentsinfo,.unitmap-exist#unitmap-contentsinfo-toggle,.unitmap-exist#unitmap-freespace,.unitmap-exist#unitmap-freespace-toggle,.unitmap-exist#unitmap-infotime,.unitmap-exist#unitmap-message{display:block}#unitmap-infotime{top:60px;left:10px;max-width:calc(100% - 20px);line-height:1.2;padding:3px 5px;font-weight:700;color:#000;text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff;border:1px solid #fff;border-radius:3px;background-color:rgba(0,96,175,.8);box-shadow:0 0 15px rgba(0,0,0,.2);white-space:nowrap;overflow:hidden}#unitmap-message{top:60px;left:50%;transform:translate(-50%,0);z-index:5}#unitmap-message>span{display:block;height:20px;background-color:rgba(0,96,175,.8);background-size:contain;background-image:url(./common/image/hbg_white_a.svg);border-radius:3px 3px 0 0;background-repeat:no-repeat;background-position:center;cursor:pointer}#unitmap-message>span.unintmap-message-red{background-color:rgba(255,0,0,.8)}#unitmap-message>span.unintmap-message-yellow{background-color:rgba(255,255,0,.8)}#unitmap-message>span.unitmap-information-hide{background-image:url(./common/image/hbg_white_b.svg);border-radius:3px}#unitmap-message>span.unitmap-information-hide~div{height:0;padding:0 10px;visibility:hidden}#unitmap-message>div{position:relative;padding:5px 10px;border-radius:0 3px 3px 3px;background-color:rgba(255,255,255,.8);box-shadow:0 0 15px rgba(0,0,0,.2);user-select:none;-webkit-user-select:none}#unitmap-contentsinfo,#unitmap-freespace{top:120px;padding:5px 10px;max-width:calc(50% - 40px);max-height:calc(100% - 300px);min-height:40px;background-color:rgba(255,255,255,.8);box-shadow:0 0 15px rgba(0,0,0,.2);overflow-y:auto;-webkit-overflow-scrolling:touch}#unitmap-contentsinfo-toggle,#unitmap-freespace-toggle{top:120px;width:20px;height:40px;background-color:rgba(0,96,175,.8);background-size:50%;background-repeat:no-repeat;background-position:center;cursor:pointer;user-select:none;-webkit-user-select:none}#unitmap-contentsinfo-toggle{left:10px;border-radius:3px 0 0 3px;background-image:url(./common/image/hbg_white_c.svg)}#unitmap-contentsinfo{left:30px;border-radius:0 3px 3px 0}#unitmap-freespace-toggle{right:10px;border-radius:0 3px 3px 0;background-image:url(./common/image/hbg_white_d.svg)}#unitmap-freespace{right:30px;border-radius:3px 0 0 3px}.unitmap-information-hide#unitmap-contentsinfo-toggle{background-image:url(./common/image/hbg_white_d.svg);border-radius:3px}.unitmap-information-hide#unitmap-freespace-toggle{background-image:url(./common/image/hbg_white_c.svg);border-radius:3px}.unitmap-information-hide+#unitmap-contentsinfo,.unitmap-information-hide+#unitmap-freespace{display:none}#unitmap-centertext{top:50%;left:50%;transform:translate(-50%,-50%);padding:5px;max-height:50%;background-color:rgba(255,255,255,.8);border-radius:5px;box-shadow:0 0 15px rgba(0,0,0,.2);font-size:1.5rem;overflow-y:auto;z-index:5}@media (max-width:992px){#unitmap-message{left:auto;right:10px;transform:translate(0,0);max-width:50%}#unitmap-message.unitmap-exist{display:flex;flex-direction:column}#unitmap-message>span{align-self:flex-end;width:60px}#unitmap-message>div{border-radius:0 0 3px 3px}}@media (max-width:576px){#unitmap-infotime{top:65px;left:5px;font-size:.8rem}.unitmap-information-space{position:absolute;top:110px;left:5px;width:100%;max-width:calc(100% - 10px)}.unitmap-information-space::after{content:"";display:block;clear:both}#unitmap-centertext,#unitmap-contentsinfo,#unitmap-contentsinfo-toggle,#unitmap-freespace,#unitmap-freespace-toggle{position:relative;top:auto;left:auto;right:auto}#unitmap-contentsinfo-toggle{float:left}#unitmap-contentsinfo{float:left;max-width:calc(100% - 20px);max-height:150px}#unitmap-freespace-toggle{clear:both;margin-top:10px;margin-left:auto;float:right}#unitmap-freespace{float:right;margin-top:10px;max-width:calc(100% - 20px);max-height:150px}#unitmap-centertext{transform:none;font-size:1rem;max-height:100px}.unitmap-exist#unitmap-centertext~#unitmap-contentsinfo,.unitmap-exist#unitmap-centertext~#unitmap-contentsinfo-toggle{margin-top:1rem}#unitmap-message{right:5px;top:65px;width:calc(100% - 10px);max-width:calc(100% - 10px);font-size:.8rem}}@media (max-width:992px) and (max-height:500px){#unitmap-infotime{top:45px;left:5px;max-width:calc(100% - 10px);font-size:.8rem}#unitmap-contentsinfo,#unitmap-contentsinfo-toggle,#unitmap-freespace,#unitmap-freespace-toggle{top:90px}#unitmap-contentsinfo,#unitmap-freespace{max-height:100px}#unitmap-centertext{font-size:1rem}#unitmap-message{top:45px;right:5px;font-size:.8rem}}@media (max-width:576px) and (max-height:500px){.unitmap-information-space{top:90px}#unitmap-contentsinfo,#unitmap-contentsinfo-toggle,#unitmap-freespace,#unitmap-freespace-toggle{top:auto}#unitmap-contentsinfo{max-height:60px}#unitmap-freespace{max-height:60px}}_:-ms-input-placeholder,:root #unitmap-freespace{max-width:calc(50% - 47px)}@supports (-ms-ime-align:auto){#unitmap-freespace{max-width:calc(50% - 47px)}}#unitmap-switches{position:static}#unitmap-switches>ul{display:flex;position:absolute;bottom:20px;right:10px;margin:0;padding:0;list-style-type:none;user-select:none;-webkit-user-select:none;z-index:4}#unitmap-switches>ul li{position:relative}#unitmap-switches>ul li:nth-child(n+2){margin-left:5px}#unitmap-switches>ul li img{flex:none;width:45px;height:45px;border-radius:50%;touch-action:none}#unitmap-switches>ul li.modal-selected img{filter:saturate(300%);transform:scale(1.05)}#unitmap-switches>ul li.modal-selected img[src$="legend.svg"]{box-shadow:1px 1px 5px #f95500,-1px -1px 5px #f95500}#unitmap-switches>ul li.modal-selected img[src$="explain.svg"]{box-shadow:1px 1px 5px #fff200,-1px -1px 5px #fff200}#unitmap-switches>ul li.modal-selected img[src$="more.svg"]{box-shadow:1px 1px 5px #4ef7ff,-1px -1px 5px #4ef7ff}#unitmap-switches>ul li.modal-selected::before{content:"";top:-10px;left:11px;position:absolute;width:0;height:0;border-top:10px solid rgba(255,255,255,.9);border-right:10px solid transparent;border-bottom:10px solid transparent;border-left:10px solid transparent;z-index:1}#unitmap-switches.modal-close>ul li.modal-selected img{filter:none;box-shadow:none}#unitmap-switches.modal-close>ul li.modal-selected::before{content:none}#unitmap-explainbutton.unitmap-void,#unitmap-legendbutton.unitmap-void,#unitmap-textinfobutton.unitmap-void{display:none}#unitmap-explainbutton,#unitmap-legendbutton,#unitmap-textinfobutton{display:flex;align-items:center;cursor:pointer}#unitmap-selector{display:none;position:absolute;right:10px;bottom:75px;padding:5px;max-width:calc(100% - 20px);min-width:85px;max-height:calc(50% - 40px);background-color:rgba(255,255,255,.9);border-radius:3px;overflow:auto;-webkit-overflow-scrolling:touch;z-index:4}#unitmap-explain,#unitmap-legend,#unitmap-switches.modal-close #unitmap-selector,#unitmap-textinfo{display:none}#unitmap-selector.explain-is-active #unitmap-explain,#unitmap-selector.legend-is-active #unitmap-legend,#unitmap-selector.textinfo-is-active #unitmap-textinfo,#unitmap-selector[class$=active]{display:block}@media (min-width:993px){#unitmap-switches>ul li:hover img{filter:saturate(300%);transform:scale(1.05)}#unitmap-switches>ul li:hover img[src$="legend.svg"]{box-shadow:1px 1px 5px #f95500,-1px -1px 5px #f95500}#unitmap-switches>ul li:hover img[src$="explain.svg"]{box-shadow:1px 1px 5px #fff200,-1px -1px 5px #fff200}#unitmap-switches>ul li:hover img[src$="more.svg"]{box-shadow:1px 1px 5px #4ef7ff,-1px -1px 5px #4ef7ff}#unitmap-switches>ul li.modal-selected:hover img{filter:saturate(300%);transform:scale(1.05)}}@media (max-width:576px){#unitmap-switches>ul{bottom:55px;right:5px;z-index:15}#unitmap-switches>ul li:nth-child(n+2){margin-left:3px}#unitmap-switches>ul li img{width:35px;height:35px}#unitmap-switches>ul li.modal-selected::before{border-top:10px solid #fff;left:7px}#unitmap-selector{bottom:95px;right:5px;max-width:calc(100% - 10px);max-height:40%;padding:3px 5px;background-color:#fff;z-index:15}}@media (max-width:992px) and (max-height:500px){#unitmap-switches>ul{bottom:5px;right:5px;z-index:15}#unitmap-switches>ul li img{width:35px;height:35px}#unitmap-switches>ul li.modal-selected::before{border-top:10px solid #fff;left:7px}#unitmap-selector{bottom:45px;right:5px;max-width:calc(100% - 10px);max-height:50%;padding:3px 5px;background-color:#fff;z-index:9}}@media (max-width:576px) and (max-height:500px){#unitmap-switches>ul{bottom:55px;right:5px;z-index:15}#unitmap-selector{bottom:95px;right:5px;max-height:40%}}@media (-ms-high-contrast:none),(-ms-high-contrast:active){#unitmap-selector{max-width:calc(100% - 37px)}}@supports (-ms-ime-align:auto){#unitmap-selector{max-width:calc(100% - 37px)}}#unitmap-timeslider{display:none;align-items:center;position:absolute;bottom:20px;left:10px;width:calc(100% - 220px);user-select:none;-webkit-user-select:none;z-index:3;touch-action:none}#unitmap-timeslider>table{order:1}#unitmap-timeslider>div{order:0}#unitmap-timeslider #unitmap-timeslider-togglebutton{display:none}#unitmap-timeslider .unitmap-spanscale{width:calc(100% - 100px)}#unitmap-timeslider .unitmap-spanscale #unitmap-subslider,#unitmap-timeslider .unitmap-spanscale .unitmap-cellspace{display:none}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider{display:flex}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell{display:block;position:relative;width:100%;line-height:1;margin-right:5px;padding:10px 5px;border-radius:5px;border-color:#666;border-style:solid;border-width:1px;text-align:center;background-color:#f9fafb;background-image:linear-gradient(to bottom,#fff,#ddd);color:#000;cursor:pointer}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:last-child{margin-right:0}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell.unitmap-highlight{background-color:#0060af;background-image:linear-gradient(to bottom,#0060af,#003e70);color:#fff;border-color:#f9fafb;cursor:inherit;pointer-events:none}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell.unitmap-skip{background-color:#fff;background-image:none;cursor:inherit;pointer-events:none;color:#ddd}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell.unitmap-reject{color:transparent}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell.unitmap-reject::before{content:"now loading";position:absolute;right:0;left:0;color:#f9fafb}#unitmap-timeslider .unitmap-pointscale{flex-grow:1;position:relative;width:calc(100% - 200px)}#unitmap-timeslider .unitmap-pointscale~#unitmap-moviebutton{margin-right:40px}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell{position:relative;background-color:#666;background-image:linear-gradient(to bottom,#333,#aaa);height:6px;cursor:pointer}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell.unitmap-highlight{background-color:#5f5;background-image:linear-gradient(to bottom,#5f5,#c0fdc0)}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell #unitmap-knob{position:absolute;top:0;margin-left:-12px}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell #unitmap-progress-button{position:absolute;top:-9px;width:24px;height:24px;background-color:#fff;border:2px solid #666;border-radius:50%;cursor:col-resize;z-index:4}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell #unitmap-slidervalue{position:absolute;bottom:22px;left:3px;padding:5px;color:#fff;background-color:rgba(0,96,175,.8);border-radius:5px;white-space:nowrap;cursor:auto}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell #unitmap-slidervalue::after{content:'';position:absolute;left:5px;bottom:-5px;border-style:solid;border-color:rgba(0,96,175,.8) transparent transparent transparent;border-width:5px 5px 0 5px;z-index:3;cursor:auto}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell:last-child{background-color:transparent;background-image:none;cursor:auto;width:1px}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell.unitmap-reject #unitmap-slidervalue{color:transparent}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell.unitmap-reject #unitmap-slidervalue::before{content:"now loading";color:#fff;position:absolute;left:-3px;width:100%;text-align:center;font-size:.8rem}#unitmap-timeslider .unitmap-pointscale .unitmap-cellspace{height:2px}#unitmap-timeslider .unitmap-pointscale .unitmap-cellspace:last-child{display:block;height:20px}#unitmap-timeslider .unitmap-pointscale .unitmap-slidercell{position:relative;height:10px}#unitmap-timeslider .unitmap-pointscale .unitmap-slidercell>div{display:flex;align-items:center;justify-content:center;position:absolute;width:100%;margin:8px auto 0 -50%;line-height:1;font-size:.8rem;text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff;white-space:nowrap}#unitmap-timeslider .unitmap-pointscale .unitmap-slidercell::before{content:'';position:absolute;top:0;left:0;width:1px;height:10px;background-color:#666}#unitmap-timeslider .unitmap-pointscale .unitmap-slidercell.unitmap-highlight{background-color:transparent}#unitmap-timeslider .unitmap-pointscale .unitmap-slidercell.unitmap-skip{color:#ddd}#unitmap-timeslider .unitmap-pointscale .unitmap-slidercell:last-child{cursor:auto}#unitmap-timeslider .unitmap-pointscale .unitmap-slidercell:last-child::before{left:-1px}#unitmap-timeslider.unitmap-short-scale{width:auto}#unitmap-timeslider.unitmap-short-scale .unitmap-spanscale{width:auto}#unitmap-timeslider.unitmap-nonmovie .unitmap-spanscale{width:100%}#unitmap-timeslider.unitmap-nonmovie.unitmap-short-scale{width:auto}#unitmap-timeslider.unitmap-nonmovie.unitmap-short-scale .unitmap-spanscale{width:auto}#unitmap-timeslider.unitmap-nonmovie.unitmap-short-scale .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell{width:auto}#unitmap-moviebutton{display:flex;flex-direction:column}#unitmap-moviebutton div{display:flex;align-items:center}#unitmap-moviebutton div:first-child{margin-right:10px;margin-bottom:5px}#unitmap-moviebutton img{width:30px;height:30px;cursor:pointer}#unitmap-moviebutton img:not(:first-child){margin-left:10px}#unitmap-moviebutton input[type=range]{margin-left:5px;width:72px;cursor:pointer;-moz-appearance:none;-webkit-appearance:none;appearance:none;background-image:-webkit-linear-gradient(right,#30a0fd,#d6edff);background-image:linear-gradient(to left,#30a0fd,#d6edff);height:20px;border-radius:20px}#unitmap-moviebutton input[type=range]:active,#unitmap-moviebutton input[type=range]:focus{outline:0}#unitmap-moviebutton input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border:1px solid #666;background-color:#fff;border-radius:50%;cursor:col-resize}#unitmap-moviebutton input[type=range]::-moz-range-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border:1px solid #666;background-color:#fff;border-radius:50%;cursor:col-resize}@media (min-width:993px){#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:not(.unitmap-highlight):hover{border-color:#f9fafb;background-image:none;background-color:#0060af;color:#fff}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:not(.unitmap-highlight).unitmap-reject{color:transparent}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:not(.unitmap-highlight).unitmap-reject::before{color:#000}_::-webkit-full-page-media,_:future,:root #unitmap-timeslider:not(.unitmap-nonmovie) .unitmap-spanscale,_::-webkit-full-page-media,_:future,:root #unitmap-timeslider:not(.unitmap-nonmovie) .unitmap-pointscale{width:calc(100% - 130px)}}@media (max-width:992px){#unitmap-timeslider{flex-direction:column;align-items:flex-start;width:calc(100% - 20px)}#unitmap-timeslider>table{order:0}#unitmap-timeslider>div{order:1}#unitmap-timeslider .unitmap-spanscale{margin-bottom:15px;width:100%}#unitmap-timeslider .unitmap-pointscale{width:calc(100% - 80px);align-self:center}#unitmap-timeslider .unitmap-pointscale~#unitmap-moviebutton{margin-right:0}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell:last-child #unitmap-slidervalue{left:auto;right:-22px}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell:last-child #unitmap-slidervalue::after{left:auto;right:5px}#unitmap-timeslider .unitmap-pointscale .unitmap-cellspace:last-child{display:block;height:40px}#unitmap-timeslider.unitmap-nonmovie{width:calc(100% - 220px)}#unitmap-timeslider.unitmap-nonmovie .unitmap-spanscale{margin-bottom:0}#unitmap-moviebutton{flex-direction:row;margin-top:5px}#unitmap-moviebutton div:first-child{margin-bottom:0}}@media (max-width:576px){#unitmap-timeslider{bottom:70px;left:5px;width:calc(100% - 10px);z-index:14}#unitmap-timeslider #unitmap-timeslider-togglebutton{display:block;width:60px;height:20px;margin-bottom:5px;background-color:rgba(0,96,175,.8);background-image:url(./common/image/hbg_white_b.svg);border-radius:3px 3px 0 0;background-size:contain;background-repeat:no-repeat;background-position:center;cursor:pointer}#unitmap-timeslider #unitmap-timeslider-togglebutton:not(.unitmap-timeslider-display){background-image:url(./common/image/hbg_white_a.svg);border-radius:3px}#unitmap-timeslider #unitmap-timeslider-togglebutton:not(.unitmap-timeslider-display)~*{display:none}#unitmap-timeslider #unitmap-timeslider-togglebutton~.unitmap-pointscale{margin-top:10px}#unitmap-timeslider .unitmap-spanscale{margin-bottom:0}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider{flex-wrap:wrap}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell{width:33.3%;margin-right:0;padding:3px;font-size:.85rem;border-radius:0;border-width:0;border-top-width:1px}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:nth-child(3n+2){border-left-width:1px;border-right-width:1px}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:nth-child(-n+3){border-top-width:0}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell.unitmap-highlight{border-color:#666}#unitmap-timeslider .unitmap-pointscale{width:calc(100% - 25px)}#unitmap-timeslider .unitmap-pointscale .unitmap-cellspace:last-child{height:10px}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell{background-image:none;height:3px}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell #unitmap-progress-button{top:-10px}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell #unitmap-slidervalue{position:fixed;left:auto;bottom:70px;right:5px;font-size:.8rem}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell #unitmap-slidervalue::after{content:none}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell:last-child #unitmap-slidervalue{right:5px}#unitmap-timeslider .unitmap-pointscale #unitmap-mainslider{display:none}#unitmap-timeslider.unitmap-short-scale .unitmap-spanscale #unitmap-mainslider{flex-wrap:nowrap}#unitmap-timeslider.unitmap-short-scale .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell{width:auto}#unitmap-timeslider.unitmap-short-scale .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:nth-child(n){border:none}#unitmap-timeslider.unitmap-short-scale .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:not(:first-child){border-left:1px solid #666}#unitmap-timeslider.unitmap-nonmovie{width:calc(100% - 10px)}}@media (max-width:992px) and (max-height:500px){#unitmap-timeslider{left:5px;bottom:calc(env(safe-area-inset-bottom) + 20px);width:calc(100% - 335px)}#unitmap-timeslider .unitmap-spanscale{margin-bottom:0}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider{flex-wrap:wrap}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell{width:50%;margin-right:0;margin-bottom:0;padding:3px;font-size:.85rem;border-radius:0;border-width:0;border-top-width:1px}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:nth-child(odd){border-right-width:1px}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:nth-child(-n+2){border-top-width:0}#unitmap-timeslider .unitmap-pointscale{width:calc(100% - 25px)}#unitmap-timeslider .unitmap-pointscale #unitmap-mainslider{display:none}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell{background-image:none;height:3px}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell #unitmap-progress-button{top:-10px}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell #unitmap-slidervalue{position:fixed;left:auto;bottom:calc(env(safe-area-inset-bottom) + 5px);right:330px;font-size:.8rem}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell #unitmap-slidervalue::after{content:none}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell #unitmap-slidervalue:last-child{right:330px}#unitmap-timeslider .unitmap-pointscale .unitmap-cellspace:last-child{height:10px}#unitmap-timeslider.unitmap-nonmovie{width:calc(100% - 335px)}#unitmap-timeslider.unitmap-nonmovie .unitmap-spanscale{width:auto}#unitmap-timeslider.unitmap-short-scale .unitmap-spanscale #unitmap-mainslider{flex-wrap:nowrap}#unitmap-timeslider.unitmap-short-scale .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell{width:auto}}@media (max-width:576px) and (max-height:500px){#unitmap-selector{max-height:30%}#unitmap-timeslider{width:calc(100% - 10px);bottom:70px}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell{width:33.3%;border-width:0;border-top-width:1px}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:nth-child(odd){border-right-width:0}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:nth-child(3n+2){border-right-width:1px}#unitmap-timeslider .unitmap-spanscale #unitmap-mainslider .unitmap-slidercell:nth-child(-n+3){border-top-width:0}#unitmap-timeslider .unitmap-pointscale .unitmap-rangecell #unitmap-slidervalue:last-child{left:auto;bottom:70px;right:5px}#unitmap-timeslider.unitmap-nonmovie{width:calc(100% - 10px)}}@media (-ms-high-contrast:none),(-ms-high-contrast:active){#unitmap-moviebutton input[type=range]{background-image:none;height:auto;border-radius:0;padding:0}}#unitmap{position:absolute;top:50px;right:0;bottom:0;left:0;overflow:hidden;z-index:0}#unitmap .leaflet-control-container .leaflet-top.leaflet-left{top:auto;bottom:110px}#unitmap .leaflet-bottom .leaflet-control-scale{margin-bottom:0}#unitmap .leaflet-left .leaflet-control-scale{margin-left:0}#unitmap-attribution{position:absolute;right:0;bottom:0;padding:0 5px;background-color:rgba(255,255,255,.8);font-size:11px;z-index:1}#unitmap-attribution a{cursor:pointer}#unitmap-background-color{display:block;position:absolute;top:50px;right:0;bottom:0;left:0;background-color:#bed2fe;z-index:-10;user-select:none;-webkit-user-select:none;pointer-events:none}@media (max-width:992px){.leaflet-control-zoom{display:none}}@media (max-width:576px){#unitmap,#unitmap-background-color{top:40px;bottom:50px}#unitmap-attribution{bottom:50px;max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}}@media (max-width:992px) and (max-height:500px){#unitmap,#unitmap-background-color{top:0}}@media (max-width:576px) and (max-height:500px){#unitmap,#unitmap-background-color{bottom:50px}}@media print{html{height:auto;overflow:visible}body{overflow:visible;-webkit-print-color-adjust:exact;color-adjust:exact}body::before{content:"";display:block}body .unitmap-information-space{position:static}#unitmap-ad,#unitmap-attribution,#unitmap-header,#unitmap-switches>ul,#unitmap-timeslider,.leaflet-control-container,.unitmap-exist#unitmap-contentsinfo-toggle,.unitmap-exist#unitmap-freespace-toggle,.unitmap-exist#unitmap-message span{display:none;visibility:hidden}#unitmap-print{display:flex;position:absolute;top:0;right:0}#unitmap-print span{display:flex;align-items:center;justify-content:center;position:relative;background-color:#0060af;height:34px;padding:0 18px;font-size:.9rem;text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff}#unitmap-print span:first-child{margin-right:11px}#unitmap-print span:first-child::after{content:"";top:0;right:-34px;position:absolute;width:0;height:0;border-top:17px solid transparent;border-right:17px solid transparent;border-bottom:17px solid transparent;border-left:17px solid #0060af;z-index:-1}#unitmap-print span:first-child:last-child{margin-right:0}#unitmap-print span:first-child:last-child::after{content:none}#unitmap-print span:nth-child(2){margin-left:11px}#unitmap-print span:nth-child(2)::after{content:"";top:0;left:-17px;position:absolute;width:0;height:0;border-top:17px solid #0060af;border-right:17px solid transparent;border-bottom:17px solid #0060af;border-left:17px solid transparent}#unitmap-infotime{left:0;top:50px;padding:3px 5px;border-radius:0;font-size:1rem}#unitmap{top:50px;margin-left:auto;margin-right:auto}#unitmap canvas{opacity:.9999}#unitmap-background-color{top:50px;margin-left:auto;margin-right:auto;width:800px;height:750px}_::-webkit-full-page-media #unitmap,_:future #unitmap,:root #unitmap{width:800px;height:750px}#unitmap-message.unitmap-exist{display:block;position:absolute;top:98px;left:50%;right:auto;transform:translateX(-50%);z-index:1}#unitmap-message.unitmap-exist div{border-radius:0;box-shadow:none;border:1px solid #666}#unitmap-centertext.unitmap-exist{top:375px;transform:translateX(-50%);border-radius:0;box-shadow:none;border:1px solid #666}#unitmap-contentsinfo{position:absolute;left:0;top:98px;max-height:100%;border-radius:0;box-shadow:none;border:1px solid #666}#unitmap-freespace{position:absolute;right:0;top:50px;margin-top:0;box-shadow:none;border-radius:0;border:1px solid #666}#unitmap-switches.modal-close #unitmap-selector{display:block}#unitmap-switches.modal-close #unitmap-selector #unitmap-textinfo{display:none}#unitmap-switches.modal-close #unitmap-selector.textinfo-is-active #unitmap-textinfo{display:none}#unitmap-switches.modal-close #unitmap-selector #unitmap-explain{display:none}#unitmap-switches.modal-close #unitmap-selector.explain-is-active #unitmap-explain{display:none}#unitmap-legend{display:block}#unitmap-legend.unitmap-nolegend{display:none}#unitmap-selector{display:block;position:static;left:auto;right:auto;bottom:auto;top:auto;height:auto;max-width:100%;max-height:none;margin-top:820px;border:none;border-radius:0;background:0 0;overflow:visible}#unitmap-selector #unitmap-legend{position:absolute;top:auto;bottom:0;right:0;border:1px solid #666;background-color:rgba(255,255,255,.8);padding:3px 5px;z-index:50}#unitmap-selector #unitmap-legend.unitmap-shortlegend{top:805px;bottom:auto}#unitmap-selector.textinfo-is-active #unitmap-textinfo{position:relative;margin-left:auto;margin-right:auto;overflow:visible;page-break-before:always}#unitmap-selector.textinfo-is-active #unitmap-textinfo>*{margin-left:auto;margin-right:auto}#unitmap-selector.explain-is-active #unitmap-explain{position:relative;margin-left:auto;margin-right:auto;overflow:visible;page-break-before:always}#unitmap-selector.explain-is-active #unitmap-explain>*{margin-left:auto;margin-right:auto}#unitmap-header:not(.area-utility-active)~#unitmap-switches{display:block}}
</style>
<style>
.himawari-earth{width:500px;height:500px}.himawari-background{background-color:#000}
</style>
<style>
table.season-table th{font-size:14px}table.season-table tr:not(.contents-title) th{text-align:center}table.season-table td{font-size:14px;padding-left:5px;padding-right:5px}p.season-note{font-size:12px;margin-bottom:0}div.season-graph{width:100%;text-align:center;display:inline-block;white-space:nowrap;padding-top:1px;padding-bottom:1px}div.season-low{text-align:center;display:inline-block;background-color:#00f;border:1px #000 solid;color:#fff}div.season-normal{text-align:center;display:inline-block;background-color:#ff0;border:1px #000 solid}div.season-high{text-align:center;display:inline-block;background-color:red;color:#fff;border:1px #000 solid}div.season-below{text-align:center;display:inline-block;background-color:#00f;color:#fff;border:1px #000 solid}.season-prob{font-size:14px}.season-prob-en{font-size:14px;line-height:14px}.unitmap-nonactive{background-color:#aaa;pointer-events:none}
</style>
<style>
a.seawarning-volcano-name{font-size:14px;color:#000;text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff}div.seawarning-summary-box{padding:2px;margin:2px;border:solid 1px #000;float:left;height:30px;line-height:24px}table.seawarning-japan-table tr:not(.contents-title) th,table.seawarning-table tr:not(.contents-title) th{text-align:center}table.seawarning-table td{padding-left:5px;padding-right:5px}table.seawarning-japan-table td{padding:4px}table.seaforecast-table tr:not(.contents-title) th{text-align:center}table.seaforecast-table td{padding-left:5px;padding-top:1px;padding-bottom:1px}td.seaforecast-content{padding-left:3px;padding-top:1px;padding-bottom:1px}th.seaforecast-observation{text-align:center}td.seaforecast-observation{text-align:center}.seawarning-fill{stroke:#000;stroke-width:1px;fill-opacity:1}.seawarning-icon{width:20px;height:20px;margin-bottom:3px;margin-right:3px}table.seawarning-popup-table{border:solid 2px #000;width:250px}table.seawarning-popup-table td,table.seawarning-popup-table th{border:solid 1px #000;padding-top:2px;padding-bottom:2px;padding-left:5px;padding-right:5px}th.seawarning-popup-title{width:75px}td.seawarning-popup-value{width:175px}table.seawarning-telop-table{border:solid 2px #000}table.seawarning-telop-table td,table.seawarning-telop-table th{border:solid 1px #000;padding-top:2px;padding-bottom:2px;padding-left:5px;padding-right:5px;font-size:14px}table.seawarning-telop-table th{font-weight:400}td.seawarning-telop-time{white-space:nowrap}td.seawarning-telop-name{color:red;font-weight:700;white-space:nowrap}td.seawarning-telop-content{color:red;font-weight:700}@media (max-width:576px){table.seawarning-japan-table .simple-table-hidden-tr td:nth-child(1),table.seawarning-japan-table .simple-table-hidden-tr td:nth-child(2){min-width:105px!important}table.seawarning-japan-table td{white-space:nowrap}}@media (max-width:370px){table.seawarning-japan-table .simple-table-hidden-tr td:nth-child(1),table.seawarning-japan-table .simple-table-hidden-tr td:nth-child(2){min-width:80px!important}}
</style>
<style>
.typhoon-text{text-shadow:1px 1px 0 #000,-1px 1px 0 #000,1px -1px 0 #000,-1px -1px 0 #000;font-size:14px;font-weight:800;color:#fff}.typhoon-no-text{text-shadow:1px 1px 0 #000,-1px 1px 0 #000,1px -1px 0 #000,-1px -1px 0 #000;font-size:16px;font-weight:800;color:#0ff}div.typhoon-explain{margin-top:0;margin-bottom:0}div.typhoon-explain td{padding-left:5px;padding-right:5px}div.typhoon-panel td,div.typhoon-panel th{font-size:14px;padding-top:0;padding-bottom:0}div.typhoon-panel td{background-color:#fff;padding-right:5px;padding-left:5px}td.typhoon-bottombold{border-bottom:solid 4px #000!important}div.contents-block th.typhoon-topbold{border-top:solid 2px #000}.typhoon-img{width:12px;height:12px}.center-text{text-align:center;font-size:18px;color:#000}div.typhoon-map-radio-caption{display:inline-block;margin-right:9px}div.typhoon-map-radio-buttons{margin-top:5px;margin-bottom:5px}div.typhoon-map-description{font-size:14px}.typhoon-data-tile img{opacity:.5}.typhoon-mesh{pointer-events:none}
</style>
<style>
.amd-contentsInfo-nodata{font-size:12px;font-weight:700}.amd-popup-table{font-size:12px;margin:15px 0 5px;white-space:nowrap;text-align:center}.amd-popup-table-td-value{width:60px}.amd-popup-a-tablelink{display:block;font-size:12px}.amd-map-legend-grades{margin-bottom:5px}.amd-map-legend-grades .contents-legend div:nth-child(2){position:relative;top:10px;left:-2px}.amd-graph-legend-grades-wrap{display:flex;align-items:start}.amd-graph-legend-grades{display:inline-block;margin-left:5px}.amd-graph-legend-grades .contents-legends{display:flex;flex-direction:row}.amd-graph-legend-grades .contents-legend{display:flex;align-items:center;flex-direction:column;width:20px}.amd-graph-legend-grades .contents-legend-box,.amd-graph-legend-grades .contents-legend-text{margin:0;padding:0}.amd-graph-legend-grades .contents-legend-text{position:relative;left:10px;top:-3px}.amd-legend-station-table{font-size:12px;text-align:center;overflow:auto;white-space:nowrap;vertical-align:middle}.amd-legend-station-table-td-elems,.amd-legend-station-table-td-type{padding-left:10px;padding-right:10px;text-align:left}.amd-legend-station-icon{border:1px solid #000;display:inline-block}.amd-marker-wrap{position:absolute;left:50%;transform:translate(-50%,0);text-align:center;white-space:nowrap}.amd-marker-text-obsvalue,.amd-marker-text-obsvalue-wind{font-size:14px;font-weight:800}.amd-marker-text-obsvalue-wind{margin-top:13px}.amd-marker-notdisp,.amd-marker-windcalm{border-radius:50%;display:inline-block;line-height:16px}.amd-marker-notdisp{background-color:#888;border:1px solid #aaa;height:6px;width:6px}.amd-marker-windcalm{background-color:#f2f2ff;border:1px solid #888;height:7px;width:7px}.amd-marker-text-amedasname{font-size:12px;font-weight:700;margin-top:10px}.amd-marker-text-amedasname-addto-obsvalue{color:#444;font-size:8pt;font-weight:700;margin-top:-4px}.amd-textstroke-black{text-shadow:1px 1px 0 #000,-1px 1px 0 #000,1px -1px 0 #000,-1px -1px 0 #000}.amd-marker-text-amedasname,.amd-marker-text-amedasname-addto-obsvalue,.amd-textstroke-white{text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff}.amd-simpletable{text-align:center}.amd-simpletable-obsvalue{font-size:14px}.amd-simpletable-mintemp{color:#00f}.amd-simpletable-maxtemp{color:red}.amd-simpletable-minmaxtime{margin-top:-5px}.amd_simpletable_svg_winddirection{stroke:#000;stroke-width:1px}.amd-simpletable svg{margin:-5px 3px 0 0;display:inline-block}.amd-content-amdname{font-size:20px;font-weight:700}.amd-content-location{font-size:14px}.amd-content-controller-item-head{height:30px;text-align:center;width:75px}.amd-content-info{font-size:18px;font-weight:700;margin-top:8px}.amd-content-info-note{font-size:14px}.amd-error-message,.amd-info-message{border:1px solid #000;font-size:16px;font-weight:700;margin-bottom:1em;padding:50px 0;text-align:center}.amd-error-message{color:red}.amd-info-message{color:#000}.amd-table-seriestable{margin:0}.amd-table-inserttable td,.amd-table-minmaxtable td,.amd-table-seriestable td{text-align:center}.amd-table-minmaxtable-split-cell-left{border-right-style:dotted!important}.amd-table-minmaxtable-split-cell-middle{border-right-style:dotted!important;border-left-style:dotted!important}.amd-table-minmaxtable-split-cell-right{border-left-style:dotted!important}.amd-table-minmaxtable-lastTime{text-align:right}.amd-table-minmaxtable-anchor-wrap{text-align:right;width:100%}.amd-table-minmaxtable-target{margin-top:20px}#amd-graph{width:100%}.amd-graph-line-gridline{stroke:#e2e2e2;stroke-dasharray:1;stroke-width:1}.amd-graph-line-gridline-midnight{stroke:#a0a0a0;stroke-width:1}.amd-graph-path-data{fill:none;stroke:#6868a1;stroke-width:2}.amd-graph-circle-data{fill:#6868a1}.amd-graph-rect-precipitation{fill:#00f;stroke:none}.amd-graph-rect-precipitation-hover{fill:#5050fd}.amd-graph-rect-sun{fill:orange;stroke:none}.amd-graph-rect-sun-hover{fill:#ffc965}.amd-graph-path-xmark{fill:red;stroke:red;stroke-width:2}.amd-graph-text-tickvalue{font-size:13px}.amd-graph-text-elemunit{font-size:13px;text-anchor:middle}.amd-graph-text-xaxisname,.amd-graph-text-yaxisname{fill:#000;font-size:16px;text-anchor:middle}#amd-graph-legend{border:1px solid #dee2e6;border-radius:.25rem;display:inline-block;font-size:12px;margin:0 0 20px 80px;padding:5px 10px}#amd-graph-legend div{white-space:nowrap}.amd-graph-legend-wrap{min-height:20px;padding:1px;white-space:nowrap}.amd-graph-legend-bar{display:inline-block;height:10px;margin:0 3px 2px 0;vertical-align:middle;width:30px}.amd-graph-legend-bar-bg-precipitation{background-color:#00f}.amd-graph-legend-bar-bg-sun{background-color:orange}.amd-graph-legend-line{background-color:#6868a1;display:inline-block;height:2px;margin:0 3px 2px 0;width:30px;vertical-align:middle}.amd-graph-legend-text{display:inline-block;margin-right:3px;vertical-align:middle}.amd-graph-legend-grade-windspeed{margin-left:5px;display:inline-block}.amd-graph-tooltip-focusline{stroke:#d4d4d4;stroke-width:1px}.amd-graph-tooltip-focuspoint{fill:#6868a1;fill-opacity:1;stroke:#fff;stroke-opacity:1;stroke-width:1}.amd-graph-tooltip-wrap{position:absolute;width:auto;height:auto;padding:0;border-radius:3px;background:#fff;box-shadow:1px 1px 3px rgba(0,0,0,.4);visibility:hidden;font-size:12px;max-width:200px}.amd-graph-tooltip-overlay{fill:none;pointer-events:all}.amd-graph-tooltip-table td{border:1px solid #e0e0e0;padding:0 5px;text-align:center}.amd-graph-tooltip-table-td-date{font-weight:700;background:#eee}.amd-graph-tooltip-table-td-value{font-weight:700;width:50px}@media (max-width:1199px){#amd-graph>svg{width:950px;height:475px}}@media (max-width:991px){#amd-graph>svg{width:700px;height:350px}#amd-graph-legend{margin-left:60px}}@media (max-width:767px){#amd-graph>svg{width:520px;height:260px}#amd-graph-legend{margin-left:45px}}@media (max-width:575px){#amd-graph>svg{width:380px;height:190px;display:block}#amd-graph-legend{margin-left:30px;padding:2px 6px}#amd-graph-legend div{font-size:10px}#amd-graph-legend .contents-legend{width:17px}#amd-graph-legend div.contents-legend-box{width:10px;height:10px}#amd-graph-legend div.contents-legend-text{font-size:10px;left:9px;top:-2px}.amd-graph-legend-bar{height:7px}}@media (max-width:401px){#amd-graph>svg{width:330px;height:165px}}@media (max-width:350px){#amd-graph>svg{width:275px;height:138px}}
</style>
<style>
@charset "UTF-8";.volcano-ico01{width:15px}.volcano-ico02{width:20px}a.volcano-map-text{font-size:14px;color:#000;text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,-1px -1px 0 #fff}.forecast_tle00{background-color:#dadfec;cursor:pointer;font-size:14px;font-weight:700;margin:10px 0 10px 0;padding:5px 0 5px 10px;position:relative}.forecast_tle00+ul li{font-size:14px;margin-left:-15px}.forecast_tle00 span{display:inline-block;font-size:.8em;font-weight:400;margin:0;padding:3px 0 0 20px;position:absolute;text-align:right;right:10px}.forecast_table_ci table{border-collapse:collapse;border:solid 2px #000;margin-bottom:10px}.forecast_table_ci tr:hover>td{background-color:#4a7ebb;color:#fff;cursor:pointer;text-decoration:none}.forecast_table_ci td,.forecast_table_ci th{padding:2px;border:solid 1px #000;font-weight:400;font-size:14px;padding:5px}.forecast_table_ci th{background-color:#f0f0ff;text-align:center}.forecast_table_ci td:nth-child(2),.forecast_table_ci td:nth-child(3){color:red}.volcano-legend{background-color:#fff;border:1px solid #000}.volcano-legend table img{height:18px;width:18px}.volcano-legend th{border-bottom:1px solid #000;border-right:1px dashed #000;padding:3px 10px}.volcano-legend th:last-child{border-bottom:1px solid #000;border-right:none;padding:3px 10px}.volcano-legend td{border-bottom:1px dashed #000;border-right:1px dashed #000;padding:3px 10px}.volcano-legend td:last-child{border-bottom:1px dashed #000;border-right:none;padding:3px 10px}.volcano-legend p.txt01{background:linear-gradient(#5f8cb5,#030b1b);background:-moz-linear-gradient(top,#5f8cb5,#030b1b);background:-webkit-linear-gradient(top,#5f8cb5,#030b1b);margin:0;padding:5px 10px;position:relative}.volcano-legend p.txt01 label{cursor:pointer;display:block;margin:0;min-width:65px;padding:5px 10px}.volcano-legend p.txt02{text-align:right;margin:0;padding:5px}.forecast_tle00{background-color:#dadfec;cursor:pointer;font-size:14px;font-weight:700;margin:10px 0 10px 0;padding:5px 0 5px 10px;position:relative}.forecast_tle00+ul li{font-size:14px;margin-left:-15px}.forecast_tle00 span{display:inline-block;font-size:.8em;font-weight:400;margin:0;padding:3px 0 0 20px;position:absolute;text-align:right;right:10px}.forecast_table{display:none;font-size:90%;margin-bottom:1rem;width:100%}.forecast_table table{width:100%}.forecast_table table tr th{background-color:#556ca5;color:#fff;cursor:default!important;padding:3px;border:1px solid #ddd;text-align:center}.forecast_table table tr td{padding:3px;border:1px solid #ddd;vertical-align:middle}.forecast_table tr:hover,.forecast_table tr:hover>td{background-color:#4a7ebb;color:#fff;cursor:pointer;text-decoration:none}.forecast_visible{display:block!important}.volcano_popup{border-collapse:collapse;border:solid 2px #000;margin-bottom:10px}.volcano_popup td,.volcano_popup th{padding:2px;border:solid 1px #000;font-weight:400;font-size:12px;padding:3px 5px 1px 5px}.volcano_popup th{background-color:#f0f0ff;font-weight:700;text-align:center;white-space:nowrap}@media (max-width:576px){.forecast_table{font-size:2.6vw!important}}div.contents-block>table.volcano-simple-table td{padding-top:5px;padding-left:10px;padding-right:10px;padding-bottom:5px;text-align:left}
</style>
<style>
div.contents-block tr.ashfall-contents-info-selected td{background-color:#ff0;font-weight:700}a.ashfall-link{cursor:pointer}a:not([href]).ashfall-link:hover{text-decoration-line:underline}
</style>
<style>
table.warning-table td,table.warning-table tr:not(.contents-title) th{text-align:center}table.warning-table td.warning-summary-sentence{text-align:left;padding-left:5px;padding-right:5px}div.warning-summary-box{padding:2px;margin:2px;border:solid 1px #000;float:left}div.warning-summary-clickable{color:red;font-weight:700;padding:2px;margin:2px;float:left}div.warning-next-box{width:16px;height:16px;margin-left:3px;border:solid 1px #000;display:inline-block;line-height:12px;text-align:center}div.contents-block th.contents-level50{border:solid 1px grey}div.contents-block td.contents-level50{border:solid 1px grey}
</style>
<style>
.week-table-container{text-align:center}table.forecast-table td,table.forecast-table tr:not(.contents-title) th{text-align:center}table.forecast-table td.forecast-sentence{text-align:left;padding-left:5px;padding-right:5px}table.forecast-table p{margin-top:10px;margin-bottom:10px}table.forecast-table p.forecast-header{font-weight:700}tr.contents-header th.forecast-date{font-weight:700}div.contents-block th.forecast-area{font-weight:700}div.forecast-area{font-weight:700}th.forecast-saturday{color:#00f}th.forecast-sunday{color:red}span.forecast-max-temp,td.forecast-max-temp{color:red}span.forecast-min-temp,td.forecast-min-temp{color:#00f}td.forecast-rel-b{background-color:#dbdbdb}td.forecast-rel-c{background-color:silver}img.forecast-icon{width:60px;height:40px}table.forecast-map-panel{width:150px;background-color:#fff;border-radius:8px;box-shadow:5px 5px 5px rgba(0,0,0,.2)}table.forecast-map-panel td,table.forecast-map-panel th{text-align:center;font-size:16px;font-weight:400}th.forecast-map-panel-title{background-color:#6060c0;color:#fff;border-radius:8px 8px 0 0;white-space:normal}td.forecast-map-panel-point{white-space:normal}img.forecast-map-panel-image{width:90px;height:60px}td.forecast-map-panel-pop{padding-top:5px;border-top:solid 1px #e0e0e0}table.forecast-map-panel-en td,table.forecast-map-panel-en th{font-size:14px;line-height:1.4em}div.forecast-map-weather-100{background-color:#fa0}div.forecast-map-weather-200{background-color:#b0b0b0}div.forecast-map-weather-300{background-color:#8080ff}div.forecast-map-weather-400{background-color:#fff}div.forecast-map-weather-missing{background-color:#606060}div.forecast-map-radio-caption{display:inline-block;margin-right:9px}
</style>
<style>
@charset "UTF-8";#wpr-infotable{width:100%;display:flex}#wpr-infotable table:first-child{margin-right:5px}#wpr-infotable td,#wpr-infotable th{border:1px #000 solid;text-align:center}#wpr-table{width:100%}#wpr-table td,#wpr-table th{border:1px #000 solid;text-align:center}#wpr-controller{width:100%}#wpr-controller td{text-align:left}#wpr-table td.wpr-left,#wpr-table th.wpr-left{border-left:2px #000 solid}#wpr-table th.wpr-top{border-top:2px #000 solid}#wpr-switch a{margin-right:30px}#wpr-staionselector{font-size:12px}#wpr-staionselector td{text-align:center;display:block}#wpr-staionselector tbody{display:flex;flex-wrap:wrap;max-width:200px}#wpr-staionselector tr:first-child{width:100%}#wpr-staionselector tr{width:50%;display:block}#wpr-staionselector tr td{border-top:none}#wpr-staionselector tr:nth-child(odd) td{border-left:none}#wpr-staionselector tr:first-child td{border-top:1px solid #000;border-left:1px solid #000}#wpr-heightselector,.wpr-stationlist{cursor:pointer}#wpr-heightselector td{text-align:right}.wpr-stationpoint{stroke:#000;fill:#000;fill-opacity:1}.yabane{stroke:#000}.yabane_shadow{fill:#000;stroke-width:3}.wpr-50m{fill:#b40068}.wpr-40m{fill:#ff2800}.wpr-30m{fill:#f90}.wpr-20m{fill:#faf500}.wpr-10m{fill:#0041ff}.wpr-1m{fill:#b9ebfa}.wpr-0m{stroke:#36f;stroke-width:4;fill:#fff;fill-opacity:1}.wpr-heightselect{background-color:#7f7}.wpr-relmin{background-color:#9f9}.wpr-relmout{background-color:#aaa}.wpr-container{position:relative;display:flex}#wpr-station{position:absolute;top:10px;left:40px;display:flex;width:820px}span.wpr-station{font-size:1.2rem;font-weight:700;letter-spacing:.3em}span.wpr-latlonalt{margin-left:auto}#wpr-chart{position:relative;width:80%;overflow:hidden;box-shadow:0 .125rem .25rem rgba(0,0,0,.075);border:1px solid #dee2e6;border-radius:.25rem}#wpr-loading{position:absolute;top:50%;left:50%;margin:-.5em 0 0 -3em}#wpr-chart svg{user-select:none;-webkit-user-select:none}#wpr-chart svg#wpr-mainchart{cursor:grab}#wpr-chart svg#wpr-mainchart:active{cursor:grabbing}#wpr-chart svg#wpr-mainchart g{transition-duration:.5s}#wpr-chart svg#wpr-mainchart rect{cursor:pointer}.timevector{cursor:pointer}.wpr-sub{width:18%;display:flex;flex-direction:column;margin:0 0 0 2%}#wpr-legend{box-shadow:0 .125rem .25rem rgba(0,0,0,.075);border:1px solid #dee2e6;border-radius:.25rem;margin:0 0 1em 0;padding:5px}#wpr-legend img{width:147px}#wpr-data{width:100%;padding:5px;box-shadow:0 .125rem .25rem rgba(0,0,0,.075);border:1px solid #dee2e6;border-radius:.25rem}.wpr-4tab{display:none}@media (max-width:1199px){#wpr-station{width:688px}#wpr-chart{padding-top:15px}svg.wpr-chartbody:first-child{width:688px;height:464px}svg.wpr-chartbody:last-child{width:688px;height:64px}#wpr-legend img{width:132px}}@media (max-width:991px){#wpr-station{width:calc(100% - 75px)}.wpr-container{flex-wrap:wrap}#wpr-chart{width:100%}.wpr-sub{width:100%;margin:1em 0;flex-direction:row}#wpr-legend{margin:0 1em 0 0}#wpr-legend img{width:103px}#wpr-data{align-self:flex-start}}@media (max-width:767px){#wpr-data,#wpr-switch{font-size:.8rem}span.wpr-latlonalt,span.wpr-station{font-size:.8rem;letter-spacing:normal}svg.wpr-chartbody:first-child{width:516px;height:348px}svg.wpr-chartbody:last-child{width:516px;height:48px}#wpr-legend img{width:88px}}@media (max-width:575px){svg.wpr-chartbody:first-child{width:430px;height:290px}svg.wpr-chartbody:last-child{width:430px;height:40px}#wpr-legend img{width:74px}}@media (max-width:461px){svg.wpr-chartbody:first-child{width:344px;height:232px}svg.wpr-chartbody:last-child{width:344px;height:32px}#wpr-legend img{width:59px}}@media (max-width:401px){svg.wpr-chartbody:first-child{width:292px;height:197px}svg.wpr-chartbody:last-child{width:292px;height:27px}#wpr-legend img{width:50px}}
</style>
<style>
.tide-jma{background-color:#ff0;color:#000}.tide-jcg{background-color:#0ff;color:#000}.tide-gsi{background-color:#0f0;color:#000}.tide-phb{background-color:red;color:#000}.tide-rib{background-color:silver;color:#000}.tide-other{background-color:#00f;color:#000}.tidelevel-icon{margin-top:auto;margin-bottom:auto;margin-left:2px;margin-right:2px;top:0;right:0;left:0;bottom:0;position:absolute}.tidelevel-icon-small{width:10px;height:10px}.tidelevel-icon-middle{width:15px;height:15px}.tidelevel-icon-large{width:20px;height:20px}.tidelevel-table{text-align:center;font-size:12px}table.tidelevel-controller tr:not(.contents-title)>th{text-align:center;width:200px}table td.tidelevel-data-now,table th.tidelevel-header-now{border-right:solid 2px #00f;border-left:solid 2px #00f}div.tidelevel-button{display:inline-block;padding:.3em 1em;color:#000;width:100px;text-align:center;margin-left:3px;border:solid 2px #c8c8ff;border-radius:3px;transition:.2s;vertical-align:middle;width:150px;height:60px}div.tidelevel-button:hover{background:#d2d2ff;text-decoration:none}div.tidelevel-selected,div.tidelevel-selected:hover{background:#9696ff;width:150px}.tidelevel-pointlist-cell{text-align:left;padding-left:5px}.tidelevel-pointlist-cell-number{text-align:center}.tidelevel-pointlist-cell-station-name{color:#00f;padding-left:5px;text-align:left;text-decoration:underline;color:#00f}.tidelevel-pointlist-cell-heihgt{padding-right:5px;text-align:right}.tidelevel-graph-svg{cursor:grab;display:block}.tidelevel-graph-svg:active{cursor:grabbing}.tidelevel-graph-path-tide{fill:none;stroke:#30c;stroke-width:1}.tidelevel-graph-path-astro{fill:none;stroke:#f90;stroke-width:3}.tidelevel-graph-circle-tide{fill:#30c}.tidelevel-graph-circle-astro{fill:#f90}.tidelevel-graph-line-gridline{stroke:silver;stroke-dasharray:3;stroke-width:1}.tidelevel-graph-line-advisory{stroke:#f2e700;stroke-width:3}.tidelevel-graph-line-warning{stroke:#ff2800;stroke-width:3}.tidelevel-graph-line-maxlevel{stroke:#0f0;stroke-dasharray:5;stroke-width:3}.tidelevel-graph-line-zero{stroke:#000;stroke-width:3}.tidelevel-graph-line-peakvalue{stroke:#0ff;stroke-width:3}.tidelevel-graph-polygon-peaktime{fill:#00f}.tidelevel-graph-text-tickvalue{font-size:13px}.tidelevel-graph-text-axisunit{font-size:13px}.tidelevel-graph-text-axisname{text-anchor:middle;font-size:16px;font-weight:700}.tidelevel-graph-text-axisdate{font-size:16px;fill:#000;text-anchor:middle}.tidelevel-graph-text-missing{font-size:20px;text-anchor:middle;dominant-baseline:central}.tidelevel-graph-line-axisdate{stroke:#000;stroke-width:1}.tidelevel-graph-legend{display:flex;justify-content:space-between;flex-wrap:wrap;width:800px;border:1px solid #dee2e6;border-radius:.25rem;margin:0 0 20px 80px;padding:5px 10px;font-size:12px}.tidelevel-graph-legend div{width:30%;display:flex;justify-content:space-between;align-items:center}.tidelevel-graph-legend div span{display:inline-block;flex:none;margin-left:1em}.tidelevel-legend-circle-astro,.tidelevel-legend-circle-tide{margin-right:20px}.tidelevel-graph-legend div svg{margin-right:18px}.tidelevel-graph-legend div.tidelevel-legend-ordertype-maxlevel{justify-content:flex-start;width:100%}.tidelevel-legend-line-advisory,.tidelevel-legend-line-advisory-period,.tidelevel-legend-line-astro,.tidelevel-legend-line-emergencywarning-period,.tidelevel-legend-line-maxlevel,.tidelevel-legend-line-tide,.tidelevel-legend-line-warning,.tidelevel-legend-line-warning-peakvalue,.tidelevel-legend-line-warning-period{width:50px}.tidelevel-legend-line-tide{border-top:1px solid #30c}.tidelevel-legend-line-astro{border-top:3px solid #f90}.tidelevel-legend-line-advisory{border-top:3px solid #f2e700}.tidelevel-legend-line-warning{border-top:3px solid #ff2800}.tidelevel-legend-line-advisory-period{border-top:10px solid #ffd2b4}.tidelevel-legend-line-warning-period{border-top:10px solid #ff9696}.tidelevel-legend-line-emergencywarning-period{border-top:10px solid #b496e1}.tidelevel-legend-line-maxlevel{border-top:3px dashed #0f0}.tidelevel-legend-line-warning-peakvalue{border-top:3px solid #0ff}.tidelevel-legend-circle-astro,.tidelevel-legend-circle-tide{border-radius:50%;height:8px;width:8px}.tidelevel-legend-circle-tide{background:#30c}.tidelevel-legend-circle-astro{background:#f90}@media (max-width:991px){#tidelevel-graph>svg{width:690px;height:285px}.tidelevel-graph-legend{width:480px;margin-left:60px}.tidelevel-graph-legend div{width:48%}.tidelevel-legend-ordertype-tide{order:1}.tidelevel-legend-ordertype-advisory{order:2}.tidelevel-legend-ordertype-astro{order:3}.tidelevel-legend-ordertype-warning{order:4}.tidelevel-legend-ordertype-advisory-period{order:5}.tidelevel-legend-ordertype-warning-peakvalue{order:6}.tidelevel-legend-ordertype-warning-period{order:7}.tidelevel-legend-ordertype-warning-peaktime{order:8}.tidelevel-legend-ordertype-emergencywarning-period{order:9}.tidelevel-legend-ordertype-maxlevel{order:10}}@media (max-width:767px){#tidelevel-graph>svg{width:506px;height:209px}.tidelevel-graph-legend{font-size:8px;margin-left:45px;padding:0 5px;width:310px}.tidelevel-legend-circle-astro,.tidelevel-legend-circle-tide{height:5px;width:5px;margin-right:12px}.tidelevel-graph-legend div svg{width:8px;height:8px;margin-right:10px}.tidelevel-graph-legend div:last-child{border-bottom:none;justify-content:space-between}.tidelevel-legend-line-advisory,.tidelevel-legend-line-advisory-period,.tidelevel-legend-line-astro,.tidelevel-legend-line-emergencywarning-period,.tidelevel-legend-line-maxlevel,.tidelevel-legend-line-tide,.tidelevel-legend-line-warning,.tidelevel-legend-line-warning-peakvalue,.tidelevel-legend-line-warning-period{width:30px}.tidelevel-legend-line-advisory,.tidelevel-legend-line-astro,.tidelevel-legend-line-maxlevel,.tidelevel-legend-line-warning,.tidelevel-legend-line-warning-peakvalue{border-top-width:2px}.tidelevel-legend-line-advisory-period,.tidelevel-legend-line-emergencywarning-period,.tidelevel-legend-line-warning-period{border-top-width:6px}}@media (max-width:575px){#tidelevel-graph>svg{width:368px;height:152px}.tidelevel-graph-legend{font-size:8px;margin-left:30px;padding:0 5px;width:310px}}@media (max-width:401px){#tidelevel-graph>svg{width:322px;height:133px}.tidelevel-graph-legend{width:280px}}@media (max-width:330px){#tidelevel-graph>svg{width:276px;height:114px}.tidelevel-graph-legend{width:240px;margin-left:20px}}div.tidelevel-description{font-size:14px}div.tidelevel-area-buttons div{margin-bottom:5px}
</style>
<style>
.quake-explain{max-width:800px}.quake-explain-quake{max-width:700px}.quake-infoTable{width:100%;border:none!important}.quake-infoTable td{padding:1px 10px;word-spacing:1em;text-indent:0;vertical-align:top;border:none!important}.quake-infoTableE{width:100%;border-collapse:collapse;margin:0;border:none!important}.quake-infoTableE td{padding:5px 10px;text-indent:0;vertical-align:top;border:solid 1px #0060af!important}.quake-infoTable-quake td{word-break:keep-all}.quake-contentsInfoTitle{margin-bottom:5px}.quake-hlBox{border:1px solid #000;margin-bottom:2px;padding-left:10px;padding-right:10px;padding-bottom:5px;line-height:1.05em}.quake-hlHeader{font-weight:400;font-size:.7em}.quake-hlContents{font-weight:700}.quake-infoBox{overflow-y:auto;padding-bottom:1px}.quake-contents-button-disabled{background-color:grey!important;pointer-events:none}.quake-attention-button{display:inline-block;margin-bottom:5px;padding-left:5px;padding-right:5px;border-radius:3px;border:solid 1px #c92000;transition:.2s;text-align:center;background-color:#ff2800;color:#fff;cursor:pointer}.quake-attention-button:hover{background-color:#c92000}.quake-select{-moz-appearance:none;-webkit-appearance:none;appearance:none;display:inline-block;width:45%;margin:0 .5em 1em;padding:.6em 1.5em .6em .5em;cursor:pointer;line-height:1.4;font-size:1em;font-weight:700;color:#333;border-radius:4px;background-color:#f7f9fb;border:solid 1px #0060af;box-shadow:0 3px 3px -2px rgba(3,29,41,.35);background-image:linear-gradient(45deg,transparent 50%,rgba(0,0,0,.4) 50%),linear-gradient(135deg,rgba(0,0,0,.4) 50%,transparent 50%);background-size:5px 5px,5px 5px;background-position:calc(100% - 15px) 50%,calc(100% - 10px) 50%;background-repeat:no-repeat}.quake-select:focus{outline:0;border-color:#a3d4ff}.quake-select::-ms-expand{display:none}.quake-badge-span{padding:.3em .6em;border-radius:.3em;white-space:nowrap;width:5em;display:inline-block;pointer-events:none}.quake-bg-I0{background-color:#fff}.quake-bg-I1{background-color:#f2f2ff}.quake-bg-I2{background-color:#0af}.quake-bg-I3{background-color:#0041ff;color:#fff}.quake-bg-I4{background-color:#fae696}.quake-bg-I5{background-color:#ffe600}.quake-bg-IA{background-color:#ffe600}.quake-bg-IB{background-color:#f90}.quake-bg-I6{background-color:#ff2800;color:#fff}.quake-bg-IC{background-color:#ff2800;color:#fff}.quake-bg-ID{background-color:#a50021;color:#fff}.quake-bg-I7{background-color:#b40068;color:#fff}.quake-bg-I9{background-color:green;color:#fff}.quake-must{color:#c00}.quake-rev{border-bottom:solid;border-color:#000;border-width:2px}.quake-nowrap{white-space:nowrap}.tsunami-bg-PI{background-color:rgba(064,086,106,.3)}.tsunami-bg-NT{background-color:#140014;color:#fff}.tsunami-bg-TF{background-color:#0af}.tsunami-bg-TA{background-color:#f2e700}.tsunami-bg-TW{background-color:#ff2800;color:#fff}.tsunami-bg-MW{background-color:#a0a;color:#fff}
</style>
<style>
.hypo-Button{display:inline-block;width:65px;text-align:center;padding:.2em .4em;text-decoration:none;color:#000;border:solid 1px #000;background-color:rgba(255,255,255,.7);border-radius:5px;transition:.4s;cursor:pointer;font-size:.8em}.hypo-Button:hover{background:#0060af;color:#fff}.hypo-ButtonOn{background:#0060af;color:#fff}.hypo-listTable{border-collapse:collapse;width:100%;font-size:13px}.hypo-listTable th{background-color:#2b478e;color:#fff;text-align:center;border:1px solid #ddd;padding:3px 5px}.hypo-listTable td{border:1px solid #ddd;padding:3px 5px}.hypo-select{-moz-appearance:none;-webkit-appearance:none;appearance:none;display:inline-block;padding:0 .8em;cursor:pointer;line-height:1.4;font-size:1em;color:#333;border-radius:4px;background-color:#f7f9fb;border:solid 1px #0060af;box-shadow:0 3px 3px -2px rgba(3,29,41,.35);background-image:linear-gradient(45deg,transparent 50%,rgba(0,0,0,.4) 50%),linear-gradient(135deg,rgba(0,0,0,.4) 50%,transparent 50%);background-size:5px 5px,5px 5px;background-position:calc(100% - 15px) 50%,calc(100% - 10px) 50%;background-repeat:no-repeat}.hypo-select:focus{outline:0;border-color:#a3d4ff}.hypo-select::-ms-expand{display:none}.hypo-input{border-radius:.25rem;border:1px solid #1b2538;padding:.1em .2em}.box{padding:.5em 1em;margin:0;border:solid 2px grey;line-height:1.4}.smbox{padding:.3em 0 0;margin:0;display:inline-block}
</style>
<style>
@charset "UTF-8";.pacifictsunami-free-space{-webkit-user-select:none;user-select:none;touch-action:none}.pacifictsunami-free-space p{margin-bottom:.5em}.pacifictsunami-contents-info{margin-bottom:0;color:red}.pacifictsunami-contents-info span{text-decoration:underline}#pacifictsunami-next[data-value="0"],#pacifictsunami-previous[data-value="0"],div.pacifictsunami-disable{cursor:inherit;pointer-events:none;background:grey}@media (max-width:576px){div#pacifictsunami-latest{display:block}div#pacifictsunami-previous{display:block;margin-bottom:5px}div#pacifictsunami-next{display:block}}
</style>
  </head>
  <body>
    <div id="unitmap-loading">
      <div><p class="unitmap-harerun"><span></span></p><p>申し訳ございません。ページの読み込みに失敗しました。<br>通信状況によってはこのページが表示されることがありますので、その場合はリロードをお願いします。</p></div>
      <div><p class="unitmap-hashirun"><span></span></p><p>N o w &nbsp; L o a d i n g . . .</p></div>
    </div>
    <div id="unitmap-ad"></div>
    <div id="unitmap-header"></div>
    <div id="unitmap-help" class="unitmap-void"></div>
    <div id="unitmap-print"></div>
    <div id="unitmap-message"></div>
    <!-- unitmap -->
    <div id="unitmap-infotime"></div>
    <div id="unitmap-attribution"></div>
    <div class="unitmap-information-space">
      <div id="unitmap-centertext"></div>
      <span id="unitmap-contentsinfo-toggle"></span>
      <div id="unitmap-contentsinfo"></div>
      <span id="unitmap-freespace-toggle"></span>
      <div id="unitmap-freespace"></div>
    </div>
    <div id="unitmap-switches">
      <ul>
        <li id="unitmap-explainbutton" class="unitmap-void"><img src="common/image/icon_explain.svg"></li>
        <li id="unitmap-textinfobutton" class="unitmap-void"><img src="common/image/icon_more.svg"></li>
        <li id="unitmap-legendbutton" class="unitmap-void"><img src="common/image/icon_legend.svg"></li>
      </ul>
      <div id="unitmap-selector">
        <div id="unitmap-legend"></div>
        <div id="unitmap-explain"></div>
        <div id="unitmap-textinfo"></div>
      </div>
    </div>
    <div id="unitmap-timeslider"></div>
    <div id="unitmap"></div>
    <div id="unitmap-background-color"></div>

    <script src="common/lib/jquery-3.4.1.min.js"></script>
    <script src="common/lib/promise-6.1.0.min.js"></script>
    <script src="common/lib/leaflet-src.js"></script>
    <script src="common/lib/Leaflet.VectorGrid.bundled.js"></script>
<script>
(function(root){"use strict";var JMAWebUtility;var Common,res2json,constRename,parallelRequest,setDefaultOffset,padding,_gengo,_gengoYear,_youbi,_zenkaku,strftime,includeFile,loadFile,loadScript,Area,hashController,dateImpl,Input;var defaultOffset=9;var reiwa=new Date("2019-05-01T00:00:00+09:00");var heisei=new Date("1989-01-08T00:00:00+09:00");var showa=new Date("1926-12-25T00:00:00+09:00");var weekTable=["日","月","火","水","木","金","土"];var weekEnglishTable=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var monthEnglishTableFull=["January","February","March","April","May","June","July","August","September","October","November","December"];var monthEnglishTableShort=["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."];var CommonFunction=function(value){this.__value__=value};Common={escapeMap:function(){return{"&":"&aip;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}},createEscaper:function(map){var escaper=function(match){return map[match]};var source="(?:"+Object.keys(map).join("|")+")";var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,"g");return function(string){string=string===null?"":String(string);return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}},unescapeMap:function(){return Common.invert(Common.escapeMap())},escape:function(string){return Common.createEscaper(Common.escapeMap())(string)},unescape:function(string){return Common.createEscaper(Common.unescapeMap())(string)},memoize:function(func){var memo={};var f=function(key){if(Common.invalid(memo[String(key)])){memo[String(key)]=func.apply(null,arguments)}return memo[String(key)]};return f},chain:function(value){if(typeof value!=="object")return value;if(value instanceof CommonFunction)return value;return new CommonFunction(value)},each:function(collection,callback){var i,length;if(collection instanceof jQuery){collection.each(function(index,value){callback(value,index)})}else if(Common.isArrayLike(collection)){length=collection.length;for(i=0;i<length;i+=1){if(callback(collection[i],i)===false)break}}else{for(i in collection){if(!Object.prototype.hasOwnProperty.call(collection,i))continue;if(callback(i,collection[i])===false)break}}},eachValue:function(obj,callback){Common.each(obj,function(k,v){callback(v,k)})},eachIndex:function(array,callback){Common.each(array,function(value,i){callback(i,value)})},findIndex:function(array,callback){var rtn=-1;Common.each(array,function(value,i){if(!callback(value,i))return undefined;rtn=i;return false});return rtn},isArrayLike:function(obj){var length=obj&&obj.length;if(obj instanceof Array)return true;if(typeof obj==="string")return false;if(typeof obj==="function"||obj===root)return false;return typeof length==="number"&&length>0&&length-1 in obj},map:function(collection,callback){var rtn=[];if(Common.isArrayLike(collection)){Common.each(collection,function(value,index){var result=callback(value,index);if(result!==undefined)rtn.push(result)})}else{Common.each(collection,function(key,value){var result=callback(key,value);if(result!==undefined)rtn.push(result)})}return rtn},flatMap:function(collection,callback){return Common.chain(collection).map(callback).flatten(1).value()},keys:function(collection){return Common.map(collection,function(k,_v){return k})},values:function(collection){return Common.map(collection,function(_k,v){return v})},pick:function(collection,keys){var rtn={};if(arguments.length>=2){keys=Common.flatten(Array.prototype.slice.call(arguments,1))}Common.each(collection,function(k,v){if(Common.contains(keys,k))rtn[k]=v});return rtn},choice:function(collection,callback){var obj=Common.deepClone(collection);if(typeof callback!=="function")return obj;return Common.chain(obj).toArray().filter(function(value){return callback(value[0],value[1])}).toHash().value()},omit:function(collection,keys){var rtn={};if(arguments.length>=2){keys=Common.flatten(Array.prototype.slice.call(arguments,1))}Common.each(collection,function(k,v){if(!Common.contains(keys,k))rtn[k]=v});return rtn},find:function(array,callback){var rtn=null;Common.each(array,function(value){if(!callback(value))return undefined;rtn=value;return false});return rtn},filter:function(array,callback){var rtn=[];Common.each(array,function(value,i){if(callback(value,i))rtn.push(value)});return rtn},groupBy:function(array,callback){var rtn={};Common.each(array,function(value){var key=callback(value);rtn[key]=rtn[key]||[];rtn[key].push(value)});return rtn},count:function(array,callback){var rtn=0;Common.each(array,function(v,i){if(callback(v,i))rtn+=1});return rtn},countBy:function(array,callback){var rtn={};Common.each(array,function(value){var key=callback(value);rtn[key]=rtn[key]||0;rtn[key]+=1});return rtn},sortBy:function(array,callback){if(!callback)callback=function(v){return v};var rtn=Array.prototype.sort.call(array,function(value1,value2){var v1=callback(value1);var v2=callback(value2);if(v1 instanceof Array&&v2 instanceof Array){var comparison=Common.find(Common.zip(v1,v2),function(pair){if(pair[0]!==pair[1])return true});if(!comparison)return 0;v1=comparison[0];v2=comparison[1]}return v1===v2?0:v1>v2?1:-1});return rtn},template:function(text,setting){var rexp;var key;var rtn=text;for(key in setting){if(Object.prototype.hasOwnProperty.call(setting,key)){rexp=new RegExp("<%= *"+key+" *%>","g");rtn=rtn.replace(rexp,setting[key])}}return rtn},contains:function(array,v){var rtn=false;Common.each(array,function(value){if(value!==v)return undefined;rtn=true;return false});return rtn},compact:function(array){var rtn=[];Common.each(array,function(value){if(value)rtn.push(value)});return rtn},reduce:function(array,acc,callback){var rtn=acc;Common.each(array,function(value){rtn=callback(rtn,value)});return rtn},some:function(array,callback){return Common.reduce(array,false,function(acc,value){return acc||callback(value)})},all:function(array,callback){return Common.reduce(array,true,function(acc,value){return acc&&callback(value)})},reject:function(array,callback){return Common.filter(array,function(value,i){return!callback(value,i)})},flatten:function(array,level,_acc){var acc=_acc||[];if(!Common.isArrayLike(array)){acc.push(array);return undefined}if(Common.valid(level)&&level<0){acc.push(array);return undefined}if(Common.valid(level))level-=1;Common.each(array,function(value){Common.flatten(value,level,acc)});return acc},transformValues:function(object,callback){var rtn={};Common.each(object,function(key,value){rtn[key]=callback(value,key)});return rtn},uniq:function(array,callback){var rtn=[];var exists={};callback=callback||function(value){return typeof value+value};Common.each(array,function(value){var v=callback(value);if(!exists[v]){exists[v]=true;rtn.push(value)}});return rtn},first:function(array,size){var rtn;if(Common.invalid(size))return array[0];rtn=Array.prototype.slice.call(array,0,size);return rtn},last:function(array,size){if(Common.invalid(size))return array[array.length-1];if(size>=array.length)return array;return Array.prototype.slice.call(array,array.length-size,array.length)},drop:function(array,size){var rtn=[];if(Common.invalid(size))return array;if(size>=array.length)return[];Common.each(array,function(v,i){if(i<size)return;rtn.push(v)});return rtn},dropWhile:function(array,callback){if(array.length===0)return array;return callback(array[0])?Common.dropWhile(Common.drop(array,1),callback):array},takeWhile:function(array,callback,_memo){if(array.length===0)return array;_memo=_memo||[];return callback(array[0])?Common.takeWhile(Common.drop(array,1),callback,Common.concat(_memo,[array[0]])):_memo},clone:function(collection){var rtn;if(Common.isArrayLike(collection)){rtn=[];Common.each(collection,function(value){rtn.push(value)})}else{rtn={};Common.each(collection,function(key,value){rtn[key]=value})}return rtn},deepClone:function(collection){if(collection instanceof Array){return Common.map(collection,function(v){return Common.deepClone(v)})}if(typeof collection==="object"){return Common.transformValues(collection,function(v){return Common.deepClone(v)})}return collection},where:function(objects,pair){var pairKeys=Object.keys(pair);return Common.filter(objects,function(object){return Common.all(pairKeys,function(key){return object[key]===pair[key]})})},findWhere:function(objects,pair){var pairKeys=Object.keys(pair);return Common.find(objects,function(object){return Common.all(pairKeys,function(key){return object[key]===pair[key]})})},invoke:function(){var arg=Array.prototype.slice.call(arguments);var array=arg[0];var method=arg[1];var args=arg.slice(2);return Common.map(array,function(value){if(typeof value[method]!=="function"){return undefined}return value[method].apply(value,args)})},pluck:function(objects,key){return Common.map(objects,function(object){return object[key]})},times:function(num,callback){var i;for(i=0;i<num;i+=1){callback(i)}},period:function(start,end,callback){var i;for(i=start;i<end;i+=1){callback(i)}},repeat:function(str,num){var rtn="";var n=typeof num==="undefined"?0:num;Common.times(n,function(){rtn+=str});return rtn},maxBy:function(array,callback){var rtn=null;var max;Common.each(array,function(value){var v=callback(value);if(max===undefined||max<v){max=v;rtn=value}});return rtn},minBy:function(array,callback){var rtn=null;var min;Common.each(array,function(value){var v=callback(value);if(min===undefined||min>v){min=v;rtn=value}});return rtn},max:function(array,callback){var rtn=null;callback=callback||function(v){return v};Common.each(array,function(value){var v=callback(value);if(Common.invalid(v))return;if(rtn===null||rtn<v)rtn=v});return rtn},min:function(array,callback){var rtn=null;callback=callback||function(v){return v};Common.each(array,function(value){var v=callback(value);if(Common.invalid(v))return;if(rtn===null||rtn>v)rtn=v});return rtn},indexBy:function(objects,key){return Common.groupBy(objects,function(object){return object[key]})},merge:function(){var rtn={};Array.prototype.forEach.call(arguments,function(hash){Common.each(hash,function(key,value){rtn[key]=value})});return rtn},invalid:function(object){return typeof object==="undefined"||object===null||object===false||typeof object==="number"&&isNaN(object)},valid:function(object){return!Common.invalid(object)},concat:function(){var rtn=[];Common.each(arguments,function(array){Common.each(array,function(value){rtn.push(value)})});return rtn},reverse:function(array){return Common.reduce(array,[],function(acc,value){return Common.concat([value],acc)})},toHash:function(array){var rtn={};Common.each(array,function(v){rtn[v[0]]=v[1]});return rtn},partition:function(array,callback){return Common.chain(array).groupBy(callback).map(function(bool,arr){return[bool,arr]}).sortBy(function(a){return a[0]}).reverse().map(function(a){return[a[1]]}).value()},toArray:function(object){return Common.map(object,function(k,v){return[k,v]})},zip:function(){var args=arguments;var maxArray=Common.maxBy(args,function(array){return array.length});return Common.map(maxArray,function(_v,i){return Common.map(args,function(arg){return Common.valid(arg[i])?arg[i]:null})})},zipWith:function(array1,array2,callback){var rtn=[];Common.each(Common.zip(array1,array2),function(pair){rtn.push(callback(pair[0],pair[1]))});return rtn},flip:function(func){return function(b,a){return func(a,b)}},curry:function(func){return function partial(){var args=Array.prototype.slice.call(arguments);return func.length<=args.length?func.apply(null,args):function(){var retArgs=Array.prototype.slice.call(arguments);return partial.apply(null,Common.concat(args,retArgs))}}},compose:function(){var functions=arguments;return function(){var args=arguments;return Common.chain(functions).reverse().reduce(args,function(acc,f){return[f.apply(null,acc)]})[0]}},range:function(start,end,step){var rtn=[];var isIncreasing=start<=end;var index=start;if(isIncreasing){if(step<=0)return rtn;while(index<=end){rtn.push(index);index+=step}}else{if(step>=0)return rtn;while(index>=end){rtn.push(index);index+=step}}return rtn},getRange:function(array,startIndex,endIndex){var rtn=[];var i;if(endIndex>=array.length-1)endIndex=array.length-1;for(i=startIndex;i<=endIndex;i++){rtn.push(array[i])}return rtn},invert:function(object){return Common.chain(object).map(function(k,v){return[v,k]}).toHash().value()},sum:function(array,callback){return Common.reduce(array,0,function(acc,val){var v=callback?callback(val):val;return Common.valid(v)?acc+v:acc})},pretty:function(obj,_depth){var depth=Common.valid(_depth)?_depth:0;var space=Common.repeat(" ",depth*2);var type=typeof obj;if(obj instanceof Array){return space+"[\n"+Common.map(obj,function(v){return Common.pretty(v,depth+1)}).join(",\n")+"\n"+space+"]"}if(type==="object"){return space+"{\n"+Common.map(obj,function(k,v){return space+"  "+k+": "+Common.pretty(v,depth+1).trim()}).join(",\n")+"\n"+space+"}"}if(type==="string")return'"'+obj+'"';return space+obj}};Common.expand=Common.chain;CommonFunction.prototype={each:function(callback){Common.each(this.__value__,callback);return this},map:function(callback){return Common.chain(Common.map(this.__value__,callback))},flatMap:function(callback){return Common.chain(Common.flatMap(this.__value__,callback))},keys:function(){return Common.chain(Common.keys(this.__value__))},values:function(){return Common.chain(Common.values(this.__value__))},eachValue:function(callback){Common.eachValue(this.__value__,callback);return this},eachIndex:function(callback){Common.eachValue(this.__value__,callback)},filter:function(callback){return Common.chain(Common.filter(this.__value__,callback))},reject:function(callback){return Common.chain(Common.reject(this.__value__,callback))},getRange:function(startIndex,endIndex){return Common.chain(Common.getRange(this.__value__,startIndex,endIndex))},isArrayLike:function(){return Common.isArrayLike(this.__value__)},find:function(callback){return Common.find(this.__value__,callback)},findIndex:function(callback){return Common.findIndex(this.__value__,callback)},groupBy:function(callback){return Common.chain(Common.groupBy(this.__value__,callback))},countBy:function(callback){return Common.chain(Common.countBy(this.__value__,callback))},sortBy:function(callback){return Common.chain(Common.sortBy(this.__value__,callback))},contains:function(v){return Common.contains(this.__value__,v)},compact:function(){return Common.chain(Common.compact(this.__value__))},reduce:function(acc,callback){return Common.reduce(this.__value__,acc,callback)},some:function(callback){return Common.some(this.__value__,callback)},all:function(callback){return Common.all(this.__value__,callback)},flatten:function(level){return Common.chain(Common.flatten(this.__value__,level))},transformValues:function(callback){return Common.chain(Common.transformValues(this.__value__,callback))},uniq:function(callback){return Common.chain(Common.uniq(this.__value__,callback))},first:function(size){if(Common.invalid(size))return this.__value__[0];return Common.chain(Common.first(this.__value__,size))},drop:function(size){return Common.chain(Common.drop(this.__value__,size))},dropWhile:function(callback){return Common.chain(Common.dropWhile(this.__value__,callback))},takeWhile:function(callback){return Common.chain(Common.takeWhile(this.__value__,callback))},tap:function(callback){callback(this.__value__);return this},clone:function(){return Common.chain(Common.clone(this.__value__))},deepClone:function(){return Common.chain(Common.deepClone(this.__value__))},where:function(pair){return Common.chain(Common.where(this.__value__,pair))},findWhere:function(pair){return Common.findWhere(this.__value__,pair)},invoke:function(){var v=Common.clone(this.__value__);var array=[v];Common.each(arguments,function(arg){array.push(arg)});return Common.chain(Common.invoke.apply(null,array))},pluck:function(key){return Common.chain(Common.pluck(this.__value__,key))},choice:function(callback){return Common.chain(Common.choice(this.__value__,callback))},maxBy:function(callback){return Common.maxBy(this.__value__,callback)},minBy:function(callback){return Common.minBy(this.__value__,callback)},max:function(callback){return Common.max(this.__value__,callback)},min:function(callback){return Common.min(this.__value__,callback)},indexBy:function(key){return Common.chain(Common.indexBy(this.__value__,key))},concat:function(){var args=Common.concat([this.__value__],arguments);return Common.chain(Common.concat.apply(null,args))},reverse:function(){return Common.chain(Common.reverse(this.__value__))},toHash:function(){return Common.chain(Common.toHash(this.__value__))},toArray:function(){return Common.chain(Common.toArray(this.__value__))},partition:function(callback){return Common.chain(Common.partition(this.__value__,callback))},size:function(){return this.__value__.length},zip:function(){var args=Common.concat([this.__value__],arguments);return Common.chain(Common.zip.apply(null,args))},invert:function(){return Common.chain(Common.invert(this.__value__))},sum:function(callback){return Common.sum(this.__value__,callback)},value:function(){return this.__value__},plain:function(){return this.__value__}};res2json=function(url,res){if(/.(geo)?json$/.test(url.split(/\?|#/)[0])&&typeof res==="string"){try{return JSON.parse(res)}catch(e){console.error("JSONの解析に失敗",url,e);return null}}return res};constRename=function(constJson,url){var rtn=url;Common.each(constJson,function(key,val){var m=url.match(new RegExp(key));if(!m)return true;rtn=rtn.replace(key,val);return false});return rtn};var appendTimeQuery=function(url,timeString){var values=url.split("?");if(values.length===1)return url+"?__time__="+timeString;var params=Common.chain(values[1].split("&")).map(function(param){return param.split("=")}).toHash().value();params["__time__"]=timeString;var query=Common.map(params,function(k,v){return k+"="+v}).join("&");return values[0]+"?"+query};parallelRequest=function(_requests,callback){var results={};var loaded={};var requestTimeString=strftime(new Date,"%Y%m%d%H%M",0);var requests=Common.transformValues(_requests,function(value){if(value instanceof Array){return Common.map(value,function(v){return appendTimeQuery(v,requestTimeString)})}return appendTimeQuery(value,requestTimeString)});var called=false;var wrappedCallback=function(data){if(called)return;called=true;callback(data)};var checkLoaded=function(isLoaded){return Common.all(isLoaded,function(key){return isLoaded[key]})};Common.each(requests,function(key){if(requests[key]instanceof Array){Common.each(requests[key],function(_v,i){loaded[key+i]=false})}else{loaded[key]=false}});Common.each(requests,function(key){if(requests[key]instanceof Array){results[key]=[];Common.each(requests[key],function(request,i){$.ajax({url:request}).done(function(data){results[key][i]=res2json(requests[key][i],data);loaded[key+i]=true;if(checkLoaded(loaded))wrappedCallback(results)}).fail(function(jqXHR,textStatus,errorThrown){console.error("ファイルの取得に失敗",request,jqXHR.responseText,textStatus,errorThrown);results[key][i]=null;loaded[key+i]=true;if(checkLoaded(loaded))wrappedCallback(results)})})}else{$.ajax({url:requests[key]}).done(function(data){results[key]=res2json(requests[key],data);loaded[key]=true;if(checkLoaded(loaded))wrappedCallback(results)}).fail(function(jqXHR,textStatus,errorThrown){console.error("ファイルの取得に失敗",requests[key],jqXHR.responseText,textStatus,errorThrown);results[key]=null;loaded[key]=true;if(checkLoaded(loaded))wrappedCallback(results)})}})};setDefaultOffset=function(offset){if(offset<-24||offset>24){return false}defaultOffset=offset;return true};padding=function(digit,length){var zeros=Common.repeat("0",length);return(zeros+digit).substr(-length)};_gengo=function(date){var d=new Date(date.getTime());if(d.getTime()>=reiwa.getTime())return"令和";if(d.getTime()>=heisei.getTime())return"平成";if(d.getTime()>=showa.getTime())return"昭和";return""};_gengoYear=function(date,offset){var d=new Date(date.getTime());var y=null;if(d.getTime()>=reiwa.getTime()){d.setHours(d.getHours()+offset);y=d.getUTCFullYear()-reiwa.getFullYear()+1}else if(d.getTime()>=heisei.getTime()){d.setHours(d.getHours()+offset);y=d.getUTCFullYear()-heisei.getFullYear()+1}else if(d.getTime()>=showa.getTime()){d.setHours(d.getHours()+offset);y=d.getUTCFullYear()-showa.getFullYear()+1}return y===1?"元":y};_youbi=function(num,lang){if(num<0||num>6)return"";if(lang==="en")return weekEnglishTable[num];return weekTable[num]};_zenkaku=function(str){return String(str).replace(/0/g,"０").replace(/1/g,"１").replace(/2/g,"２").replace(/3/g,"３").replace(/4/g,"４").replace(/5/g,"５").replace(/6/g,"６").replace(/7/g,"７").replace(/8/g,"８").replace(/9/g,"９")};var preDate=function(date){var d=new Date(date);d.setDate(d.getDate()-1);return d};var isMidnight=function(date){return date.getUTCHours()===0&&date.getUTCMinutes()===0};strftime=function(date,format,_offset){var offset=defaultOffset;var d=new Date(date.getTime());if(typeof _offset!=="undefined")offset=_offset;d.setHours(d.getHours()+offset);return format.replace(/%DATE/g,"%Y%m%d%H%M").replace(/%Yp/g,function(){return padding((isMidnight(d)?preDate(d):d).getUTCFullYear(),4)}).replace(/%Y/g,function(){return padding(d.getUTCFullYear(),4)}).replace(/%mp/g,function(){return padding((isMidnight(d)?preDate(d):d).getUTCMonth()+1,2)}).replace(/%m/g,function(){return padding(d.getUTCMonth()+1,2)}).replace(/%EFmp/g,function(){return monthEnglishTableFull[(isMidnight(d)?preDate(d):d).getUTCMonth()]}).replace(/%ESmp/g,function(){return monthEnglishTableShort[(isMidnight(d)?preDate(d):d).getUTCMonth()]}).replace(/%EFm/g,function(){return monthEnglishTableFull[d.getUTCMonth()]}).replace(/%ESm/g,function(){return monthEnglishTableShort[d.getUTCMonth()]}).replace(/%dp/g,function(){return padding((isMidnight(d)?preDate(d):d).getUTCDate(),2)}).replace(/%d/g,function(){return padding(d.getUTCDate(),2)}).replace(/%Hp/g,function(){return isMidnight(d)?"24":padding(d.getUTCHours(),2)}).replace(/%H/g,function(){return padding(d.getUTCHours(),2)}).replace(/%M/g,function(){return padding(d.getUTCMinutes(),2)}).replace(/%S/g,function(){return padding(d.getUTCSeconds(),2)}).replace(/%GG/g,function(){return _gengo(d)}).replace(/%GY/g,function(){return _zenkaku(_gengoYear(d,offset))}).replace(/%Zm/g,function(){return _zenkaku(d.getUTCMonth()+1)}).replace(/%Zd/g,function(){return _zenkaku(d.getUTCDate())}).replace(/%ZH/g,function(){return _zenkaku(d.getUTCHours())}).replace(/%ZM/g,function(){return _zenkaku(d.getUTCMinutes())}).replace(/%2ZH/g,function(){return _zenkaku(padding(d.getUTCHours(),2))}).replace(/%2ZM/g,function(){return _zenkaku(padding(d.getUTCMinutes(),2))}).replace(/%ZS/g,function(){return _zenkaku(d.getUTCSeconds())}).replace(/%W/g,function(){return _youbi(d.getUTCDay())}).replace(/%EW/g,function(){return _youbi(d.getUTCDay(),"en").slice(0,3)})};includeFile=function(requests){requests.forEach(function(request){$.ajax({url:request.html}).done(function(text){$("#"+request.id).append($(text));if(request.scripts instanceof Array){request.scripts.forEach(function(url){var script=document.createElement("script");script.src=url;script.type="application/javascript";document.getElementsByTagName("body")[0].appendChild(script)})}})})};loadFile=function(url,originalCallback,template){var templateObject=template;var callback=originalCallback;if(typeof templateObject==="undefined"){templateObject={}}if(typeof callback==="undefined"){callback=function(){console.log("コールバック関数が与えられていません。: loadFile")}}$.ajax({url:url}).done(function(text){callback(Common.template(text,templateObject))}).fail(function(){callback("")})};loadScript=function(url,id){var script=document.createElement("script");id=id||url.replace(/[\/\?=&]/g,"");$("#"+id).remove();script.src=url;script.id=id;script.type="application/javascript";document.getElementsByTagName("body")[0].appendChild(script)};Area=function(){var ranks=["centers","offices","class10s","class15s","class20s"];var ranksSize=ranks.length;var rankIndex=function(rankName){var i;for(i=0;i<ranksSize;i+=1){if(rankName===ranks[i])return i}return-1};var parentCode=function(areas,id,from){var index=rankIndex(from);if(index<1||!areas[from][id])return null;return areas[from][id].parent};var searchAncestor=function(areas,id,fromIndex,toIndex){var currentCode=id;var currentRank=ranks[fromIndex];var i;var data;for(i=fromIndex;i>toIndex;i-=1){currentCode=parentCode(areas,currentCode,currentRank);currentRank=ranks[i-1]}data=Common.clone(areas[currentRank][currentCode]);data.code=currentCode;return data};var childrens=function(obj,keys){var rtn=[];keys.forEach(function(key){if(obj[key]){rtn=rtn.concat(obj[key].children)}});return rtn};var collect=function(obj,keys){var rtn=[];keys.forEach(function(key){obj[key].code=key;rtn.push(obj[key])});return rtn};var searchDecendants=function(areas,id,fromIndex,toIndex){var currentRankIndex=null;var currentRank=null;var currentChildrenIds=[id];var currentChildren=null;var nextRank=null;for(currentRankIndex=fromIndex;currentRankIndex<toIndex;currentRankIndex+=1){currentRank=ranks[currentRankIndex];nextRank=ranks[currentRankIndex+1];currentChildrenIds=childrens(areas[currentRank],currentChildrenIds);currentChildren=collect(areas[nextRank],currentChildrenIds)}return currentChildren};var convert=function(areas,id,originalFrom,originalTo){var from=originalFrom;var to=originalTo;var area;var tmpHash={};var fromIndex;var toIndex;if(typeof to==="undefined")to=from;if(to==="japan"){return{area_type:"japan",code:"010000",name:"全国",enName:"Nationwide"}}if(from===to){area=areas[from][id];if(!area)return{};area.code=id;return area}if(from==="japan"){Object.keys(areas.centers).forEach(function(centerCode){var codes=convertCode(areas,centerCode,"centers",to);Common.flatten([codes]).forEach(function(code){tmpHash[code]=true})});return Object.keys(tmpHash).map(function(code){return areas[to][code]})}if(!Common.contains(ranks,from))return{};fromIndex=rankIndex(from);toIndex=rankIndex(to);if(!id){console.error("idは必須です");return{}}if(fromIndex===-1){console.error("変換元が誤っています");return{}}if(toIndex===-1){console.error("変換先が誤っています");return{}}if(fromIndex<toIndex){return searchDecendants(areas,id,fromIndex,toIndex)}return searchAncestor(areas,id,fromIndex,toIndex)};var convertProperty=function(areas,id,from,to,key){var converted=convert(areas,id,from,to);if(converted instanceof Array)return Common.pluck(converted,key);return converted[key]};var convertName=function(areas,id,from,to){return convertProperty(areas,id,from,to,"name")};var convertENName=function(areas,id,from,to){return convertProperty(areas,id,from,to,"enName")};var convertOfficeName=function(areas,id,from,to){return convertProperty(areas,id,from,to,"officeName")};var convertCode=function(areas,id,from,to){return convertProperty(areas,id,from,to,"code")};var changeAreaHash=function(areas,targetType){var hash=hashController.getHashData();var targetAreaCode;var str;if(!Common.contains(ranks,targetType)){targetType=hash["area_type"]}if(Common.contains(ranks,hash["area_type"])){targetAreaCode=convertCode(areas,hash["area_code"],hash["area_type"],targetType);if(!targetAreaCode){hash["area_type"]="japan";hash["area_code"]="010000"}else if(!(targetAreaCode instanceof Array)){hash["area_type"]=targetType;hash["area_code"]=targetAreaCode}}else{hash["area_type"]="japan";hash["area_code"]="010000"}str=hashController.hashString(hash);history.replaceState(null,null,location.href.split("#")[0]+str)};var isValidArea=function(areas,areaType,areaCode){if(areaType==="japan"&&areaCode==="010000")return true;if(areas[areaType]&&areas[areaType][areaCode])return true;return false};var AreaConverter=function(areas){this.areas=areas};AreaConverter.prototype.area=function(){return this.areas};AreaConverter.prototype.convert=function(id,from,to){return convert(this.areas,id,from,to)};AreaConverter.prototype.convertName=function(id,from,to){return convertName(this.areas,id,from,to)};AreaConverter.prototype.convertENName=function(id,from,to){return convertENName(this.areas,id,from,to)};AreaConverter.prototype.convertOfficeName=function(id,from,to){return convertOfficeName(this.areas,id,from,to)};AreaConverter.prototype.convertCode=function(id,from,to){return convertCode(this.areas,id,from,to)};AreaConverter.prototype.convertProperty=function(id,from,to,key){return convertProperty(this.areas,id,from,to,key)};AreaConverter.prototype.changeAreaHash=function(targetType){changeAreaHash(this.areas,targetType)};AreaConverter.prototype.isValidArea=function(targetType,targetCode){return isValidArea(this.areas,targetType,targetCode)};return{AreaConverter:AreaConverter,convert:convert,convertName:convertName,convertENName:convertENName,convertOfficeName:convertOfficeName,convertCode:convertCode,convertProperty:convertProperty,changeAreaHash:changeAreaHash,isValidArea:isValidArea}}();var Translator=function(){var DICTIONARY={"%Y年%m月%d日%H時":"%Y/%m/%d %H:00 JST","%Y年%m月%d日%H時%M分":"%Y/%m/%d %H:%M JST","%Y年%m月%d日%H時%M分%S秒":"%Y/%m/%d %H:%M:%S JST","%Yp年%mp月%dp日%Hp時%M分":"%Yp/%mp/%dp %Hp:%M JST","%Y年%m月%d日%H時発表":"Issued at %Y/%m/%d %H:00 JST","%Y年%m月%d日%H時%M分発表":"Issued at %Y/%m/%d %H:%M JST","%Y年%m月%d日%H時%M分現在":"Updated at %Y/%m/%d %H:%M JST"};var _Translator=function(dictionary,lang){this.setLang(lang);this.dictionary={};this.addDictionary(DICTIONARY);if(dictionary)this.addDictionary(dictionary)};_Translator.prototype={addDictionary:function(dictionary){var that=this;JMAWebUtility.common.each(dictionary,function(key,value){that.dictionary[key]=value})},setLang:function(lang){if(lang){this.lang=lang;return}this.lang=function(){if(JMAWebUtility.hashController.getHashData().lang==="en"){return"en"}return"ja"}()},getLang:function(){return this.lang},tr:function(){var that=this;return JMAWebUtility.common.map(arguments,function(ja){if(that.lang==="ja")return ja;return that.dictionary[ja]||ja}).join(that.lang==="ja"?"":" ")},select:function(ja,en){if(this.lang==="ja")return ja;return en},space:function(){if(this.lang==="ja")return"";return" "},isJapanese:function(){return this.lang==="ja"},isEnglish:function(){return this.lang==="en"},areaName:function(areaJson,areaType,areaCode){if(this.lang==="ja")return areaJson[areaType][areaCode].name;return areaJson[areaType][areaCode].enName}};return _Translator}();hashController=function(){var getHashData=function(originalHashString){var hashData={};var others=[];var hashString=originalHashString;if(arguments.length===0)hashString=document.location.hash;if(typeof hashString!=="string"||hashString.length<2)return{};if(!hashString.match(/^#/))hashString="#"+hashString;hashString.slice(1).split("&").map(function(kv){var keyValue=kv.split("=");var splitedValue;if(keyValue.length<2){if(kv.trim()!=="")others.push(kv.trim());return null}splitedValue=keyValue[1].split(",").map(function(v){return v.trim()});if(splitedValue.length>1){if(splitedValue.length===2){if(splitedValue[0]==="")keyValue[1]=[];else if(splitedValue[1]==="")keyValue[1]=[splitedValue[0]];else keyValue[1]=splitedValue}else{keyValue[1]=splitedValue}}return keyValue}).filter(function(item){return item!==null}).forEach(function(keyValue){hashData[keyValue[0]]=keyValue[1]});if(others.length>0)hashData.others=others;return hashData};var fromURL=function(url){if(typeof url!=="string")return{};return getHashData(url.split("#")[1])};var setHashData=function(data,force,replace){var originalHash=hashString(getHashData());var targetHash=hashString(data);if(replace){history.replaceState(null,null,targetHash)}else{document.location.hash=targetHash}if(force&&originalHash===targetHash)$(window).trigger("hashchange")};var changeHashData=function(data,force,replace){var hash=getHashData();Common.each(data,function(key,value){if(value===null){delete hash[key];return}if(typeof value==="undefined")return;hash[key]=value});setHashData(hash,force,replace)};var format=function(value){if(!(value instanceof Array))return value;if(value.length===0)return",";if(value.length===1)return value[0]+",";return value.join(",")};var hashString=function(data){var result=[];var key;var otherString;if(Object.keys(data).length===0)return"";for(key in data){if(Object.prototype.hasOwnProperty.call(data,key)&&key!=="others"){result.push(key+"="+format(data[key]))}}otherString=data.others instanceof Array&&data.others.length>0?data.others.join("&")+"&":"";return"#"+otherString+result.join("&")};return{getHashData:getHashData,fromURL:fromURL,setHashData:setHashData,changeHashData:changeHashData,hashString:hashString}}();dateImpl=function(){var getFullYear=function(date,offset){return getOffsetDate(date,offset).getUTCFullYear()};var getMonth=function(date,offset){return getOffsetDate(date,offset).getUTCMonth()};var getDate=function(date,offset){return getOffsetDate(date,offset).getUTCDate()};var getHours=function(date,offset){return getOffsetDate(date,offset).getUTCHours()};var getMinutes=function(date,offset){return getOffsetDate(date,offset).getUTCMinutes()};var getSeconds=function(date,offset){return getOffsetDate(date,offset).getUTCSeconds()};var getDay=function(date,offset){return getOffsetDate(date,offset).getUTCDay()};var create=function(year,monthIndex,day,hours,minutes,seconds,offset){hours=hours||0;minutes=minutes||0;seconds=seconds||0;offset=-(offset===undefined?defaultOffset:offset);return getOffsetDate(Date.UTC(year,monthIndex,day,hours,minutes,seconds),offset)};var createFromString=function(string,offset){var year=parseInt(string.substr(0,4),10);var monthIndex=parseInt(string.substr(4,2),10)-1;var day=parseInt(string.substr(6,2),10);var hours=parseInt(string.substr(8,2),10);var minutes=parseInt(string.substr(10,2),10);var seconds=parseInt(string.substr(12,2),10);return create(year,monthIndex,day,hours,minutes,seconds,offset)};var getOffsetDate=function(date,offset){var d=new Date(date);offset=offset===undefined?defaultOffset:offset;d.setUTCHours(d.getUTCHours()+offset);return d};return{getFullYear:getFullYear,getMonth:getMonth,getDate:getDate,getHours:getHours,getMinutes:getMinutes,getSeconds:getSeconds,getDay:getDay,create:create,createFromString:createFromString,strftime:strftime,setDefaultOffset:setDefaultOffset}}();Input=function(){var guess=function(str){var zenkaku=str.match(/[Ａ-Ｚａ-ｚ０-９]/);var rtn=str.replace(/[&<>"\\`]/g," ").replace(/[Ａ-Ｚａ-ｚ０-９]/g,function(s){return String.fromCharCode(s.charCodeAt(0)-65248)}).replace(/[ 　]+\|[ 　]+/g,"|");return zenkaku?str2regexpJp(rtn):str2regexpEn(rtn)};var str2regexpEn=function(str){return str.replace(/c[hy]?/gi,"(c[hy]?|ty?)").replace(/jy/gi,"jy?").replace(/zy/gi,"(zy|j)").replace(/tsu/gi,"ts?u").replace(/fu/gi,"[fh]u").replace(/shi/gi,"sh?i").replace(/sh/gi,"s[hy]").replace(/chi/gi,"(ch|t)i").replace(/zi/gi,"[zj]i")};var str2regexpJp=function(str){return str.replace(/cy/gi,"ty").replace(/jy/gi,"j").replace(/zy/g,"j").replace(/sh/gi,"sy").replace(/[\^$]/g,",").replace(/([qwrtpsdfghjklzxcvbnm])/,"っ?$1").replace(/j/g,"じ[ゃぃゅぇょ]").replace(/sy/g,"し[ゃぃゅぇょ]").replace(/ch/g,"ち[ゃゅぇょ]?").replace(/ty/g,"ち[ゃぃゅぇょ]").replace(/dy/g,"ぢ[ゃぃゅぇょ]").replace(/th/g,"て[ゃぃゅぇょ]").replace(/ry/g,"り[ゃぃゅぇょ]").replace(/ky/g,"き[ゃぃゅぇょ]").replace(/ny/g,"に[ゃぃゅぇょ]").replace(/hy/g,"ひ[ゃぃゅぇょ]").replace(/my/g,"み[ゃぃゅぇょ]").replace(/ts/g,"つ[ぁぃぇぉ]?").replace(/k/g,"[かきくけこ]").replace(/s/g,"[さしすせそ]").replace(/t/g,"[たちつてと]").replace(/n/g,"[なにぬねのん]").replace(/h/g,"[はひふへほ]").replace(/m/g,"[まみむめも]").replace(/y/g,"[やいゆえよゃゅょ]").replace(/r/g,"[らりるれろ]").replace(/w/g,"([わを]|(う[ぃぇ]))").replace(/q/g,"(く[ぁぃぇぉ]?)").replace(/p/g,"[ぱぴぷぺぽ]").replace(/b/g,"[ばびぶべぼ]").replace(/z/g,"[ざじずぜぞ]").replace(/d/g,"[だぢづでど]").replace(/f/g,"(ふ[ぁぃぇぉ]?)").replace(/[xl]/g,"[ぁぃぅぇぉゎ]").replace(/v/g,"(ヴ[ぁぃぇぉ]?)").replace(/c/g,"[かしちくせこ]").replace(/g/g,"[がぎぐげご]").replace(/j/g,"(じ[ゃゅぇょ]?)")};return{guess:guess}}();JMAWebUtility={constRename:constRename,parallelRequest:parallelRequest,dateFormatter:{strftime:strftime,setDefaultOffset:setDefaultOffset},hashController:hashController,dom:{load:loadFile,include:includeFile,script:loadScript},area:Area,common:Common,date:dateImpl,input:Input};root.JMAWebUtility=JMAWebUtility;root.Translator=Translator})(typeof window==="object"?window:typeof global==="object"?global:this?this:{});
</script>
<script>
(function(root){"use strict";var Yabane={setMarkerWdr:function(wdrValue,svgstyleclass,svgtitle,svgsize,divClassName,polygonClassName){var polygon=Yabane._setPolygonWind(wdrValue,svgsize,svgstyleclass,polygonClassName);var title=Yabane._setTitle(svgtitle);var svgGroup=Yabane._setG(polygon+title);return Yabane._setSvg(svgsize,svgGroup,divClassName)},_setSvg:function(svgsize,child,className){return'<div class="'+className+'">'+"<svg"+' width="'+svgsize+'"'+' height="'+svgsize+'"'+' xmlns="http://www.w3.org/2000/svg">'+child+"</svg>"+"</div>"},_setG:function(child){return"<g>"+child+"</g>"},_setTitle:function(svgtitle){return"<title>"+svgtitle+"</title>"},_setPolygonWind:function(wdrValue,svgsize,svgstyleclass,className){var polygon="";var i,size,scale,pointlist,translate,classname,rotate;for(i=0;i<2;i+=1){size=svgsize;scale=size/20;pointlist="";pointlist+=-6*scale+","+-8*scale+" ";pointlist+="0,"+-2*scale+" ";pointlist+=6*scale+","+-8*scale+" ";pointlist+="0,"+10*scale;translate=i===0?"translate("+(size/2+1)+", "+(size/2+1)+")":"translate("+size/2+", "+size/2+")";rotate="rotate("+wdrValue*22.5+")";classname=i===0?className+" "+className+"_shadow":className+" "+svgstyleclass;polygon+="<polygon";polygon+=' points="'+pointlist+'"';polygon+=' transform="'+translate+" "+rotate+'"';polygon+=' class="'+classname+'"';polygon+=" />"}return polygon}};root.Yabane=Yabane||{}})(typeof window==="object"?window:typeof global==="object"?global:this?this:{});
</script>
<script>
(function(root){"use strict";var SimpleTable=function(){this.rows=[];this.widthSettings=[]};SimpleTable.prototype={appendRow:function(){this.row=$("<tr>");this.rows.push(this.row);return this.row},prependRow:function(){this.row=$("<tr>");this.rows.unshift(this.row);return this.row},appendCell:function(content){var cell=getCell(content);this.row.append(cell);return cell},prependCell:function(content){var cell=getCell(content);this.row.prepend(cell);return cell},appendMergedCell:function(content){var cell=getCell(content).attr("rowspan",this.rows.length);this.rows[0].append(cell);return cell},prependMergedCell:function(content){var cell=getCell(content).attr("rowspan",this.rows.length);this.rows[0].prepend(cell);return cell},appendHeader:function(content){var cell=getHeader(content);this.row.append(cell);return cell},prependHeader:function(content){var cell=getHeader(content);this.row.prepend(cell);return cell},appendMergedHeader:function(content){var cell=getHeader(content).attr("rowspan",this.rows.length);if(this.rows.length!==0)this.rows[0].append(cell);return cell},prependMergedHeader:function(content){var cell=getHeader(content).attr("rowspan",this.rows.length);if(this.rows.length!==0)this.rows[0].prepend(cell);return cell},appendRows:function(table){this.rows=this.rows.concat(table.rows)},prependRows:function(table){this.rows=table.rows.concat(this.rows)},rowSize:function(){return this.rows.length},addWidths:function(){var that=this;each(arguments,function(arg){that.widthSettings.push(arg)})},make:function(){var table=$("<table>");if(this.widthSettings.length>0){var tr=$("<tr>").addClass("simple-table-hidden-tr").appendTo(table);var styles=calcStyles(this.widthSettings);each(styles,function(style){$("<td>").css(style).css({padding:0,borderBottom:"hidden"}).appendTo(tr)})}each(this.rows,function(row){row.appendTo(table)});return table}};var getCell=function(content){if(content instanceof jQuery&&content[0].tagName==="TD"){return content}return $("<td>").append(content)};var getHeader=function(content){if(content instanceof jQuery&&content[0].tagName==="TH"){return content}return $("<th>").append(content)};var calcStyles=function(args){var widthSettings=[];each(args,function(arg){widthSettings.push(function(){if(arg instanceof Object)return arg;return{width:arg,count:1}}())});var noMinCount=0;var totalWidth=0;each(widthSettings,function(widthSetting){if(widthSetting.width){totalWidth+=widthSetting.width*widthSetting.count}else{noMinCount+=widthSetting.count}});if(noMinCount>0){each(widthSettings,function(widthSetting){if(!widthSetting.width){widthSetting.width=(685-totalWidth)/noMinCount;widthSetting.noMin=true}});totalWidth=685}var styles=[];each(widthSettings,function(widthSetting){times(widthSetting.count,function(){var style={width:widthSetting.width*100/totalWidth+"%"};if(!widthSetting.noMin)style.minWidth=widthSetting.width;styles.push(style)})});return styles};var each=function(array,callback){var i;for(i=0;i<array.length;i+=1)callback(array[i])};var times=function(count,callback){var i;for(i=0;i<count;i+=1)callback()};root.SimpleTable=SimpleTable})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var UC=JMAWebUtility.common;var append=function(target,headerTable,table,fixCount,imagePath){var param=function(){if(!headerTable&&!table&&!fixCount&&!imagePath){return target}else{return{target:target,headerTable:headerTable,table:table,fixCount:fixCount,imagePath:imagePath}}}();var div=$("<div>").addClass("contents-wide-table").appendTo(param.target);if(param.headerTable){param.headerTable.css("border","none").appendTo(div)}var bodyDiv=$("<div>").addClass("contents-wide-table-body").appendTo(div);var fixDiv=$("<div>").addClass("contents-wide-table-fix").appendTo(bodyDiv);var scrollDiv=$("<div>").addClass("contents-wide-table-scroll").appendTo(bodyDiv);param.table.css("border","none");param.table.clone(true).appendTo(fixDiv);param.table.appendTo(scrollDiv);var fixWidth=calcFixWidth(param.table,param.fixCount);fixDiv.css("width",fixWidth);var iconSet=makeIcons(bodyDiv,scrollDiv,param.imagePath);appendIcons(bodyDiv,iconSet);setScroll(bodyDiv,fixDiv,scrollDiv,param.table,fixWidth,iconSet);if(param.initPos==="right"){scrollDiv.scrollLeft(param.table.width()-scrollDiv.width()-fixDiv.width()+1)}$(window).resize(function(){fixWidth=calcFixWidth(param.table,param.fixCount);fixDiv.css("width",fixWidth);setScroll(bodyDiv,fixDiv,scrollDiv,param.table,fixWidth,iconSet)})};var calcFixWidth=function(table,fixCount){var tds=table.find("tr.simple-table-hidden-tr td");return UC.chain(tds).first(fixCount).sum(function(td){return $(td).outerWidth()})+1};var makeIcons=function(bodyDiv,scrollDiv,imagePath){var iconSet={leftIcons:[],rightIcons:[]};var iconNum=Math.ceil(bodyDiv.height()/300);var height=bodyDiv.height()/iconNum;UC.times(iconNum,function(i){var top=height*i+height/2-15;var leftIcon=$("<img>").css("top",top).attr("src",imagePath+"/play_back.svg").addClass("contents-wide-table-icon").click(function(){scrollDiv.animate({scrollLeft:scrollDiv.scrollLeft()-200})});var rightIcon=$("<img>").css("top",top).attr("src",imagePath+"/play_forward.svg").addClass("contents-wide-table-icon").click(function(){scrollDiv.animate({scrollLeft:scrollDiv.scrollLeft()+200})});iconSet.leftIcons.push(leftIcon);iconSet.rightIcons.push(rightIcon)});return iconSet};var appendIcons=function(bodyDiv,iconSet){UC.each(iconSet.leftIcons,function(icon){icon.appendTo(bodyDiv)});UC.each(iconSet.rightIcons,function(icon){icon.appendTo(bodyDiv)})};var setScroll=function(bodyDiv,fixDiv,scrollDiv,table,fixWidth,iconSet){var scrollMode=getScrollMode(bodyDiv,table,fixWidth);if(scrollMode!=="none"){UC.each(iconSet.rightIcons,function(icon){icon.css("left",bodyDiv.width()-40)})}if(scrollMode===scrollDiv.scrollMode)return;scrollDiv.scrollMode=scrollMode;if(scrollMode!=="none"){UC.each(iconSet.leftIcons,function(icon){icon.css("left",scrollMode==="partial"?fixWidth+10:10)})}if(scrollMode==="partial"){fixDiv.css("display","block");scrollDiv.css("margin-left",fixWidth-1);table.css("margin-left",-(fixWidth-1))}else{fixDiv.css("display","none");scrollDiv.css("margin-left",0);table.css("margin-left",0)}if(scrollMode==="none"){scrollDiv.css("cursor","auto");scrollDiv.off("mousedown");scrollDiv.off("mouseup mouseleave");scrollDiv.off("mousemove");scrollDiv.off("scroll")}else{scrollDiv.css("cursor","grab");var scrollPos;$(scrollDiv).on("mousedown",function(e){scrollDiv.css("cursor","grabbing");scrollPos=e.clientX+$(scrollDiv).scrollLeft();return false});$(scrollDiv).on("mouseup mouseleave",function(){scrollDiv.css("cursor","grab");scrollPos=null;return false});$(scrollDiv).on("mousemove",function(e){if(!scrollPos)return true;$(scrollDiv).scrollLeft(scrollPos-e.clientX);return false});$(scrollDiv).on("scroll",function(){setIcons(scrollMode,scrollDiv,iconSet)})}setIcons(scrollMode,scrollDiv,iconSet)};var getScrollMode=function(bodyDiv,table,fixWidth){if(bodyDiv.width()>=table.width()){return"none"}else if(bodyDiv.width()>fixWidth+300){return"partial"}return"whole"};var setIcons=function(scrollMode,scrollDiv,iconSet){var opacityLeft,opacityRight;if(scrollMode==="none"){opacityLeft=0;opacityRight=0}else{opacityLeft=scrollDiv.scrollLeft()===0?0:1;opacityRight=scrollDiv.scrollLeft()===scrollDiv.prop("scrollWidth")-scrollDiv.prop("clientWidth")?0:1}if(opacityLeft!==iconSet.opacityLeft){iconSet.opacityLeft=opacityLeft;UC.each(iconSet.leftIcons,function(icon){icon.stop().animate({opacity:opacityLeft});setCursor(icon,opacityLeft)})}if(opacityRight!==iconSet.opacityRight){iconSet.opacityRight=opacityRight;UC.each(iconSet.rightIcons,function(icon){icon.stop().animate({opacity:opacityRight});setCursor(icon,opacityRight)})}};var setCursor=function(icon,opacity){if(opacity===0){icon.css("cursor","grab")}else{icon.css("cursor","pointer")}};root.WideTable={append:append}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){var Table=function(){this.rowNames=[];this.colNames=[];this.rows={};this.cols={};this.cells={}};Table.prototype.addRowName=function(rowName){this.rowNames.push(rowName)};Table.prototype.addRowNames=function(rowNames){this.rowNames=this.rowNames.concat(rowNames)};Table.prototype.addColName=function(colName){this.colNames.push(colName)};Table.prototype.addColNames=function(colNames){this.colNames=this.colNames.concat(colNames)};Table.prototype.rowSize=function(){return this.rowNames.length};Table.prototype.colSize=function(){return this.colNames.length};Table.prototype.setCell=function(rowName,colName,cell){if(this.cells[rowName]===undefined){this.cells[rowName]={}}this.cells[rowName][colName]=cell};Table.prototype.setRow=function(rowName,cell){this.rows[rowName]=cell};Table.prototype.setCol=function(colName,cell){this.cols[colName]=cell};Table.prototype.make=function(){var self=this;self.setMergedCells();var table=$("<table>");$(self.rowNames).each(function(rowIndex,rowName){var tr=$("<tr>").appendTo(table);$(self.colNames).each(function(colIndex,colName){if(self.mergedCells[rowIndex]!==undefined&&self.mergedCells[rowIndex][colIndex]!==undefined){return}var td=$("<td>").appendTo(tr);if(self.rows[rowName]!==undefined){self.setTd(td,self.rows[rowName])}if(self.cols[colName]!==undefined){self.setTd(td,self.cols[colName])}if(self.cells[rowName]!==undefined&&self.cells[rowName][colName]!==undefined){self.setTd(td,self.cells[rowName][colName])}})});return table};Table.prototype.setTd=function(td,cell){$(Object.keys(cell)).each(function(i,key){var value=cell[key];switch(key){case"text":td.text(value);break;case"html":td.html(value);break;case"elem":td.append(value);break;case"c":td.addClass(value);break;default:td.attr(key,value);break}})};Table.prototype.setMergedCells=function(){var self=this;self.mergedCells={};$(self.rowNames).each(function(rowIndex,rowName){$(self.colNames).each(function(colIndex,colName){if(self.cells[rowName]===undefined||self.cells[rowName][colName]===undefined){return}var cell=self.cells[rowName][colName];var rowSpan=1;var colSpan=1;if(cell["rowspan"]!==undefined){rowSpan=cell["rowspan"]}if(cell["colspan"]!==undefined){colSpan=cell["colspan"]}if(rowSpan===1&&colSpan===1){return}for(var r=rowIndex;r<rowIndex+rowSpan;r++){for(var c=colIndex;c<colIndex+colSpan;c++){if(r===rowIndex&&c===colIndex){continue}if(!self.mergedCells[r]){self.mergedCells[r]={}}self.mergedCells[r][c]=true}}})})};Table.prototype.clone=function(){var table=new Table;table.rowNames=this.rowNames;table.colNames=this.colNames;table.rows={};table.cols={};table.cells={};for(var rowName in this.rows){table.rows[rowName]=this.rows[rowName]}for(var colName in this.cols){table.cols[colName]=this.cols[colName]}for(rowName in this.cells){table.cells[rowName]={};for(colName in this.cells[rowName]){table.cells[rowName][colName]=this.cells[rowName][colName]}}return table};root.Table=Table})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var selectorID="menu-selector";var util=JMAWebUtility;var _c=util.common;var fullScreenCover;var reloadPID;var imgPath="common/image/";var TR=new Translator;var setFullScreenCover=function(){if($(".area-active").length===0){if(fullScreenCover){fullScreenCover.remove();fullScreenCover=null}return}if(fullScreenCover)return;fullScreenCover=$("<div>").addClass("header-background").on("click",function(){$(".area-active").removeClass("area-active");if(fullScreenCover){fullScreenCover.remove();fullScreenCover=null}}).appendTo(document.body)};var contentsClickCallback=function(target,clickCallback,isNotMapPage,basePath){var mapValue=target.attr("data-map-value")===""?null:target.attr("data-map-value");var options,hash,position;$(".area-active").removeClass("area-active");setFullScreenCover();if(!isNotMapPage&&mapValue){if(mapValue==="nishimura_contents"){hash=JMAWebUtility.hashController.getHashData();position=hash.others[0].split("/");location.href=function(){return target.attr("data-url")+"#"+"lat:"+position[1]+"/"+"lon:"+position[2]+"/"+"zoom:"+position[0]}()}else{options=_c.chain(mapValue.split("&").slice(1)).map(function(str){var splited=str.split("=");return[splited[0],splited[1]]}).toHash().value();clickCallback({contents:mapValue.split("&")[0]},options)}}else{location.href=function(){return(target.attr("data-context")==="bosai"?basePath:"")+target.attr("data-url")}()}};var makeContentsList=function(contentsConfig,options,currentContent,clickCallback,isNotMapPage,basePath){var contentsListDiv=$("<div>").addClass("area-map-contents");var config=_c.findWhere(contentsConfig.contents,{id:currentContent});var labelText=config?config[TR.select("name","enName")]:TR.select("コンテンツ変更","Select Contents");var contentsDiv,groups,toggleFlag,realmName;var label=$("<a>").attr({id:"contents-name",class:"area-item-navy"}).appendTo(contentsListDiv).on("click",function(e){var target=$(this);var isShowing=target.parent().attr("class").match(/area-active/);$(".area-active").removeClass("area-active");if(!isShowing){target.parent().toggleClass("area-active")}setFullScreenCover()});if(config&&config.icon){label.append($("<img>").addClass("area-contents-menu-icon").attr("src",basePath+config.icon))}label.append($("<span>").text(options[TR.select("name","enName")]||labelText));contentsDiv=$("<div>").addClass("area-megamenu").attr({"aria-labelledby":"menu_contents"}).appendTo(contentsListDiv);groups=_c.chain(contentsConfig.groups).map(function(group){return[group.type,group]}).toHash().value();toggleFlag=true;realmName=getRealmName();_c.chain(contentsConfig.contents).filter(function(content){return _c.contains(content.realm,realmName)}).groupBy(function(content){return content.type}).transformValues(function(contents){return _c.sortBy(contents,function(content){return-Number(content.priority)})}).map(function(k,v){return[k,v]}).sortBy(function(array){return groups[array[0]].priority}).each(function(array){var contentsList=$("<ul>").addClass("area-contents-menu").appendTo(contentsDiv);var groupName=array[0];var color=toggleFlag?"area-item-white":"area-item-gray";var groupLi=$("<li>").addClass(color).appendTo(contentsList);$("<a>").addClass("area-contents-menu-group-name").append($("<span>").text(groups[groupName][TR.select("name","enName")])).on("click",function(e){$(e.currentTarget).parent().parent().toggleClass("area-group-active");if($(e.currentTarget).parent().parent().siblings().hasClass("area-group-active")){$(e.currentTarget).parent().parent().siblings().removeClass("area-group-active")}}).appendTo(groupLi);toggleFlag=!toggleFlag;_c.each(array[1],function(content){var li=$("<li>").addClass(color).appendTo(contentsList);var contentLabel=$("<a>").append($("<span>").addClass("area-contents-menu-name").text(content[TR.select("name","enName")])).attr({"data-context":content.context,"data-url":content[TR.select("url","enUrl")],"data-map-value":content.mapValue||""}).on("click",function(_e){contentsClickCallback($(_e.currentTarget),clickCallback,isNotMapPage,basePath)}).appendTo(li);if(currentContent===content.id){contentLabel.addClass("area-selected");contentsList.addClass("area-group-active")}if(content.icon){$("<img>").addClass("area-contents-menu-icon").attr({src:basePath+content.icon,title:content[TR.select("name","enName")]}).appendTo(contentLabel)}})});return contentsListDiv};var makeLogoButton=function(basePath){var logoLink=$("<div>").addClass("area-logo");$("<a>").attr({href:basePath+"../",title:TR.select("気象庁ホームページへ","Japan Meteorological Agency")}).append($("<img>").attr({src:basePath+"common/image/logo_small.svg"}).addClass("area-icon")).append($("<img>").attr({src:basePath+"common/image/logo_white.svg"})).appendTo(logoLink);return logoLink};var makeHomeButton=function(basePath){var homeLink=$("<div>").addClass("area-home");$("<a>").attr({href:basePath+TR.select("","#lang=en"),title:"防災ページへ"}).append($("<img>").attr({src:basePath+"common/image/side_home.svg"}).addClass("area-icon")).appendTo(homeLink);return homeLink};var makeMapButton=function(mapURL,basePath){var mapButton=$("<div>").addClass("area-map");var mapButtonA=$("<a>").append($("<img>").attr({src:basePath+imgPath+"side_map.svg",title:TR.select("地図へ","Map Page")}).addClass("area-icon"));mapButtonA.on("click",function(){location.href=mapURL}).addClass("clickable");mapButtonA.appendTo(mapButton);return mapButton};var makeGPSButton=function(gpsCallback,basePath){var locationLink=$("<div>").addClass("area-gps");$("<a>").on("click",function(){JMAmapPS.suggest({success:function(suggestedAreaCode){gpsCallback(suggestedAreaCode)},fail:function(e){gpsCallback(e)},basePath:basePath})}).attr({title:TR.select("現在地へ","Current Location")}).append($("<img>").addClass("area-icon").attr({src:basePath+"common/image/side_gps.svg"})).appendTo(locationLink);return locationLink};var makeReloadButton=function(basePath,callback,interval){if(_c.valid(reloadPID)){clearInterval(reloadPID);reloadPID=null}return(getRealmName()==="botei"?makeBoteiReloadButton:makeSimpleReloadButton)(basePath,callback,interval)};var makeQuestionButton=function(basePath,callback){var link=$("<div>").addClass("area-question");$("<a>").attr({title:TR.select("利用方法","How to use")}).on("click",callback).append($("<img>").attr({src:basePath+imgPath+"side_q.svg"}).addClass("area-icon")).appendTo(link);return link};var getRealmName=function(){var context="develop";var path=document.location.pathname.split("/");var realms=["develop","bosai","botei","example"];_c.each(path,function(dir){if(!_c.contains(realms,dir))return true;context=dir;return false});return context};var makeBoteiReloadButton=function(basePath,callback,interval){var reloadButton=$("<div>").addClass("area-reload").on("click",function(){if(_c.valid(reloadPID)){clearInterval(reloadPID);reloadPID=null;reloadButtonA.removeClass("area-update-running");reloadImage.attr("title",TR.select("自動更新開始","Start Auto Update"))}else{callback({isAuto:false});reloadPID=setInterval(function(){callback({isAuto:true})},interval);reloadButtonA.addClass("area-update-running");reloadImage.attr("title",TR.select("自動更新開始","Start Auto Update"))}});var reloadImage=$("<img>").attr({src:basePath+imgPath+"side_update.svg",title:TR.select("自動更新中","Auto Update")}).addClass("area-icon");var reloadButtonA=$("<a>").append(reloadImage).addClass("area-update").addClass("area-update-running").appendTo(reloadButton);reloadPID=setInterval(function(){callback({isAuto:true})},interval);return reloadButton};var makeSimpleReloadButton=function(basePath,callback){var reloadButton=$("<div>").addClass("area-reload").on("click",function(){callback({isAuto:false})});$("<a>").append($("<img>").attr({src:basePath+imgPath+"side_update.svg",title:TR.select("更新","Update")}).addClass("area-icon")).addClass("area-update").appendTo(reloadButton);return reloadButton};var makeTwitterButton=function(basePath){var div=$("<div>").addClass("area-sns");var a=$("<a>").attr({href:"https://twitter.com/JMA_bousai",target:"_blank",rel:"noopener"}).appendTo(div);$("<img>").attr({src:basePath+"common/image/twitter_rounded.svg",title:"twitter"}).appendTo(a);return div};var makeGoogleSearch=function(basePath){var div=$("<div>").addClass("area-search");var form=$("<form>").attr({id:"cse-search-box",action:"//google.com/cse"}).appendTo(div);var a=$("<a>").attr({title:TR.select("検索","Search")}).on("click",function(e){var target=$(e.target);target.parent().parent().toggleClass("search-active")}).appendTo(div);$("<input>").attr({type:"hidden",name:"cx",value:"009950868052057056798:0yrbmp7chwi"}).appendTo(form);$("<input>").attr({type:"hidden",name:"ie",value:"UTF-8"}).appendTo(form);$("<input>").attr({type:"text",name:"q"}).appendTo(form);util.dom.script("//www.google.com/cse/brand?form=cse-search-box&lang=ja","google-script");$("<img>").attr({src:basePath+"common/image/side_search.svg"}).appendTo(a);return div};var insertListItems=function(container,values,key,labelKey,elemOption,clickCallback){values.forEach(function(value){if(TR.isEnglish()&&!value.enName)return;var li=$("<li>").appendTo(container);var a=$("<a>").appendTo(li).addClass("area-category-elem-item").text(value[TR.select("name","enName")]).attr({"data-key":key,"data-value":value.value}).on("click",function(e){var target=$(e.target);var k=target.attr("data-key");var v=target.attr("data-value");var text=$(e.target).text();$(".area-active").removeClass("area-active");elemOption[k]=v;$("#"+labelKey).text(text).attr({"data-key":k,"data-value":v});clickCallback(null,elemOption);setFullScreenCover()});if(value.selected)a.addClass("selected");if(value.disable!==undefined){a.addClass("disabled").text(value.disable)}})};var makeLabelText=function(element){var text="";var named=false;var changeText=function(value){if(value.disable===undefined&&!named){text=value[TR.select("name","enName")];named=true}if(value.selected){text=value[TR.select("name","enName")];named=true}};if(element.values){element.values.forEach(function(value){changeText(value)})}else if(element.group){element.group.forEach(function(elem){elem.values.forEach(function(value){changeText(value)})})}return text};var makeElementList=function(elements,clickCallback){var elementListDiv=$("<div>").addClass("area-category").attr({id:selectorID});var elementList=$("<ul>").addClass("area-category-ul").appendTo(elementListDiv);elements.forEach(function(element){var key=element.key;var listItem=$("<li>").addClass("area-category-list").appendTo(elementList);var labelKey="label_"+key;var elementDiv=$("<div>").addClass("area-megamenu").attr({"aria-labelledby":"menu_"+key});var list=$("<ul>").addClass("area-category-menu").appendTo(elementDiv);$("<a>").attr({id:labelKey,class:"area-item-navy"}).text(makeLabelText(element)).appendTo(listItem).on("click",function(e){var target=$(e.target);var isShowing=target.parent().attr("class").match(/area-active/);$(".area-active").removeClass("area-active");if(!isShowing){target.parent().toggleClass("area-active")}setFullScreenCover()});elementDiv.appendTo(listItem);$(".area-utility-active").removeClass("area-utility-active");if(element.values){insertListItems(list,element.values,key,labelKey,{},clickCallback)}else if(element.group){element.group.forEach(function(elem){var elemOption={};var group=$("<li>").appendTo(list);var groupList=$("<ul>");elemOption[element.key]=elem.value;$("<a>").text(elem[TR.select("name","enName")]).appendTo(group);groupList.appendTo(group);insertListItems(groupList,elem.values,elem.key,labelKey,elemOption,clickCallback)})}else{console.error("valuesかgroupが必要です。")}});return elementListDiv};var makeToggleButton=function(basePath,tagID){var toggleButton=$("<div>").addClass("area-toggle");$("<a>").attr({title:TR.select("メニュー","Navigator")}).on("click",function(){$("#"+tagID).toggleClass("area-utility-active")}).appendTo(toggleButton);return toggleButton};var makePageTopButton=function(){var div=$("<div>").addClass("area-pagetop").attr("title",TR.select("ページのトップへ","Portal"));$(root).on("scroll",function(e){if($(e.currentTarget).scrollTop()>300){div.fadeIn()}else{div.fadeOut()}});div.on("click",function(){$("body, html").animate({scrollTop:0},300);return false});return div};var makeMenu=function(_options,tagID){var options=typeof _options==="undefined"?{}:_options;var selectors=options.selectors||[];var contentsList=options.contents||[];var currentContent=options.currentContent||options.current_content||"";var clickCallback=options["click_callback"]||function(_no,option){util.hashController.changeHashData(option)};var gpsCallback=options.gpsCallback||options.gps_callback;var questionCallback=options.questionCallback||options.question_callback;var reloadCallback=options.reloadCallback||options.reload_callback;var reloadInterval=function(){if(typeof options.reloadInterval==="number")return options.reloadInterval*1e3;if(typeof options.reload_interval==="number")return options.reload_interval*1e3;return 600*1e3}();var menu=$("<nav>").addClass("area-nav");var dropdownList=$("<div>").addClass("area-dropdown");var basePath=options.basePath||"./";var isNotMapPage=options.isNotMapPage;var mapURL=options.mapURL||null;var areas=options.areas||null;makeLogoButton(basePath).appendTo(menu);makeHomeButton(basePath).appendTo(menu);if(mapURL)makeMapButton(mapURL,basePath).appendTo(menu);makeContentsList(contentsList,options,currentContent,clickCallback,isNotMapPage,basePath).appendTo(dropdownList);(function(){if(isNotMapPage)return;if(!gpsCallback)return;if(location.protocol==="http:")return;makeGPSButton(gpsCallback,basePath).appendTo(menu)})();if(questionCallback)makeQuestionButton(basePath,questionCallback).appendTo(menu);if(reloadCallback)makeReloadButton(basePath,reloadCallback,reloadInterval).appendTo(menu);makeTwitterButton(basePath).appendTo(menu);if(areas){AreaMenuUtil.Search.make(basePath,true,contentsList,areas).appendTo(menu)}else{makeGoogleSearch(basePath).appendTo(menu)}makeElementList(selectors,clickCallback).appendTo(dropdownList);if(selectors.length===0)dropdownList.addClass("area-no-category");dropdownList.appendTo(menu);makeToggleButton(basePath,tagID).appendTo(menu);return menu};var changeValues=function(values,v){values.forEach(function(value){value.selected=false;if(v===value.value){value.selected=true}})};var clearValues=function(values){values.forEach(function(value){value.selected=false})};var changeSelector=function(selectors,selected){Object.keys(selected).forEach(function(key){var value=selected[key];selectors.forEach(function(selector){if(selector.key!==key)return;if(selector.values){changeValues(selector.values,selected[key])}else if(selector.group){Object.keys(selected).forEach(function(key2){if(key===key2)return;selector.group.forEach(function(elem){clearValues(elem.values);if(elem.value!==value)return;if(elem.key!==key2)return;changeValues(elem.values,selected[key2])})})}})})};var replaceSelector=function(selectors,newSelector){var index=_c.findIndex(selectors,function(selector){return selector.key===newSelector.key});if(index<0){console.warn("不正なキーです。"+newSelector);return}selectors[index]=newSelector};var saveCurrentLabel=function(selectors){selectors.forEach(function(selector){var label=$("#label_"+selector.key);var k=label.attr("data-key");var v=label.attr("data-value");if(k===undefined||v===undefined)return;if(selector.values){selector.values.forEach(function(value){value.selected=false;if(selector.key===k&&value.value===v){value.selected=true}})}else if(selector.group){selector.group.forEach(function(elem){elem.values.forEach(function(value){value.selected=false;if(elem.key===k&&value.value===v){value.selected=true}})})}})};var saveCurrentContent=function(contents){var labelValue=$("#contents-name").attr("data-value");contents.contents.forEach(function(content){content.selected=false;if(content.value===labelValue){content.selected=true}})};var trimContents=function(_contents){if(!_contents)return{groups:[],contents:[]};if(!TR.isEnglish())return _contents;var contents=JSON.parse(JSON.stringify(_contents));contents.contents=_c.filter(contents.contents,function(content){return Boolean(content.enName)});return contents};var AreaMenu=function(){var Menu=function(tagId,options){var menu;this.tagId=tagId;this.options=options;this.options.contents=trimContents(options.contents);menu=makeMenu(options,this.tagId);$("#"+tagId).empty().append(menu);if(options["page_top"]!==false)$("#"+tagId).append(makePageTopButton())};Menu.prototype.remake=function(options){var menu;merge(this.options,options);if(options.contents)this.options.contents=trimContents(options.contents);menu=makeMenu(this.options,this.tagId);$("#"+this.tagId).empty().append(menu)};Menu.prototype.change=function(options){var hasOption=_c.all(["contents","selectors","click_callback","gps_callback"],function(key){return!Object.prototype.hasOwnProperty.call(options,key)});if(Object.prototype.hasOwnProperty.call(options,"values")||Object.prototype.hasOwnProperty.call(options,"group")){this.replaceSelector(options)}else if(hasOption){this.changeSelector(options)}else{this.remake(options)}};Menu.prototype.changeSelector=function(selected){var menu;saveCurrentContent(this.options.contents);saveCurrentLabel(this.options.selectors);changeSelector(this.options.selectors,selected);menu=makeMenu(this.options,this.tagId);$("#"+this.tagId).empty().append(menu)};Menu.prototype.replaceSelector=function(newSelector){var menu;saveCurrentContent(this.options.contents);saveCurrentLabel(this.options.selectors);replaceSelector(this.options.selectors,newSelector);menu=makeMenu(this.options,this.tagId);$("#"+this.tagId).empty().append(menu)};Menu.prototype.getOptions=function(){return this.options};return Menu}();var merge=function(obj1,obj2){Object.keys(obj2).forEach(function(key){obj1[key]=obj2[key]})};root.AreaMenu=AreaMenu})(typeof window==="object"?window:typeof global==="object"?global:this?this:{});
</script>
<script>
(function(root){"use strict";var UC=JMAWebUtility.common;var UA=JMAWebUtility.area;var UH=JMAWebUtility.hashController;var TR=new Translator;var makeLegend=function(legendSet){var legendSetDiv=$("<div>");UC.each(legendSet,function(legends){var legendsDiv=$("<div>").addClass("contents-legends").appendTo(legendSetDiv);if(!$.isArray(legends))legends=[legends];UC.each(legends,function(legend){var legendDiv=$("<div>").addClass("contents-legend").appendTo(legendsDiv);if(legend.box){if(legend.box.match(/^#/)){$("<div>").addClass("contents-legend-box").css({"background-color":legend.box}).html(legend.boxText).appendTo(legendDiv)}else{$("<div>").addClass("contents-legend-box").addClass(legend.box).html(legend.boxText).appendTo(legendDiv)}}if(legend.color){$("<div>").addClass("contents-legend-box").css("background-color",legend.color).appendTo(legendDiv)}if(legend.img){$("<img>").addClass("contents-legend-image").attr("src",legend.img).appendTo(legendDiv)}if(legend.mark){$("<div>").addClass("contents-legend-mark").html(legend.mark).appendTo(legendDiv)}if(legend.text){$("<div>").addClass("contents-legend-text").html(legend.text).appendTo(legendDiv)}})});return legendSetDiv};var makeRadioButtons=function(buttonOptions,callback){var buttons=UC.map(buttonOptions,function(buttonOption){return $("<div>").addClass("contents-radio-button").addClass("contents-radio-button-"+(buttonOption.disabled?"disabled":"enabled")).addClass("contents-radio-button-"+(buttonOption.default?"on":"off")).addClass("contents-radio-button-"+(buttonOption.disabled?"disabled":"enabled")).on("click",function(e){var button=$(e.target);UC.each(buttons,function(b){b.removeClass("contents-radio-button-on").removeClass("contents-radio-button-off").addClass("contents-radio-button-"+(b.attr("data-type")===button.attr("data-type")?"on":"off"))});callback(button.attr("data-type"))}).text(buttonOption.text).attr({"data-type":buttonOption.type,title:buttonOption.text})});return buttons};var makeButton=function(text,callback){return $("<div>").addClass("contents-button").text(text).attr("title",text).on("click",function(e){callback(e)})};var makeLink=function(text,callback){return $("<div>").addClass("contents-link").text(text).on("click",function(e){callback(e)})};var makeBreadCrumbs=function(areaType,areaCode,name,areaJson){var ul=$("<ul>").addClass("contents-area-breadcrumb");if(areaType==="japan"){$("<li>").text(TR.select("全国の","Nation Wide: ")+name).appendTo(ul);return ul}$("<li>").append($("<a>").text(TR.select("全国","Nation Wide")).on("click",function(){UH.changeHashData({area_type:"japan",area_code:"010000"})})).appendTo(ul);if(areaType==="offices"){$("<li>").text(TR.areaName(areaJson,"offices",areaCode)+TR.select("の",": ")+name).appendTo(ul);return ul}var office=UA.convert(areaJson,areaCode,areaType,"offices");$("<li>").append($("<a>").text(TR.select(office.name,office.enName)).on("click",function(){UH.changeHashData({area_type:"offices",area_code:office.code})})).appendTo(ul);$("<li>").text(TR.areaName(areaJson,"class20s",areaCode)+TR.select("の",": ")+name).appendTo(ul);return ul};var makeCloseBox=function(target,html,options){var title=options&&options.title;if(!title)title=translatorSelect("説明","descriptions");var closeBoxDiv=$("<div>").html(html).css("display","none");if(options&&options.explain){closeBoxDiv.addClass("contents-explain").css("margin-top",10).css("margin-bottom",10)}var closeBoxButton=$("<div>").text(translatorSelect("▼ "+title+"を表示する","▼ Show "+title)).addClass("contents-close-box-button").click(function(e){if(closeBoxDiv.css("display")==="none"){closeBoxDiv.slideDown(500,function(){closeBoxButton.text(translatorSelect("▲ "+title+"を非表示にする","▼ Hide "+title))});$("body, html").animate({scrollTop:$(e.target).offset().top},500)}else{closeBoxDiv.slideUp(500,function(){closeBoxButton.text(translatorSelect("▼ "+title+"を表示する","▼ Show "+title))})}});target.append(closeBoxButton);target.append(closeBoxDiv)};var translatorSelect=function(ja,en){if(typeof TR==="undefined")return ja;return TR.select(ja,en)};var makeExplain=function(target,html,options){options=options||{};options.explain=true;makeCloseBox(target,html,options)};var getMapOptions=function(className,_options){var classNames=function(){if(className instanceof Array)return className;return[className]}();var options=_options||{};var classOptions=UC.map(classNames,function(name){return UC.clone(MAP_OPTIONS[name])});classOptions.push(options);return UC.merge.apply(null,classOptions)};var getMapPlte=function(classNames){return UC.map(classNames,function(className){return UC.clone(MAP_OPTIONS[className])})};var MAP_OPTIONS={border:{color:"black",weight:.5,fill:false},"border-bold":{color:"black",weight:2,fill:false},missing:{color:"#c8c8cb",weight:1,opacity:1,fillColor:"#c8c8cb",fillOpacity:1},none:{opacity:0,fillOpacity:0,strokeOpacity:0},level0:{color:"#ffffff",weight:1,opacity:1,fillColor:"#ffffff",fillOpacity:1},level10:{color:"#faf580",weight:1,opacity:1,fillColor:"#faf5c0",fillOpacity:1},level20:{color:"#f2e700",weight:1,opacity:1,fillColor:"#f2e700",fillOpacity:1},level25:{color:"#ffaa00",weight:1,opacity:1,fillColor:"#ffaa00",fillOpacity:1},level30:{color:"#ff2800",weight:1,opacity:1,fillColor:"#ff2800",fillOpacity:1},level40:{color:"#aa00aa",weight:1,opacity:1,fillColor:"#aa00aa",fillOpacity:1},level45:{color:"#6c008c",weight:1,opacity:1,fillColor:"#6c008c",fillOpacity:1},level50:{color:"#0c000c",weight:1,opacity:1,fillColor:"#0c000c",fillOpacity:1}};root.ContentsCommon={makeLegend:makeLegend,makeRadioButtons:makeRadioButtons,makeButton:makeButton,makeLink:makeLink,makeBreadCrumbs:makeBreadCrumbs,makeCloseBox:makeCloseBox,makeExplain:makeExplain,getMapOptions:getMapOptions,getMapPlte:getMapPlte}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(factory){if(typeof define==="function"&&define.amd){define(["leaflet"],factory)}else if(typeof module!=="undefined"&&typeof require!=="undefined"){module.exports=factory(require("leaflet"))}else{if(typeof window.L==="undefined"){throw"Leaflet must be loaded first"}factory(window.L)}})(function(L){var DEG_TO_RAD=Math.PI/180;function fixAngle(angle){return(angle-90)*DEG_TO_RAD}function rotated(p,angle,r,r2){return p.add(L.point(Math.cos(angle)*r,Math.sin(angle)*r2))}L.Point.prototype.rotated=function(angle,r,r2){return rotated(this,angle,r,r2)};var semicircle={options:{startAngle:0,stopAngle:359.9999},startAngle:function(){if(this.options.startAngle<this.options.stopAngle){return fixAngle(this.options.startAngle)}else{return fixAngle(this.options.stopAngle)}},stopAngle:function(){if(this.options.startAngle<this.options.stopAngle){return fixAngle(this.options.stopAngle)}else{return fixAngle(this.options.startAngle)}},setStartAngle:function(angle){this.options.startAngle=angle;return this.redraw()},setStopAngle:function(angle){this.options.stopAngle=angle;return this.redraw()},setDirection:function(direction,degrees){if(degrees===undefined){degrees=10}this.options.startAngle=direction-degrees/2;this.options.stopAngle=direction+degrees/2;return this.redraw()},getDirection:function(){return this.stopAngle()-(this.stopAngle()-this.startAngle())/2},isSemicircle:function(){var startAngle=this.options.startAngle,stopAngle=this.options.stopAngle;return!(stopAngle>=startAngle+360)&&!(startAngle==stopAngle)},_containsPoint:function(p){function normalize(angle){while(angle<=-Math.PI){angle+=2*Math.PI}while(angle>Math.PI){angle-=2*Math.PI}return angle}var angle=Math.atan2(p.y-this._point.y,p.x-this._point.x);var nStart=normalize(this.startAngle());var nStop=normalize(this.stopAngle());if(nStop<=nStart){nStop+=2*Math.PI}if(angle<=nStart){angle+=2*Math.PI}return nStart<angle&&angle<=nStop&&p.distanceTo(this._point)<=this._radius+this._clickTolerance()}};L.SemiCircle=L.Circle.extend(semicircle);L.SemiCircleMarker=L.CircleMarker.extend(semicircle);L.semiCircle=function(latlng,options){return new L.SemiCircle(latlng,options)};L.semiCircleMarker=function(latlng,options){return new L.SemiCircleMarker(latlng,options)};var _updateCircleSVG=L.SVG.prototype._updateCircle;var _updateCircleCanvas=L.Canvas.prototype._updateCircle;L.SVG.include({_updateCircle:function(layer){if(!(layer instanceof L.SemiCircle||layer instanceof L.SemiCircleMarker)||!layer.isSemicircle()){return _updateCircleSVG.call(this,layer)}var p=layer._point,r=Math.max(Math.round(layer._radius),1),r2=Math.max(Math.round(layer._radiusY),1)||r,arc="A"+r+","+r2+" 0 ",start=p.rotated(layer.startAngle(),r,r2),end=p.rotated(layer.stopAngle(),r,r2);var largeArc=layer.options.stopAngle-layer.options.startAngle>=180?"1":"0";var d=layer._empty()?"M0 0":"M"+start.x+","+start.y+arc+largeArc+",1 ,"+end.x+","+end.y;this._setPath(layer,d)}});L.Canvas.include({_updateCircle:function(layer){if(!(layer instanceof L.SemiCircle||layer instanceof L.SemiCircleMarker)||!layer.isSemicircle()){return _updateCircleCanvas.call(this,layer)}if(!this._drawing||layer._empty()){return}var p=layer._point,ctx=this._ctx,r=Math.max(Math.round(layer._radius),1),s=(Math.max(Math.round(layer._radiusY),1)||r)/r;if(s!==1){ctx.save();ctx.scale(1,s)}ctx.beginPath();ctx.arc(p.x,p.y/s,r,layer.startAngle(),layer.stopAngle(),false);if(s!==1){ctx.restore()}this._fillStroke(ctx,layer)}})});
</script>
<script>
(function(root){"use strict";L.SVG.prototype._initContainer=function(){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttribute("pointer-events","none");this._rootGroup=document.createElementNS("http://www.w3.org/2000/svg","g");svg.appendChild(this._rootGroup);if(this.defs)svg.appendChild(this.defs);this._container=svg};L.Renderer.prototype.onAdd=function(){if(!this._container){this._initContainer();if(this._zoomAnimated)L.DomUtil.addClass(this._container,"leaflet-zoom-animated")}this.getPane(this.options&&this.options.name).appendChild(this._container);this._update();this.on("update",this._updatePaths,this)};root.JMAMap=function(prop){var prop=prop||JMAMap.mapProp;var lang=prop.lang||JMAMap.mapProp;var tgn=prop.tagId||JMAMap.mapProp.tagId;var latlon=prop.latlon||JMAMap.mapProp.latlon;var zl=prop.zoomLevel||JMAMap.mapProp.zoomLevel;var zxy=prop.zxy||JMAMap.mapProp.zxy;var baseDir=prop.baseDir||JMAMap.mapProp.baseDir;if(prop.zxy){if(typeof zxy==="string"){zxy=zxy.split("#")[1].split("/")}if(zxy.length>2){latlon=[Number(zxy[1]),Number(zxy[2])];zl=zxy[0]}}var assign=function(a,b){var key;var rtn={};for(key in a)if(a.hasOwnProperty(key))rtn[key]=a[key];for(key in b)if(b.hasOwnProperty(key))rtn[key]=b[key];return rtn};var evt=prop.eventAttr||JMAMap.mapProp.eventAttr;var urlwithpos=prop.posURL||JMAMap.mapProp.posURL;var mapOption=prop.options?assign(JMAMap.mapProp.options,prop.options):JMAMap.mapProp.options;var gl=prop.gridLine||JMAMap.mapProp.gridLine;var scale=prop.scale||JMAMap.mapProp.scale;var attr={minZoom:prop.minZoom||5,maxZoom:prop.maxZoom||8};if(attr.maxZoom>11)attr.maxZoom=11;if(zl<attr.minZoom)zl=attr.minZoom;if(attr.maxZoom<zl)zl=attr.maxZoom;mapOption.minZoom=attr.minZoom;mapOption.maxZoom=attr.maxZoom;mapOption.maxBounds=mapOption.maxBounds||[[0,90],[60,180]];mapOption.scrollWheelZoom=Boolean(prop.scrollWheelZoom);mapOption.preferCanvas=true;if(prop.svgMode)mapOption.preferCanvas=false;var canvasMode=mapOption.preferCanvas;mapOption.dragging=prop.dragging||JMAMap.mapProp.dragging;mapOption.tap=Object.prototype.hasOwnProperty.call(prop,"tap")?prop.tap:JMAMap.mapProp.tap;if(prop.classClear)document.getElementById(tgn).className="";var Map=L.map(tgn,mapOption).setView(latlon,zl);if(prop.className)Map.getContainer().classList.add(prop.className);this.getMap=function(){return Map};var baseMaps=prop.baseMaps||JMAMap.mapProp.baseMaps;var mapPath={"jma-base":baseDir+"/tile/jma/base/{z}/{x}/{y}.png","jma-green-class20s":baseDir+"/tile/jma/green-class20s/{z}/{x}/{y}.png","jma-green-cities":baseDir+"/tile/jma/green-cities/{z}/{x}/{y}.png","jma-gray-cities":baseDir+"/tile/jma/gray-cities/{z}/{x}/{y}.png","jma-transparent-cities":baseDir+"/tile/jma/transparent-cities/{z}/{x}/{y}.png","jma-mesh":baseDir+"/tile/jma/mesh/{z}/{x}/{y}.png","jma-sat":baseDir+"/tile/jma/sat/{z}/{x}/{y}.png","gsi-std":baseDir+"/tile/gsi/std/{z}/{x}/{y}.png","gsi-pale":baseDir+"/tile/gsi/pale/{z}/{x}/{y}.png","gsi-pale2":baseDir+"/tile/gsi/pale2/{z}/{x}/{y}.png","gsi-blank":baseDir+"/tile/gsi/blank/{z}/{x}/{y}.png","gsi-hillshademap":baseDir+"/tile/gsi/hillshademap/{z}/{x}/{y}.png","gsi-english":baseDir+"/tile/gsi/english/{z}/{x}/{y}.png"};var keyList={};var activeList=[];var layerConfig={};var gridlinetxts=[];var relm=null;var oiloadConf={};var oiloadCntlKeys={};var oiloadkeys=["earthquake","class10s","class20s","landslides"];var oiloadFlag={};var loadedList=[];var jsonPath=baseDir+"common/const/geojson/";var jsonName={world:jsonPath+"world.json",japan:jsonPath+"japan.json",centers:jsonPath+"centers.json",prefs:jsonPath+"prefs.json",forecast_prefs:jsonPath+"forecast_prefs.json",landslidesx0:jsonPath+"landslides_0.json",landslidesx1:jsonPath+"landslides_1.json",landslidesx2:jsonPath+"landslides_2.json",landslidesx3:jsonPath+"landslides_3.json",landslidesx4:jsonPath+"landslides_4.json",landslidesx5:jsonPath+"landslides_5.json",landslidesx6:jsonPath+"landslides_6.json",landslidesx7:jsonPath+"landslides_7.json",landslidesx8:jsonPath+"landslides_8.json",landslidesx9:jsonPath+"landslides_9.json",offices:jsonPath+"offices.json",class10sxx:jsonPath+"class10s.json",class10sx0:jsonPath+"class10s_0.json",class10sx1:jsonPath+"class10s_1.json",class10sx2:jsonPath+"class10s_2.json",class10sx3:jsonPath+"class10s_3.json",class10sx4:jsonPath+"class10s_4.json",class10sx5:jsonPath+"class10s_5.json",class10sx6:jsonPath+"class10s_6.json",class10sx7:jsonPath+"class10s_7.json",class10sx8:jsonPath+"class10s_8.json",class10sx9:jsonPath+"class10s_9.json",class15s:jsonPath+"class15s.json",class20sx0:jsonPath+"class20s_0.json",class20sx1:jsonPath+"class20s_1.json",class20sx2:jsonPath+"class20s_2.json",class20sx3:jsonPath+"class20s_3.json",class20sx4:jsonPath+"class20s_4.json",class20sx5:jsonPath+"class20s_5.json",class20sx6:jsonPath+"class20s_6.json",class20sx7:jsonPath+"class20s_7.json",class20sx8:jsonPath+"class20s_8.json",class20sx9:jsonPath+"class20s_9.json",season:jsonPath+"season.json",earthquakexx:jsonPath+"earthquake.json",earthquakex0:jsonPath+"earthquake_0.json",earthquakex1:jsonPath+"earthquake_1.json",earthquakex2:jsonPath+"earthquake_2.json",earthquakex3:jsonPath+"earthquake_3.json",earthquakex4:jsonPath+"earthquake_4.json",earthquakex5:jsonPath+"earthquake_5.json",earthquakex6:jsonPath+"earthquake_6.json",earthquakex7:jsonPath+"earthquake_7.json",earthquakex8:jsonPath+"earthquake_8.json",earthquakex9:jsonPath+"earthquake_9.json",tsunami:jsonPath+"tsunami.json",marines:jsonPath+"marines.json"};var tileLoadStatus={};var pendingRequests={};var loadCounter={};var OILOAD_MINIMUM_ZOOM_LEVEL=8;var mapLoad=function(){var bm=!Array.isArray(baseMaps)?[baseMaps]:baseMaps;bm.forEach(function(o){var cntlKey=o.name||"BASEMAP_"+Math.ceil(Math.random()*1e10).toString(36);if(!o.name)console.error("[JMAMapError]-[mapLoad] コントロールキーが未設定です。設定をお願いします。コントロールキーを自動で設定しています。key:"+cntlKey);addRaster(cntlKey,mapPath[(lang==="en"?o.enType||o.type:o.type)||"gsi-pale2"],{zindex:o.hasOwnProperty("zindex")?o.zindex:-1,permanent:true,minZoom:o.minZoom||attr.minZoom,maxZoom:o.maxZoom||attr.maxZoom})})};var pointinfield=function(p){var border=Map.getBounds();var latin=border._southWest.lat<p[0]&&p[0]<border._northEast.lat;var lonin=border._southWest.lng<p[1]&&p[1]<border._northEast.lng;return latin&&lonin};var lineinfield=function(p,q){var border=Map.getBounds();var latin=border._southWest.lat<p[0]&&p[0]<border._northEast.lat;var lonin=border._southWest.lng<p[1]&&p[1]<border._northEast.lng;return latin||lonin};var squareInfield=function(ne,sw){var border=Map.getBounds();var northSouthout=(ne[0]||ne.lat)<border._southWest.lat;var southNorthout=border._northEast.lat<(sw[0]||sw.lat);var eastWestout=(ne[1]||ne.lng)<border._southWest.lng;var westEastout=border._northEast.lng<(sw[1]||sw.lng);return!(northSouthout||southNorthout||eastWestout||westEastout)};var shiftPosition=function(latlon,shift,auto){var calcshift=null;if(!Array.isArray(shift)){calcshift=[0,0]}else{calcshift=[shift[0],shift[1]]}if(Array.isArray(auto)&&auto.length>1){var zl=Map._zoom;calcshift[0]+=auto[0]*(zl-5);calcshift[1]+=auto[1]*(zl-5)}var p=Map.latLngToContainerPoint(latlon);var np=[p.x+calcshift[0],p.y+calcshift[1]];return Map.containerPointToLatLng(np)};var changePx2Distance=function(latlon,radius){var point=Map.latLngToContainerPoint(latlon);var p=Map.containerPointToLatLng({x:point.x+radius,y:point.y});return Map.distance(latlon,p)};var corner=function(latlon,conf){if(!conf){return null}else if(!conf.svgConfig.width||!conf.svgConfig.height){if(Array.isArray(latlon[0])){return[{lat:latlon[0][0],lng:latlon[0][1]},{lat:latlon[1][0],lng:latlon[1][1]}]}return[latlon,latlon]}return[shiftPosition(latlon,[conf.svgConfig.width/2,-conf.svgConfig.height/2]),shiftPosition(latlon,[-conf.svgConfig.width/2,conf.svgConfig.height/2])]};var changeSvgSize=function(){Object.keys(layerConfig).filter(function(key){return activeList.indexOf(key)>=0&&layerConfig[key].type==="svg"}).forEach(function(key){keyList[key].forEach(function(svgObject,i){if(svgObject.hasOwnProperty("_leaflet_id")){var baloonActive=keyList[key][i].baloonActive;var latlon=keyList[key][i]._popup?keyList[key][i]._popup._latlng:false;Map.removeLayer(svgObject);keyList[key][i]=mkSvgLeafletObject(key,assign(svgObject.attr,{pane:key}),keyList[key][i].baloonActive,keyList[key][i].value).addTo(Map);if(baloonActive&&keyList[key][i].openPopup){if(!keyList[key][i]._popup||!keyList[key][i]._popup._latlng)keyList[key][i].openPopup(latlon);else keyList[key][i].openPopup();keyList[key][i].baloonActive=true}}else if(svgObject.bringToFront)svgObject.bringToFront()})})};var yabaneRotate=function(latlon,latlons,_arg){var arg=_arg||0;var relativeO=Map.latLngToContainerPoint(latlon);var rot=[[Math.cos(arg/180*Math.PI),-Math.sin(arg/180*Math.PI)],[Math.sin(arg/180*Math.PI),Math.cos(arg/180*Math.PI)]];return latlons.map(function(latlon){return Map.latLngToContainerPoint(latlon)}).map(function(px){return{x:px.x-relativeO.x,y:px.y-relativeO.y}}).map(function(px){return[px.x*rot[0][0]+px.y*rot[0][1]+relativeO.x,px.x*rot[1][0]+px.y*rot[1][1]+relativeO.y]}).map(function(px){return Map.containerPointToLatLng(px)})};var setYabane=function(latlon,size,shift){var center=Map.latLngToContainerPoint(latlon);if(shift<0||1<shift)shift=0;return[Map.containerPointToLatLng({x:center.x,y:center.y+size*.8-shift*size*.8}),Map.containerPointToLatLng({x:center.x-size*.5,y:center.y-size*.4-shift*size*.8}),Map.containerPointToLatLng({x:center.x,y:center.y-shift*size*.8}),Map.containerPointToLatLng({x:center.x+size*.5,y:center.y-size*.4-shift*size*.8})]};var makeYabane=function(latlon,conf,opt){var latlons=setYabane(latlon,conf.size||10,conf.centerShift||0);var rtn=L.polygon(yabaneRotate(latlon,latlons,conf.arg?conf.arg:0),opt);rtn.arg=conf.arg;rtn.yabane=true;rtn.size=conf.size||10;return rtn};var addgridline=function(){var pane=Map.createPane("GRIDLINE");pane.style["pointer-events"]="none";pane.style.zIndex=gl.zindex||0;for(var lat=-90;lat<90;lat+=gl.interval){L.polyline([[lat,0],[lat,360]],{weight:.5,color:"#000000",opacity:.65,interactive:false,pane:"GRIDLINE"}).addTo(Map)}for(var lon=0;lon<=360;lon+=gl.interval){L.polyline([[-90,lon],[90,lon]],{weight:.5,color:"#000000",opacity:.65,interactive:false,pane:"GRIDLINE"}).addTo(Map)}};var addlatlontxts=function(){var border=Map.getBounds();gridlinetxts.forEach(function(layer){Map.removeLayer(layer)});for(var lat=-90;lat<=90;lat+=gl.interval){if(lineinfield([lat,0],[lat,360])){var ns=lat<0?"S":lat>0?"N":"";var txt=L.marker([lat,border._southWest.lng],{icon:L.divIcon({html:"<span>"+Math.abs(lat)+ns+"</span>",className:"gridtxtlat"})});txt.addTo(Map);gridlinetxts.push(txt)}}for(var lon=0;lon<=360;lon+=gl.interval){if(lineinfield([-90,lon],[90,lon])){var ew=lon<180?"E":lon>180?"W":"";var lonEW=lon<=180?lon:360-lon;txt=L.marker([border._southWest.lat,lon],{icon:L.divIcon({html:"<span>"+lonEW+ew+"</span>",className:"gridtxtlon"})}).addTo(Map);txt.addTo(Map);gridlinetxts.push(txt)}}};var getlastpos=function(){if(!Map._lastCenter)return getnowpos();return"#"+Map._zoom+"/"+Math.round(Map._lastCenter.lat*1e3)/1e3+"/"+Math.round(Map._lastCenter.lng*1e3)/1e3+"/"};var move2statuspoint=function(zxy){if(typeof zxy==="string"){zxy=zxy.state.split("#")[1].split("/");Map.setView([zxy[1],zxy[2]],zxy[0])}};var getnowpos=function(){return"#"+Math.round(Map._zoom)+"/"+Math.round(Map.getCenter().lat*1e3)/1e3+"/"+Math.round(Map.getCenter().lng*1e3)/1e3+"/"};var setTitle=function(e){var mapdiv=document.getElementById(tgn);mapdiv.setAttribute("title",lang==="en"&&e.target.feature.properties.enName?e.target.feature.properties.enName:e.target.feature.properties.name||"")};var rmTitle=function(e){var mapdiv=document.getElementById(tgn);mapdiv.setAttribute("title","")};var removeCheck=function(key){return!(layerConfig[key].minZoom<=Map._zoom&&Map._zoom<=layerConfig[key].maxZoom&&(layerConfig[key].permanent||layerConfig[key].display))};var geojsonLoadend=function(jsonData,mapKey,keys,settingObjects,zxy,duration){keys.forEach(function(key){if(keyList[key])return;var oiloadMode=RegExp("_SplitPart_[0-9]$").test(key);var cntlKey=key.split("_SplitPart_")[0];var settingObject=settingObjects[key];var plte=settingObject.plte;var colorData=settingObject.colorData;var colorSet=settingObject.colorSet;var binds=settingObject.eachPopups||settingObject.eachTooltips||false;var eachEvents=settingObject.events;var option=settingObject.options||{};var ishl=Boolean(settingObject.islandHighlight);if(!Map.getPane(cntlKey)){var pane=Map.createPane(cntlKey);pane.style.zIndex=settingObject?settingObject.zindex||0:0;if(settingObject.className)pane.classList.add(settingObject.className)}option=assign(option,{pane:cntlKey});if(oiloadMode&&!jsonName[mapKey.substr(0,mapKey.length-2)+"xx"]&&settingObject.minZoom<OILOAD_MINIMUM_ZOOM_LEVEL)settingObject.minZoom=OILOAD_MINIMUM_ZOOM_LEVEL;keyList[key]=L.geoJSON(jsonData,option);keyList[key].eachLayer(function(layer){if(eachEvents)for(var event in eachEvents)if(eachEvents.hasOwnProperty(event))layer.on(event,eachEvents[event]);if(colorData){var code=layer.feature.properties.code;if(plte&&plte[colorData[code]]){layer.setStyle(plte[colorData[code]])}if(ishl&&layer.feature.properties.islandBold){if(canvasMode)layer.options.weight=10;else layer.options.className=layer.options.className?layer.options.className+" IslHighLight __"+key:"IslHighLight __"+key}else layer.options.className=layer.options.className?layer.options.className+" __"+key:"__"+key}else if(Array.isArray(colorSet)){var result=colorSet.filter(function(o){var rtn=true;for(var matchKey in o.conditions){if(layer.feature.properties[matchKey]&&rtn){rtn=layer.feature.properties[matchKey]===o.conditions[matchKey]}}return rtn})[0];layer.setStyle(result.style)}if(binds){binds.type=settingObject.hasOwnProperty("eachPopups")?"popup":"tooltip";var texts=binds.contents||binds.texts||{};if(binds.hasOwnProperty("texts"))console.error("[DEPRECATED] textsキーは非推奨です。contentsキーをご利用ください。");if(texts[layer.feature.properties.code])setPopup(layer,binds)}layer.on("mouseover",setTitle);layer.on("mouseout",rmTitle)})});loadedList[mapKey]=true;if(zxy&&loadedCheck(zxy))changeView(zxy,duration);display()};var loadedCheck=function(arr){if(Array.isArray(arr))return false;var target=makeRequestList(Object.keys(arr));return Object.keys(keyList).some(function(key){return target.indexOf(key)>=0})};var makeRequestList=function(arr){var rtn=[];var oikeys=Object.keys(oiloadCntlKeys);for(var i=0;i<arr.length;i++){if(oikeys.indexOf(arr[i])>=0)checkRelm(arr[i]).forEach(function(k){rtn.push(k)});else rtn.push(arr[i])}return rtn};var checkRelm=function(key){var rtn=[];if(relm&&Map._zoom>=OILOAD_MINIMUM_ZOOM_LEVEL)for(var i in relm){if(!relm.hasOwnProperty(i))continue;if(squareInfield(relm[i].ne,relm[i].sw))rtn.push(key+"_SplitPart_"+i)}else if(Map._zoom<OILOAD_MINIMUM_ZOOM_LEVEL)rtn.push(key+"_SplitPart_x");return rtn};var setPopup=function(layer,eb){layer[eb.type==="popup"?"bindPopup":"bindTooltip"](eb.contents[layer.feature.properties.code]||eb.texts[layer.feature.properties.code],assign(eb.options,{keepInView:false}));if(typeof eb.on==="string"&&eb.on!=="click"){if(layer._openPopup)layer.off("click",layer._openPopup);if(layer._tooltip)layer.off("mouseover",layer._openTooltip);layer.on(eb.on,layer[eb.type==="popup"?"_openPopup":"_openTooltip"]);if(eb.type==="popup")layer.baloonActive=false}else{if(eb.type==="popup")layer.baloonActive=true;eb.off=false}if(eb.off){if(layer._tooltip)layer.off("mouseout",layer._closeTooltip);layer.on(eb.off,function(){layer[eb.type==="popup"?"closePopup":"closeTooltip"]()})}if(layer.getPopup)layer.getPopup()};var makeCircle=function(latlon,conf,option){var isMarker=false;var isSemi=conf.arg;var opt=assign(conf||{},option||{});if(Array.isArray(latlon)){latlon=isSemi?latlon:{lat:latlon[0],lng:latlon[1]}}if(!conf)conf={radius:10};if(!conf.radius){opt.realradius=10;isMarker=true}else if(String(opt.radius).substr(-1)!="m"){opt.realradius=opt.radius;isMarker=true}if(isMarker){return L.circleMarker(latlon,opt)}var iskm=String(opt.radius).substr(-2)=="km";var reg=/^\d{1,}/g;opt.radius=String(opt.radius).match(reg)[0];if(iskm){opt.radius*=1e3}if(isSemi){opt.startAngle=conf.arg[0];opt.stopAngle=conf.arg[1];opt.arc=true;return L.semiCircle(latlon,opt)}return L.circle(latlon,opt)};var makeSvgObject=function(type,latlon,conf,option){switch(type){case"yabane":return makeYabane(latlon,conf,option);case"circle":return makeCircle(latlon,conf,option);case"rect":return L.rectangle(corner(latlon,conf),option);case"path":return L.polyline(latlon,option);case"polygon":return L.polygon(latlon,option);case"svg":var svg=null;if(conf.svg)svg=conf.svg;else if(conf.svgChild){var svgConfig=conf.svgConfig||{};if(svgConfig.ns)svg=document.createElementNS(svgConfig.ns,"svg");else svg=document.createElementNS("https://www.w3.org/2000/svg","svg");if(svgConfig.viewbox)svg.setAttribute("viewBox",svgConfig.viewbox);svg.appendChild(conf.svgChild)}else throw"[JMAMapError]-[makeSvgObject] type:svgに必要なconfig情報が不足しています。";if(option&&option.className)svg.setAttribute("class",option.className);if(!option.hasOwnProperty("interactive"))option.interactive=true;return L.svgOverlay(svg,corner(latlon,conf),option);case"dom":option=option||{};if(conf.hasOwnProperty("iconAnchor"))option.iconAnchor=conf.iconAnchor;var iconOption=assign(option,{html:conf.domElement});option=assign(option,{icon:L.divIcon(iconOption),zIndexOffset:option.zIndexOffset-Map.latLngToContainerPoint(latlon).y});return L.marker(latlon,option);case"raster":return L.imageOverlay(conf.src,latlon,option);default:return undefined}};var mkSvgLeafletObject=function(cntlKey,requestObject,baloonActive,i){var attr=assign(requestObject,{});var events=attr.events;var option=assign(attr.options||{},{pane:cntlKey});attr.svgConfig=attr.svgConfig||{};var latlon=attr.latlon;var bp=attr.popup||attr.tooltip||false;if(attr.svgConfig.height&&attr.svgConfig.width&&attr.autoCenter!==false){attr.iconAnchor=[attr.svgConfig.width/2,attr.svgConfig.height/2];latlon=shiftPosition(attr.latlon,attr.shiftPoint)}else if(attr.shiftPoint||attr.positionShift||attr.autoShift){latlon=shiftPosition(attr.latlon,attr.shiftPoint||attr.positionShift,attr.autoShift)}if(attr.zIndexOffset)attr.zIndexOffset=option.zIndexOffset;var leafletObject=makeSvgObject(attr.type,latlon,attr,option);leafletObject.attr=assign(attr,option);if(i!==undefined)leafletObject.value=i;if(attr.hasOwnProperty("priority"))leafletObject.priority=attr.priority;for(var eventName in events)if(events.hasOwnProperty(eventName))leafletObject.on(eventName,events[eventName]);if(bp){var text=bp.content||bp.text||false;if(bp.hasOwnProperty("text"))console.error("[DEPRECATED] textキーは非推奨です。contentキーをご利用ください。");var on=bp.on;var off=bp.off||false;var bindOption=bp.options||{};if(text){var isBp=attr.hasOwnProperty("popup");leafletObject[isBp?"bindPopup":"bindTooltip"](text,assign(bindOption,{keepInView:false}));if(typeof on==="string"&&on!=="click"){if(leafletObject._openPopup)leafletObject.off("click",leafletObject._openPopup);if(leafletObject._tooltip)leafletObject.off("onmouseover",leafletObject._openTooltip);leafletObject.on(on,leafletObject[isBp?"_openPopup":"_openTooltip"]);if(isBp)leafletObject.baloonActive=false}else{if(isBp)leafletObject.baloonActive=baloonActive===undefined?true:baloonActive;off=false}if(off){if(leafletObject._tooltip)leafletObject.off("mouseout",leafletObject._closeTooltip);if(attr.type=="svg"){leafletObject._url.addEventListener(off,function(){leafletObject[isBp?"closePopup":"closeTooltip"]()})}leafletObject.on(off,function(){leafletObject[isBp?"closePopup":"closeTooltip"]()})}}}try{if(leafletObject.options.renderer&&leafletObject.options.renderer.options)leafletObject.options.renderer.options.name=cntlKey}catch(e){}return leafletObject};var mkGroupData=function(cntlKey,dataset){var rtn=[];if(!Map.getPane(cntlKey)){var pane=Map.createPane(cntlKey);pane.style.zIndex=dataset.zindex||0;if(dataset.className)pane.classList.add(dataset.className)}dataset.data.forEach(function(o,i){rtn.push(mkSvgLeafletObject(cntlKey,o,false,i))});return rtn};var changeGeojson=function(key,settingObject){var oiloadMode=Boolean(oiloadCntlKeys[key]);var plte=settingObject.plte;var colorData=settingObject.colorData;var binds=settingObject.popups||settingObject.tooltips||settingObject.eachPopups||settingObject.eachTooltips||false;var eachEvents=settingObject.events;var ishl=Boolean(settingObject.islandHighlight);var func=function(layer){if(eachEvents)for(var event in eachEvents)if(eachEvents.hasOwnProperty(event))layer.on(event,eachEvents[event]);if(settingObject.options)layer.setStyle(settingObject.options);if(colorData){var code=layer.feature.properties.code;if(plte&&plte[colorData[code]]){layer.setStyle(plte[colorData[code]])}if(ishl&&layer.feature.properties.islandBold){if(canvasMode)layer.options.weight=10;else layer.options.className=layer.options.className?layer.options.className+" IslHighLight __"+key:"IslHighLight __"+key}else layer.options.className=layer.options.className?layer.options.className+" __"+key:"__"+key}if(binds){binds.type=settingObject.hasOwnProperty("eachPopups")?"popup":"tooltip";var texts=binds.contents||binds.texts||{};if(binds.hasOwnProperty("texts"))console.error("[DEPRECATED] textsキーは非推奨です。contentsキーをご利用ください。");if(texts[layer.feature.properties.code])setPopup(layer,binds)}};if(oiloadMode){for(var i in relm)if(relm.hasOwnProperty(i)&&keyList[key+"_SplitPart_"+i])keyList[key+"_SplitPart_"+i].eachLayer(func);if(keyList[key+"_SplitPart_x"])keyList[key+"_SplitPart_x"].eachLayer(func)}else keyList[key].eachLayer(func)};var checkLoad=function(e,cntlKey,length){if(length===++loadCounter[cntlKey]){tileLoadStatus[cntlKey]=false;loadCounter[cntlKey]=0}};var changeRaster=function(cntlKey,path,settingObject){if(!keyList[cntlKey])return;if(tileLoadStatus[cntlKey])return;var nowstatus=layerConfig[cntlKey].display;var option=settingObject.options?assign(settingObject.options,{pane:cntlKey}):{pane:cntlKey};if(!keyList[cntlKey]._tiles)return;var length=Object.keys(keyList[cntlKey]._tiles).length;var config=assign(settingObject,{url:path.split("{")[0],options:option});layerConfig[cntlKey]=config;var dir=settingObject.url?settingObject.url.split("{")[0]:layerConfig[cntlKey].url;keyList[cntlKey]._url=dir+"{z}/{x}/{y}."+layerConfig[cntlKey].ext;if(layerConfig[cntlKey].display){if(!nowstatus){keyList[cntlKey].addTo(Map);return}}loadCounter[cntlKey]=0;var checka=document.createElement("a");for(var zxy in keyList[cntlKey]._tiles){if(!keyList[cntlKey]._tiles.hasOwnProperty(zxy))continue;var tile=keyList[cntlKey]._tiles[zxy];var img=tile.el;var reqstr=dir+tile.coords.z+"/"+tile.coords.x%Math.pow(2,Map._zoom)+"/"+tile.coords.y+"."+layerConfig[cntlKey].ext;var requestEquality=function(){checka.href=img.src;var req1=checka.href;checka.href=reqstr;var req2=checka.href;return req1===req2}();if(requestEquality)continue;tileLoadStatus[cntlKey]=true;if(!img.addListener){img.addEventListener("load",function(e){checkLoad(e,cntlKey,length)});img.addEventListener("abort",function(e){checkLoad(e,cntlKey,length)});img.addEventListener("error",function(e){checkLoad(e,cntlKey,length)});img.addListener=true}img.src=reqstr}};var changeData=function(key,settingObject){var option=layerConfig[key].options;var type=layerConfig[key].type;var pane=option.pane;if(settingObject.options)option=assign(option,settingObject.options);var newSettingObject=assign(layerConfig[key],settingObject);newSettingObject.type=type;newSettingObject.options=option;newSettingObject.options.pane=pane;if(type==="svg"){if(settingObject.hasOwnProperty("data")){if(!Array.isArray(settingObject.data))settingObject.data=[settingObject.data];newSettingObject.data=settingObject.data;keyList[key]=mkGroupData(key,newSettingObject)}delete newSettingObject.data}else{type==="geojson"||type==="split-geojson"?changeGeojson(key,newSettingObject):changeRaster(key,newSettingObject.url,newSettingObject)}layerConfig[key]=newSettingObject;if(oiloadCntlKeys[key]){oiloadConf[oiloadCntlKeys[key]].settingObjects[key]=newSettingObject;if(newSettingObject.maxZoom)oiloadConf[oiloadCntlKeys[key]].maxZoom=newSettingObject.maxZoom;if(newSettingObject.minZoom)oiloadConf[oiloadCntlKeys[key]].minZoom=newSettingObject.minZoom;checkCondition()}};var standbyOiload=function(mapKey,settingObjects,zxy,duration){if(oiloadFlag[mapKey])return;oiloadFlag[mapKey]=true;var minZoom=jsonName[mapKey+"xx"]?attr.minZoom:OILOAD_MINIMUM_ZOOM_LEVEL;var maxZoom=attr.maxZoom;for(var cntlKey in settingObjects){if(settingObjects.hasOwnProperty(cntlKey)){if(!keyList[cntlKey]&&!oiloadCntlKeys[cntlKey])oiloadCntlKeys[cntlKey]=mapKey;else throw"[JMAMapError]-[JMAMap.standbyOiload] 登録済みのキーです。データ保護のため処理を中断します。";if(settingObjects[cntlKey].minZoom&&minZoom<settingObjects[cntlKey].minZoom)minZoom=settingObjects[cntlKey].minZoom;if(settingObjects[cntlKey].maxZoom&&maxZoom>settingObjects[cntlKey].maxZoom)maxZoom=settingObjects[cntlKey].maxZoom;layerConfig[cntlKey]=assign(settingObjects[cntlKey],{type:"split-geojson",options:assign(settingObjects[cntlKey].options,{pane:cntlKey}),minZoom:minZoom,maxZoom:maxZoom});if(!layerConfig[cntlKey].zindex)layerConfig[cntlKey].zindex=0}}oiloadConf[mapKey]={minZoom:minZoom,maxZoom:maxZoom};oiloadConf[mapKey].settingObjects=assign(settingObjects,{});checkCondition(null,zxy,duration);Map.off("moveend",checkCondition);Map.on("moveend",checkCondition)};var checkCondition=function(e,zxy,duration){zl=Map._zoom;for(var oiloadKey in oiloadFlag){if(oiloadFlag.hasOwnProperty(oiloadKey)){if(oiloadConf[oiloadKey].minZoom<=zl&&zl<=oiloadConf[oiloadKey].maxZoom)relm?addSplitGeojson(oiloadKey,oiloadConf[oiloadKey].settingObjects,zxy,duration):getRelm(oiloadKey,oiloadConf[oiloadKey].settingObjects,zxy,duration)}}};var addSplitGeojson=function(mapKey,settingObject,zxy,duration){var needRefresh=false;if(Map._zoom<OILOAD_MINIMUM_ZOOM_LEVEL){var splitObject={};for(var key in settingObject)splitObject[key+"_SplitPart_x"]=settingObject[key];if(!loadedList[mapKey+"xx"])addGeojson(mapKey+"xx",splitObject,zxy,duration);else needRefresh=true;for(var i in relm){if(!relm.hasOwnProperty(i))continue;remove(Object.keys(settingObject).map(function(a){return a+"_SplitPart_"+i}))}}else{for(var i in relm){if(!relm.hasOwnProperty(i))continue;var splitObject={};for(var key in settingObject)splitObject[key+"_SplitPart_"+i]=settingObject[key];var ne=relm[i].ne;var sw=relm[i].sw;if(squareInfield(ne,sw)){if(!loadedList[mapKey+"x"+i])addGeojson(mapKey+"x"+i,splitObject,zxy,duration);else needRefresh=true}else remove(Object.keys(settingObject).map(function(a){return a+"_SplitPart_"+i}))}remove(Object.keys(settingObject).map(function(a){return a+"_SplitPart_x"}))}if(needRefresh)display()};var getRelm=function(mapKey,settingObject,zxy,duration){var xhr=new XMLHttpRequest;xhr.onloadend=function(){if(!keyList)return;relm=JSON.parse(xhr.responseText);addSplitGeojson(mapKey,settingObject,zxy,duration)};xhr.open("GET",baseDir+"common/const/relm.json"+getTimeString());xhr.send()};var changeDisplay=function(key){var leafletObject=keyList[key];var pane=Map.getPane(key);pane.attributes.style.value="z-index:"+layerConfig[key].zindex||0;pane.classList.remove("jmamap-events-none");if(leafletObject){if(Array.isArray(leafletObject)){leafletObject.sort(function(a,b){var aval=a.hasOwnProperty("priority")?a.priority:Number.NEGATIVE_INFINITY;var bval=b.hasOwnProperty("priority")?b.priority:Number.NEGATIVE_INFINITY;return aval<bval?-1:aval>bval?1:0}).forEach(function(o,i){if(o.attr.hasOwnProperty("type")){leafletObject[i]=mkSvgLeafletObject(key,assign(o.attr,{pane:key}),false,o.value);if(!leafletObject[i]._bounds&&pointinfield([leafletObject[i]._latlng.lat,leafletObject[i]._latlng.lng])||o.attr.type==="circle"&&(leafletObject[i]._mRadius?getCircleRange(leafletObject[i]._latlng,leafletObject[i]._mRadius):getCircleRangeByPx(leafletObject[i]._latlng,leafletObject[i].attr.radius))||leafletObject[i]._bounds&&squareInfield(leafletObject[i]._bounds._northEast,leafletObject[i]._bounds._southWest))leafletObject[i].addTo(Map);if(o.baloonActive)leafletObject[i][leafletObject[i]._popup?"openPopup":"openTooltip"]();return}else if(o.bringToFront){o.bringToFront()}if(leafletObject[i]._bounds&&!squareInfield(leafletObject[i]._bounds._northEast,leafletObject[i]._bounds._southWest))return;var obj=o.addTo(Map);if(o.baloonActive)obj[obj._popup?"openPopup":"openTooltip"]()});if(pendingRequests[key])changePriority(key)}else{if(RegExp("_SplitPart_[0-9|x]$").test(key)){var relmCode=key.split("_SplitPart_")[1];if(Map._zoom>=OILOAD_MINIMUM_ZOOM_LEVEL&&!squareInfield(relm[relmCode].ne,relm[relmCode].sw))return}leafletObject.addTo(Map)}activeList.push(key)}else if(oiloadCntlKeys[key]){if(Map._zoom<OILOAD_MINIMUM_ZOOM_LEVEL){if(activeList.indexOf(key+"_SplitPart_x")>=0||!keyList[key+"_SplitPart_x"])return;keyList[key+"_SplitPart_x"].addTo(Map);activeList.push(key+"_SplitPart_x")}else{for(var i in relm){if(relm.hasOwnProperty(i)&&oiloadCntlKeys[key]&&keyList[key+"_SplitPart_"+i]&&squareInfield(relm[i].ne,relm[i].sw)){if(activeList.indexOf(key+"_SplitPart_"+i)>=0)continue;keyList[key+"_SplitPart_"+i].addTo(Map);activeList.push(key+"_SplitPart_"+i)}}}}};var calcBound=function(rec,join){var rtn={};if(!join.hasOwnProperty("_northEast")||!join.hasOwnProperty("_southWest")){rtn=JSON.parse(JSON.stringify(rec))}else if(!rec){rtn=JSON.parse(JSON.stringify(join))}else{var ne={};var sw={};ne.lat=rec._northEast.lat>join._northEast.lat?rec._northEast.lat:join._northEast.lat;ne.lng=rec._northEast.lng>join._northEast.lng?rec._northEast.lng:join._northEast.lng;sw.lat=rec._southWest.lat<join._southWest.lat?rec._southWest.lat:join._southWest.lat;sw.lng=rec._southWest.lng<join._southWest.lng?rec._southWest.lng:join._southWest.lng;rtn._northEast=ne;rtn._southWest=sw}return rtn};var calcBounds=function(request){var bounds=null;for(var cntlKey in request){if(!request.hasOwnProperty(cntlKey))continue;var layer=keyList[cntlKey]||oiloadCntlKeys[cntlKey];if(!layer){console.error("[JMAMapError]-[JMAMap.calcBounds] 未登録のコントロールキーに対してzxyのリクエストが来ています。判定に含めませんので、想定通りの位置に行かない場合があります。未登録のキー:"+cntlKey);continue}var checkList=request[cntlKey];if(checkList.hasOwnProperty("_northEast")&&checkList.hasOwnProperty("_southWest")){bounds=calcBound(bounds,checkList)}if(layer.eachLayer){layer.eachLayer(function(l){var code=l.feature.properties.code;if(checkList==="all"||Array.isArray(checkList)&&checkList.indexOf(code)>=0)bounds=calcBound(bounds,l._bounds)})}else if(oiloadCntlKeys[cntlKey]){if(relm&&Map._zoom>=OILOAD_MINIMUM_ZOOM_LEVEL){for(var i in relm){var oilayer=keyList[cntlKey+"_SplitPart_"+i];if(!oilayer)continue;oilayer.eachLayer(function(l){var code=l.feature.properties.code;if(checkList==="all"||Array.isArray(checkList)&&checkList.indexOf(code)>=0)bounds=calcBound(bounds,l._bounds)})}}else if(Map._zoom<OILOAD_MINIMUM_ZOOM_LEVEL){var oilayer=keyList[cntlKey+"_SplitPart_x"];if(oilayer){oilayer.eachLayer(function(l){var code=l.feature.properties.code;if(checkList==="all"||Array.isArray(checkList)&&checkList.indexOf(code)>=0)bounds=calcBound(bounds,l._bounds)})}}}else{if(!Array.isArray(layer))layer=[layer];for(var i=0;i<layer.length;i++)if(checkList==="all"||Array.isArray(checkList)&&checkList.indexOf(layer[i].value)>=0)bounds=calcBound(bounds,layer[i].attr&&layer[i].attr.type==="circle"?layer[i]._mRadius?getCircleRange(layer[i]._latlng,layer[i]._mRadius):getCircleRangeByPx(layer[i]._latlng,layer[i].attr.radius):layer[i]._bounds||{_northEast:layer[i]._latlng,_southWest:layer[i]._latlng})}}if(!bounds)return Map.getBounds();var rtn=[[bounds._southWest.lat,bounds._southWest.lng],[bounds._northEast.lat,bounds._northEast.lng]];if(rtn[0][0]===rtn[1][0])rtn[1][0]+=.001;if(rtn[0][1]===rtn[1][1])rtn[1][1]+=.001;return rtn};var getCircleRangeByPx=function(ll,px){var xy=Map.latLngToContainerPoint(ll);var ne={x:xy.x-px,y:xy.y-px};var sw={x:xy.x+Number(px),y:xy.y+Number(px)};var newne=Map.containerPointToLatLng(ne);var newsw=Map.containerPointToLatLng(sw);return{_northEast:newne,_southWest:newsw}};var getCircleRange=function(ll,r){var c=4e7;var dlat=r/c*360;var cos=Math.cos(ll.lat*Math.PI/180);var dlng=dlat/cos;return{_northEast:{lat:ll.lat+dlat,lng:ll.lng+dlng},_southWest:{lat:ll.lat-dlat,lng:ll.lng-dlng}}};var remove=function(keys){if(!Array.isArray(keys))keys=[keys];keys.forEach(function(key){if(activeList.indexOf(key)<0&&!oiloadCntlKeys[key])return;var cntlKey=key.split("_SplitPart_")[0];var oiloadType=RegExp("_SplitPart_[0-9|x]$").test(key);if(!oiloadType)Map.getPane(cntlKey).classList.add("jmamap-events-none");var leafletObject=keyList[key];if(leafletObject){if(Array.isArray(leafletObject))leafletObject.forEach(function(o){Map.removeLayer(o)});else Map.removeLayer(leafletObject);activeList.splice(activeList.indexOf(key),1)}else if(oiloadCntlKeys[key]){for(var i in relm){if(relm.hasOwnProperty(i)&&activeList.indexOf(key+"_SplitPart_"+i)>=0){Map.removeLayer(keyList[key+"_SplitPart_"+i]);activeList.splice(activeList.indexOf(key+"_SplitPart_"+i),1)}}if(keyList[key+"_SplitPart_x"]&&activeList.indexOf(key+"_SplitPart_x")>=0){Map.removeLayer(keyList[key+"_SplitPart_x"]);activeList.splice(activeList.indexOf(key+"_SplitPart_x"),1)}}})};var checkPopup=function(e){var pane=e.popup._source.getPane();var cntlKey=pane.classList[1].split("-")[1];if(!cntlKey)return;var leafletObject=keyList[cntlKey];var conf=layerConfig[cntlKey];if(!Array.isArray(leafletObject))leafletObject=[leafletObject];leafletObject.forEach(function(o){if(!o)return;if(!o._popup){o.baloonActive=undefined;return}if(e.popup._source!==o)return;if(o._popup){if(e.type==="popupclose")o.baloonActive=false;else if(e.type==="popupopen")o.baloonActive=true}else o.baloonActive=undefined})};var manageFlag=function(){for(var key in tileLoadStatus)if(tileLoadStatus.hasOwnProperty(key))tileLoadStatus[key]=false};var getTimeString=function(){var tstr=(new Date).toISOString();return"?__time__="+tstr.replace(/\d{2}\.\d{3}Z$/g,"").replace(/-/g,"").replace(/:/g,"").replace(/T/g,"")};this.addRaster=function(cntlKey,path,settingObject){if(keyList[cntlKey])throw"[JMAMapError]-[JMAMap.addRaster] 登録済みのキーです。データ保護のため処理を中断します。";settingObject=assign({maxZoom:attr.maxZoom,minZoom:attr.minZoom,permanent:false,display:true},settingObject||{});if(!Map.getPane(cntlKey)){var pane=Map.createPane(cntlKey);pane.style.zIndex=settingObject?settingObject.zindex||0:0;if(settingObject.className)pane.classList.add(settingObject.className)}var option=settingObject.options?assign(settingObject.options,{pane:cntlKey}):{pane:cntlKey};var urlSplit=path.split(".");var ext=urlSplit[urlSplit.length-1];if(ext==="pbf"){option.vectorTileLayerStyles=function(){var rtn={};for(var key in option.pbfColors)rtn[key]=function(p,_z){if(Array.isArray(option.pbfColors[key])){var result=option.pbfColors[key].filter(function(o){var rtn=true;for(var matchKey in o.conditions){if(p[matchKey]&&rtn){rtn=p[matchKey]===o.conditions[matchKey]}}return rtn})[0];return result?result.style:{}}};return rtn}();keyList[cntlKey]=L.vectorGrid.protobuf(path,option)}else keyList[cntlKey]=L.tileLayer(path,option);var config=assign(settingObject,{url:path.split("{")[0],type:"raster",options:option,zindex:settingObject.zindex||0,ext:ext});layerConfig[cntlKey]=config;tileLoadStatus[cntlKey]=false;if(ext==="pbf")display()};var changePriority=function(key){var leafletObject=keyList[key];var arr=pendingRequests[key];var changed=false;leafletObject.forEach(function(o,i){if(o._icon){o._icon.style["z-index"]=arr[leafletObject[i].value].priority;changed=true}});if(changed)delete pendingRequests[key]};this.addGeojson=function(mapKey,settingObjects,zxy,duration){if(!settingObjects)return;Object.keys(settingObjects).forEach(function(key){var oiloadMode=RegExp("_SplitPart_[0-9|x]$").test(key);var cntlKey=key.split("_SplitPart_")[0];var settingObject=settingObjects[key];var option=settingObject.options||{};if(!Map.getPane(cntlKey)){var pane=Map.createPane(cntlKey);pane.style.zIndex=settingObject?settingObject.zindex||0:0;if(settingObject.className)pane.classList.add(settingObject.className)}option=assign(option,{pane:cntlKey});var config=assign(settingObject,{display:settingObject.display===undefined?true:Boolean(settingObject.display),permanent:Boolean(settingObject.permanent),mapKey:mapKey,options:option,type:"geojson",zindex:settingObject.zindex||0});if(!config.minZoom)config.minZoom=attr.minZoom;if(!config.maxZoom)config.maxZoom=attr.maxZoom;layerConfig[cntlKey]=layerConfig[cntlKey]||config;if(oiloadMode)oiloadConf[mapKey.split("x")[0]].settingObjects[cntlKey]=config});if(oiloadkeys.indexOf(mapKey)>=0){standbyOiload(mapKey,settingObjects,zxy,duration);return}var xhr=new XMLHttpRequest;xhr.onloadend=function(){if(!keyList)return;try{geojsonLoadend(JSON.parse(xhr.responseText),mapKey,Object.keys(settingObjects),settingObjects,zxy,duration)}catch(e){console.error(e,"[JMAMapError]-[JMAMap.addGeojson] 「"+mapKey+"」は未登録のキーです。")}};if(jsonName[mapKey]||jsonName[mapKey+"xx"]||mapKey){xhr.open("GET",(jsonName[mapKey]||jsonName[mapKey+"xx"]||mapKey)+getTimeString());xhr.send()}else{throw"[JMAMapError]-[JMAMap.addGeojson] 「"+mapKey+"」は未登録のキーです。"}};this.addSvgGroup=function(cntlKey,dataset){if(keyList[cntlKey])throw"[JMAMapError]-[JMAMap.addSvgGroup] 登録済みのキーです。データ保護のため処理を中断します。";if(!Array.isArray(dataset.data))dataset.data=[dataset.data];keyList[cntlKey]=mkGroupData(cntlKey,dataset);layerConfig[cntlKey]={minZoom:dataset.minZoom||attr.minZoom,maxZoom:dataset.maxZoom||attr.maxZoom,type:"svg",display:dataset.display===undefined?true:Boolean(dataset.display),permanent:Boolean(dataset.permanent),options:{pane:cntlKey},zindex:dataset.zindex||0}};this.changeLayerData=function(settingObjetsWithKeys){if(typeof settingObjetsWithKeys!=="object")return;var keys=Object.keys(settingObjetsWithKeys);var dinied=false;keys.forEach(function(key){if(!keyList[key]&&!oiloadCntlKeys[key])return;if(settingObjetsWithKeys[key]&&Array.isArray(settingObjetsWithKeys[key].data)&&settingObjetsWithKeys[key].data[0]&&!settingObjetsWithKeys[key].data[0].hasOwnProperty("type")){display();pendingRequests[key]=settingObjetsWithKeys[key].data;changePriority(key);return}else if(layerConfig[key].type!=="raster")remove(key);changeData(key,assign(settingObjetsWithKeys[key],{}))});display();return!dinied};this.removeLayer=function(keys){keys=keys||Object.keys(layerConfig);if(!Array.isArray(keys))keys=[keys];keys.forEach(function(key){if(layerConfig[key])layerConfig[key].display=false});display()};this.displayLayer=function(keys){keys=keys||Object.keys(layerConfig);if(!Array.isArray(keys))keys=[keys];keys.forEach(function(key){if(layerConfig[key])layerConfig[key].display=true});display()};this.toggle=function(keys){keys=keys||Object.keys(layerConfig);if(!Array.isArray(keys))keys=[keys];keys.forEach(function(key){if(layerConfig[key])layerConfig[key].display=!layerConfig[key].display});display()};this.display=function(){var keys=Object.keys(layerConfig);keys.forEach(function(key){if(removeCheck(key)){remove(key);return}if(layerConfig[key].type&&(layerConfig[key].type!=="raster"&&layerConfig[key].type!=="geojson"&&layerConfig[key].type!=="split-geojson"))remove(key);else if(activeList.indexOf(key)>=0)return;changeDisplay(key)})};this.changeView=function(zxy,duration){if(Array.isArray(zxy))Map.setView([zxy[1],zxy[2]],zxy[0],{duration:duration});else if(typeof zxy==="object")Map.fitBounds(calcBounds(zxy),{duration:duration,animate:true,padding:[30,30]})};this.center=function(){var latlon=Map.getCenter();return[latlon.lat,latlon.lng]};this.bound=function(){return JSON.parse(JSON.stringify(Map.getBounds()))};this.zl=function(){return Map._zoom};this.zxy=function(){var latlon=Map.getCenter();return[Map._zoom,latlon.lat,latlon.lng]};this.keyList=function(){var arr=Object.keys(keyList);var rtn=[];for(var i in arr){if(!arr.hasOwnProperty(i))continue;if(RegExp("_SplitPart_[0-9]$").test(arr[i])){var str=arr[i].split("_SplitPart_")[0];if(rtn.indexOf(str)<0)rtn.push(str)}else rtn.push(arr[i])}for(var oikey in oiloadCntlKeys)if(oiloadCntlKeys.hasOwnProperty(oikey))rtn.push(oikey);return rtn};this.activeList=function(){var arr=JSON.parse(JSON.stringify(activeList));var rtn=[];for(var i in arr){if(!arr.hasOwnProperty(i))continue;if(RegExp("_SplitPart_[0-9]$").test(arr[i])){var str=arr[i].split("_SplitPart_")[0];if(rtn.indexOf(str)<0)rtn.push(str)}else rtn.push(arr[i])}return rtn};this.destroy=function(){removeLayer();if(Map)Map.remove();for(var k in Map)Map[k]=null;keyList=null;Map=null};this.on=function(request){for(var evtname in request)Map.off(evtname,request[evtname]);for(var evtname in request)Map.on(evtname,request[evtname])};this.getData=function(){return keyList};this.getConf=function(){return layerConfig};this.isTileLoading=function(){var rtn=false;for(var key in tileLoadStatus){if(tileLoadStatus.hasOwnProperty(key)){rtn=rtn||tileLoadStatus[key]}}return rtn};this.getTileLoadStatus=function(){return JSON.parse(JSON.stringify(tileLoadStatus))};this.redraw=function(){Map.invalidateSize()};this.xy2latlon=function(x,y){return Map.containerPointToLatLng({x:x,y:y})};this.disable=function(o){o.forEach(function(k){if(Map[k].disable)Map[k].disable()})};this.enable=function(o){o.forEach(function(k){if(Map[k].enable)Map[k].enable()})};this.tagName=tgn;var addRaster=this.addRaster;var addGeojson=this.addGeojson;var display=this.display;var removeLayer=this.removeLayer;var changeView=this.changeView;Map.on("moveend",display);Map.on("moveend",manageFlag);Map.on("zoomend",changeSvgSize);Map.on("popupclose",checkPopup);Map.on("popupopen",checkPopup);mapLoad();for(var e in evt)if(evt.hasOwnProperty(e))Map.on(e,evt[e]);if(urlwithpos){var hashlist=location.hash.slice(1).split("&");var hashstr=hashlist.length===0?"":"&"+hashlist.join("&");var congenitalzxy=hashlist[0].split("/");if(congenitalzxy.length!==4){history.replaceState(getlastpos(),null,getnowpos()+hashstr)}else{Map.setView([Number(congenitalzxy[1]),Number(congenitalzxy[2])],Number(congenitalzxy[0]));zxy=congenitalzxy}Map.on("moveend",function(){var hl=location.hash.slice(1).split("&");hl.shift();var str=hl.length===0?"":"&"+hl.join("&");history.replaceState(getnowpos(),null,getnowpos()+str)});window.addEventListener("popstate",move2statuspoint)}if(gl){addgridline();addlatlontxts();Map.on("moveend",addlatlontxts)}if(scale){L.control.scale({imperial:false}).addTo(Map)}};root.JMAMap.mapProp={baseDir:"",zxy:undefined,latlon:[35,135],zoomLevel:5,minZoom:5,maxZoom:8,eventAttr:{},posURL:false,options:{zoomControl:false,keyboard:false,fadeAnimation:false,attributionControl:false},tagId:"map",gridLine:0,scale:false,dragging:!L.Browser.mobile,tap:!L.Browser.mobile,baseMaps:[{type:"gsi-pale",zindex:-1,name:"BASEMAP"}],lang:"jp"}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
"use strict";(function(root){root.JMAMapMovie=function(movieConfig,Map){if(!movieConfig.slider||!Array.isArray(movieConfig.slider)||movieConfig.slider.length===0)throw"[JMAMap-movieError] sliderが不正です。";var slider=movieConfig.slider;var interval=movieConfig.interval||400;var defaultNotch=movieConfig.speedNotch>=0&&movieConfig.speedNotch<=4?movieConfig.speedNotch:2;var execInterval=interval*Math.pow(2,-defaultNotch+2);var counter=movieConfig.startPosition!==undefined?Number(movieConfig.startPosition):slider.length-1;var isMovie=movieConfig.startButton!==false;var needMainSlider=movieConfig.mainSlider===undefined?true:movieConfig.mainSlider;var needSubSlider=movieConfig.subSlider===undefined?true:Boolean(movieConfig.subSlider);var subSliderList=movieConfig.subSliderList||null;var skipList=movieConfig.skipList||[];if(skipList.indexOf(counter)>=0){counter=function(){for(var i=counter;i>=0;i--)if(skipList.indexOf(i)<0)return i;return counter}()}var childHighlight=movieConfig.childHighlight===undefined?false:movieConfig.childHighlight;var parentID=movieConfig.parentID||"unitmap-timeslider";var slidersize=slider.length;var scaleStyle=movieConfig.scaleStyle||"span";var rangeMoving=false;var rangeButton=null;var rangeleft=0;var rangeright=0;if(counter>=slidersize)counter=slidersize-1;var x=0;var offset=0;var buttonwidth=0;var nIntervId=null;var slidertag=null;var moviestatus=false;var waitCounter=0;var callCounter=0;var requestList=new Array(slidersize);var requestWait=false;var callback=movieConfig.callback||null;if(!isMovie){document.getElementById(parentID).setAttribute("class","unitmap-nonmovie")}else{document.getElementById(parentID).classList.remove("unitmap-nonmovie")}var moviecontrol=function(){document.getElementById("unitmap-playbutton").setAttribute("src",moviestatus?"common/image/slider_play_y.svg":"common/image/slider_pause_y.svg");if(!moviestatus){setpos();if(counter+1===slidersize)waitCounter=4;for(var i=0;i<slidersize;i++){var request=new Promise(function(res){if(requestList[i])res(requestList[i]);else UnitMap.rapidRequest(i,slider[i],res)});request.then(function(res){if(res==="fail")return;callCounter++;requestList[res.idx]=res.res;if(callCounter==slidersize){callCounter=0;nIntervId=setInterval(next,execInterval);moviestatus=true}})}}else{clearInterval(nIntervId);counter=Number(document.getElementsByClassName("unitmap-selecton")[0].attributes.value.value);moviestatus=false;removeReject()}};var setpos=function(){for(var i in slidertag.childNodes){if(slidertag.childNodes[i].className.split(" ").indexOf("unitmap-selecton")>=0){counter=Number(i);return}}};var stop=function(){clearInterval(nIntervId);moviestatus=false};var keycheck=function(e){if(e.keyCode===37)former();else if(e.keyCode===39)next()};var reject=function(){document.getElementById(scaleStyle==="span"?"unitmap-mainslider":"unitmap-subslider").childNodes[counter].classList.add("unitmap-reject");if(!moviestatus){var intervalId=setInterval(function(){document.getElementById(scaleStyle==="span"?"unitmap-mainslider":"unitmap-subslider").childNodes[counter].classList.remove("unitmap-reject");clearInterval(intervalId)},600)}};var removeReject=function(){var targets=document.getElementsByClassName("unitmap-reject");for(;targets.length>0;)targets[0].classList.remove("unitmap-reject")};var rapidChange=function(e,dragmode){if(requestWait){reject();return}removeReject();requestWait=true;var tmpidx=Number(e.currentTarget.attributes.value.value);if(dragmode){changeslider(tmpidx)}if(skipList.indexOf(tmpidx)>=0){requestWait=false;return}if(requestList[tmpidx]){var request=new Promise(function(res){UnitMap.movie(requestList[tmpidx],res,{callback:callback,argument:requestList[tmpidx].argument})});request.then(function(succeed){if(succeed)changeslider(tmpidx);else reject();requestWait=false})}else{var request=new Promise(function(res){UnitMap.rapidRequest(tmpidx,document.getElementsByClassName("unitmap-selecton")[0],res)});request.then(function(rrres){var request=new Promise(function(res){UnitMap.movie(rrres.res,res,{callback:callback,argument:rrres.res.argument});requestList[tmpidx]=rrres.res});request.then(function(succeed){if(succeed)changeslider(tmpidx);else reject();requestWait=false})})}};var startMove=function(e){var target=document.getElementById("unitmap-subslider").childNodes;var width=target[0].getBoundingClientRect().width;if(scaleStyle==="span"){rangeleft=target[0].getBoundingClientRect().left+width/2;rangeright=target[target.length-1].getBoundingClientRect().left+width/2}else{rangeleft=target[0].getBoundingClientRect().left;rangeright=target[target.length-1].getBoundingClientRect().left}x=e.pageX?e.pageX:e.touches[0].screenX;offset=document.getElementById("unitmap-subslider").childNodes[0].getBoundingClientRect().left;buttonwidth=document.getElementById("unitmap-progress-button").getBoundingClientRect().width;document.getElementById("unitmap-timeslider").classList.add("unitmap-range-moving");rangeMoving=true};var changeRange=function(e){if(rangeMoving){var absolutex=e.pageX!==undefined?e.pageX:e.touches[0].screenX;var pos=(e.pageX!==undefined?e.pageX:e.touches[0].screenX)-x;if(absolutex<rangeleft||rangeright<absolutex)return;rangeButton.style.left=pos+"px";var parent=rangeButton.parentNode.parentNode;var parentWidth=rangeButton.parentNode.parentNode.offsetWidth;if(scaleStyle==="span")parentWidth-=(parent.firstChild.offsetWidth+parent.lastChild.offsetWidth)/2;if(scaleStyle!=="span")parentWidth-=parent.lastChild.offsetWidth;var newx=scaleStyle==="span"?rangeButton.getBoundingClientRect().left+buttonwidth/2-offset-parent.firstChild.offsetWidth/2:rangeButton.getBoundingClientRect().left+buttonwidth/2-offset;var idx=Math.round(newx/(parentWidth/(slider.length-1)));if(idx<0)idx=0;if(idx>slider.length-1)idx=slider.length-1;var target=document.getElementById("unitmap-slidervalue");if(typeof subSliderList[idx]==="string")target.innerHTML=subSliderList[idx];else if(counter!==idx){var children=target.childNodes;for(;children.length;)children[0].parentNode.removeChild(children[0]);target.appendChild(subSliderList[idx])}}};var endMove=function(e){if(!rangeMoving)return;var parent=rangeButton.parentNode.parentNode;var parentWidth=rangeButton.parentNode.parentNode.offsetWidth;if(scaleStyle==="span")parentWidth-=(parent.firstChild.offsetWidth+parent.lastChild.offsetWidth)/2;if(scaleStyle!=="span")parentWidth-=parent.lastChild.offsetWidth;var lastx=scaleStyle==="span"?rangeButton.getBoundingClientRect().left+buttonwidth/2-offset-parent.firstChild.offsetWidth/2:rangeButton.getBoundingClientRect().left+buttonwidth/2-offset;var idx=Math.round(lastx/(parentWidth/(slider.length-1)));if(idx<0)idx=0;if(idx>slider.length-1)idx=slider.length-1;if(skipList.indexOf(idx)>=0){var test=100;var newidx=idx;for(var i=0;i<slider.length;i++){if(skipList.indexOf(i)<0&&Math.abs(idx-i)<test){test=Math.abs(idx-i);newidx=i}}idx=newidx}rangeButton.style.left="0px";document.getElementById("unitmap-timeslider").classList.remove("unitmap-range-moving");if(counter!==idx)rapidChange({currentTarget:document.getElementsByClassName("unitmap-slidercell")[idx]},true);rangeMoving=false};var next=function(){if(requestWait){reject();return}removeReject();if(!moviestatus)requestWait=true;var nowpos=document.getElementById("unitmap-progress-button").parentNode.parentNode;if(!nowpos){requestWait=false;return}var nowidx=Number(nowpos.attributes.value.value);var idx;var realSize=skipList.indexOf(slidersize-1)>=0?function(){for(var i=slidersize-1;i>=0;i--)if(skipList.indexOf(i)<0)return i+1;return slidersize}():slidersize;if(moviestatus&&realSize===nowidx+1){if(waitCounter!==4){waitCounter++;requestWait=false;return}waitCounter=0;idx=skipList.indexOf(0)>=0?function(){for(var i=0;i<slidersize;i++)if(skipList.indexOf(i)<0)return i;return 0}():0}else if(skipList.indexOf(nowidx+1)>=0){idx=function(){for(var i=nowidx+1;i<slidersize;i++)if(skipList.indexOf(i)<0)return i;return nowidx}()}else idx=nowidx+1;if(idx>=slider.length){requestWait=false;return}var request;if(moviestatus||requestList[idx]){request=new Promise(function(res){UnitMap.movie(requestList[idx],res,{callback:callback,argument:requestList[idx].hasOwnProperty("argument")?requestList[idx].argument:undefined})});request.then(function(succeed){requestWait=false;if(!succeed){idx--;return}changeslider(idx)})}else{request=new Promise(function(res){UnitMap.rapidRequest(idx,nowpos,res)});request.then(function(rrres){var request=new Promise(function(res){UnitMap.movie(rrres.res,res,{callback:callback,argument:rrres.res.argument});requestList[idx]=rrres.res});request.then(function(succeed){requestWait=false;if(!succeed){idx--;return}changeslider(idx)})})}};var former=function(){if(requestWait){reject();return}removeReject();requestWait=true;var nowpos=document.getElementById("unitmap-progress-button").parentNode.parentNode;if(!nowpos){requestWait=false;return}var nowidx=Number(nowpos.attributes.value.value);var idx;if(moviestatus&&nowidx===0)idx=slidersize-1;else if(skipList.indexOf(nowidx-1)>=0){idx=function(){for(var i=nowidx-1;i>=0;i--)if(skipList.indexOf(i)<0)return i;return nowidx}()}else idx=nowidx-1;if(idx<0){requestWait=false;return}if(requestList[idx]){request=new Promise(function(res){UnitMap.movie(requestList[idx],res,{callback:callback,argument:requestList[idx].hasOwnProperty("argument")?requestList[idx].argument:undefined})});request.then(function(succeed){requestWait=false;if(!succeed){idx++;return}changeslider(idx)})}else{var request=new Promise(function(res){UnitMap.rapidRequest(idx,nowpos,res)});request.then(function(rrres){var request=new Promise(function(res){UnitMap.movie(rrres.res,res,{callback:callback,argument:rrres.res.argument});requestList[idx]=rrres.res});request.then(function(succeed){requestWait=false;if(!succeed){idx++;return}changeslider(idx)})})}};var changeslider=function(idx){var offtag=slidertag.getElementsByClassName("unitmap-selecton")[0];var highlights=document.getElementsByClassName("unitmap-highlight");for(var i=0;i<highlights.length;)highlights[0].classList.remove("unitmap-highlight");offtag.classList.add("unitmap-selectoff");offtag.classList.remove("unitmap-selecton");offtag.classList.remove("unitmap-highlight");if(skipList.indexOf(idx)<0)offtag.onclick=rapidChange;var ontag=slidertag.childNodes[idx];ontag.classList.remove("unitmap-selectoff");ontag.classList.add("unitmap-selecton");if(scaleStyle==="span"){if(ontag.childNodes.length>0&&ontag.childNodes[0].firstChild&&childHighlight){ontag.childNodes[0].classList.add("unitmap-highlight");if(typeof childHighlight==="string"&&childHighlight)ontag.childNodes[0].classList.add(childHighlight)}else ontag.classList.add("unitmap-highlight")}ontag.onclick=null;var subon=document.getElementById("unitmap-subslider").childNodes[idx];for(var i=0;i<idx;i++)document.getElementById("unitmap-subslider").childNodes[i].classList.add("unitmap-highlight");subon.appendChild(document.getElementById("unitmap-knob"));var valtag=document.getElementById("unitmap-slidervalue");if(typeof subSliderList[idx]==="string")valtag.innerHTML=subSliderList[idx];else if(counter!==idx){var children=valtag.childNodes;for(;children.length;)children[0].parentNode.removeChild(children[0]);valtag.appendChild(subSliderList[idx])}counter=idx};var mkslider=function(){var rtnobj=null;var parent=document.getElementById(parentID);parent.classList.remove("unitmap-short-scale");var togglebutton=document.createElement("span");togglebutton.setAttribute("id","unitmap-timeslider-togglebutton");togglebutton.classList.add("unitmap-timeslider-display");togglebutton.onclick=function(e){e.currentTarget.classList.toggle("unitmap-timeslider-display")};parent.appendChild(togglebutton);if(slider.length<5&&scaleStyle==="span")parent.classList.add("unitmap-short-scale");var table=document.createElement("table");table.setAttribute("class",scaleStyle==="span"?"unitmap-spanscale":"unitmap-pointscale");var tbody=document.createElement("tbody");var subSlider=document.createElement("tr");subSlider.setAttribute("id","unitmap-subslider");if(!isMovie&&!needSubSlider)subSlider.classList.add("unitmap-hide");for(var i=0;i<slidersize;i++){var subtd=document.createElement("td");subtd.setAttribute("value",i);subtd.classList.add("unitmap-rangecell");subtd.onclick=function(e){var id=e.currentTarget.attributes.value.value;var pos=e.currentTarget.getBoundingClientRect();var middle=(pos.left+pos.right)/2;if(scaleStyle==="point"&&middle<(e.pageX?e.pageX:e.touches[0].screenX))id++;if(skipList.indexOf(Number(id))<0)if(counter!==Number(id))rapidChange({currentTarget:document.getElementsByClassName("unitmap-slidercell")[id]})};if(i<counter)subtd.classList.add("unitmap-highlight");if(counter===i){rangeButton=document.createElement("div");rangeButton.setAttribute("id","unitmap-knob");var buttondiv=document.createElement("div");buttondiv.setAttribute("id","unitmap-progress-button");buttondiv.onmousedown=startMove;buttondiv.ontouchstart=startMove;document.onmousemove=changeRange;document.onmouseup=endMove;document.ontouchmove=changeRange;document.ontouchend=endMove;var valuediv=document.createElement("div");valuediv.setAttribute("id","unitmap-slidervalue");rangeButton.appendChild(buttondiv);rangeButton.appendChild(valuediv);subtd.appendChild(rangeButton)}subSlider.appendChild(subtd)}tbody.appendChild(subSlider);var space=document.createElement("tr");space.setAttribute("class","unitmap-cellspace");tbody.appendChild(space);var mainSlider=document.createElement("tr");mainSlider.setAttribute("id","unitmap-mainslider");if(isMovie&&!needMainSlider)mainSlider.classList.add("unitmap-hide");for(var i=0;i<slidersize;i++){var td=document.createElement("td");td.classList.add("unitmap-slidercell");if(skipList.indexOf(i)>=0)td.classList.add("unitmap-skip");td.setAttribute("value",i);var innerdiv=null;if(typeof slider[i]==="string"){innerdiv=document.createElement("div");innerdiv.innerHTML=slider[i]}else innerdiv=slider[i];td.appendChild(innerdiv);if(counter===i){td.classList.add("unitmap-selecton");if(scaleStyle==="span")childHighlight?td.childNodes[0].classList.add("unitmap-highlight"):td.classList.add("unitmap-highlight")}else td.onclick=rapidChange;td.classList.add("unitmap-selectoff");mainSlider.appendChild(td)}tbody.appendChild(mainSlider);var underspace=document.createElement("tr");underspace.setAttribute("class","unitmap-cellspace");tbody.appendChild(underspace);table.appendChild(tbody);parent.appendChild(table);rtnobj=mainSlider;if(!subSliderList){subSliderList=[];var sliders=mainSlider.childNodes;for(var i=0;i<sliders.length;i++)subSliderList.push(childHighlight?sliders[i].childNodes[0].innerHTML:sliders[i].innerHTML)}if(typeof subSliderList[counter]==="string")valuediv.innerHTML=subSliderList[counter];else valuediv.appendChild(subSliderList[counter]);if(isMovie){var moviebutton=document.createElement("div");var buttondiv=document.createElement("div");var fowardButton=document.createElement("img");fowardButton.setAttribute("src","common/image/slider_skip_backward_y.svg");fowardButton.onclick=former;var backwardButton=document.createElement("img");backwardButton.setAttribute("src","common/image/slider_skip_forward_y.svg");backwardButton.onclick=next;var playButton=document.createElement("img");playButton.setAttribute("src","common/image/slider_play_y.svg");playButton.onclick=next;playButton.addEventListener("click",moviecontrol);playButton.setAttribute("id","unitmap-playbutton");buttondiv.appendChild(playButton);buttondiv.appendChild(fowardButton);buttondiv.appendChild(backwardButton);moviebutton.appendChild(buttondiv);moviebutton.setAttribute("id","unitmap-moviebutton");parent.appendChild(moviebutton);var taco=document.createElement("div");var tacoimg=document.createElement("img");tacoimg.setAttribute("src","common/image/slider_tachometer_2.svg");tacoimg.addEventListener("click",changeSpeed);tacoimg.setAttribute("id","unitmap-tacobutton");tacoimg.value=defaultNotch;var tacorange=document.createElement("input");tacorange.addEventListener("change",speedControl);tacorange.setAttribute("type","range");tacorange.setAttribute("id","unitmap-tacorange");tacorange.setAttribute("step",1);tacorange.setAttribute("min",0);tacorange.setAttribute("max",4);tacorange.value=defaultNotch;taco.appendChild(tacoimg);taco.appendChild(tacorange);moviebutton.appendChild(taco)}return rtnobj};var changeSpeed=function(e){var notch=Number(e.currentTarget.value)+1;if(notch>4)notch=0;e.currentTarget.value=notch;document.getElementById("unitmap-tacorange").value=notch;e.currentTarget.src="common/image/slider_tachometer_"+notch+".svg";execInterval=interval*Math.pow(2,-notch+2);if(moviestatus){clearInterval(nIntervId);nIntervId=setInterval(next,execInterval)}};var speedControl=function(e){var notch=Number(e.currentTarget.value);execInterval=interval*Math.pow(2,-notch+2);var target=document.getElementById("unitmap-tacobutton");target.value=notch;target.src="common/image/slider_tachometer_"+notch+".svg";if(moviestatus){clearInterval(nIntervId);nIntervId=setInterval(next,execInterval)}};var getMovieStatus=function(){return moviestatus};var getSliderIndex=function(){return counter};var getDefaultInterval=function(){return interval};var getInterval=function(){return execInterval};var getSliderLength=function(){return slidersize};var getRequestList=function(){return requestList};var getSpeedNotch=function(){var target=document.getElementById("unitmap-tacorange");return target?Number(document.getElementById("unitmap-tacorange").value):null};slidertag=mkslider();window.onkeydown=keycheck;Map.on({keydown:keycheck});root.JMAMapMovie.reject=reject;root.JMAMapMovie.stop=stop;root.JMAMapMovie.movieOn=getMovieStatus;root.JMAMapMovie.getSliderIndex=getSliderIndex;root.JMAMapMovie.getDefaultInterval=getDefaultInterval;root.JMAMapMovie.getInterval=getInterval;root.JMAMapMovie.getSliderLength=getSliderLength;root.JMAMapMovie.getRequestList=getRequestList;root.JMAMapMovie.getSpeedNotch=getSpeedNotch}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
"use strict";(function(root){root.JMAmapPS=root.JMAmapPS||{};var ps=root.JMAmapPS;var relm=null;var Map=null;var basePath=null;var class20={};var success=null;var fail=null;var modes=["develop","bosai","botei","example"];var isTop=false;ps.suggest=function(callbackobj){success=callbackobj.success;fail=callbackobj.fail;var splits=location.href.split("/");isTop=modes.indexOf(splits[splits.length-2])>=0;basePath=callbackobj.basePath||"../";navigator.geolocation.getCurrentPosition(_success,error,{timeout:1e4})};var _success=function(gpspos){var co=gpspos.coords;var latlon=[co.latitude,co.longitude];var acc=co.accuracy;var xhr=new XMLHttpRequest;xhr.onloadend=function(){relm=JSON.parse(xhr.responseText);var calcmap=document.createElement("div");calcmap.setAttribute("id","calcmap");document.body.appendChild(calcmap);Map=L.map("calcmap",{zoomControl:false,attributionControl:false}).setView(latlon,18);estimate(latlon,acc)};if(relm){estimate(latlon,acc)}else{xhr.open("GET",basePath+"common/const/class20relm.json");xhr.send()}};var error=function(err){if(fail)fail(err);else console.log(err)};var estimate=function(latlon,acc){var cities={};var nearestcode=null;var nearestdist=1e5;var estimated=false;var border=Map.getBounds();for(var key in relm){if(squareInfield(border,relm[key].ne,relm[key].sw))cities[relm[key].name]=basePath+"common/const/geojson/class20s/"+key+".json";var center=[(relm[key].ne[0]+relm[key].sw[0])*.5,(relm[key].ne[1]+relm[key].sw[1])*.5];var d=calcDistance(latlon,center);if(d<nearestdist){nearestdist=d;nearestcode=key}}JMAWebUtility.parallelRequest(cities,function(class20data){for(var cityname in class20data)class20[class20data[cityname].features[0].properties.code]=class20data[cityname].features[0].geometry.coordinates;var pos=identify(latlon);if(!pos){pos=nearestcode;estimated=true}success(pos,estimated,acc)})};var calcDistance=function(pos,testpos){var latd=Math.abs(pos[0]-testpos[0]);var lond=Math.abs(pos[1]-testpos[1])*Math.cos((pos[0]+testpos[0])*.5*Math.PI/180);return 4e4/360*Math.sqrt(latd*latd+lond*lond)};var checkInclusion=function(latlon,citykey){var list=[];for(var i in citykey){var data=class20[citykey[i]];if(polygonsContainsPoint(data,[latlon[1],latlon[0]]))list.push(citykey[i])}return list};var polygonsContainsPoint=function(polygons,point){var ncross=0;for(var i=0;i<polygons.length;i++){var polygon=polygons[i];polygon.push(polygon[0]);for(var j=0;j<polygon.length-1;j++){var point1=polygon[j];var point2=polygon[j+1];if(point1[1]>=point[1]&&point2[1]<point[1]||point1[1]<=point[1]&&point2[1]>point[1]){var lon=point1[0]+(point[1]-point1[1])*(point2[0]-point1[0])/(point2[1]-point1[1]);if(point[0]>lon){ncross+=1}}}}return ncross%2===1};var squareInfield=function(border,ne,sw){var northSouthout=ne[0]<border._southWest.lat;var southNorthout=border._northEast.lat<sw[0];var eastWestout=ne[1]<border._southWest.lng;var westEastout=border._northEast.lng<sw[1];return!(northSouthout||southNorthout||eastWestout||westEastout)};var identify=function(latlon){var city="";var parent=[];var citykey=[];Map.setView(latlon,18);var border=Map.getBounds();for(var key in relm){if(squareInfield(border,relm[key].ne,relm[key].sw)){city+=(city?",":"")+relm[key].name;parent.push(relm[key].parent);citykey.push(key)}}var identify=checkInclusion(latlon,citykey);return identify[0]}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){root.Draw=function(jmamap,res){var assign=function(a,b){var rtn={};for(var key in a)rtn[key]=a[key];for(key in b)rtn[key]=b[key];return rtn};var mkSettingobj=function(d,dispflag){var rtn={};if(d.plte)rtn.plte=d.plte;if(d.colorData)rtn.colorData=d.colorData;else if(d.colorSet)rtn.colorSet=d.colorSet;if(d.popups){rtn.eachPopups=d.popups;rtn.eachPopups.type="popup"}if(d.tooltips){rtn.eachTooltips=d.tooltips;rtn.eachTooltips.type="tooltip"}if(d.events){rtn.events=d.events}if(d.minZoom){rtn.minZoom=d.minZoom}if(d.maxZoom){rtn.maxZoom=d.maxZoom}if(d.zindex){rtn.zindex=d.zindex}if(d.islandBold){rtn.islandHighlight=d.islandBold}if(d.permanent){rtn.permanent=d.permanent}if(d.className)rtn.className=d.className;rtn.display=d.hasOwnProperty("display")?d.display:dispflag!==undefined?dispflag:true;if(d.options){rtn.options=d.options}return rtn};var mkSvgData=function(d,dispflag){var dataset=[];var conf={display:false,zindex:0,maxZoom:100,minZoom:0};d.forEach(function(svgdata){if(svgdata.attr){dataset.push(svgdata.attr);return}var obj={};if(svgdata.type){obj.type=svgdata.type}else{throw"[Unitmap-Error] typeキーは必須です。"}if(svgdata.latlon){obj.latlon=svgdata.latlon}else{throw"[Unitmap-Error] latlonキーは必須です。"}if(svgdata.svgConfig){obj.svgConfig=svgdata.svgConfig}else if(svgdata.type==="svg"&&svgdata.type==="rect"&&svgdata.type==="circle"){throw"[Unitmap-Error] confキーは必須です。"}if(svgdata.type==="raster"){if(svgdata.src)obj.src=svgdata.src;else if(svgdata.svgConfig){obj.src=svgdata.svgConfig.src;if(!obj.src)throw"[Unitmap-Error] srcキーは必須です。"}}if(svgdata.bindPopup){obj.popup=svgdata.bindPopup;obj.popup.type="popup"}if(svgdata.bindTooltip){obj.tooltip=svgdata.bindTooltip;obj.tooltip.type="tooltip"}obj.autoCenter=true;if(svgdata.autoCenter===false){obj.autoCenter=false}if(svgdata.positionShift){obj.shiftPoint=svgdata.positionShift}if(svgdata.autoShift){obj.autoshift=svgdata.autoShift}if(svgdata.events){obj.events=svgdata.events}if(svgdata.arg){obj.arg=svgdata.arg}if(svgdata.radius){obj.radius=svgdata.radius}if(svgdata.priority){obj.zIndexOffset=svgdata.priority}if(svgdata.domElement||svgdata.svgConfig&&svgdata.svgConfig.domElement){obj.domElement=svgdata.domElement||svgdata.svgConfig.domElement}if(svgdata.svg||svgdata.svgConfig&&svgdata.svgConfig.svg){obj.svg=svgdata.svg}else if(svgdata.svgChild||svgdata.svgConfig&&svgdata.svgConfig.svgChild){obj.svgChild=svgdata.svgChild||svgdata.svgConfig.svgChild}if(svgdata.size){obj.size=svgdata.size}if(svgdata.zindex){conf.zindex=svgdata.zindex}if(svgdata.minZoom){conf.minZoom=svgdata.minZoom}if(svgdata.maxZoom){conf.maxZoom=svgdata.maxZoom}if(svgdata.permanent){conf.permanent=svgdata.permanent}conf.display=svgdata.hasOwnProperty("display")?svgdata.display:dispflag!==undefined?dispflag:true;if(svgdata.option||svgdata.options){obj.options=svgdata.options||svgdata.option}dataset.push(obj)});return{dataset:dataset,conf:conf}};var takeDiff=function(d){if(Array.isArray(d)){var rtn={data:[]};for(var i in d){if(d.hasOwnProperty(i)){if(d[i].zindex)rtn.zindex=d[i].zindex;if(d[i].minZoom)rtn.minZoom=d[i].minZoom;if(d[i].maxZoom)rtn.maxZoom=d[i].maxZoom;if(d[i].hasOwnProperty("permanent"))rtn.permanent=d[i].permanent;if(d[i].hasOwnProperty("display"))rtn.display=d[i].display;rtn.data.push(translate(d[i]))}}return rtn}return translate(d)};var translate=function(d){if(!d)return null;if(d.latlon)d.realpoint=d.latlon,delete d.latlon;if(d.option)d.options=d.option,delete d.option;if(d.shiftPoint)d.shiftPoint=d.positionShift,delete d.shiftPoint;if(d.autoShift)d.autoshift=d.autoShift,delete d.autoShift;if(d.conf)d.svgConfig=d.conf,delete d.conf;if(d.tileUrl)d.url=d.tileUrl,delete d.tileUrl;return d};var draw=function(){var data=res.data;var disp=res.disp;var mapdata={};var keyList=jmamap.keyList();var diffList=null;for(var cntlkey in data){var dispflag=disp&&disp.indexOf(cntlkey)>=0;var d=data[cntlkey];if(keyList.indexOf(cntlkey)>=0){diffList=diffList||{};diffList[cntlkey]=takeDiff(d);continue}if(d.type||d.data||Array.isArray(d)){var settingObject={};if(d.data)settingObject=d;else{try{var req=mkSvgData(Array.isArray(d)?d:[d],dispflag)}catch(e){jmamap.display();console.error(e)}settingObject=req.conf||{};settingObject.data=req.dataset}jmamap.addSvgGroup(cntlkey,settingObject)}else if(d.tileUrl){var settingobj={zindex:0,display:false,permanent:d.permanent,maxZoom:100,minZoom:0};if(d.maxZoom){settingobj.maxZoom=d.maxZoom}if(d.minZoom){settingobj.minZoom=d.minZoom}if(d.zindex){settingobj.zindex=d.zindex}if(d.display){settingobj.display=d.display}jmamap.addRaster(cntlkey,d.tileUrl,assign(settingobj,d))}else if(d.mapKey){if(!mapdata[d.mapKey])mapdata[d.mapKey]={};mapdata[d.mapKey][cntlkey]=d.settingobj?d.settingobj:mkSettingobj(d,dispflag)}}if(diffList)jmamap.changeLayerData(diffList);if(Object.keys(mapdata).length>0)for(var mapKey in mapdata)jmamap.addGeojson(mapKey,mapdata[mapKey],res.zxy&&!Array.isArray(res.zxy)?res.zxy:null,res.duration);else if(res.zxy&&!Array.isArray(res.zxy))jmamap.changeView(res.zxy,res.duration,Object.keys(mapdata).length===0);jmamap.display()};draw()}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){var namespace=null;var gpsarearank="class20s";var pageLoad=new Date;var lastUpdate=new Date;var areaData=null;var dispData=null;var amSelectors=null;var xyData=null;var pageHash=null;var contentsName=null;var loadingStatus=false;var map=null;var maps={};var lastRequested=null;var contentsSelectors={};var areaMenu=null;var timeoutId=null;var u=JMAWebUtility;var h=u.hashController;var a=u.area;var movieObject=null;var isIOS=/(iP(hone|(o|a)d)|Mac)/.test(navigator.userAgent);var mapClicked=new Date;var failObject=null;var comments=null;var helpHTML=null;var TR=new Translator;var gpsPush=function(pos){var areadataobj=a.convert(areaData,pos,"class20s",gpsarearank);var xy=xyData.class20s[areadataobj.code];var z=dispData[contentsName].gps;map.changeView([z,xy[0],xy[1]])};var changeCheck=function(e){var newHash=h.getHashData();if(newHash.others&&newHash.others[1]==="getStatus"){var target=document.getElementById("unitmap-help");target.classList.remove("unitmap-void");target.innerText=JSON.stringify(getStatus());return}if(isHashEquality(newHash))return;if(newHash.contents===pageHash.contents){var option=clone(newHash);delete option.contents;changeMap({contents:newHash.contents},option,e);return}else if(map){map.destroy();if(movieObject){JMAMapMovie.stop();movieObject=null}map=null}contentsName=newHash.contents;namespace=dispData[contentsName].namespace;pageHash=newHash;contentsSelectors[contentsName]?dataManage():dataLoad()};var zoomout=function(e,contentsClass){var t=new Date;if(t-mapClicked<400){mapClicked=false;var jmamap=contentsClass?maps[contentsClass]:map;var xy=jmamap.xy2latlon(e.offsetX,e.offsetY);jmamap.changeView([jmamap.zl()-1,xy.lat,xy.lng]);mapClicked=t;return false}mapClicked=t;return false};var delSlider=function(){delChildren("unitmap-timeslider");document.getElementById("unitmap-timeslider").style.display="none";if(movieObject){JMAMapMovie.stop();movieObject=null}};var delChildren=function(target){var delNode=typeof target==="object"?target:document.getElementById(target);var children=delNode.childNodes;if(children&&children.length){for(;children.length;)children[0].parentNode.removeChild(children[0])}};var delAccessories=function(){delChildren("unitmap-infotime");delChildren("unitmap-contentsinfo");delChildren("unitmap-legend");delChildren("unitmap-textinfo");delChildren("unitmap-explain")};var triggerEvent=function(element,event){if(document.createEvent){var evt=document.createEvent("HTMLEvents");evt.initEvent(event,true,true);return element.dispatchEvent(evt)}var evt=document.createEventObject();return element.fireEvent("on"+event,evt)};var adjust=function(defaultOpen,fromDraw){var legendButton=document.getElementById("unitmap-legendbutton");var explainButton=document.getElementById("unitmap-explainbutton");var textInfoButton=document.getElementById("unitmap-textinfobutton");var allvoid=legendButton.classList.contains("unitmap-void")&&explainButton.classList.contains("unitmap-void")&&textInfoButton.classList.contains("unitmap-void");var target=document.getElementById("unitmap-selector");if(fromDraw&&defaultOpen===undefined||defaultOpen!==undefined&&defaultOpen!=="keep"){if(defaultOpen){var selected=document.getElementsByClassName("modal-selected");target.setAttribute("class","");for(;selected.length>0;)selected[0].classList.remove("modal-selected");document.getElementById("unitmap-switches").classList.remove("modal-close");target.setAttribute("class",defaultOpen+"-is-active");document.getElementById("unitmap-"+defaultOpen+"button").setAttribute("class","modal-selected")}else{document.getElementById("unitmap-switches").classList.add("modal-close");target.className=""}}else if(fromDraw||allvoid){target.className=""}if(legendButton)legendButton.onclick=function(e){toggle(e,"legend-is-active")};if(explainButton)explainButton.onclick=function(e){toggle(e,"explain-is-active")};if(textInfoButton)textInfoButton.onclick=function(e){toggle(e,"textinfo-is-active")}};var toggle=function(e,className){var modal=document.getElementById("unitmap-switches");var modalInner=document.getElementById("unitmap-selector");if(modal.classList.contains("modal-close"))modal.classList.remove("modal-close");else if(modalInner.classList.contains(className))modal.classList.toggle("modal-close");modalInner.setAttribute("class",className);var sels=document.getElementsByClassName("modal-selected");for(;sels.length>0;)sels[0].classList.remove("modal-selected");e.currentTarget.classList.add("modal-selected");triggerEvent(window,"resize")};var selectCheck=function(selectors){var checkHash=h.getHashData();if(!selectors)return[];if(!Array.isArray(selectors)){var candidates=Object.keys(selectors);for(var selkey in checkHash){if(candidates.indexOf(checkHash[selkey])>=0){selectors=selectors[checkHash[selkey]];break}}}var notmatch=true;for(var i in selectors){var key=selectors[i].key;if(selectors[i].values){for(var j in selectors[i].values){if(selectors[i].values[j].value==checkHash[key]){selectors[i].values[j].selected=true;notmatch=false}else selectors[i].values[j].selected=false}}else if(selectors[i].group){var groupKey=selectors[i].key;for(var j in selectors[i].group){if(selectors[i].group[j].value===checkHash[groupKey]){var childKey=selectors[i].group[j].key;for(var k in selectors[i].group[j].values){if(selectors[i].group[j].values[k].value===checkHash[childKey]){selectors[i].group[j].values[k].selected=true;notmatch=false}else selectors[i].group[j].values[k].selected=false}}else{for(var k in selectors[i].group[j].values)selectors[i].group[j].values[k].selected=false}}}}if(notmatch){if(!pageHash.contents)return;var dispelem=pageHash.elem;var zxy=pageHash.others;pageHash=dispData[contentsName]?dispData[contentsName].defaultHash||{}:{};if(TR.getLang()==="en")pageHash.lang="en";pageHash.contents=contentsName;if(dispelem)pageHash.elem=dispelem;if(zxy)pageHash.others=zxy}else{pageHash=checkHash}return selectors};var isHashEquality=function(req){var nowHash=req||h.getHashData();var nowHashCp=clone(nowHash);var hashDataCp=clone(pageHash||{});delete nowHashCp.others;delete hashDataCp.others;return JSON.stringify(nowHashCp)===JSON.stringify(hashDataCp)};var setAccessories=function(conf,ailias){var infotgn=ailias?ailias+"infotime":"unitmap-infotime";var infotime=document.getElementById(infotgn);var contentsinfo=document.getElementById("unitmap-contentsinfo");var explain=document.getElementById("unitmap-explain");var freeSpace=document.getElementById("unitmap-freespace");var centerText=document.getElementById("unitmap-centertext");var textinfo=document.getElementById("unitmap-textinfo");var lgdtgn=ailias?ailias+"_info":"unitmap-legend";var legend=document.getElementById(lgdtgn);var legendButton=document.getElementById("unitmap-legendbutton");legendButton.childNodes[0].title=TR.select("凡例","legend");var explainButton=document.getElementById("unitmap-explainbutton");explainButton.childNodes[0].title=TR.select("説明","explain");var textInfoButton=document.getElementById("unitmap-textinfobutton");textInfoButton.childNodes[0].title=TR.select("詳細","detail");if(conf.hasOwnProperty("infoTime")){delChildren(infotgn);if(conf.infoTime){typeof conf.infoTime==="string"?infotime.innerHTML=conf.infoTime:infotime.appendChild(conf.infoTime);infotime.classList.add("unitmap-exist")}else if(conf.infoTime===null){infotime.classList.remove("unitmap-exist")}}else if(!conf.keep||conf.infoTime===null){infotime.classList.remove("unitmap-exist")}var infotoggle=document.getElementById("unitmap-contentsinfo-toggle");if(contentsinfo&&conf.hasOwnProperty("contentsInfo")){delChildren("unitmap-contentsinfo");if(conf.contentsInfo){typeof conf.contentsInfo==="string"?contentsinfo.innerHTML=conf.contentsInfo:contentsinfo.appendChild(conf.contentsInfo);contentsinfo.classList.add("unitmap-exist");infotoggle.classList.add("unitmap-exist");infotoggle.onclick=function(e){e.currentTarget.classList.toggle("unitmap-information-hide")}}else if(conf.contentsInfo===null){contentsinfo.classList.remove("unitmap-exist");infotoggle.classList.remove("unitmap-exist")}}else if(!conf.keep){contentsinfo.classList.remove("unitmap-exist");infotoggle.classList.remove("unitmap-exist")}if(conf.contentsInfoDefault==="close")infotoggle.classList.add("unitmap-information-hide");else if(conf.contentsInfoDefault!=="keep")infotoggle.classList.remove("unitmap-information-hide");var freetoggle=document.getElementById("unitmap-freespace-toggle");if(freeSpace&&conf.hasOwnProperty("freeSpace")){delChildren("unitmap-freespace");if(conf.freeSpace){typeof conf.freeSpace==="string"?freeSpace.innerHTML=conf.freeSpace:freeSpace.appendChild(conf.freeSpace);freeSpace.classList.add("unitmap-exist");freetoggle.classList.add("unitmap-exist");freetoggle.onclick=function(e){e.currentTarget.classList.toggle("unitmap-information-hide")}}else if(conf.freeSpace===null){freeSpace.classList.remove("unitmap-exist");freetoggle.classList.remove("unitmap-exist")}}else if(!conf.keep){freeSpace.classList.remove("unitmap-exist");freetoggle.classList.remove("unitmap-exist")}if(conf.freeSpaceDefault==="close")freetoggle.classList.add("unitmap-information-hide");else if(conf.freeSpaceDefault!=="keep")freetoggle.classList.remove("unitmap-information-hide");if(centerText&&conf.hasOwnProperty("centerText")){delChildren("unitmap-centertext");if(conf.centerText){typeof conf.centerText==="string"?centerText.innerHTML=conf.centerText:centerText.appendChild(conf.centerText);centerText.classList.add("unitmap-exist")}else if(conf.centerText===null){centerText.classList.remove("unitmap-exist")}}else if(!conf.keep){centerText.classList.remove("unitmap-exist")}if(textinfo&&conf.hasOwnProperty("textInfo")){delChildren("unitmap-textinfo");if(conf.textInfo){typeof conf.textInfo==="string"?textinfo.innerHTML=conf.textInfo:textinfo.appendChild(conf.textInfo);if(conf.textInfo===null)textInfoButton.classList.add("unitmap-void");else textInfoButton.classList.remove("unitmap-void")}if(conf.textInfo===null)textInfoButton.classList.add("unitmap-void");else textInfoButton.classList.remove("unitmap-void")}else if(!conf.keep){textInfoButton.classList.add("unitmap-void")}if(conf.hasOwnProperty("legend")){delChildren(lgdtgn);if(conf.legend){if(typeof conf.legend==="string"){var img=document.createElement("img");img.setAttribute("src",conf.legend);conf.legend=img}legend.appendChild(conf.legend)}if(conf.legend===null)legendButton.classList.add("unitmap-void");else legendButton.classList.remove("unitmap-void")}else if(!conf.keep){legendButton.classList.add("unitmap-void")}if(explain&&conf.hasOwnProperty("explain")){delChildren("unitmap-explain");if(conf.explain){typeof conf.explain==="string"?explain.innerHTML=conf.explain:explain.appendChild(conf.explain);explain.classList.add("unitmap-exist")}if(conf.explain===null)explainButton.classList.add("unitmap-void");else explainButton.classList.remove("unitmap-void")}else if(!conf.keep||conf.explain===null){explainButton.classList.add("unitmap-void")}delete conf.keep};var mkPage=function(res,contentsClass){var bgTarget=contentsClass?document.getElementById(maps[contentsClass].tagName).parentNode.getElementsByClassName("bosaitop-background-color")[0]:document.getElementById("unitmap-background-color");if(res.backgroundColor&&typeof res.backgroundColor==="string")bgTarget.style.backgroundColor=res.backgroundColor;else if(!res.hasOwnProperty("backgroundColor")||res.backgroundColor===null)bgTarget.style.backgroundColor="";if(res.mapEvents)(map||maps[contentsClass]).on(res.mapEvents);if(res.selectChange)areaMenu.changeSelector(res.selectChange);if(res.data)Draw(map||maps[contentsClass],res);else if(res.zxy&&!Array.isArray(res.zxy)){(map||maps[contentsClass]).changeView(res.zxy,res.duration,true)}else(map||maps[contentsClass]).display();if(res.zxy&&Array.isArray(res.zxy))(map||maps[contentsClass]).changeView(res.zxy,res.duration);if(contentsClass){if(res.legend){var target=document.getElementById("bosaitop-"+contentsClass+"_info");if(typeof res.legend==="string"){var img=document.createElement("img");img.src=res.legend;target.appendChild(img)}else if(res.legend.innerHTML)document.getElementById("bosaitop-"+contentsClass+"_info").innerHTML=res.legend.innerHTML}if(res.infoTime)document.getElementById("bosaitop-"+contentsClass+"_infotime").innerHTML=typeof res.infoTime==="string"?res.infoTime:res.infoTime.innerHTML||"";if(res.freeSpace){var fs=document.getElementById("bosaitop-"+contentsClass+"_freespace");if(typeof res.freeSpace==="string")fs.innerHTML=res.freeSpace;else{delChildren(fs);fs.appendChild(res.freeSpace)}}if(res.centerText){var ct=document.getElementById("bosaitop-"+contentsClass+"_centertext");if(typeof res.centerText==="string")ct.innerHTML=res.centerText;else{delChildren(ct);ct.appendChild(res.centerText)}}}else{setAccessories(res)}if(!contentsClass)document.title=TR.select("気象庁｜"+dispData[contentsName].name,"Japan Meteorological Agancy｜"+dispData[contentsName].enName);loadEnd()};var remakePage=function(val,elem,contentsChahnged){contentsName=val||contentsName;try{var zxy=pageHash.others;if(contentsChahnged)pageHash=assign(elem||{}||dispData[contentsName].defaultHash||{},{contents:contentsName});if(TR.getLang()==="en")pageHash.lang="en";pageHash.others=zxy;namespace=dispData[contentsName].namespace;if(contentsSelectors[contentsName]){dataManage()}else{dataLoad()}}catch(e){console.error(e);mkFailPage(e)}};var reflseh=function(){remakePage(contentsName,{areas:areaData,defaultSelector:contentsSelectors[contentsName]});lastUpdate=new Date};var checkKeep=function(changedobj){return!changedobj||changedobj.contents===contentsName};var changeMap=function(changedobj,elem,event){if(!changedobj)areaMenu.changeSelector(elem);loadStart();var newHash=h.getHashData();newHash=assign(newHash,changedobj);var contentsKeep=checkKeep(changedobj);contentsName=newHash.contents;if(!contentsSelectors[contentsName]||!contentsKeep){if(map){map.destroy();map=null;if(movieObject){JMAMapMovie.stop();movieObject=null}}var contentsChahnged=newHash.contents!==pageHash.contents;if(Object.keys(elem).length===0){for(var key in newHash)if(key!=="contents"&&key!=="others")delete newHash[key]}else if(elem)newHash=assign(newHash,elem);pageHash=newHash;mkAM();remakePage(pageHash.contents,elem,contentsChahnged);return}newHash=assign(newHash,elem);pageHash=newHash;if(event)mkAM(selectCheck(JSON.parse(JSON.stringify(contentsSelectors[contentsName]))));if(pageHash.from&&pageHash.from==="bosaitop"){delete pageHash.from;delete pageHash.area_type;delete pageHash.area_code;h.setHashData(pageHash,null,true)}else h.setHashData(pageHash);if(pageHash.others)map.changeView(pageHash.others[0].split("/"));namespace=dispData[contentsName].namespace;var result=new Promise(function(resolve){root[namespace].changeMap(pageHash,{areas:areaData,devise:{isIOS:isIOS,responsiveMode:getStatus().responsiveMode},defaultSelector:contentsSelectors[contentsName]},resolve)});result.then(function(res){lastRequested={changeMap:res||{}};if(!res||res.fail||res.error){mkFailPage(res.fail||res.error);if(res.fail)console.error("[UnitMapError]-FAIL IN CONTENTS",contentsName,res.fail);if(res.error)console.log("[UnitMapError]-ERROR IN CONTENTS",contentsName,res.error);failObject=res.fail||res.error;return}res.keep=true;mkPage(res);adjust(res.defaultOpen);if(res.selectorObject){mkAM(res.selectorObject)}if(dispData[contentsName].movie){if(res.movieConfig){delSlider();if(Object.keys(res.movieConfig).length>0){movieObject=new JMAMapMovie(res.movieConfig,map);document.getElementById("unitmap-timeslider").style.display="flex"}else{document.getElementById("unitmap-timeslider").style.display="none";console.log("[INVALID REQUEST] 動画使用コンテンツではないコンテンツから動画利用のリクエストがありました。動画を利用したい場合はmapsetting.jsonに登録してください。")}}else if(res.movieConfig===null){delSlider()}}else{delSlider()}})};var popdiv=function(){};var setLang=function(c){var cn=contentsName||c;if(!dispData[cn])throw"[UnitMapError]-INVALID CONTENTS";var lang=TR.getLang();var hash=h.getHashData();if(lang==="en"&&!dispData[cn].enName&&dispData[cn].name){TR.setLang("jp");delete hash.lang;h.setHashData(hash,null,true)}else if(lang==="jp"&&!dispData[cn].name&&dispData[cn].enName){TR.setLang("en");hash.lang="en";h.setHashData(hash,null,true)}};var mkMap=function(prop){var areaInfo=pageHash.area_type&&pageHash.area_code?{areaType:pageHash.area_type,areaCode:pageHash.area_code}:null;setLang();var req=h.getHashData();if(!isHashEquality(req)){if(Object.keys(req).length===0||!req.others||pageHash.area_type||pageHash.area_code){delete pageHash.from;delete pageHash.area_type;delete pageHash.area_code;h.setHashData(pageHash,null,true)}else{h.setHashData(pageHash)}}if(req.others)prop.zxy="#"+req.others[0];prop.tagId="unitmap";prop.posURL=true;prop.scrollWheelZoom=true;var ua=navigator.userAgent;if(isIOS&&!/iP(hone|(o|a)d)/.test(ua)&&ua.indexOf("Firefox")<0&&ua.indexOf("Chrome")<0&&ua.match(/Version\/(\d+)/i)&&Number(ua.match(/Version\/(\d+)/i)[1])>12)prop.tap=false;else prop.tap=true;prop.dragging=true;prop.classClear=true;if(pageHash.mode==="svg")prop.svgMode=true;if(prop.minZoom&&typeof prop.minZoom!=="number"){prop.minZoom=checkZxy(prop.minZoom)}if(prop.maxZoom&&typeof prop.maxZoom!=="number"){prop.maxZoom=checkZxy(prop.maxZoom)}if(/^mobile/.test(getStatus().responsiveMode)){prop.minZoom=prop.minZoom||5;prop.minZoom--;if(Array.isArray(prop.zxy))prop.zxy[0]--}prop.lang=TR.getLang();prop.options=assign({zoomControl:true,keyboard:false,fadeAnimation:false},prop.options);var attrTarget=document.getElementById("unitmap-attribution");delChildren(attrTarget);var a=document.createElement("a");a.onclick=popdiv;a.innerHTML='<a href="../jma/kishou/info/coment.html">© Japan Meteorological Agency</a>';attrTarget.appendChild(a);map=map||new JMAMap(prop);document.getElementById("unitmap").oncontextmenu=zoomout;document.getElementsByClassName("leaflet-right")[0].onclick=popdiv;var result=new Promise(function(resolve){try{root[namespace].draw(pageHash,{areas:areaData,areaInfo:areaInfo,defaultSelector:selectCheck(contentsSelectors[contentsName]),contentsName:contentsName,devise:{isIOS:isIOS,responsiveMode:getStatus().responsiveMode},contentsType:"unitMap"},resolve)}catch(e){console.error(e);delAccessories();window.onhashchange=changeCheck;mkFailPage(e);throw"[Unitmap-Error]コンテンツの読み込みに失敗しました。"}});result.then(function(res){lastRequested={draw:res};if(!res||res.fail||res.error){mkFailPage(res.fail||res.error);if(res.fail)console.error("[UnitMapError]-FAIL IN CONTENTS",contentsName,res.fail);if(res.error)console.log("[UnitMapError]-ERROR IN CONTENTS",contentsName,res.error);return}if(res.selectorObject){mkAM(res.selectorObject);contentsSelectors[contentsName]=res.selectorObject}else{mkAM(contentsSelectors[contentsName])}mkPage(res);delSlider();if(dispData[contentsName].movie){if(res.movieConfig){movieObject=new JMAMapMovie(res.movieConfig,map);document.getElementById("unitmap-timeslider").style.display="flex"}}else{if(res.hasOwnProperty("movieConfig"))console.log("[INVALID REQUEST] 動画使用コンテンツではないコンテンツから動画利用のリクエストがありました。動画を利用したい場合はmapsetting.jsonに登録してください。");document.getElementById("unitmap-timeslider").style.display="none"}adjust(res.defaultOpen,true)});if(!dispData[contentsName].selectorFileName||dispData[contentsName].selector==="fixed")mkAM(contentsSelectors[contentsName]);delAccessories();window.onhashchange=changeCheck};var checkZxy=function(o,pagehash){for(var key in o){var regexp=new RegExp(key);if(regexp.test((pageHash||pagehash).elem))return o[key]}return o.default};var setZxy=function(at,ac){var z=function(){if(/^mobile/.test(getStatus().responsiveMode))return(at||pageHash.area_type)==="japan"?4:(at||pageHash.area_type)==="offices"?6:8;return(at||pageHash.area_type)==="japan"?5:at||pageHash.area_type==="offices"?7:9}()||4;var xy=(at||pageHash.area_type)&&xyData[at||pageHash.area_type]?xyData[at||pageHash.area_type][ac||pageHash.area_code]:xyData.class20s[ac||pageHash.area_code]||[34.5,137];return[z,xy[0],xy[1]]};var dataManage=function(congenitalZxy){try{namespace=dispData[contentsName]?dispData[contentsName].namespace:dispData.warning.namespace;var defaultHash=pageHash.hasOwnProperty("contents")?dispData[contentsName].defaultHash||{}:assign(dispData[contentsName].defaultHash||{},{contents:contentsName});pageHash=assign(defaultHash,pageHash);pageHash.contents=contentsName;if(TR.getLang()==="en")pageHash.lang="en";var zxy=congenitalZxy?congenitalZxy:pageHash.others?"#"+pageHash.others:setZxy()||null;if(pageHash.others)delete pageHash.others;if(pageHash.area_type&&pageHash.area_code)mkMap(assign(dispData[contentsName].mapProperty,{zxy:zxy}));else mkMap(clone(dispData[contentsName].mapProperty))}catch(e){console.error(e);mkFailPage(e)}if(comments)insertComment()};var insertComment=function(){var target=document.getElementById("unitmap-message");target.classList.remove("unitmap-exist");delChildren(target);var span=document.createElement("span");span.onclick=function(e){e.currentTarget.classList.toggle("unitmap-information-hide")};target.appendChild(span);var div=document.createElement("div");target.appendChild(div);var comment=comments[contentsName];if(comment&&comment.text){div.innerHTML=TR.select(comment.text.jp||"",comment.text.en);if(div.innerHTML)target.classList.add("unitmap-exist");if(comment.headColor)span.classList.add(comment.headColor==="red"?"unintmap-message-red":comment.headColor==="yellow"?"unintmap-message-yellow":"")}};var dataLoad=function(data){amSelectors=amSelectors||data.am_selector;mkAM();areaData=areaData||data.areaData;dispData=dispData||data.dispData;xyData=xyData||data.xy;comments=comments||data&&data.comment;helpHTML=helpHTML||data.help.unitmap;var tmpHash=h.getHashData();delete tmpHash.area_type;delete tmpHash.area_code;history.replaceState(null,null,h.hashString(tmpHash));var xhr=new XMLHttpRequest;if(dispData[contentsName].selectorFileName){xhr.open("GET","const/selectorinfos/"+dispData[contentsName].selectorFileName);xhr.send();xhr.onloadend=function(){try{contentsSelectors[contentsName]=JSON.parse(xhr.responseText);dataManage()}catch(e){console.error(e);mkFailPage(e)}}}else{contentsSelectors[contentsName]=[];dataManage()}};var printCallback=function(e){var printTarget=document.getElementById("unitmap-print");delChildren(printTarget);var legend=document.getElementById("unitmap-legend");if(legend.childNodes.length===0)legend.classList.add("unitmap-nolegend");if(legend.offsetHeight<100){legend.classList.add("unitmap-shortlegend")}var span1=document.createElement("span");span1.innerHTML=document.getElementById("contents-name").getElementsByTagName("span")[0].innerHTML;printTarget.appendChild(span1);var elemTarget;var elemTargetParent=document.getElementsByClassName("area-category-list")[0];if(elemTargetParent)elemTarget=elemTargetParent.getElementsByClassName("area-item-navy")[0];if(elemTarget){var span2=document.createElement("span");span2.innerHTML=elemTarget.innerHTML;printTarget.appendChild(span2)}var target=document.getElementById("unitmap");target.style.width="800px";target.style.height="750px";if(map)map.redraw();if(e)e.preventDefault()};var resetPrint=function(){var legend=document.getElementById("unitmap-legend");legend.classList.remove("unitmap-nolegend");legend.classList.remove("unitmap-shortlegend");var target=document.getElementById("unitmap");target.style.width="";target.style.height="";if(map)map.redraw()};var init=function(){if(location.href.indexOf("?")>=0){history.replaceState(null,null,location.href.replace("?","#"))}window.onbeforeprint=printCallback;window.onafterprint=resetPrint;loadStart();pageHash=h.getHashData();contentsName=pageHash.contents||"warning";var requests={areaData:"common/const/area.json",am_selector:"common/const/contents.json",dispData:"const/mapsetting.json",xy:"common/const/xy.json",comment:"comment/comment.json",help:"const/help.json"};u.parallelRequest(requests,dataLoad);document.body.onkeydown=zoomEvent};var zoomEvent=function(e){if(!map)return;if(e.code==="Semicolon"||e.code==="NumpadAdd"){var zxy=map.zxy();zxy[0]++;map.changeView(zxy)}else if(e.code==="Minus"||e.code==="NumpadSubtract"){var zxy=map.zxy();zxy[0]--;map.changeView(zxy)}};var mkAM=function(congenitalSelector){var selector;var contentsSelector=clone(amSelectors);var callback=function(e){e.currentTarget.classList.toggle("area-question-active");var target=document.getElementById("unitmap-help");delChildren(target);target.classList.toggle("unitmap-void");target.innerHTML=TR.select(helpHTML.jp,helpHTML.en)};if(!congenitalSelector){if(!areaMenu){areaMenu=new AreaMenu("unitmap-header",{contents:contentsSelector,click_callback:function(changeobj,elem){changeMap(changeobj,elem)},gps_callback:function(class20Code){gpsPush(class20Code)},current_content:"",question_callback:callback})}else{areaMenu.remake({contents:contentsSelector,click_callback:function(changeobj,elem){changeMap(changeobj,elem)},gps_callback:function(class20Code){gpsPush(class20Code)},selectors:null,current_content:contentsName,name:dispData[contentsName].name,enName:dispData[contentsName].enName,question_callback:callback})}return}var checkedSelector=selectCheck(congenitalSelector);if(checkedSelector){selector={contents:contentsSelector,click_callback:function(changeobj,elem){changeMap(changeobj,elem)},gps_callback:function(class20Code){gpsPush(class20Code)},selectors:checkedSelector,current_content:function(){var content=JMAWebUtility.common.find(amSelectors.contents,function(content){return content.id===pageHash.contents});return content?content.id:null}(),name:dispData[contentsName].name,enName:dispData[contentsName].enName,reload_callback:reflseh,reload_interval:dispData[contentsName].renewInterval*60}}if(areaMenu)areaMenu.remake(selector);else areaMenu=new AreaMenu("area_header",selector)};var mkFailPage=function(e){loadingStatus=false;failObject=e||"unitmap Fail";mkAM();var loading=document.getElementById("unitmap-loading");if(loading){loading.classList.add("unitmap-fail");loading.style.display="block"}var endflag=document.createElement("div");endflag.setAttribute("id","unitmap-load-end");loading.appendChild(endflag)};var loadStart=function(){if(loadingStatus)return;var target=document.getElementById("unitmap-load-end");if(target)target.parentNode.removeChild(target);clearTimeout(timeoutId);loadingStatus=true;timeoutCheck();var loading=document.getElementById("unitmap-loading");if(!loading)return;loading.classList.remove("unitmap-fail");loading.style.display="block"};var loadEnd=function(){var loading=document.getElementById("unitmap-loading");if(!loading)return;var loadend=document.getElementById("unitmap-load-end");loading.style.display="none";loadingStatus=false;clearTimeout(timeoutId);if(loadend)return;var endflag=document.createElement("div");endflag.setAttribute("id","unitmap-load-end");loading.appendChild(endflag)};var clone=function(o){return JSON.parse(JSON.stringify(o))};var assign=function(a,b){var rtn={};for(var key in a)rtn[key]=a[key];for(key in b)rtn[key]=b[key];return rtn};var timeoutCheck=function(){timeoutId=setTimeout(function(){if(loadingStatus)mkFailPage("unitmap timeout")},1e4)};var rapidRequest=function(idx,target,movieRes){loadStart();var request=new Promise(function(res){if(root[namespace].rapidRequest){root[namespace].rapidRequest(Number(idx),res,target)}else{console.info("[Unitmap-Info] rapidRequestを実装してください。")}});request.then(function(res){if(!res||res.fail||res.error){mkFailPage(res.fail||res.error);if(res.fail)console.error("[UnitMapError]-FAIL IN CONTENTS",contentsName,res.fail);if(res.error)console.log("[UnitMapError]-ERROR IN CONTENTS",contentsName,res.error);failObject=res.fail||res.error;movieRes("fail")}movieRes({idx:idx,res:res})})};var movie=function(res,movieRes,callback){lastRequested={rapidRequest:res||{}};if(!res||res.fail||res.error){mkFailPage(res.fail||res.error);return}if((map||maps[contentsClass]).isTileLoading()){loadEnd();JMAMapMovie.reject();if(movieRes)movieRes(false);return}res.keep=true;if(res)mkPage(res);if(callback.callback)callback.callback(callback.argument);else loadEnd();if(movieRes)movieRes(true)};var forceMake=function(res,contentsClass){loadStart();document.getElementById("unitmap-header").classList.remove("area-utility-active");lastRequested={makePage:res};res.keep=true;if(dispData[contentsClass||contentsName]&&dispData[contentsClass||contentsName].movie){if(res.movieConfig){delSlider();if(Object.keys(res.movieConfig).length>0){movieObject=new JMAMapMovie(res.movieConfig,map);document.getElementById("unitmap-timeslider").style.display="flex"}else{document.getElementById("unitmap-timeslider").style.display="none"}}else if(res.movieConfig===null){delSlider()}}else if(res.hasOwnProperty("movieConfig")){console.log("[INVALID REQUEST] 動画使用コンテンツではないコンテンツから動画利用のリクエストがありました。動画を利用したい場合はmapsetting.jsonに登録してください。")}if(res.selectorObject)mkAM(res.selectorObject);mkPage(res,contentsClass);if(!contentsClass)adjust(res.defaultOpen);delete res.keep};var getKeyList=function(){var rtn={};for(var key in maps)if(maps[key])rtn[key]=maps[key].keyList();return rtn};var getActiveList=function(){var rtn={};for(var key in maps)if(maps[key])rtn[key]=maps[key].activeList();return rtn};var getMapContents=function(){return Object.keys(maps)};var getResponsiveMode=function(){if(window.BosaiTop)return"reference bosaitop";var target=document.getElementById("responsive-mode");if(!target){target=document.createElement("div");target.setAttribute("id","responsive-mode");document.body.appendChild(target)}var val=document.defaultView.getComputedStyle(target,"::before").content;if(val)return val[0]==='"'?val.split('"')[1]:val;return"unknown"};var getLastUpdate=function(){var now=new Date;return Math.floor((now-lastUpdate)/1e3/60)+"minutes ago"};var getLastReload=function(){var now=new Date;return Math.floor((now-pageLoad)/1e3/60)+"minutes ago"};var getStatus=function(cn){var rtn={};rtn.contentsName=contentsName||(maps[cn]?cn:"bosaiTop");rtn.responsiveMode=getResponsiveMode();if(map||maps[cn])rtn.movieContents=map?Boolean(movieObject):null;if(map||maps[cn])rtn.JMAMap=map||maps[cn]||null;if((map||maps[cn])&&movieObject)rtn.movieOn=maps[cn]?null:Boolean(JMAMapMovie.movieOn());if((map||maps[cn])&&movieObject)rtn.sliderLength=maps[cn]?null:JMAMapMovie.getSliderLength();if((map||maps[cn])&&movieObject)rtn.movieDefaultInterval=maps[cn]?null:JMAMapMovie.getDefaultInterval();if((map||maps[cn])&&movieObject)rtn.movieInterval=maps[cn]?null:JMAMapMovie.getInterval();if((map||maps[cn])&&movieObject)rtn.sliderIndex=maps[cn]?null:JMAMapMovie.getSliderIndex();if((map||maps[cn])&&movieObject)rtn.requestList=maps[cn]?null:JMAMapMovie.getRequestList();if((map||maps[cn])&&movieObject)rtn.movieSpeedNotch=maps[cn]?null:JMAMapMovie.getSpeedNotch();rtn.registedKeys=map||maps[cn]?(map||maps[cn]).keyList():getKeyList();rtn.activeKeys=map||maps[cn]?(map||maps[cn]).activeList():getActiveList();rtn.lastUpdate=maps[cn]?null:getLastUpdate();rtn.lastReload=maps[cn]?null:getLastReload();if(failObject){if(cn&&failObject[cn])rtn.fail=failObject[cn];if(map)rtn.fail=failObject}if(map||maps[cn])rtn.center=(map||maps[cn]).zxy();if(map||maps[cn])rtn.bounds=(map||maps[cn]).bound();if(map&&lastRequested)rtn.lastRequest=lastRequested;if(!map)rtn.registedMapContents=getMapContents();return rtn};var redraw=function(contentsClass){if(maps[contentsClass]&&maps[contentsClass].redraw)maps[contentsClass].redraw()};var insert=function(contentsClass,tgn,areatype,areacode,z,opt,renewmode,bosaitopResolve){areaData=areaData||opt.areas;var requests={dispdata:"const/mapsetting.json",xy:"common/const/xy.json"};u.parallelRequest(requests,function(data){dispData=data.dispdata;xyData=data.xy;try{var zxy=setZxy(areatype,areacode);if(typeof z==="number")zxy[0]=z;var defaultdisp=dispData[contentsClass]?dispData[contentsClass].defaultHash||{}:{};if(TR.getLang()==="en")defaultdisp.lang="en";defaultdisp.area_type=areatype;defaultdisp.area_code=areacode;defaultdisp=assign(defaultdisp,opt.contentsOption);var mapprop=assign(dispData[contentsClass].mapProperty,{zxy:zxy,tagId:tgn,scrollWheelZoom:false,options:{zoomControl:true}});drawRelay(dispData[contentsClass].namespace,tgn,mapprop,defaultdisp,renewmode,contentsClass,opt,bosaitopResolve)}catch(e){bosaitopResolve({fail:{catch:e}})}})};var drawRelay=function(namespace,tgn,prop,hashdata,renewmode,contentsClass,opt,bosaitopResolve){if(prop.minZoom&&typeof prop.minZoom!=="number"){prop.minZoom=checkZxy(prop.minZoom,hashdata)}if(prop.maxZoom&&typeof prop.maxZoom!=="number"){prop.maxZoom=checkZxy(prop.maxZoom,hashdata)}if(maps[contentsClass]){if(renewmode)prop.zxy=maps[contentsClass].zxy();maps[contentsClass].destroy();maps[contentsClass]=null}else if(bosaitopResolve){prop.minZoom=prop.minZoom||5;prop.minZoom--;prop.zxy[0]--}var ua=navigator.userAgent;if(isIOS&&!/iP(hone|(o|a)d)/.test(ua)&&ua.indexOf("Firefox")<0&&ua.indexOf("Chrome")<0&&ua.match(/Version\/(\d+)/i)&&Number(ua.match(/Version\/(\d+)/i)[1])>12)prop.tap=false;else prop.tap=true;setLang(contentsClass);prop.lang=TR.getLang();maps[contentsClass]=new JMAMap(prop);document.getElementById(tgn).oncontextmenu=function(e){zoomout(e,contentsClass)};var result=new Promise(function(resolve){try{root[namespace].draw(hashdata,{areas:areaData,contentsName:contentsClass,optionList:opt.optionList,devise:{isIOS:isIOS,responsiveMode:getStatus().responsiveMode},contentsType:"bosaiTop"},resolve)}catch(e){resolve({fail:{catch:e}});maps[contentsClass].display()}});result.then(function(res){if(!res||res.fail||res.error){if(!res)bosaitopResolve({fail:"FAIL in map contents"});else if(res.fail)bosaitopResolve({fail:res.fail});else if(res.error)bosaitopResolve({error:res.error});failObject=failObject||{};failObject[contentsClass]=res.fail||res.error;return}mkPage(res,contentsClass,tgn);if(typeof bosaitopResolve==="function")bosaitopResolve(res)})};var enable=function(req,c){for(var key in maps)maps[key].enable(req)};var disable=function(req,c){for(var key in maps)maps[key].disable(req)};var memoryHash=function(){pageHash=h.getHashData()};if(isIOS){var mediaQueryList=window.matchMedia("print");mediaQueryList.addListener(function(mql){if(mql.matches)printCallback();else resetPrint()})}root.UnitMap={};root.UnitMap.init=init;root.UnitMap.insert=insert;root.UnitMap.redraw=redraw;root.UnitMap.movie=movie;root.UnitMap.rapidRequest=rapidRequest;root.UnitMap.makePage=forceMake;root.UnitMap.getStatus=getStatus;root.UnitMap.mapStatusChange2Enable=enable;root.UnitMap.mapStatusChange2Disable=disable;root.UnitMap.memoryHash=memoryHash})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var c=util.common;var ud=util.date;var makeLastDateFor1Month=function(date){var d=new Date(date);d.setMonth(d.getMonth()+1);d.setDate(ud.getDate(d)===ud.getDate(date)?d.getDate()-1:0);return d};var isWhitePage3Month=function(targetDatetime1Month,targetDatetime3Month){var lastDate1Month=makeLastDateFor1Month(targetDatetime1Month);var lastDate1Term=function(){var d=new Date(targetDatetime3Month);d.setMonth(d.getMonth()+1);d.setDate(0);return d}();return lastDate1Term.getTime()<=lastDate1Month.getTime()};var isWhitePageSeason=function(targetDatetime3Month){var month=ud.getMonth(new Date(targetDatetime3Month))+1;return c.contains([1,2,7,8,9,12],month)};var isSummer=function(seasonData){return!seasonData.metInfos[0].termName.match(/^冬/)};var strip=function(str){return str.replace(new RegExp("^　"),"")};var prob2bar=function(probability,height){var div=$("<div>").addClass("season-graph");c.each(["season-low","season-normal","season-high"],function(className,i){$("<div>").text(probability[i]).addClass(className).css("width",probability[i]+"%").css("line-height",height+"px").appendTo(div)});return div};var makeLegend=function(){return ContentsCommon.makeLegend([[{box:"season-below",text:"低い(少ない)"},{box:"season-normal",text:"平年並"},{box:"season-high",text:"高い(多い)"}]])};var REPRESENTATIVE_CITY={"010101":"016000","010102":"016000","010103":"016000","010100":"016000","010201":"040000","010202":"040000","010203":"040000","010204":"040000","010200":"040000","010300":"130000","010400":"230000","010500":"150000","010600":"270000","010601":"270000","010602":"270000","010700":"340000","010701":"340000","010702":"340000","010800":"370000","010900":"400000","011000":"460100","011001":"460100","011002":"460100","011100":"471000"};var CHILD_TO_PARENT={"010101":"010100","010102":"010100","010103":"010100","010201":"010200","010202":"010200","010203":"010200","010204":"010200","010601":"010600","010602":"010600","010701":"010700","010702":"010700","011001":"011000","011002":"011000"};var PARENT_TO_CHILD=c.chain(CHILD_TO_PARENT).toArray().groupBy(function(area){return area[1]}).transformValues(function(areas){return c.map(areas,function(area){return area[0]})}).value();var isSummerForMap=function(p6m){var reportDatetime=new Date(p6m.reportDatetime);return c.contains([2,3,4],util.date.getMonth(reportDatetime)+1)};var commingSoonForMap=function(p1m,p6m){if(!isSummerForMap(p6m))return false;return c.keys(p1m.snowfall).length===0};var get1MonthTermForMap=function(p1m){var term=[];c.times(3,function(i){var startTime=new Date(p1m.timeDefines[i]);var endTime=new Date(startTime.getTime()+1e3*3600*24*(i===2?13:6));term[i]=[startTime,endTime]});term[3]=[new Date(p1m.targetDatetime),makeLastDateFor1Month(new Date(p1m.targetDatetime))];return term};root.Season=root.Season||{};root.Season.Common={makeLastDateFor1Month:makeLastDateFor1Month,isWhitePageSeason:isWhitePageSeason,isSummer:isSummer,strip:strip,prob2bar:prob2bar,makeLegend:makeLegend,CHILD_TO_PARENT:CHILD_TO_PARENT,PARENT_TO_CHILD:PARENT_TO_CHILD,REPRESENTATIVE_CITY:REPRESENTATIVE_CITY};root.Season.MapCommon={isSummer:isSummerForMap,commigSoon:commingSoonForMap,isWhitePage3Month:isWhitePage3Month,isWhitePageSeason:isWhitePageSeason,get1MonthTerm:get1MonthTermForMap}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var hashC=util.hashController;var c=util.common;var TR=new Translator;var drawData={};var requestedKeys=[];var defaultSelector=null;var common=Season.MapCommon;var areaData=null;var explain=null;var p1mText=["第1週目","第2週目","第3-4週目","向こう1か月"];var termTextList=[];var sliderPattern={temperature:{slider:["%3w","%0w","%1w","%2w","%3m","%0m","%1m","%2m","%s"],startPosition:0,startButton:false},precipitation:{slider:["%3w","%3m","%0m","%1m","%2m","%s","baiu"],startPosition:0,startButton:false},sunshine:{slider:["%3w"],startPosition:0,startButton:false},snowfall:{slider:["%3w","%3m","%s"],startPosition:0,startButton:false}};var sliderSet={temperature:[{pattern:"P1M",term:"0"},{pattern:"P1M",term:"1"},{pattern:"P1M",term:"2"},{pattern:"P1M",term:"3"},{pattern:"P3M",term:"0"},{pattern:"P3M",term:"1"},{pattern:"P3M",term:"2"},{pattern:"P3M",term:"3"},{pattern:"P6M",term:"0"}],precipitation:[{pattern:"P1M",term:"0"},{pattern:"P3M",term:"0"},{pattern:"P3M",term:"1"},{pattern:"P3M",term:"2"},{pattern:"P3M",term:"3"},{pattern:"P6M",term:"0"},{pattern:"P6M",term:"1"}],sunshine:[{pattern:"P1M",term:"0"}],snowfall:[{pattern:"P1M",term:"0"},{pattern:"P3M",term:"0"},{pattern:"P6M",term:"0"}]};var plteType={temperature:[{color:"#910053",fillColor:"#910053",weight:1,fillOpacity:1,opacity:1},{color:"#FF1A1A",fillColor:"#FF1A1A",weight:1,fillOpacity:1,opacity:1},{color:"#FF9900",fillColor:"#FF9900",weight:1,fillOpacity:1,opacity:1},{color:"#FFF000",fillColor:"#FFF000",weight:1,fillOpacity:1,opacity:1},{color:"#FFF0B4",fillColor:"#FFF0B4",weight:1,fillOpacity:1,opacity:1},{color:"#FFFFF0",fillColor:"#FFFFF0",weight:1,fillOpacity:1,opacity:1},{color:"#c8ffff",fillColor:"#c8ffff",weight:1,fillOpacity:1,opacity:1},{color:"#46FFFF",fillColor:"#46FFFF",weight:1,fillOpacity:1,opacity:1},{color:"#007EFF",fillColor:"#007EFF",weight:1,fillOpacity:1,opacity:1},{color:"#2121FF",fillColor:"#2121FF",weight:1,fillOpacity:1,opacity:1},{color:"#000070",fillColor:"#000070",weight:1,fillOpacity:1,opacity:1},{color:"#FFFFFF",fillColor:"#FFFFFF",weight:1,fillOpacity:0,opacity:0}],precipitation:[{color:"#002626",fillColor:"#002626",weight:1,fillOpacity:1,opacity:1},{color:"#004D40",fillColor:"#004D40",weight:1,fillOpacity:1,opacity:1},{color:"#009980",fillColor:"#009980",weight:1,fillOpacity:1,opacity:1},{color:"#1FCCAF",fillColor:"#1FCCAF",weight:1,fillOpacity:1,opacity:1},{color:"#49F3D6",fillColor:"#49F3D6",weight:1,fillOpacity:1,opacity:1},{color:"#FFFFF0",fillColor:"#FFFFF0",weight:1,fillOpacity:1,opacity:1},{color:"#FFE5BF",fillColor:"#FFE5BF",weight:1,fillOpacity:1,opacity:1},{color:"#FFC846",fillColor:"#FFC846",weight:1,fillOpacity:1,opacity:1},{color:"#F5780F",fillColor:"#F5780F",weight:1,fillOpacity:1,opacity:1},{color:"#783705",fillColor:"#783705",weight:1,fillOpacity:1,opacity:1},{color:"#3C1E05",fillColor:"#3C1E05",weight:1,fillOpacity:1,opacity:1},{color:"#FFFFFF",fillColor:"#FFFFFF",weight:1,fillOpacity:0,opacity:0}],sunshine:[{color:"#910053",fillColor:"#910053",weight:1,fillOpacity:1,opacity:1},{color:"#FF1A1A",fillColor:"#FF1A1A",weight:1,fillOpacity:1,opacity:1},{color:"#FF9900",fillColor:"#FF9900",weight:1,fillOpacity:1,opacity:1},{color:"#FFF000",fillColor:"#FFF000",weight:1,fillOpacity:1,opacity:1},{color:"#FFF0B4",fillColor:"#FFF0B4",weight:1,fillOpacity:1,opacity:1},{color:"#FFFFF0",fillColor:"#FFFFF0",weight:1,fillOpacity:1,opacity:1},{color:"#EEEEFF",fillColor:"#EEEEFF",weight:1,fillOpacity:1,opacity:1},{color:"#CED2F3",fillColor:"#CED2F3",weight:1,fillOpacity:1,opacity:1},{color:"#454A77",fillColor:"#454A77",weight:1,fillOpacity:1,opacity:1},{color:"#242450",fillColor:"#242450",weight:1,fillOpacity:1,opacity:1},{color:"#000038",fillColor:"#000038",weight:1,fillOpacity:1,opacity:1},{color:"#FFFFFF",fillColor:"#FFFFFF",weight:1,fillOpacity:0,opacity:0}],snowfall:[{color:"#000070",fillColor:"#000070",weight:1,fillOpacity:1,opacity:1},{color:"#2121FF",fillColor:"#2121FF",weight:1,fillOpacity:1,opacity:1},{color:"#007EFF",fillColor:"#007EFF",weight:1,fillOpacity:1,opacity:1},{color:"#00BFFF",fillColor:"#00BFFF",weight:1,fillOpacity:1,opacity:1},{color:"#99EEFF",fillColor:"#99EEFF",weight:1,fillOpacity:1,opacity:1},{color:"#FFFFF0",fillColor:"#FFFFF0",weight:1,fillOpacity:1,opacity:1},{color:"#FFE6DC",fillColor:"#FFE6DC",weight:1,fillOpacity:1,opacity:1},{color:"#FFC846",fillColor:"#FFC846",weight:1,fillOpacity:1,opacity:1},{color:"#F5780F",fillColor:"#F5780F",weight:1,fillOpacity:1,opacity:1},{color:"#783705",fillColor:"#783705",weight:1,fillOpacity:1,opacity:1},{color:"#3C1E05",fillColor:"#3C1E05",weight:1,fillOpacity:1,opacity:1},{color:"#FFFFFF",fillColor:"#FFFFFF",weight:1,fillOpacity:0,opacity:0}]};var areaName={"010100":{name:"北海道地方",latlon:[44.5,136.5],shift:[40,0]},"010101":{name:"北海道地方(日)",latlon:[44.5,136.5],shift:[40,0],parent:"010100"},"010102":{name:"北海道地方(オ)",latlon:[46,143.5],shift:[0,40],parent:"010100"},"010103":{name:"北海道地方(太)",latlon:[42,144],shift:[10,0],parent:"010100"},"010200":{name:"東北地方",latlon:[38,142.5],shift:[-30,0]},"010201":{name:"東北地方(日)",latlon:[41.5,135.5],shift:[40,20],parent:"010200"},"010202":{name:"東北地方(太)",latlon:[38,142.5],shift:[-30,0],parent:"010200"},"010203":{name:"東北地方(北)",latlon:[41.5,135.5],shift:[40,20],parent:"010200"},"010204":{name:"東北地方(南)",latlon:[38,142.5],shift:[-30,0],parent:"010200"},"010300":{name:"関東甲信地方",latlon:[35,141.5],shift:[-10,0]},"010400":{name:"東海地方",latlon:[34,138],shift:[-20,-10]},"010500":{name:"北陸地方",latlon:[39.5,136],shift:[20,50]},"010600":{name:"近畿地方",latlon:[38,133],shift:[50,50]},"010601":{name:"近畿地方(太)",latlon:[32.5,136],shift:[-20,-20],parent:"010600"},"010602":{name:"近畿地方(日)",latlon:[38,133],shift:[50,50],parent:"010600"},"010700":{name:"中国地方",latlon:[36.5,129.5],shift:[20,20]},"010701":{name:"山陰地方",latlon:[36.5,129.5],shift:[20,20],parent:"010700"},"010702":{name:"山陽地方",latlon:[38,129.5],shift:[20,50],parent:"010700"},"010800":{name:"四国地方",latlon:[32.5,132.5],shift:[10,0]},"010900":{name:"九州北部地方",latlon:[34,125.5],shift:[40,0]},"011001":{name:"九州南部",latlon:[30.5,132],shift:[-30,-40],parent:"011000"},"011002":{name:"奄美地方",latlon:[29,125],shift:[60,10],parent:"011000"},"011100":{name:"沖縄地方",latlon:[24.5,128],shift:[-20,-40]}};var defaultCodes=["010100","010101","010102","010103","010200","010201","010202","010203","010204","010300","010400","010500","010600","010601","010602","010700","010701","010702","010800","010900","011001","011002","011000","011100"];var makeRequests=function(pattern){var requests={data:"season/data/"+pattern+".json"};if(!drawData.explain){requests.P1M="season/data/P1M/010000.json";requests.P3M="season/data/P3M/010000.json";requests.P6M="season/data/P6M/010000.json"}if(!explain){requests.explain="season/const/explain_map.html"}return requests};var checkCondition=function(conf){if(!c.find(sliderSet[conf.elem],function(o){return o.pattern===conf.pattern&&o.term===conf.term})){conf.pattern="P1M";conf.term="0";history.replaceState(null,null,hashC.hashString(conf))}};var makeInfoTime=function(pattern,elem,term){var timeStr=util.date.strftime(new Date(drawData[pattern].reportDatetime),TR.tr("%Y年%m月%d日%H時%M分発表"));var termText=termTextList[getSliderIndex(pattern,elem,term)];var elemName=function(){switch(elem){case"temperature":return TR.select("気温","Average temperature");case"precipitation":return TR.select("降水量","Precipitation");case"sunshine":return TR.select("日照時間","Sunshine");default:return TR.select("降雪量","Snowfall")}}();return $("<div>").append(timeStr+"<br>").append(TR.select(termText+"の"+elemName,elemName+", "+termText))};var makeMapData=function(conf,isFirst){var requestKey=conf.pattern+conf.elem+conf.term;var toGray=changeGrayMap(conf.pattern,conf.elem,conf.term);var centerText=makeCenterText(conf.pattern,conf.elem,conf.term);var rtn={movieConfig:setSelect(sliderPattern[conf.elem]),infoTime:makeInfoTime(conf.pattern,conf.elem,conf.term)[0],contentsInfo:makeContentsInfoText(conf.elem)[0],centerText:centerText?centerText[0]:null,legend:mkLegend(conf.elem),defaultOpen:"legend"};rtn.data={};rtn.data.fcst={mapKey:"class15s",plte:plteType[conf.elem],colorData:{},zindex:5,islandBold:true,display:true,options:ContentsCommon.getMapOptions("missing"),events:{click:function(e){var areaCode=function(){if(e.target.feature.properties.code==="hoppo")return"014100";return JMAWebUtility.area.convertCode(areaData,e.target.feature.properties.code,"class15s","offices")}();location.href="season/#area_type=offices&area_code="+areaCode+"&term="+pattern2mode(hashC.getHashData().pattern)}}};if(TR.isEnglish())rtn.data.fcst.options.interactive=false;c.each(defaultCodes,function(areaCode){var d=drawData[conf.pattern][conf.elem][areaCode];var class15Codes=getClass15Codes(areaCode);if(!d||!d[conf.term]){rtn.data.fcst.colorData[areaCode]=11;return}c.each(class15Codes,function(code){rtn.data.fcst.colorData[code]=setIndex(d[conf.term])})});UnitMap.getStatus().registedKeys.forEach(function(key){if(key!=="BASEMAP"&&key!=="fcst"&&key!=="gray"&&key!=="prefline")rtn.data[key]={display:false}});if(c.contains(requestedKeys,requestKey)&&rtn.data.hasOwnProperty(requestKey)){rtn.data[requestKey].display=true;if(toGray){rtn.data.fcst.colorData={};rtn.data[requestKey].display=false}return rtn}requestedKeys.push(requestKey);rtn.data[requestKey]={zindex:100,display:true,data:[],minZoom:5};c.each(defaultCodes,function(areaCode){var d=drawData[conf.pattern][conf.elem][areaCode];var codes=areaCode==="011000"?["011001","011002"]:[areaCode];var class15Codes=getClass15Codes(areaCode);if(!d||!d[conf.term]){rtn.data.fcst.colorData[areaCode]=11;return}c.each(class15Codes,function(code){rtn.data.fcst.colorData[code]=setIndex(d[conf.term])});c.each(codes,function(code){rtn.data[requestKey].data.push(makeSVGList(d[conf.term],code))})});if(toGray){rtn.data.fcst.colorData={};rtn.data[requestKey].display=false}rtn.explain=makeExplain(explain,conf.elem);return rtn};var getClass15Codes=function(areaCode){switch(areaCode){case"010100":return getClass15s("centers",["010100"]).concat(["hoppo"]);case"010101":return getClass15s("offices",["012000","016000"]).concat(getClass15s("class10s",["017020"])).concat(["011011","011013"]);case"010102":return getClass15s("offices",["013000"]).concat(["011012"]);case"010103":return getClass15s("offices",["014030","014100","015000"]).concat(getClass15s("class10s",["017010"])).concat(["hoppo"]);case"010200":return getClass15s("centers",["010200"]);case"010201":return getClass15s("offices",["050000","060000"]).concat(getClass15s("class10s",["020010","070030"]));case"010202":return getClass15s("offices",["030000","040000"]).concat(getClass15s("class10s",["020020","020030","070010","070020"]));case"010203":return getClass15s("offices",["020000","030000","050000"]);case"010204":return getClass15s("offices",["040000","060000","070000"]);case"010300":return getClass15s("centers",["010300"]);case"010400":return getClass15s("centers",["010400"]);case"010500":return getClass15s("centers",["010500"]);case"010600":return getClass15s("centers",["010600"]);case"010601":return getClass15s("offices",["270000","290000","300000"]).concat(getClass15s("class10s",["250010","260010","280010"]));case"010602":return getClass15s("class10s",["250020","260020","280020"]);case"010700":return getClass15s("centers",["010700"]);case"010701":return getClass15s("offices",["310000","320000"]);case"010702":return getClass15s("offices",["330000","340000"]);case"010800":return getClass15s("centers",["010800"]);case"010900":return getClass15s("centers",["010900"]);case"011000":return getClass15s("offices",["450000","460100","460040"]);case"011001":return getClass15s("offices",["450000","460100"]);case"011002":return getClass15s("offices",["460040"]);case"011100":return getClass15s("centers",["011100"])}};var getClass15s=function(areaType,areaCodes){return c.flatMap(areaCodes,function(areaCode){return JMAWebUtility.area.convertCode(areaData,areaCode,areaType,"class15s")})};var getSliderIndex=function(pattern,elem,term){return sliderSet[elem].reduce(function(a,b,i){return b.term===term&&b.pattern===pattern?i:a},0)};var makeContentsInfoText=function(elem){var contentsInfo=$("<div>");if(TR.isJapanese()){ContentsCommon.makeLink("全般予報へ",function(){document.location="./season/"}).appendTo(contentsInfo);$("<br>").appendTo(contentsInfo)}$("<span>").css("font-size","14px").html(TR.select("地域名の下の数値は、左から、<br>低い：平年並：高いの各確率(%)",overviewEn[elem])).appendTo(contentsInfo);return contentsInfo};var makeCenterText=function(pattern,elem,term){var white3=pattern==="P3M"&&term==="1"&&common.isWhitePage3Month(drawData.explain.month1.targetDatetime,drawData.explain.month3.targetDatetime);var whiteSeason=pattern==="P6M"&&common.isWhitePageSeason(drawData.explain.month3.targetDatetime);var commingSoon=elem==="snowfall"&&drawData[pattern].snowfall&&Object.keys(drawData[pattern].snowfall).length===0;if(white3){return $("<div>").append(TR.tr("最新の1か月予報をご覧ください。"))}else if(commingSoon){if(pattern==="P1M")return $("<div>").append(TR.tr("降雪量予報は11月15日以降に発表されます。"));else if(pattern==="P3M")return $("<div>").append(TR.tr("降雪量予報は10月25日ごろ発表されます。"));else return $("<div>").append(TR.tr("降雪量予報は9月25日ごろ発表されます。"))}else if(whiteSeason){return $("<div>").append(TR.tr("最新の3か月予報をご覧ください。"))}else{return null}};var changeGrayMap=function(pattern,elem,term){var white3=pattern==="P3M"&&term==="1"&&common.isWhitePage3Month(drawData.explain.month1.targetDatetime,drawData.explain.month3.targetDatetime);var whiteSeason=pattern==="P6M"&&common.isWhitePageSeason(drawData.explain.month3.targetDatetime);var commingSoon=elem==="snowfall"&&drawData[pattern].snowfall&&Object.keys(drawData[pattern].snowfall).length===0;return white3||whiteSeason||commingSoon};var setSelect=function(obj){var rtn=JSON.parse(JSON.stringify(obj));var hash=hashC.getHashData();var isSummer=Season.MapCommon.isSummer(drawData.explain.season);var white3=Season.MapCommon.isWhitePage3Month(drawData.explain.month1.targetDatetime,drawData.explain.month3.targetDatetime);var whiteSeason=Season.MapCommon.isWhitePageSeason(drawData.explain.month3.targetDatetime);var p3mTimeDefines=drawData.explain.month3.timeDefines;sliderSet[hash.elem].forEach(function(o,i){if(hash.pattern===o.pattern&&hash.term===o.term){rtn.startPosition=i}});termTextList=Array(sliderSet[hash.elem].length);common.get1MonthTerm(drawData.explain.month1).forEach(function(a,i){var idx=rtn.slider.indexOf("%"+i+"w");var div,commingSoon;if(idx<0)return;div=document.createElement("div");commingSoon=common.commigSoon(drawData.explain.month1,drawData.explain.season);if(hash.elem==="snowfall"&&commingSoon)div.classList.add("season-commingsoon");div.classList.add("season-slider");var text=[util.date.strftime(new Date(a[0]),"%m/%d"),util.date.strftime(new Date(a[1]),"%m/%d")].join("-");div.innerHTML=TR.select([p1mText[i],text].join("<br>"),text);rtn.slider[idx]=div;termTextList[idx]=text});c.times(4,function(i){var idx=rtn.slider.indexOf("%"+i+"m");var p3mDiv=document.createElement("div");if(idx<0)return;if(i===3){p3mDiv.innerHTML=[util.date.strftime(new Date(p3mTimeDefines[0]),TR.select("%m月","%ESm")),util.date.strftime(new Date(p3mTimeDefines[2]),TR.select("%m月","%ESm"))].join("-");if(hash.elem==="snowfall"&&Season.MapCommon.commigSoon(drawData.explain.month3,drawData.explain.season)){p3mDiv.classList.add("season-commingsoon")}}else{if(i===0&&white3)p3mDiv.classList.add("season-refnew");p3mDiv.innerHTML=util.date.strftime(new Date(p3mTimeDefines[i]),TR.select("%m月","%ESm"))}p3mDiv.classList.add("season-slider");rtn.slider[idx]=p3mDiv;termTextList[idx]=p3mDiv.innerText});if(rtn.slider.indexOf("%s")>=0){(function(){var seasonDiv=document.createElement("div");if(hash.elem==="snowfall"&&Season.MapCommon.commigSoon(drawData.explain.season,drawData.explain.season)){seasonDiv.classList.add("season-commingsoon")}else if(whiteSeason){seasonDiv.classList.add("season-refnew")}seasonDiv.classList.add("season-slider");seasonDiv.innerHTML=!isSummer||hash.elem==="snowfall"?TR.select("冬<br>(12-2月)","Winter<br>(Dec.-Feb.)"):TR.select("夏<br>(6-8月)","Summer<br>(Jun.-Aug.)");termTextList[rtn.slider.indexOf("%s")]=seasonDiv.innerText;rtn.slider[rtn.slider.indexOf("%s")]=seasonDiv;if(hash.elem==="precipitation"){var baiudiv=document.createElement("div");baiudiv.classList.add("season-slider");baiudiv.innerHTML=TR.select("梅雨の時期","Rainy season");rtn.slider[rtn.slider.length-1]=baiudiv;termTextList[rtn.slider.length-1]=baiudiv.innerText}if(!isSummer&&hash.elem==="precipitation")rtn.slider.splice(6,1)})()}return rtn};var setIndex=function(_d){var d=c.map(_d,function(s){return parseInt(s,10)});if(d[2]>=70)return 0;if(d[2]>=60)return 1;if(d[2]>=50)return 2;if(d[0]>=70)return 10;if(d[0]>=60)return 9;if(d[0]>=50)return 8;if(d[2]===40)return d[1]===40?3:4;if(d[0]===40)return d[1]===40?7:6;return 5};var mkLegend=function(elem){var legendSet=[];c.times(11,function(i){if(i===0){legendSet.push([{text:TR.select(elem==="temperature"?"高い確率":"多い確率","Probability of above-normal")}])}if(i===5){legendSet.push([{text:TR.select("平年並","Probability of near-normal")}])}if(i===6){legendSet.push([{text:TR.select(elem==="temperature"?"低い確率":"少ない確率","Probability of below-normal")}])}legendSet.push([{color:plteType[elem][i].fillColor,text:legendMessage(i,elem)}])});return ContentsCommon.makeLegend(legendSet)[0]};var legendMessage=function(i,elem){return[TR.space()+legendValue(i),i===0||i===10?TR.select("以上"," or more"):"",i===3?" (20:40:40)":"",i===4?" (30:30:40)":"",i===6?" (40:30:30)":"",i===7?" (40:40:20)":""].join("")};var legendValue=function(i){if(i===0||i===10)return"70%";if(i===1||i===9)return"60%";if(i===2||i===8)return"50%";if(c.contains([3,4,6,7],i))return"40%";return TR.select("平年並","near-nomal")};var pattern2mode=function(pattern){switch(pattern){case"P1M":return"1month";case"P3M":return"3month";case"P6M":return"season";default:return"1month"}};var makeSVGList=function(fcst,code){var sub=code;var latlon=[areaName[sub].latlon[0],areaName[sub].latlon[1]];var div=document.createElement("div");div.setAttribute("id",sub);div.setAttribute("class",TR.select("season-prob","season-prob-en"));div.innerHTML="<b>"+TR.tr(areaName[sub].name)+"</b><br />"+makeProbText(fcst);return{type:"dom",latlon:latlon,domElement:div,events:{click:pagejump},autoShift:areaName[sub].shift,options:{interactive:false,code:sub,className:"contents-clickable"}}};var makeProbText=function(prob){var max=c.maxBy(prob,function(p){return parseInt(p,10)});return c.map(prob,function(p){if(p!==max)return p;return"<b>"+p+"</b>"}).join(":")};var makeExplain=function(explainData,elem){var targetExplain=$(explainData).filter("div.season-explain-map-"+TR.select("ja","en"));if(TR.isEnglish()){targetExplain.find("a#japanese-page-link").on("click",function(e){var hash=hashC.getHashData();delete hash.lang;location.href=hashC.hashString(hash);e.preventDefault()});if(elem!=="snowfall"){targetExplain.find("span#snowfall-only").remove()}}return $("<div>").addClass("contents-explain").html(targetExplain)[0]};var pagejump=function(e){var areaCode=function(){var code;if(e.target._icon){code=e.currentTarget._icon.firstChild.id;return areaName[code].parent?areaName[code].parent:code}code=e.currentTarget.option.code;if(!code)return"010100";return areaData.offices[code]?JMAWebUtility.area.convertCode(areaData,code,"offices","centers"):code}();location.href="season/"+hashC.hashString({area_type:"season",area_code:areaCode,pattern:pattern2mode(hashC.getHashData().pattern)})};var draw=function(conf,option,res){var requests=makeRequests(conf.pattern);areaData=areaData||option.areas;util.parallelRequest(requests,function(d){if(d.explain)explain=d.explain;drawData[conf.pattern]=d.data;drawData.explain=drawData.explain||{month1:d.P1M,month3:d.P3M,season:d.P6M};defaultSelector=defaultSelector||option.defaultSelector;res(makeMapData(conf,true))})};var changeMap=function(conf,_option,res){var lastLang=TR.getLang();TR.setLang();if(lastLang!==TR.getLang()){location.reload();return}checkCondition(conf);if(drawData[conf.pattern]){res(makeMapData(conf))}else{draw(conf,null,res)}};var rapidRequest=function(idx,res,target){var hash=hashC.getHashData();var newConditions=sliderSet[hash.elem][idx];var contentsInfo=function(){if(target.classList.contains("season-refnew")){return"最新の"+(newConditions.pattern==="P3M"?"1":"3")+"か月予報をご覧ください。"}if(target.classList.contains("season-commingsoon")){return"降雪量予報は9月25日ごろ発表されます。"}return null}();res({contentsInfo:contentsInfo});TR.setLang();hash.pattern=newConditions.pattern;hash.term=newConditions.term;hashC.setHashData(hash)};var overviewEn={temperature:"Probability of below-normal temperature (cold), near-normal temperature (average), above-normal temperature (warm) for each area.Colored areas have a 40% probability or more of below-normal or above-normal temperature.",precipitation:"Probability of below-normal precipitation (dry), near-normal precipitation (average), above-normal precipitation (wet) for each area.Colored areas have a 40% probability or more of below-normal or above-normal precipitation.",sunshine:"Probability of below-normal (short) sunshine duration, near-normal (average) sunshine duration, above-normal (long) sunshine duration for each area.Colored areas have a 40% probability or more of below-normal or above-normal sunshine.",snowfall:"Probability of below-normal (little) snowfall, near-normal (average) snowfall, above-normal (much) snowfall for each area.Colored areas have a 40% probability or more of below-normal or above-normal snowfall."};TR.addDictionary({"北海道地方":"Hokkaido","北海道地方(日)":"Japan Sea Side<br>of Hokkaido","北海道地方(オ)":"The Okhotsk Sea<br>Side of Hokkaido","北海道地方(太)":"Pacific Ocean<br>Side of Hokkaido","東北地方":"Tohoku","東北地方(日)":"Japan Sea<br>Side of Tohoku","東北地方(太)":"Pacific Ocean<br>Side of Tohoku","東北地方(北)":"The Northern Tohoku","東北地方(南)":"The Southern Tohoku","関東甲信地方":"Kanto Koshin","東海地方":"Tokai","北陸地方":"Hokuriku","近畿地方":"Kinki","近畿地方(太)":"Pacific Ocean<br>Side of Kinki","近畿地方(日)":"Japan Sea<br>Side of Kinki","中国地方":"Chugoku","山陰地方":"Sanin","山陽地方":"Sanyo","四国地方":"Shikoku","九州北部地方":"Northern<br>Kyushu","九州南部":"Southern<br>Kyushu","奄美地方":"Amami","沖縄地方":"Okinawa","最新の1か月予報をご覧ください。":"Please refer to the latest One-month Forecast for this period.","最新の3か月予報をご覧ください。":"Please refer to the latest One-month or Three-month Forecast for this period.","降雪量予報は11月15日以降に発表されます。":"Seasonal Forecast for Snowfall is not issued for this period of year.","降雪量予報は10月25日ごろ発表されます。":"Seasonal Forecast for Snowfall is not issued for this period of year.","降雪量予報は9月25日ごろ発表されます。":"Seasonal Forecast for Snowfall is not issued for this period of year."});root.Season=root.Season||{};root.Season.draw=draw;root.Season.changeMap=changeMap;root.Season.rapidRequest=rapidRequest})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var ua=util.area;var ud=util.date;var c=util.common;var common=Season.Common;var KEYWORD="出現の可能性が最も大きい天候と、特徴のある気温、降水量等の確率";var insert=function(div,areas,areaType,areaCode,typeInstance){var block=$("<div>").addClass("contents-block").appendTo(div);var table=new SimpleTable;var items,m;setHeader(table,areas,areaType,areaCode,typeInstance);if(typeInstance.getData().headlineText!==""){table.appendRow();table.appendHeader("特に注意を要する事項").attr("colspan",2);table.appendCell(common.strip(typeInstance.getData().headlineText))}table.appendRows(makeBody(typeInstance));if(typeInstance.isSummer){items=makeRainyItems(typeInstance);if(items.length>0)table.appendRows(makeRainyRows(items))}table.addWidths(100,40,null);table.make().addClass("season-table").appendTo(block);if(items&&items.length>0){m=typeInstance.getData().metInfos[1].termName.match(/^梅雨の時期（(.*)）$/);if(m){$("<p>").text("(*1)梅雨の時期："+m[1]).addClass("season-note").appendTo(block)}}};var makeRainyItems=function(typeInstance){var infos=typeInstance.getData().metInfos.slice(1);return c.chain(infos).map(function(info){return info.items}).flatten().compact().filter(function(item){return item.type===KEYWORD}).value()};var makeRainyRows=function(items){var table=new SimpleTable;var rainyData=makeRainyData(items);c.each(rainyData,function(kind,texts){c.each(texts,function(text){table.appendRow();table.appendHeader(kind);table.appendCell(text)})});table.prependMergedHeader("梅雨の時期(*1)");return table};var makeRainyData=function(items){var rtn={};c.each(items,function(item){if(!item.feature||!item.feature.elements)return;c.each(item.feature.elements,function(element){var kind=element.kind;rtn[kind]=rtn[kind]||[];rtn[kind].push(element.text)})});return rtn};var makeBody=function(typeInstance){var table=new SimpleTable;setTotalTable(table,typeInstance);table.appendRows(makeTimeSeriesTable(typeInstance));return table};var setTotalTable=function(table,typeInstance){var totalInfo=typeInstance.getData().metInfos[0];var item=c.find(totalInfo.items,function(currentItem){return currentItem.type===KEYWORD});if(item.feature.situation){table.appendRow();table.appendHeader("天候");table.appendCell(common.strip(item.feature.situation))}c.each(item.feature.elements,function(element){table.appendRow();table.appendHeader(element.kind);table.appendCell(common.strip(element.text))});table.prependMergedHeader(typeInstance.getTermText(0))};var makeTimeSeriesTable=function(typeInstance){var table=new SimpleTable;var situationData=typeInstance.getSituationData();c.each(situationData,function(situation){var t=new SimpleTable;c.each(typeInstance.kindOrder(),function(kind){if(!situation||!situation.texts[kind])return;t.appendRow();t.appendHeader(kind);t.appendCell(common.strip(situation.texts[kind]))});if(situation&&situation.termText)t.prependMergedHeader(situation.termText);table.appendRows(t)});return table};var setHeader=function(table,areas,areaType,areaCode,typeInstance){var centerName=function(){if(areaType==="japan")return"全国";return ua.convertName(areas,areaCode,areaType,"centers")}();var termName=typeInstance.getTermName();table.appendRow().addClass("contents-title");table.appendHeader(centerName+"　"+termName+"（"+typeInstance.getTerm()+"）").attr("colspan",3);table.appendRow().addClass("contents-header");table.appendHeader(ud.strftime(new Date(typeInstance.getData().reportDatetime),"%Y年%m月%d日%H時%M分 ")+typeInstance.getData().publishingOffice+" 発表").attr("colspan",3)};root.Season=root.Season||{};root.Season.ForecastTable={insert:insert}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var c=util.common;var common=Season.Common;var KEYWORD="地域・期間平均平年偏差各階級の確率";var insert=function(div,typeInstance){var infos=typeInstance.getData().metInfos.slice(1);var items=c.chain(infos).map(function(info){return info.items}).flatten().compact().filter(function(item){return item.type===KEYWORD}).value();var block,table,rainyData,headerTable,contensTable,m;var expectForHokkaido;if(items.length===0)return;block=$("<div>").addClass("contents-block").appendTo(div);table=new SimpleTable;rainyData=makeRainyData(items);headerTable=new SimpleTable;contensTable=new SimpleTable;headerTable.appendRow().addClass("contents-title");headerTable.appendHeader("梅雨の時期(*1)の降水量の各階級の確率（％）").attr("colspan",4);c.each(rainyData,function(kind,areas){c.chain(areas).keys().sortBy(function(areaCode){return areaCode}).each(function(areaCode){var area=areas[areaCode];contensTable.appendRow();contensTable.appendHeader(area.areaName.replace("（北海道地方を除く）","(*2)"));contensTable.appendHeader("梅雨の時期(*1)");contensTable.appendCell(common.prob2bar(area.probability,typeInstance.getBarHeight()))});contensTable.prependMergedHeader(kind)});table.appendRows(headerTable);table.appendRows(contensTable);table.addWidths(40,70,100,null);table.make().addClass("season-table").appendTo(block);m=typeInstance.getData().metInfos[1].termName.match(/^梅雨の時期（(.*)）$/);if(m){$("<p>").text("(*1)梅雨の時期："+m[1]).addClass("season-note").appendTo(block)}expectForHokkaido=c.chain(rainyData).values().some(function(areas){return c.chain(areas).values().some(function(area){return area.areaName.match(/（北海道地方を除く）/)!==null})});if(expectForHokkaido){$("<p>").text("(*2)北海道地方を除く").addClass("season-note").appendTo(block)}common.makeLegend().appendTo(block)};var makeRainyData=function(items){var rtn={};c.each(items,function(item){rtn[item.kind]=rtn[item.kind]||{};rtn[item.kind][item.areaCode]={areaName:item.areaName,probability:[item.below,item.normal,item.above]}});return rtn};root.Season=root.Season||{};root.Season.RainyTable={insert:insert}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var ud=util.date;var c=util.common;var common=Season.Common;var insert=function(div,data,term){var block=$("<div>").addClass("contents-block").appendTo(div);var table=new SimpleTable;table.appendRows(makePlanTable(data,term));table.make().addClass("season-table").appendTo(block)};var makePlanText=function(time){return ud.strftime(time,"次回は%Y年%m月%d日(%W)%H時%M分に発表予定")};var makePlanTable=function(data,term){var table=new SimpleTable;var typeInstance=Season.Factory.getInstance(term,data);table.appendRow().addClass("contents-title");table.appendHeader("次回発表予定等");c.each(typeInstance.getPlanTargets(),function(target){var additionalInfo=c.find(typeInstance.getData().additionalInfos,function(info){return info.target===target});if(!additionalInfo)return;table.appendRow();table.appendCell(makePlanText(new Date(additionalInfo.datetime)))});if(typeInstance.getData().notice){table.appendRow();table.appendCell(common.strip(typeInstance.getData().notice))}if(typeInstance.getData().additionalNotice){table.appendRow();table.appendCell(common.strip(typeInstance.getData().additionalNotice))}return table};root.Season=root.Season||{};root.Season.PlanTable={insert:insert}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var c=util.common;var common=Season.Common;var insert=function(div,typeInstance){var block=$("<div>").addClass("contents-block").appendTo(div);var table=new SimpleTable;table.appendRow().addClass("contents-title");table.appendHeader(typeInstance.getProbabilityHeaderText()).attr("colspan",4);table.appendRows(makeBody(typeInstance));table.addWidths(40,70,100,null);table.make().addClass("season-table").appendTo(block);common.makeLegend().appendTo(block)};var makeBody=function(typeInstance){var table=new SimpleTable;var data=typeInstance.getProbabilityData();c.each(typeInstance.kindOrder(),function(kind){var kindRowTable;if(!data[kind])return;kindRowTable=new SimpleTable;c.chain(data[kind]).keys().sortBy(function(areaCode){return parseInt(areaCode,10)}).each(function(areaCode){var areaRowTable;if(isDivided(data,kind,areaCode))return;areaRowTable=new SimpleTable;c.each(data[kind][areaCode].probabilities,function(prob,i){var probability=prob||data[kind][common.CHILD_TO_PARENT[areaCode]]&&data[kind][common.CHILD_TO_PARENT[areaCode]].probabilities[i];if(!probability)return;areaRowTable.appendRow();areaRowTable.appendHeader(typeInstance.getTermText(i));areaRowTable.appendCell(common.prob2bar(probability,typeInstance.getBarHeight()))});areaRowTable.prependMergedHeader(data[kind][areaCode].areaName);kindRowTable.appendRows(areaRowTable)});kindRowTable.prependMergedHeader(kind);table.appendRows(kindRowTable)});return table};var isDivided=function(data,kind,areaCode){return common.PARENT_TO_CHILD[areaCode]&&c.some(common.PARENT_TO_CHILD[areaCode],function(code){return c.valid(data[kind][code])})};root.Season=root.Season||{};root.Season.ProbabilityTable={insert:insert}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var ud=util.date;var c=util.common;var KEYWORD_FORECAST="出現の可能性が最も大きい天候と、特徴のある気温、降水量等の確率";var KEYWORD_PROBABILITY="地域・期間平均平年偏差各階級の確率";var KIND_ORDER=["天候","気温","降水量","日照時間","降雪量"];var getInstance=function(term,data){switch(term){case"1month":return new Month1(data.month1);case"3month":return new Month3(data.month3);case"season":return new Seasonal(data.season);default:console.error("ArgumentError",term,data);return null}};var Month1=function(data){BaseType.call(this,data);this.isSummer=false};var Month3=function(data){BaseType.call(this,data);this.isSummer=false};var Seasonal=function(data){BaseType.call(this,data);this.isSummer=Season.Common.isSummer(data)};var BaseType=function(data){this.data=data;this.probabilityData=null};BaseType.prototype={kindOrder:function(){return KIND_ORDER},getData:function(){return this.data},getProbabilityHeaderText:function(){return this.getProbabilityKindText()+"の各階級の確率（％）"},getProbabilityData:function(){var probabilityData;if(!this.probabilityData){probabilityData={};this.mergeTotalProbabilityData(probabilityData);this.mergeTimeSeriesProbabilityData(probabilityData);this.probabilityData=probabilityData}return this.probabilityData},mergeTotalProbabilityData:function(hash){var totalInfo=this.data.metInfos[0];var items=c.filter(totalInfo.items,function(item){return item.type===KEYWORD_PROBABILITY});c.each(items,function(item){hash[item.kind]=hash[item.kind]||{};hash[item.kind][item.areaCode]=hash[item.kind][item.areaCode]||{};hash[item.kind][item.areaCode].areaName=item.areaName;hash[item.kind][item.areaCode].probabilities=hash[item.kind][item.areaCode].probabilities||new Array(4);hash[item.kind][item.areaCode].probabilities[0]=[item.below,item.normal,item.above]})},mergeTimeSeriesProbabilityData:function(hash){var infos=c.filter(this.data.timeInfos,function(info){return info.type===KEYWORD_PROBABILITY});c.each(infos,function(info){c.each(info.probabilities,function(probability){hash[probability.kind]=hash[probability.kind]||{};hash[probability.kind][info.areaCode]=hash[probability.kind][info.areaCode]||{};hash[probability.kind][info.areaCode].areaName=info.areaName;hash[probability.kind][info.areaCode].probabilities=hash[probability.kind][info.areaCode].probabilities||new Array(4);hash[probability.kind][info.areaCode].probabilities[parseInt(probability.refId,10)]=[probability.below,probability.normal,probability.above]})})},getSituationData:function(){var timeInfo=c.find(this.data.timeInfos,function(info){return info.type===KEYWORD_FORECAST});var rtn=[];var that=this;if(c.invalid(timeInfo))return rtn;c.each(timeInfo.feature.situations,function(situation){var timeIndex=parseInt(situation.refId,10)-1;var termText=that.getTermText(situation.refId);rtn[timeIndex]=rtn[timeIndex]||{};rtn[timeIndex].termText=termText;rtn[timeIndex].texts=rtn[timeIndex].texts||{};rtn[timeIndex].texts["天候"]=situation.text});c.each(timeInfo.feature.elements,function(element){var kind=element.kind;c.each(element.texts,function(text){var timeIndex=parseInt(text.refId,10)-1;var termText=that.getTermText(text.refId);rtn[timeIndex]=rtn[timeIndex]||{};rtn[timeIndex].termText=termText;rtn[timeIndex].texts=rtn[timeIndex].texts||{};rtn[timeIndex].texts[kind]=text.text})});return rtn},getProbabilityKindText:function(){var probabilityData=this.getProbabilityData();return c.filter(this.kindOrder(),function(kind){return probabilityData[kind]}).join("、")},getBarHeight:function(){return 25}};Month1.prototype=Object.create(BaseType.prototype);Month1.prototype.getSituationData=function(){var timeInfo=c.find(this.data.timeInfos,function(info){return info.type===KEYWORD_FORECAST});var rtn=[];var that=this;if(c.invalid(timeInfo))return rtn;c.each(timeInfo.feature.elements,function(element){var kind=element.kind;c.each(element.texts,function(text){var timeIndex=parseInt(text.refId,10)-1;var termText=that.getTermText(text.refId);rtn[timeIndex]=rtn[timeIndex]||{};rtn[timeIndex].termText=termText;rtn[timeIndex].texts=rtn[timeIndex].texts||{};rtn[timeIndex].texts[kind]=text.text})});return rtn};Month1.prototype.getTermName=function(){return"１か月予報"};Month1.prototype.getTerm=function(){var startDatetime=new Date(this.data.targetDatetime);var endDatetime=Season.Common.makeLastDateFor1Month(startDatetime);return ud.strftime(startDatetime,"%m/%d～")+ud.strftime(endDatetime,"%m/%d")};Month1.prototype.getTermText=function(i){var timeStr,startTime,endTime;if(i===0){return this.data.metInfos[0].termName+"<br>"+this.getTerm()}switch(Number(i)){case 1:startTime=new Date(this.data.timeDefines[i-1]);endTime=new Date(startTime.getTime()+1e3*3600*24*6);timeStr="１週目";break;case 2:startTime=new Date(this.data.timeDefines[i-1]);endTime=new Date(startTime.getTime()+1e3*3600*24*6);timeStr="２週目";break;case 3:startTime=new Date(this.data.timeDefines[i-1]);endTime=new Date(startTime.getTime()+1e3*3600*24*13);timeStr="３～４週目";break;default:console.error("ArgumentError",i);return""}return timeStr+"<br>"+ud.strftime(startTime,"%m/%d～")+ud.strftime(endTime,"%m/%d")};Month1.prototype.getPlanTargets=function(){return[this.getTermName()]};Month3.prototype=Object.create(BaseType.prototype);Month3.prototype.getTermName=function(){return"３か月予報"};Month3.prototype.getTerm=function(){var startDatetime=new Date(this.data.targetDatetime);var endDatetime=new Date(startDatetime);endDatetime.setMonth(endDatetime.getMonth()+2);return ud.strftime(startDatetime,"%m月～")+ud.strftime(endDatetime,"%m月")};Month3.prototype.getTermText=function(i){var timeIndex,time;if(i===0)return this.getTerm();timeIndex=Number(i)-1;time=this.data.timeDefines[timeIndex];return ud.strftime(new Date(time),"%m月")};Month3.prototype.getPlanTargets=function(){return[this.getTermName()]};Seasonal.prototype=Object.create(BaseType.prototype);Seasonal.prototype.getTermName=function(){return this.isSummer?"暖候期予報":"寒候期予報"};Seasonal.prototype.getTerm=function(){return this.isSummer?"06月～08月":"12月～02月"};Seasonal.prototype.getTermText=function(){return(this.isSummer?"夏":"冬")+" "+this.getTerm()};Seasonal.prototype.getPlanTargets=function(){return["暖候期予報","寒候期予報"]};root.Season=root.Season||{};root.Season.Factory={getInstance:getInstance}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var areas=[{name:"日本海北部及びオホーツク海南部",office:"016000",enOffice:"016000",representative:"1000",relation:["1010","1020","1030","1040","1050"]},{name:"北海道南方及び東方海上",office:"017000",enOffice:"017000",representative:"1100",relation:["1110","1120","1130","1140","1150"]},{name:"三陸沖",office:"040000",enOffice:"040000",representative:"2000",relation:["2010","2020"]},{name:"関東海域",office:"130000",enOffice:"010000",representative:"3000",relation:["3010","3020"]},{name:"日本海中部",office:"150000",enOffice:"150000",representative:"3100",relation:["3110","3120","3130","3140"]},{name:"東海海域",office:"230000",enOffice:"230000",representative:"3200",relation:["3210","3220","3230"]},{name:"四国沖及び瀬戸内海",office:"280000",enOffice:"280000",representative:"4000",relation:["4010","4020","4030"]},{name:"日本海西部",office:"260020",enOffice:"260020",representative:"4100",relation:["4110","4120","4130"]},{name:"対馬海峡",office:"400000",enOffice:"400000",representative:"5000",relation:["5000"]},{name:"九州西方海上",office:"420000",enOffice:"420000",representative:"5100",relation:["5110","5120","5130"]},{name:"九州南方海上及び日向灘",office:"460100",enOffice:"460100",representative:"5200",relation:["5210","5220","5230"]},{name:"沖縄海域",office:"471000",enOffice:"471000",representative:"6000",relation:["6010","6020","6030"]}];var names={4010:{name:"瀬戸内海",enName:"SETONAIKAI"},4020:{name:"四国沖北部",enName:"NORTHERN SEA OFF SHIKOKU"},4030:{name:"四国沖南部",enName:"SOUTHERN SEA OFF SHIKOKU"},5110:{name:"済州島西海上",enName:"SEA WEST OF CHEJU ISLAND"},5120:{name:"長崎西海上",enName:"SEA WEST OF NAGASAKI"},5130:{name:"女島南西海上",enName:"SEA SOUTHWEST OF MESHIMA"},5e3:{name:"対馬海峡",enName:"TSUSHIMA KAIKYO"},3210:{name:"東海海域東部",enName:"EASTERN SEA OFF TOKAI"},3220:{name:"東海海域西部",enName:"WESTERN SEA OFF TOKAI"},3230:{name:"東海海域南部",enName:"SOUTHERN SEA OFF TOKAI"},5210:{name:"日向灘",enName:"HYUGA NADA"},5220:{name:"鹿児島海域",enName:"SEA OF KAGOSHIMA"},5230:{name:"奄美海域",enName:"SEA AROUND AMAMI"},3110:{name:"沿海州南部沖",enName:"SEA OFF SOUTHERN COAST OF MARITIME PROVINCE"},3120:{name:"秋田沖",enName:"SEA OFF AKITA"},3130:{name:"佐渡沖",enName:"SEA OFF SADO"},3140:{name:"能登沖",enName:"SEA OFF NOTO"},4110:{name:"日本海北西部",enName:"NORTHWESTERN PART OF JAPAN SEA"},4120:{name:"山陰沖東部及び若狭湾付近",enName:"SEA EAST OF OKI SYOTO AND AROUND WAKASA WAN"},4130:{name:"山陰沖西部",enName:"SEA WEST OF OKI SYOTO"},6010:{name:"東シナ海南部",enName:"SOUTHERN PART OF EAST CHINA SEA"},6020:{name:"沖縄東方海上",enName:"SEA EAST OF OKINAWA"},6030:{name:"沖縄南方海上",enName:"SEA SOUTH OF OKINAWA"},1110:{name:"北海道東方海上",enName:"SEA EAST OF HOKKAIDO"},1120:{name:"釧路沖",enName:"SEA OFF KUSHIRO"},1130:{name:"日高沖",enName:"SEA OFF HIDAKA"},1140:{name:"津軽海峡",enName:"TSUGARU KAIKYO"},1150:{name:"檜山津軽沖",enName:"SEA OFF HIYAMA AND TSUGARU"},2010:{name:"三陸沖東部",enName:"EASTERN SEA OFF SANRIKU"},2020:{name:"三陸沖西部",enName:"WESTERN SEA OFF SANRIKU"},1010:{name:"サハリン東方海上",enName:"SEA EAST OF SAKHALIN"},1020:{name:"サハリン西方海上",enName:"SEA WEST OF SAKHALIN"},1030:{name:"網走沖",enName:"SEA OFF ABASHIRI"},1040:{name:"宗谷海峡",enName:"SOYA KAIKYO"},1050:{name:"北海道西方海上",enName:"SEA WEST OF HOKKAIDO"},3010:{name:"関東海域北部",enName:"NORTHERN SEA OFF KANTO"},3020:{name:"関東海域南部",enName:"SOUTHERN SEA OFF KANTO"}};root.SeaWarning=root.SeaWarning||{};root.SeaWarning.Const={areas:areas,names:names}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var c=util.common;var TR=new Translator;var draw=function(_hash,_options,resolve){util.parallelRequest({seawarning:"seawarning/data/warning/map.json",labelPos:"common/const/label_pos/marines.json",volcanoList:"volcano/const/volcano_list.json",volcanoWarnings:"marinevolcano/data/marinevolcano.json",explain:"seawarning/const/explain_map.html"},function(data){var warnings=formatWarning(data.seawarning);var latestTime=getLatestReportDatetime(data.seawarning);resolve(makeResolveObject(warnings,latestTime,data.labelPos,data.volcanoList,data.volcanoWarnings,data.explain))})};var formatWarning=function(seawarning){return c.chain(seawarning).map(function(area){return c.map(area.warnings,function(warn){var representative=c.find(SeaWarning.Const.areas,function(a){return a.representative===warn.area.code});if(!representative)return warn;return c.map(representative.relation,function(marineCode){return{code:warn.code,area:{code:marineCode}}})})}).flatten().groupBy(function(warn){return warn.area.code}).transformValues(function(warns){return c.chain(warns).map(function(warn){return warn.code}).sortBy(function(code){return parseInt(code,10)}).value()}).value()};var getLatestReportDatetime=function(seawarning){var latest=c.max(seawarning,function(warn){return new Date(warn.reportDatetime).getTime()});if(latest===null)return null;return new Date(latest)};var makeResolveObject=function(warnings,latestTime,labelPosition,volcanoList,volcanoWarnings,explain){var resolveObject={data:{},defaultOpen:"legend",explain:$("<div>").addClass("contents-explain").append($(explain).filter("div.seawarning-explain-map"+TR.select("","-en")))[0]};fillMarine(resolveObject,warnings);putIcons(resolveObject,warnings,labelPosition,volcanoList,volcanoWarnings);putTexts(resolveObject,volcanoList,volcanoWarnings);addLegend(resolveObject);addInfoTime(resolveObject,latestTime);if(TR.isJapanese())addContentsInfo(resolveObject);makeTelop(resolveObject,volcanoList,volcanoWarnings);return resolveObject};var addLegend=function(resolveObject){var legendSet=[];legendSet.push([{box:"contents-level40",text:TR.select("台風警報","Typhoon")}]);legendSet.push([{box:"contents-level30",text:TR.select("暴風警報","Storm")}]);legendSet.push([{box:"contents-level25",text:TR.select("強風警報","Gale")}]);legendSet.push([{box:"contents-level20",text:TR.select("風警報","Near Gale")}]);legendSet.push([{img:"seawarning/img/uneri.svg",text:TR.select("うねり警報","Sea Swell")}]);legendSet.push([{img:"seawarning/img/ice.svg",text:TR.select("着氷警報","Ice Accretion")}]);legendSet.push([{img:"seawarning/img/noumu.svg",text:TR.select("濃霧警報","Dense Fog")}]);legendSet.push([{img:"seawarning/img/volcano.png",text:TR.select("海上警報（火山）","Volcanic Marine Warning")}]);resolveObject.legend=ContentsCommon.makeLegend(legendSet).addClass("contents-legend-map")[0]};var addInfoTime=function(resolveObject,latestTime){resolveObject.infoTime=util.date.strftime(latestTime,TR.tr("%Y年%m月%d日%H時%M分発表"))};var addContentsInfo=function(resolveObject){resolveObject.contentsInfo=$("<div>").append(ContentsCommon.makeLink("全国一覧",function(){location.href="./seawarning/"+makeHashLang(true)}))[0]};var makeColorSet=function(){var colors=["none","neargale","gale","storm","typhoon"];var colorPalette=c.map(colors,function(color){var level;switch(color){case"none":level=0;break;case"neargale":level=20;break;case"gale":level=25;break;case"storm":level=30;break;case"typhoon":level=40;break;default:console.error("不正な色: "+color);level=0;break}if(level===0){return ContentsCommon.getMapOptions("missing",{color:"black"})}return ContentsCommon.getMapOptions("level"+level,{color:"black"})});var colorIndexes=function(){var colorIndex={};c.each(colors,function(color,i){colorIndex[color]=i});return colorIndex}();return{palette:colorPalette,indexes:colorIndexes}};var codes2color=function(codes,colorIndexes){return c.max(codes,function(code){switch(code){case"23":return colorIndexes.typhoon;case"22":return colorIndexes.storm;case"21":return colorIndexes.gale;case"20":return colorIndexes.neargale;default:return colorIndexes.none}})};var codes2icon=function(marineCode,codes){var div=$("<div>");if(c.all(codes,function(code){return!c.contains(["12","11","10"],code)}))return null;c.each(codes,function(code){switch(code){case"12":$("<img>").attr({src:"seawarning/img/uneri.svg",title:SeaWarning.Const.names[marineCode][TR.select("name","enName")],class:"seawarning-icon"}).appendTo(div);break;case"11":$("<img>").attr({src:"seawarning/img/noumu.svg",title:SeaWarning.Const.names[marineCode][TR.select("name","enName")],class:"seawarning-icon"}).appendTo(div);break;case"10":$("<img>").attr({src:"seawarning/img/ice.svg",title:SeaWarning.Const.names[marineCode][TR.select("name","enName")],class:"seawarning-icon"}).appendTo(div);break;default:break}});div.on("click",function(){document.location="seawarning/#area_code="+marineCode+makeHashLang(false)});return div[0]};var fillMarine=function(resolveObject,warnings){var colorSet=makeColorSet();var colorPalette=colorSet.palette;var colorIndexes=colorSet.indexes;var colorData={};c.each(warnings,function(marineCode,warningCodes){colorData[marineCode]=codes2color(warningCodes,colorIndexes)});resolveObject.data.fill={mapKey:"marines",plte:colorPalette,colorData:colorData,zindex:1,events:{click:function(e){var marineCode=e.target.feature.properties.code;document.location="seawarning/#area_code="+marineCode+makeHashLang(false)}},permanent:true,options:ContentsCommon.getMapOptions("missing",{color:"black"})}};var makeHashLang=function(isFirstItem){if(TR.isJapanese())return"";return(isFirstItem?"#":"&")+"lang="+TR.getLang()};var volcanicIcon=function(volcano){var div=$("<div>");$("<img>").attr({src:"seawarning/img/volcano.png",title:volcano[TR.select("name_jp","name_en")],class:"seawarning-icon"}).appendTo(div);return div[0]};var makeTelop=function(resolveObject,volcanoList,volcanoWarnings){var table=new SimpleTable;table.appendRow().addClass("contents-header");table.appendHeader(TR.select("発表時刻","Issued at"));table.appendHeader(TR.select("火山名","Volcano"));table.appendHeader(TR.select("内容","Contents"));c.each(volcanoWarnings,function(volcanoWarning){var reportDatetime,volcanoName;var volcanoInfo=c.find(volcanoWarning.volcanoInfos,function(info){return info.type==="噴火警報・予報（対象火山）"});if(!volcanoWarning.within24)return;reportDatetime=util.date.strftime(new Date(volcanoWarning.reportDatetime),TR.select("%d日%H時%M分","%H:%M JST, %d"));volcanoName=function(){var jpName=volcanoInfo.areas[0].name;var volcanoProp;if(TR.isJapanese())return jpName;volcanoProp=c.findWhere(volcanoList,{code:volcanoInfo.areas[0].code});return volcanoProp?volcanoProp["name_en"]:jpName}();table.appendRow();table.appendCell(reportDatetime).addClass("seawarning-telop-time");table.appendCell(volcanoName).addClass("seawarning-telop-name");table.appendCell(TR.select("海上警報（噴火警報）を発表しました。","An Marine Warning (Volcanic Warning) is Issued.")).addClass("seawarning-telop-content")});if(table.rowSize()>1){resolveObject.contentsInfo=table.make().addClass("seawarning-telop-table")[0]}};var volcanicPopup=function(volcanoWarning,volcanoList){var volcanoInfo=c.find(volcanoWarning.volcanoInfos,function(info){return info.type==="噴火警報・予報（対象火山）"});var coordinate,targetDatetime,reportDatetime,volcanoName,prevention,table;if(!volcanoInfo)return"";coordinate=parseCoordinate(volcanoInfo.areas[0].coordinate);targetDatetime=util.date.strftime(new Date(volcanoWarning.targetDatetime),TR.tr("%Y年%m月%d日%H時%M分"));reportDatetime=util.date.strftime(new Date(volcanoWarning.reportDatetime),TR.tr("%Y年%m月%d日%H時%M分"));volcanoName=function(){var jpName=volcanoInfo.areas[0].name;var volcanoProps;if(TR.isJapanese())return jpName;volcanoProps=c.find(volcanoList,function(info){return info["name_jp"]===jpName});return volcanoProps&&volcanoProps["name_en"]?volcanoProps["name_en"]:jpName}();prevention=function(){var orgText=volcanoWarning.volcanoPrevention;var kairiTexts,kairiNum;if(TR.isJapanese())return orgText;kairiTexts=c.find(VOLCANO_DICTIONARY.kairi,function(texts){return orgText.indexOf(texts.keyStart)===0});if(!kairiTexts)return TR.tr(orgText);kairiNum=orgText.slice(kairiTexts.keyStart.length,orgText.indexOf(kairiTexts.keyEnd)).replace(/[０-９．]/g,function(s){return String.fromCharCode(s.charCodeAt(0)-65248)});return kairiTexts.enText.replace("%num",kairiNum)}();table=new SimpleTable;setVolcanicPopupRow(table,TR.select("火山名","Volcano"),volcanoName);setVolcanicPopupRow(table,TR.select("観測時刻","Observed at"),targetDatetime);setVolcanicPopupRow(table,TR.select("発表時刻","Issued at"),reportDatetime);setVolcanicPopupRow(table,TR.select("緯度","Latitude"),coordinate.lat);setVolcanicPopupRow(table,TR.select("経度","Longitude"),coordinate.lon);table.appendRow();table.appendCell(prevention).attr("colspan",2);if(volcanoWarning.appendix){table.appendRow();table.appendCell(volcanoWarning.appendix).attr("colspan",2)}return table.make().addClass("seawarning-popup-table")[0]};var parseCoordinate=function(coordinate){var m=coordinate.match(/^\+(\d\d)(\d\d\.?\d*)\+(\d\d\d)(\d\d\.?\d*)/);if(!m)return{lat:"",lon:""};return{lat:TR.select("北緯","N ")+m[1]+TR.select("度","°")+m[2]+TR.select("分","´"),lon:TR.select("東経","E ")+m[3]+TR.select("度","°")+m[4]+TR.select("分","´")}};var setVolcanicPopupRow=function(table,title,value){var titleCell,valueCell;table.appendRow().addClass("contents-header");titleCell=table.appendHeader(title).addClass("contents-header seawarning-popup-title");valueCell=table.appendCell(value).addClass("seawarning-popup-value");if(TR.isEnglish){titleCell.width("85px");valueCell.width("165px")}};var putIcons=function(resolveObject,warnings,labelPosition,volcanoList,volcanoWarnings){var icons=[];c.each(warnings,function(marineCode,codes){var icon=codes2icon(marineCode,codes);var iconSize=c.filter(codes,function(code){return c.contains(["12","11","10"],code)}).length;if(c.invalid(icon))return;icons.push({type:"dom",latlon:c.reverse(labelPosition[marineCode].gravity),domElement:icon,positionShift:[iconSize*-10,-10]})});c.each(volcanoWarnings,function(volcanoWarning){var targetVolcano=c.find(volcanoList,function(volcano){return volcano.code===volcanoWarning.eventId});if(!targetVolcano)return;var icon=volcanicIcon(targetVolcano);icons.push({type:"dom",latlon:targetVolcano.latlon,domElement:icon,positionShift:[-10,-10],popup:{content:volcanicPopup(volcanoWarning,volcanoList),on:"click",options:{maxWidth:"auto"}}})});resolveObject.data.icon={data:icons,zindex:100}};var putTexts=function(resolveObject,volcanoList,volcanoWarnings){var texts=[];c.each(volcanoWarnings,function(volcanoWarning){var targetVolcano=c.find(volcanoList,function(volcano){return volcano.code===volcanoWarning.eventId});if(!targetVolcano)return;var text=$("<a>").html(targetVolcano[TR.select("name_jp","name_en")]).addClass("seawarning-volcano-name");texts.push({type:"dom",latlon:targetVolcano.latlon,domElement:text[0],positionShift:[20,-5],popup:{content:volcanicPopup(volcanoWarning,volcanoList),on:"click",options:{maxWidth:"auto"}}})});resolveObject.data.text={data:texts,zindex:120}};var VOLCANO_DICTIONARY={fixed:{"噴火による影響が及ぶおそれ　周辺海域警戒":"INFLUENCE OF ERUPTION IS EXPECTED;WARNING AROUND THE VOLCANO","海底噴火による影響が及ぶおそれ　周辺海域警戒":"INFLUENCE OF SUBMARINE ERUPTION IS EXPECTED;WARNING AROUND THE VOLCANO","噴火による影響が及ぶおそれ　沿岸警戒":"INFLUENCE OF ERUPTION IS EXPECTED;WARNING ALONG THE COAST AROUND THE VOLCANO","噴火による影響が及ぶおそれなし　噴火警報解除":"NO INFLUENCE OF ERUPTION IS EXPECTED;VOLCANIC WARNING CLEARED UP","噴火が発生するおそれ　周辺海域警戒":"INFLUENCE OF ERUPTION IS EXPECTED;WARNING AROUND THE VOLCANO","噴火が予想されます。周辺海域では警戒してください。":"INFLUENCE OF SUBMARINE ERUPTION IS EXPECTED;WARNING AROUND THE VOLCANO"},kairi:[{keyStart:"噴火による影響が及ぶおそれ　半径",keyEnd:"海里以内の周辺海域警戒",enText:"INFLUENCE OF ERUPTION IS EXPECTED;WARNING WITHIN A RADIUS OF %num NAUTICAL MILE FROM THE VOLCANO"},{keyStart:"海底噴火による影響が及ぶおそれ　半径",keyEnd:"海里以内の周辺海域警戒",enText:"INFLUENCE OF SUBMARINE ERUPTION IS EXPECTED;WARNING WITHIN A RADIUS OF %num NAUTICAL MILE FROM THE VOLCANO"}]};TR.addDictionary(VOLCANO_DICTIONARY.fixed);root.SeaWarning=root.SeaWarning||{};root.SeaWarning.draw=draw})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var c=util.common;var hashC=util.hashController;var strftime=util.dateFormatter.strftime;var TR=new Translator;var prepareMapData=function(areas,informations,tornados){Map.data=makeData(areas,informations,tornados)};var paintTornado=function(colorSet,tornados){c.each(tornados,function(tornado){c.each(tornado.class10s,function(class10){if(class10.code==="1"){colorSet[class10.area.code]=Map.colorIndexes["level20"]}})});if(colorSet["014010"])colorSet["hoppo"]=colorSet["014010"]};var getTargetInformations=function(informations,elementKey,targetHeadersKey){return c.filter(informations,function(information){return c.contains(Map.elements[elementKey][targetHeadersKey],information.header)})};var paintOffices=function(colorSet,areas,informations,elementKey){c.each(getTargetInformations(informations,elementKey,"office_headers"),function(information){if(information.header==="VPOA50"){if(!information.kirokuameItems)return;c.chain(information.kirokuameItems).filter(function(item){return item.status==="1"}).flatMap(function(item){var areaCode=item.areaCode;if(areas.offices[areaCode]){return areas.offices[areaCode].children}else if(areas.class10s[areaCode]){return areaCode}else{console.error("kirokuameItemsが不正",information);return null}}).compact().each(function(class10Code){colorSet[class10Code]=Map.colorIndexes[Map.headerColors[information.header]]});return}c.each(information.areaCodes,function(officeCode){c.each(areas.offices[officeCode].children,function(class10Code){if(color2priority(Map.colors[colorSet[class10Code]])<color2priority(Map.headerColors[information.header])){colorSet[class10Code]=Map.colorIndexes[Map.headerColors[information.header]]}})})});if(colorSet["014010"])colorSet["hoppo"]=colorSet["014010"]};var makeData=function(areas,informations,tornados){var rtn={};c.each(Map.elements,function(elementKey){var colorSet={};paintOffices(colorSet,areas,informations,elementKey);if(Map.elements[elementKey]["paint_tornado"]){paintTornado(colorSet,tornados)}var eventsObject={click:function(e){var officeCode=function(){var class10Code=e.target.feature.properties.code;if(class10Code==="hoppo")return"014100";return areas["class10s"][class10Code].parent}();var hashObj={area_type:"offices",area_code:officeCode,format:"table"};document.location="information/"+hashC.hashString(hashObj)}};rtn[elementKey]={mapKey:"class10s",plte:Map.colorPalette,colorData:colorSet,zindex:40,islandBold:true,options:ContentsCommon.getMapOptions("missing"),events:TR.select(eventsObject,{})};rtn[elementKey+"-box"]={zindex:3e7,maxZoom:7,data:makeBoxData(areas,informations,elementKey)}});return rtn};var makeContentsInfo=function(informations,tornados,element){var tornadoAlert=function(){if(!element.tornado_alert)return null;if(tornados.length===0)return null;return $("<div>").append($("<a>").text("竜巻注意情報が発表されています！").on("click",function(){hashC.changeHashData({element:"tornado"},false,true);changeMap(hashC.getHashData(),null,UnitMap.makePage)}).css({color:"red","text-decoration":"underline"}).addClass("contents-clickable"))}();var kirokuameAlert=function(){if(!element.kirokuame_alert)return null;if(!c.find(informations,function(info){return info.header==="VPOA50"}))return null;return $("<div>").append($("<a>").text("記録的短時間大雨情報が発表されています！").on("click",function(){hashC.changeHashData({element:"kirokuame"},false,true);changeMap(hashC.getHashData(),null,UnitMap.makePage)}).css({color:"red","text-decoration":"underline"}).addClass("contents-clickable"))}();if(!tornadoAlert&&!kirokuameAlert)return null;var div=$("<div>");if(tornadoAlert)div.append(tornadoAlert);if(kirokuameAlert)div.append(kirokuameAlert);return div[0]};var makeBoxData=function(areas,informations,elementKey){var element=Map.elements[elementKey];var centerCodes=c.keys(Map.boxPositions);if(!element.japan_headers){centerCodes=c.reject(centerCodes,function(centerCode){return centerCode==="010000"})}if(!element.center_headers){centerCodes=c.reject(centerCodes,function(centerCode){return centerCode!=="010000"})}return c.map(centerCodes,function(centerCode){var boxPosition=Map.boxPositions[centerCode];var box=$("<div>").text(boxPosition.name).css({width:"125px",height:"25px",padding:"3px","text-align":"center","vertivcal-align":"center",border:"solid 1px gray","font-weight":"bold",opacity:"1","border-radius":"3px","background-color":decideBoxColor(areas,informations,elementKey,centerCode)}).on("click",function(){location.href="information/"+hashC.hashString({format:"table",area_type:centerCode==="010000"?"japan":"centers",area_code:centerCode})});return{type:"dom",latlon:boxPosition.latlon,positionShift:boxPosition.positionShift,domElement:box[0]}})};var decideBoxColor=function(areas,informations,elementKey,centerCode){var headers=c.concat(Map.elements[elementKey].japan_headers||[],Map.elements[elementKey].center_headers||[]);var target=c.find(informations,function(info){return c.contains(headers,info.header)&&c.contains(info.areaCodes,centerCode)});return ContentsCommon.getMapOptions(target?"level20":"missing").fillColor};var prepareColorIndexes=function(){var colorIndexes={};Map.colorPalette=ContentsCommon.getMapPlte(Map.colors);c.each(Map.colors,function(color,i){colorIndexes[color]=i});Map.colorIndexes=colorIndexes};var prepareInfoTimes=function(informations){c.each(Map.elements,function(type,element){element.title=makeInfoTime(informations,type)})};var prepareCenterTexts=function(informations){c.each(Map.elements,function(type,element){element.center=makeCenterText(informations,type,element)})};var prepareContentsInfos=function(informations,tornados){c.each(Map.elements,function(type,element){element.contentsInfo=makeContentsInfo(informations,tornados,element)})};var makeInfoTime=function(informations,element){var latestInformation=findLatestInformation(informations,element);if(!latestInformation)return null;return strftime(new Date(latestInformation["reportDatetime"]),TR.tr("%Y年%m月%d日%H時%M分発表"))};var makeCenterText=function(informations,type,element){var latestInformation=findLatestInformation(informations,type);if(!latestInformation){return TR.select(element.name+"を発表していません","No "+element.enName+" are in effect for Japan.")}return null};var findLatestInformation=function(informations,showingElement){var element=Map.elements[showingElement];var targetHeaders=c.concat(element["japan_headers"]||[],element["center_headers"]||[],element["office_headers"]||[],element["paint_tornado"]?["VPHW51"]:[]);return c.chain(informations).filter(function(information){return c.contains(targetHeaders,information.header)}).maxBy(function(information){try{return new Date(information["reportDatetime"]).getTime()}catch(e){console.error("時刻が不正です。"+information);return 0}})};var draw=function(originalHash,options,resolve){var requests={informations:"information/data/information.json",tornados:"information/data/tornado.json",map_explain:"information/const/explain_map.txt"};util.parallelRequest(requests,function(data){var informations=c.reject(data.informations,function(information){return information["mapValidOut"]});var hash=fixHashData(originalHash);var areas=options.areas;var tornados=data.tornados;var element=hash.element;var explain=$("<div>").addClass("contents-explain").html(data["map_explain"]);prepareColorIndexes();prepareLegends();prepareInfoTimes(informations);prepareCenterTexts(informations);prepareContentsInfos(informations,tornados);prepareMapData(areas,informations,tornados);resolve({infoTime:Map.elements[element].title,centerText:Map.elements[element].center,contentsInfo:Map.elements[element].contentsInfo,data:{paint:Map.data[element],box:Map.data[element+"-box"]},explain:TR.select(explain[0],null),defaultOpen:"legend",legend:Map.elements[element].legend})})};var changeMap=function(originalHash,_options,resolve){var hash=fixHashData(originalHash);var element=hash.element;resolve({infoTime:Map.elements[element].title,centerText:Map.elements[element].center,contentsInfo:Map.elements[element].contentsInfo,defaultOpen:"legend",data:{paint:Map.data[element],box:Map.data[element+"-box"]},selectChange:{element:element},legend:Map.elements[element].legend})};var prepareLegends=function(){c.each(Map.elements,function(type,element){element.legend=makeLegend(type)})};var makeLegend=function(type){var legendSet=[];switch(type){case"information":legendSet.push([{box:"contents-level20",text:TR.select("気象情報","Weather Information")}]);break;case"tornado":legendSet.push([{box:"contents-level20",text:TR.select("竜巻注意情報","Hazardous Wind Watches")}]);break;case"kirokuame":legendSet.push([{box:"contents-level20",text:TR.select("記録的短時間大雨","Heavy Rain Information")}]);break;case"choi":legendSet.push([{box:"contents-level20",text:TR.select("潮位情報","Tidelevel Information")}]);break;case"tenkou":legendSet.push([{box:"contents-level20",text:TR.select("天候情報","Climate Information")}]);break;case"smog":legendSet.push([{box:"contents-level20",text:TR.select("スモッグ情報","Smog Information")}]);break;default:console.error("typeが不正です：",type)}legendSet.push([{box:"contents-missing",text:TR.select("発表なし","No Information")}]);return ContentsCommon.makeLegend(legendSet).addClass("contents-legend-map")[0]};var fixHashData=function(hashData){var returnHash=c.clone(hashData);if(!c.contains(Object.keys(Map.elements),hashData.element)){returnHash.element="information"}return returnHash};var color2priority=function(color){var priority=Map.priority[color];if(!priority)return 0;return priority};Map.headerColors={VPFJ50:"level20",Jfuken:"level20",VPFI50:"level20",VMCJ52:"level20",Jfchoui:"level20",VPSG50:"level20",VPHW51:"level20",VPOA50:"level20"};Map.elements={information:{name:"気象情報",enName:"Weather Information",japan_headers:["VPZJ50","Jzenkoku","VPTI50"],center_headers:["VPCJ50","Jchihou"],office_headers:["VPFJ50","Jfuken"],tornado_alert:true,kirokuame_alert:true},tornado:{name:"竜巻注意情報",enName:"Hazardous Wind Watches",paint_tornado:true,kirokuame_alert:true},kirokuame:{name:"記録的短時間大雨情報",enName:"Heavy Rain Information",office_headers:["VPOA50"],tornado_alert:true},tenkou:{name:"天候情報",enName:"Climate Information",japan_headers:["VPZI50"],center_headers:["VPCI50"],office_headers:["VPFI50"]},choi:{name:"潮位情報",enName:"Tidelevel Information",japan_headers:["VMCJ50","Jzchoui"],center_headers:["VMCJ51","Jcchoui"],office_headers:["VMCJ52","Jfchoui"]},smog:{name:"スモッグ気象情報",enName:"Smog Information",japan_headers:["VPZS50"],office_headers:["VPSG50"]}};Map.colors=["border","border-bold","none","level0","level20","level30"];Map.boxPositions={"010000":{name:"全般",enName:"Nationwide",latlon:[40.576,132.572],positionShift:[-15,-20]},"010100":{name:"北海道地方",enName:"Hokkaido",latlon:[41.926,143.225],positionShift:[30,-20]},"010200":{name:"東北地方",enName:"Tohoku",latlon:[39.516,142.001],positionShift:[30,-20]},"010300":{name:"関東甲信地方",enName:"Kanto",latlon:[35.706,140.901],positionShift:[20,-15]},"010400":{name:"東海地方",enName:"Tokai",latlon:[34.535,138.196],positionShift:[10,-5]},"010500":{name:"北陸地方",enName:"Hokuriku",latlon:[38.12,138.185],positionShift:[-100,-20]},"010600":{name:"近畿地方",enName:"Kinki",latlon:[33.435,135.757],positionShift:[-10,5]},"010700":{name:"中国地方",enName:"Chugoku",latlon:[36.274,133.287],positionShift:[-60,-20]},"010800":{name:"四国地方",enName:"Shikoku",latlon:[32.694,132.631],positionShift:[-5,25]},"010900":{name:"九州北部地方",enName:"North Kyushu",latlon:[32.665,128.59],positionShift:[-100,0]},"011000":{name:"九州南部・奄美地方",enName:"South Kyushu",latlon:[30.515,130.917],positionShift:[-160,15]},"011100":{name:"沖縄地方",enName:"Okinawa",latlon:[26.594,128.411],positionShift:[5,25]}};Map.priority=c.chain(Map.colors).map(function(color){var m=color.match(/level(\d+)/);var priority=m?parseInt(m[1]):0;return[color,priority]}).toHash().value();root.Information=root.Information||{};root.Information.draw=draw;root.Information.changeMap=changeMap})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var DICTIONARY={"%mp月%dp日%Hp時%M分":"%mp/%dp %Hp:%M JST","%dp日%Hp:%M":"%mp/%dp %Hp:%M JST","アメダス":"Weather Observation","気温":"Temperature","降水量":"Precipitation","風向":"Wind direction","風速":"Wind speed","風向風速":"Wind direction/speed","風向・風速":"Wind direction/speed","風向・<br>風速":"Wind direction/speed","日照時間":"Sunshine duration","積雪深":"Snow depth","降雪量":"Snow fall","湿度":"Humidity","休止中":"Abeyance","気象台":"Regional Headquarters or Local Meteorological Offices","測候所・特別地域気象観測所":"Weather Stations or Special automated weather stations","地域気象観測所（アメダス）":"Automated weather stations","父島気象観測所":"Chichijima Observation Station","南鳥島気象観測所":"Minamitorishima Observation Station","富士山特別地域気象観測所":"Fujisan special automated weather station","最低気温":"Minimum temperature","最高気温":"Maximum temperature","最大瞬間風速":"Maximum wind gust speed","北北東":"NNE","北東":"NE","東北東":"ENE","東":"E","東南東":"ESE","南東":"SE","南南東":"SSE","南":"S","南南西":"SSW","南西":"SW","西南西":"WSW","西":"W","西北西":"WNW","北西":"NW","北北西":"NNW","北":"N","静穏":"Calm","気圧":"Atmospheric Pressure","現地気圧":"Pressure","晴":"Clear","曇":"Cloudy","煙霧":"Haze","霧":"Fog","降水またはしゅう雨性の降水":"Precipitation or showery precipitation","霧雨":"Drizzle","着氷性の霧雨":"Freezing drizzle","雨":"Rain","着氷性の雨":"Freezing rain","みぞれ":"Rain and snow mixed","雪":"Snow","凍雨":"Ice pellets","霧雪":"Snow grains","しゅう雨または止み間のある雨":"Rain shower or intermittent precipitation","しゅう雪または止み間のある雪":"Snow shower or intermittent snow","ひょう":"Hail","雷":"Thunderstorm","天気不明":"Unknown","欠測":"Missing","16方位":"16 directions","海面気圧":"Sea level pressure","水平視程":"Horizontal Visibility","自動観測による天気":"Weather by automatic observation","地点名(観測所の種類)":"Stations","10分毎":"Every 10 min.","1時間毎":"Every hour","前10分間":"10-min.","前1時間":"1-hour","前3時間":"3-hour","前6時間":"6-hour","前12時間":"12-hour","前24時間":"24-hour","日時":"Date and time (JST)","推計":"Estimate","地図からご覧になりたい観測所をクリックしてください。":"Please click the observatory you want to see from the map."};root.Amedas=root.Amedas||{};Amedas.translator=new Translator(DICTIONARY)})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var Const={};Const.DK={arp:"pressure",slp:"normalPressure",tem:"temp",hum:"humidity",vis:"visibility",snc:"snow",tenki:"weather",snf1h:"snow1h",snf6h:"snow6h",snf12h:"snow12h",snf24h:"snow24h",sun10m:"sun10m",sun1h:"sun1h",pre10m:"precipitation10m",pre1h:"precipitation1h",pre3h:"precipitation3h",pre24h:"precipitation24h",wdr:"windDirection",wsp:"wind",mntem:"minTemp",mxtem:"maxTemp",mxgust:"gust",mxgustd:"gustDirection",station:"obsStation"};Const.IK={typeCode:"type",elemsCode:"elems",latitude:"lat",longitude:"lon",altitude:"alt",kjName:"kjName",knName:"knName",enName:"enName"};Const.HASH_KEYS={amdNo:"amdno",format:"format",graphElem:"elem",interval:"interval"};Const.DATA_INTERVAL_VALUES={"1h":60,"10min":10};Const.AQC_INFO={0:{code:0,symbol:""},1:{code:1,symbol:")"},2:{code:2,symbol:"#"},3:{code:3,symbol:"#"},4:{code:4,symbol:"]"},5:{code:5,symbol:"休止中"},6:{code:6,symbol:"×"},7:{code:null,symbol:" "}};Const.WDR_INFO={0:"静穏",1:"北北東",2:"北東",3:"東北東",4:"東",5:"東南東",6:"南東",7:"南南東",8:"南",9:"南南西",10:"南西",11:"西南西",12:"西",13:"西北西",14:"北西",15:"北北西",16:"北"};Const.WEATHER_INFO={0:"晴",1:"曇",2:"煙霧",3:"霧",4:"降水またはしゅう雨性の降水",5:"霧雨",6:"着氷性の霧雨",7:"雨",8:"着氷性の雨",9:"みぞれ",10:"雪",11:"凍雨",12:"霧雪",13:"しゅう雨または止み間のある雨",14:"しゅう雪または止み間のある雪",15:"ひょう",16:"雷",30:"天気不明",31:"欠測"};Const.STATIONS_INFO=[{typeCode:"A",elemsCode:"11111011",typeName:"気象台",elemsName:"気温・降水量・風向風速・日照時間・湿度・気圧",rgb:[255,0,227],size:12},{typeCode:"A",elemsCode:"11111111",typeName:"気象台",elemsName:"気温・降水量・風向風速・日照時間・積雪深・湿度・気圧",rgb:[255,30,19],size:10},{typeCode:"B",elemsCode:"11111011",typeName:"測候所・特別地域気象観測所",elemsName:"気温・降水量・風向風速・日照時間・湿度・気圧",rgb:[255,0,229],size:8},{typeCode:"B",elemsCode:"11111111",typeName:"測候所・特別地域気象観測所",elemsName:"気温・降水量・風向風速・日照時間・積雪深・湿度・気圧",rgb:[255,30,19],size:8},{typeCode:"C",elemsCode:"01000000",typeName:"地域気象観測所（アメダス）",elemsName:"降水量",rgb:[255,120,31],size:6},{typeCode:"C",elemsCode:"01000100",typeName:"地域気象観測所（アメダス）",elemsName:"降水量・積雪深",rgb:[255,204,49],size:6},{typeCode:"C",elemsCode:"11110000",typeName:"地域気象観測所（アメダス）",elemsName:"気温・降水量・風向風速",rgb:[0,254,240],size:6},{typeCode:"C",elemsCode:"11110100",typeName:"地域気象観測所（アメダス）",elemsName:"気温・降水量・風向風速・積雪深",rgb:[0,152,143],size:6},{typeCode:"C",elemsCode:"11111000",typeName:"地域気象観測所（アメダス）",elemsName:"気温・降水量・風向風速・日照時間",rgb:[25,144,251],size:6},{typeCode:"C",elemsCode:"11111100",typeName:"地域気象観測所（アメダス）",elemsName:"気温・降水量・風向風速・日照時間・積雪深",rgb:[59,0,249],size:6},{typeCode:"D",elemsCode:"11111011",typeName:"父島気象観測所",elemsName:"気温・降水量・風向風速・日照時間・湿度・気圧",rgb:[151,69,134],size:8},{typeCode:"E",elemsCode:"11111011",typeName:"南鳥島気象観測所",elemsName:"気温・降水量・風向風速・日照時間・湿度・気圧",rgb:[251,255,92],size:8},{typeCode:"F",elemsCode:"10001011",typeName:"富士山特別地域気象観測所",elemsName:"気温・日照時間・湿度・気圧",rgb:[255,178,134],size:8}];Const.PREF_TABLE={11:"011000",12:"012000",13:"012000",14:"016000",15:"016000",16:"016000",17:"013000",18:"014100",19:"014100",20:"014030",21:"015000",22:"015000",23:"017000",24:"017000",31:"020000",32:"050000",33:"030000",34:"040000",35:"060000",36:"070000",40:"080000",41:"090000",42:"100000",43:"110000",44:"130000",45:"120000",46:"140000",48:"200000",49:"190000",50:"220000",51:"230000",52:"210000",53:"240000",54:"150000",55:"160000",56:"170000",57:"180000",60:"250000",61:"260000",62:"270000",63:"280000",64:"290000",65:"300000",66:"330000",67:"340000",68:"320000",69:"310000",71:"360000",72:"370000",73:"380000",74:"390000",81:"350000",82:"400000",83:"440000",84:"420000",85:"410000",86:"430000",87:"450000",88:"460100",91:"471000",92:"472000",93:"473000",94:"474000"};root.Amedas=root.Amedas||{};root.Amedas.Const=Const})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var UC=JMAWebUtility.common;var UD=JMAWebUtility.date;var DK=Amedas.Const.DK;var IK=Amedas.Const.IK;var DATA_INTERVAL_VALUES=Amedas.Const.DATA_INTERVAL_VALUES;var AQC_INFO=Amedas.Const.AQC_INFO;var WDR_INFO=Amedas.Const.WDR_INFO;var WEATHER_INFO=Amedas.Const.WEATHER_INFO;var PREF_TABLE=Amedas.Const.PREF_TABLE;var TR=Amedas.translator;var DATA_KEY_GROUPS={observedCodeElems:[[DK.tem,DK.mntem,DK.mxtem],[DK.pre10m,DK.pre1h,DK.pre3h,DK.pre24h],DK.wdr,[DK.wsp,DK.mxgust],[DK.sun10m,DK.sun1h],[DK.snc,DK.snf1h,DK.snf6h,DK.snf12h,DK.snf24h],DK.hum,[DK.arp,DK.slp]],precipitationElems:[DK.pre10m,DK.pre1h,DK.pre3h,DK.pre24h],windDirectionElems:[DK.wdr,DK.mxgustd],sunElems:[DK.sun10m,DK.sun1h],pressureElems:[DK.arp,DK.slp],snowElems:[DK.snc,DK.snf1h,DK.snf6h,DK.snf12h,DK.snf24h],snowfallElems:[DK.snf1h,DK.snf6h,DK.snf12h,DK.snf24h],onlyOnTheDotElems:[DK.snc,DK.snf1h,DK.snf6h,DK.snf12h,DK.snf24h],doNotToFixedElems:[DK.hum,DK.snc,DK.snf1h,DK.snf6h,DK.snf12h,DK.snf24h,DK.sun10m]};var AUTO_VISUAL_OBS_INFO={elems:[DK.vis,DK.tenki],types:["A","B"],excludeAmdNumbers:["14163","34392","44132","51106","54232","62078","67437","72086","82182","88317","91197"]};var ELEMS_INFO=function(){var result={};result[DK.arp]={unit:"hPa",name:"現地気圧",term:null,grades:[]};result[DK.slp]={unit:"hPa",name:"海面気圧",term:null,grades:[]};result[DK.tem]={unit:"℃",name:"気温",term:null,grades:[{rgb:[180,0,104],stroke:"white",boundary:35},{rgb:[255,40,0],stroke:"black",boundary:30},{rgb:[255,153,0],stroke:"black",boundary:25},{rgb:[250,245,0],stroke:"black",boundary:20},{rgb:[255,255,150],stroke:"black",boundary:15},{rgb:[255,255,240],stroke:"black",boundary:10},{rgb:[185,235,255],stroke:"black",boundary:5},{rgb:[0,150,255],stroke:"white",boundary:0},{rgb:[0,65,255],stroke:"white",boundary:-5},{rgb:[0,32,128],stroke:"white",boundary:-5}]};result[DK.hum]={unit:"%",name:"湿度",term:null,grades:[{rgb:[1,31,125],stroke:"white",boundary:100},{rgb:[0,75,150],stroke:"white",boundary:90},{rgb:[0,114,154],stroke:"white",boundary:80},{rgb:[31,194,211],stroke:"black",boundary:70},{rgb:[128,248,231],stroke:"black",boundary:60},{rgb:[255,255,240],stroke:"black",boundary:50},{rgb:[255,200,70],stroke:"black",boundary:40},{rgb:[231,135,7],stroke:"black",boundary:30},{rgb:[171,74,1],stroke:"white",boundary:20},{rgb:[118,17,0],stroke:"white",boundary:10},{rgb:[84,6,0],stroke:"white",boundary:10}]};result[DK.vis]={unit:"km",name:"水平視程",term:null,grades:[]};result[DK.snc]={unit:"cm",name:"積雪深",term:null,grades:[{rgb:[180,0,104],stroke:"white",boundary:200},{rgb:[255,40,0],stroke:"white",boundary:150},{rgb:[255,153,0],stroke:"black",boundary:100},{rgb:[250,245,0],stroke:"black",boundary:50},{rgb:[0,65,255],stroke:"white",boundary:20},{rgb:[33,140,255],stroke:"white",boundary:5},{rgb:[160,210,255],stroke:"black",boundary:1},{rgb:[242,242,255],stroke:"black",boundary:1}]};result[DK.tenki]={unit:null,name:"自動観測による天気",term:null,grades:[]};result[DK.snf1h]={unit:"cm",name:"降雪量",term:"前1時間",grades:[]};result[DK.snf6h]={unit:"cm",name:"降雪量",term:"前6時間",grades:[{rgb:[180,0,104],stroke:"white",boundary:50},{rgb:[255,40,0],stroke:"white",boundary:30},{rgb:[255,153,0],stroke:"black",boundary:20},{rgb:[250,245,0],stroke:"black",boundary:15},{rgb:[0,65,255],stroke:"white",boundary:10},{rgb:[33,140,255],stroke:"white",boundary:5},{rgb:[160,210,255],stroke:"black",boundary:1},{rgb:[242,242,255],stroke:"black",boundary:1}]};result[DK.snf12h]={unit:"cm",name:"降雪量",term:"前12時間",grades:[{rgb:[180,0,104],stroke:"white",boundary:70},{rgb:[255,40,0],stroke:"white",boundary:50},{rgb:[255,153,0],stroke:"black",boundary:30},{rgb:[250,245,0],stroke:"black",boundary:20},{rgb:[0,65,255],stroke:"white",boundary:10},{rgb:[33,140,255],stroke:"white",boundary:5},{rgb:[160,210,255],stroke:"black",boundary:1},{rgb:[242,242,255],stroke:"black",boundary:1}]};result[DK.snf24h]={unit:"cm",name:"降雪量",term:"前24時間",grades:[{rgb:[180,0,104],stroke:"white",boundary:100},{rgb:[255,40,0],stroke:"white",boundary:70},{rgb:[255,153,0],stroke:"black",boundary:50},{rgb:[250,245,0],stroke:"black",boundary:30},{rgb:[0,65,255],stroke:"white",boundary:20},{rgb:[33,140,255],stroke:"white",boundary:10},{rgb:[160,210,255],stroke:"black",boundary:1},{rgb:[242,242,255],stroke:"black",boundary:1}]};result[DK.sun10m]={unit:"分",name:"日照時間",term:"前10分間",grades:[]};result[DK.sun1h]={unit:"h",name:"日照時間",term:"前1時間",grades:[{rgb:[180,0,104],stroke:"white",boundary:1},{rgb:[255,40,0],stroke:"white",boundary:.8},{rgb:[255,153,0],stroke:"black",boundary:.6},{rgb:[250,245,0],stroke:"black",boundary:.4},{rgb:[185,235,255],stroke:"black",boundary:.2},{rgb:[0,65,255],stroke:"white",boundary:.2}]};result[DK.pre10m]={unit:"mm",name:"降水量",term:"前10分間",grades:[{rgb:[180,0,104],stroke:"white",boundary:30},{rgb:[255,40,0],stroke:"white",boundary:20},{rgb:[255,153,0],stroke:"black",boundary:15},{rgb:[250,245,0],stroke:"black",boundary:10},{rgb:[0,65,255],stroke:"white",boundary:5},{rgb:[33,140,255],stroke:"white",boundary:3},{rgb:[160,210,255],stroke:"black",boundary:1},{rgb:[242,242,255],stroke:"black",boundary:1}]};result[DK.pre1h]={unit:"mm",name:"降水量",term:"前1時間",grades:[{rgb:[180,0,104],stroke:"white",boundary:80},{rgb:[255,40,0],stroke:"white",boundary:50},{rgb:[255,153,0],stroke:"black",boundary:30},{rgb:[250,245,0],stroke:"black",boundary:20},{rgb:[0,65,255],stroke:"white",boundary:10},{rgb:[33,140,255],stroke:"white",boundary:5},{rgb:[160,210,255],stroke:"black",boundary:1},{rgb:[242,242,255],stroke:"black",boundary:1}]};result[DK.pre3h]={unit:"mm",name:"降水量",term:"前3時間",grades:[{rgb:[180,0,104],stroke:"white",boundary:150},{rgb:[255,40,0],stroke:"white",boundary:120},{rgb:[255,153,0],stroke:"black",boundary:100},{rgb:[250,245,0],stroke:"black",boundary:80},{rgb:[0,65,255],stroke:"white",boundary:60},{rgb:[33,140,255],stroke:"white",boundary:40},{rgb:[160,210,255],stroke:"black",boundary:20},{rgb:[242,242,255],stroke:"black",boundary:20}]};result[DK.pre24h]={unit:"mm",name:"降水量",term:"前24時間",grades:[{rgb:[180,0,104],stroke:"white",boundary:300},{rgb:[255,40,0],stroke:"white",boundary:250},{rgb:[255,153,0],stroke:"black",boundary:200},{rgb:[250,245,0],stroke:"black",boundary:150},{rgb:[0,65,255],stroke:"white",boundary:100},{rgb:[33,140,255],stroke:"white",boundary:80},{rgb:[160,210,255],stroke:"black",boundary:50},{rgb:[242,242,255],stroke:"black",boundary:50}]};result[DK.wdr]={unit:"16方位",name:"風向",term:null,grades:[]};result[DK.wsp]={unit:"m/s",name:"風速",term:null,grades:[{rgb:[180,0,104],stroke:"white",boundary:25},{rgb:[255,40,0],stroke:"white",boundary:20},{rgb:[255,153,0],stroke:"black",boundary:15},{rgb:[250,245,0],stroke:"black",boundary:10},{rgb:[0,65,255],stroke:"white",boundary:5},{rgb:[242,242,255],stroke:"black",boundary:5}]};result[DK.mntem]={unit:"℃",name:"最低気温",term:null,grades:null};result[DK.mxtem]={unit:"℃",name:"最高気温",term:null,grades:null};result[DK.mxgust]={unit:"m/s",name:"最大瞬間風速",term:null,grades:null};result[DK.mxgustd]={unit:"16方位",name:"最大瞬間風速の風向",term:null,grades:null};result[DK.station]={unit:null,name:"地点名(観測所の種類)",term:null,grades:null};return result}();var containsAqc=function(aqcNumbers,targetAqc){if(!(aqcNumbers instanceof Array))return undefined;return UC.expand(aqcNumbers).map(function(num){return AQC_INFO[num.toString(10)].code}).contains(targetAqc)};var toInt=function(value){return isFinite(value)&&value!==null&&(typeof value==="string"||value instanceof String)?parseInt(value,10):value};var getDataIntervalKey=function(dataIntervalValue){dataIntervalValue=toInt(dataIntervalValue);return UC.find(UC.keys(DATA_INTERVAL_VALUES),function(key){return DATA_INTERVAL_VALUES[key]===dataIntervalValue})};var getAmedasName=function(pointInfo){return TR.select(pointInfo[IK.kjName]+"("+pointInfo[IK.knName]+")",pointInfo[IK.enName])};var getScrollColumnCount=function(table,fixColumnCount){return UC.max(table.rows,function(object){return object[0].childElementCount})-fixColumnCount};var isNormalData=function(elemData){return containsAqc([0,1],elemData.aqc)&&elemData.value!==null};var makeAreaInfo=function(amdNo){var prefCode=amdNo.slice(0,2);var areaCode=PREF_TABLE[prefCode];return areaCode?{areaType:"offices",areaCode:areaCode}:{areaType:"japan",areaCode:"010000"}};var makeMnmxTimeKey=function(elemKey){return elemKey+"Time"};var contentsformatValues=function(){var result={};var key1h=getDataIntervalKey(60);var key0min=getDataIntervalKey(10);result["table"+key1h]="table"+key1h;result["table"+key0min]="table"+key0min;result.graph="graph";return result}();var observationInfo=function(){var getObserveCodeIndex=function(elemKey){return UC.findIndex(DATA_KEY_GROUPS.observedCodeElems,function(elemKeys){return elemKeys.indexOf(elemKey)>-1})};var selectObserveElemKeys=function(sourceElemKeys,amdNo,pointInfo){var observeElemFlags=pointInfo[IK.elemsCode].split("");return UC.filter(sourceElemKeys,function(elemKey){var obsCodeIndex;if(UC.contains(AUTO_VISUAL_OBS_INFO.elems,elemKey)){return UC.contains(AUTO_VISUAL_OBS_INFO.types,pointInfo[IK.typeCode])&&!UC.contains(AUTO_VISUAL_OBS_INFO.excludeAmdNumbers,amdNo)}obsCodeIndex=getObserveCodeIndex(elemKey);if(elemKey===DK.slp&&pointInfo[IK.altitude]>=800)return false;return observeElemFlags[obsCodeIndex]!=="0"})};return{getObserveCodeIndex:getObserveCodeIndex,selectObserveElemKeys:selectObserveElemKeys}}();var observationElementInfo=function(){var isSunEstimate=function(elemKey,observeCode){var elemIsSun=UC.contains(DATA_KEY_GROUPS.sunElems,elemKey);var obsCodeIndex=observationInfo.getObserveCodeIndex(elemKey);return elemIsSun&&observeCode[obsCodeIndex]==="2"};var getElemName=function(elemKey,termInsertPosition,observeCode,insertLF){var elemInfo=ELEMS_INFO[elemKey];var elemName=TR.tr(elemInfo.name);var term=TR.tr(elemInfo.term);var lf=insertLF&&term?"<br>":"";var estimate=observeCode&&isSunEstimate(elemKey,observeCode)?TR.space()+"("+TR.tr("推計")+")":"";switch(termInsertPosition){case"head":return(term||"")+TR.space()+elemName+estimate;case"end":return elemName+estimate+lf+(term?TR.space()+"("+term+")":"");default:return elemName+estimate}};var getElemUnit=function(elemKey){return TR.tr(ELEMS_INFO[elemKey].unit)};var getGradeInfo=function(elemKey,value){var gradesInfo=ELEMS_INFO[elemKey].grades;var len=gradesInfo.length;var curIndex=0;if(value===undefined)return gradesInfo;value=parseFloat(value);return UC.find(gradesInfo,function(info){var boundaryValue=info.boundary;curIndex+=1;return curIndex===len?value<boundaryValue:value>=boundaryValue})};var makeLegend=function(elemKey,className,direction,isUnitUnnecessary){var rows=[];var isHorizontal,gradeInfo,unitProp;direction=UC.contains(["vertical","horizontal"],direction)?direction:"vertical";isHorizontal=direction==="horizontal";gradeInfo=getGradeInfo(elemKey);if(!isUnitUnnecessary){unitProp={text:getElemUnit(elemKey)};rows.push(isHorizontal?unitProp:[unitProp])}UC.each(gradeInfo,function(info,i){var elemProp={color:"rgb("+info.rgb.join(",")+")",text:i<gradeInfo.length-1?info.boundary.toString(10):"&nbsp"};rows.push(isHorizontal?elemProp:[elemProp])});return $("<span>").append(ContentsCommon.makeLegend(isHorizontal?[rows]:rows).addClass(className))[0]};return{isSunEstimate:isSunEstimate,getElemName:getElemName,getElemUnit:getElemUnit,getGradeInfo:getGradeInfo,makeLegend:makeLegend}}();var dateConverter=function(){var preOnTheDot=function(date){var d=new Date(date.getTime());d.setMinutes(0,0,0);return d};var nextOnTheDot=function(date){var d=new Date(date.getTime());d.setMinutes(0,0,0);d.setHours(d.getHours()+1);return d};var zeroPadding=function(num,length){return(Array(length).join("0")+num).slice(-length)};var makeDateKey=function(date){return UD.strftime(date,"%Y%m%d%H%M%S")};var makeMinmaxTime=function(elemData,timeData){if(UC.invalid(elemData)||UC.invalid(timeData))return" ";if(elemData.aqc===5)return TR.tr(AQC_INFO["5"].symbol);if(elemData.aqc===6)return AQC_INFO["6"].symbol;if(timeData.hour===null||timeData.minute===null)return" ";return UD.strftime(UD.create(1970,1,1,timeData.hour,timeData.minute,0,0),"%Hp:%M")};var makeTimeList=function(date,dataInterval,term,countOffset){var result=[];var key1h=getDataIntervalKey(60);var dataInterval1hValue=DATA_INTERVAL_VALUES[key1h];var count=term*(dataInterval1hValue/dataInterval);var lastTime=dataInterval===DATA_INTERVAL_VALUES[key1h]?preOnTheDot(date):date;UC.times(countOffset?count+countOffset:count,function(i){var d=new Date(lastTime.getTime());d.setMinutes(d.getMinutes()-i*dataInterval);result.push(d)});return result.reverse()};return{preOnTheDot:preOnTheDot,nextOnTheDot:nextOnTheDot,zeroPadding:zeroPadding,makeDateKey:makeDateKey,makeMinmaxTime:makeMinmaxTime,makeTimeList:makeTimeList}}();var valueConverter=function(){var addSign=function(aqc,value){var edited;if(containsAqc([0,1,4],aqc)&&value===null){return AQC_INFO["6"].symbol}edited=function(){switch(aqc){case 0:return String(value);case 1:return value+AQC_INFO["1"].symbol;case 2:return AQC_INFO["2"].symbol;case 3:return AQC_INFO["3"].symbol;case 4:return value+AQC_INFO["4"].symbol;case 5:return AQC_INFO["5"].symbol;case 6:return AQC_INFO["6"].symbol;case 7:case null:return AQC_INFO["7"].symbol;default:return"---"}}();return TR.tr(edited)};var arr2obj=function(elemValues){if(UC.invalid(elemValues))return undefined;return elemValues instanceof Array&&elemValues.length===2?{aqc:elemValues[1],value:elemValues[0]}:null};var toDispFormat=function(elemKey,elemData){var visLength=3;var value,convedValue,integerDigits,floorValue;if(arguments.length!==2)return"---";if(!elemData)return AQC_INFO["7"].symbol;value=elemData.value;convedValue=function(){if(UC.contains(DATA_KEY_GROUPS.windDirectionElems,elemKey)){if(value===null)return value;return TR.tr(WDR_INFO[value.toString(10)])}if(elemKey===DK.tenki){if(value===null)return value;return'<img src="img/'+value+'.bmp" title="'+TR.tr(WEATHER_INFO[value.toString(10)])+'">'}if(elemKey===DK.vis){if(value===null)return value;integerDigits=String(Math.floor(value/1e3)).length;floorValue=Math.floor(value/Math.pow(10,integerDigits))*Math.pow(10,integerDigits);return(floorValue/1e3).toFixed(visLength-integerDigits)}if(!UC.contains(DATA_KEY_GROUPS.doNotToFixedElems,elemKey)){return value===null||isNaN(value)?value:value.toFixed(1)}return value}();return addSign(elemData.aqc,convedValue)};return{arr2obj:arr2obj,toDispFormat:toDispFormat}}();var message=function(){var messages={noData:TR.select("観測データがありません。","There is no data"),noInfomation:TR.select("観測所情報がありません。","There is no observatory information."),notOperation:TR.select("現在、観測を休止しております。","This site is not in operation."),failureGetData:TR.select("メンテナンス中です。しばらくお待ちください。","Under maintenance.")};var getMessage=function(templateKey){return messages[templateKey]};var addMessage=function(ParentNodeID,templateKey,messageType,freeText,doNotEmptyParentContents){var parentNode=document.getElementById(ParentNodeID);var msgDiv=document.createElement("div");var templateText=messages[templateKey]||"";var text="";if(!doNotEmptyParentContents)parentNode.textContent="";msgDiv.className=messageType==="error"?"amd-error-message":"amd-info-message";if(templateKey&&templateText)text+=templateText;if(freeText)text+=freeText;msgDiv.insertAdjacentHTML("afterbegin",text);parentNode.appendChild(msgDiv)};return{getMessage:getMessage,addMessage:addMessage}}();var shape=function(){var makeSquare=function(size,backgroundRGB,className){var square=document.createElement("div");square.style.height=size+"px";square.style.width=size+"px";square.style.backgroundColor="rgb("+backgroundRGB.join(",")+")";square.className=className;return square};var makeYabane=function(wdrValue,size,baseClassName,fillRGB,isAddShadow,isParseHTML){var polygon="";var shadow=isAddShadow===undefined?true:isAddShadow;var domiz=isParseHTML===undefined?false:isParseHTML;var g,svg;UC.times(2,function(i){var scale=size/20;var pointlist,translate,rotate,classname;if(i===0&&!shadow)return;pointlist=-6*scale+","+-8*scale+" 0,"+-2*scale+" "+6*scale+","+-8*scale+" 0,"+10*scale;translate=i===0?"translate("+(size/2+1)+", "+(size/2+1)+")":"translate("+size/2+", "+size/2+")";rotate="rotate("+wdrValue*22.5+")";classname=i===0?baseClassName+"-shadow":baseClassName;polygon+='<polygon points="'+pointlist+'"'+' transform="'+translate+" "+rotate+'"'+(i===0?"":' fill="rgb('+fillRGB.join(",")+')"')+' class="'+classname+'" />'});g="<g>"+polygon+"</g>";svg='<svg xmlns="http://www.w3.org/2000/svg" width="'+size+'"'+' height="'+size+'">'+g+"</svg>";return domiz?toHTMLElement(svg):svg};var toHTMLElement=function(text){var temp=document.createElement("div");temp.insertAdjacentHTML("afterbegin",text);return temp.firstElementChild};return{makeSquare:makeSquare,makeYabane:makeYabane}}();root.Amedas=root.Amedas||{};root.Amedas.Common={DATA_KEY_GROUPS:DATA_KEY_GROUPS,FORMAT_VALUES:contentsformatValues,containsAqc:containsAqc,getDataIntervalKey:getDataIntervalKey,getAmedasName:getAmedasName,getScrollColumnCount:getScrollColumnCount,isNormalData:isNormalData,makeAreaInfo:makeAreaInfo,makeMnmxTimeKey:makeMnmxTimeKey,observeInfo:observationInfo,elemInfo:observationElementInfo,dateConverter:dateConverter,valueConverter:valueConverter,message:message,shape:shape}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var UC=JMAWebUtility.common;var UD=JMAWebUtility.date;var UH=JMAWebUtility.hashController;var TR=Amedas.translator;var AC=Amedas.Common;var ACD=AC.dateConverter;var ACV=AC.valueConverter;var ACE=AC.elemInfo;var ACO=AC.observeInfo;var ACM=AC.message;var KG=AC.DATA_KEY_GROUPS;var DK=Amedas.Const.DK;var IK=Amedas.Const.IK;var HASH_KEYS=Amedas.Const.HASH_KEYS;var DATA_INTERVAL=Amedas.Const.DATA_INTERVAL_VALUES;var STATIONS_INFO=Amedas.Const.STATIONS_INFO;var LAYERS_INFO={rect:[{minZoom:0,maxZoom:4,size:3},{minZoom:5,maxZoom:5,size:4},{minZoom:6,maxZoom:7,size:10},{minZoom:8,maxZoom:100,size:10}],yabane:[{minZoom:0,maxZoom:4,size:5},{minZoom:5,maxZoom:5,size:7},{minZoom:6,maxZoom:7,size:14},{minZoom:8,maxZoom:100,size:18}],dom:[{minZoom:8,maxZoom:8,size:null},{minZoom:9,maxZoom:100,size:null}]};var DATA_STATUS={normal:"normal",notNormal:"notNormal",notDisp:"notDisplay",windCalm:"windCalm"};var K_1H=AC.getDataIntervalKey(60);var K_10MIN=AC.getDataIntervalKey(10);var MAP_TERM=function(){var result={};result[K_1H]=48;result[K_10MIN]=8;return result}();var SLIDER_LABEL_INTERVAL=function(){var result={};result[K_1H]=360;result[K_10MIN]=60;return result}();var MAP_ELEM_KEYS=[DK.tem,DK.pre10m,DK.pre1h,DK.pre3h,DK.pre24h,DK.wsp,DK.sun1h,DK.snc,DK.snf6h,DK.snf12h,DK.snf24h,DK.hum,DK.station];var ZEROVALUE_ICON_HIDE_ELEM_KEYS=[DK.pre10m,DK.pre1h,DK.pre3h,DK.pre24h,DK.wsp,DK.snc,DK.snf6h,DK.snf12h,DK.snf24h];var POPUP_ELEM_KEYS=[DK.tem,DK.pre1h,DK.wdr,DK.wsp,DK.sun1h,DK.snc];var globals={amedasInfoJSON:null,amedasNumbers:null,amedasDataJSONs:{},latestTime:null,timeListData:{},doms:null,markerProps:{},lastOption:{elemKey:null,obsTime:null,dataInterval:null,dataExists:true},lastPopup:null};var convertDMM2DEG=function(dmmLat,dmmLon){return{lat:dmmLat[0]+Math.round(dmmLat[1]/60*1e5)/1e5,lon:dmmLon[0]+Math.round(dmmLon[1]/60*1e5)/1e5}};var isNormal=function(status){return status===DATA_STATUS.normal};var isShowAmedasName=function(layerType,minZoom){return layerType==="dom"&&minZoom>8};var getElemKey=function(elemKey){if(!UC.contains(MAP_ELEM_KEYS,elemKey))elemKey=DK.tem;return elemKey==="wind"?DK.wsp:elemKey};var makeControlKey=function(layerType,LayerProp){return layerType+"_"+LayerProp.minZoom+"-"+LayerProp.maxZoom};var makeDispControlKeys=function(elemIsWindSpeed,elemIsObsStation){var result=[];UC.each(LAYERS_INFO,function(layerType,layerProps){var typeIsRect=layerType==="rect";var typeIsYabane=layerType==="yabane";UC.each(layerProps,function(layerProp){if(elemIsWindSpeed&&typeIsRect||!elemIsWindSpeed&&typeIsYabane||!elemIsObsStation&&typeIsRect&&layerProp.minZoom>7){return}result.push(makeControlKey(layerType,layerProp))})});return result};var makeMarkerValueTextClass=function(dataStatus,gradeInfo,elemIsWindSpeed,elemIsObsStation){if(elemIsObsStation)return"";switch(dataStatus){case DATA_STATUS.notDisp:return"";case DATA_STATUS.notNormal:return"amd-marker-notdisp";case DATA_STATUS.windCalm:return"amd-marker-windcalm";default:return"amd-textstroke-"+gradeInfo.stroke+(elemIsWindSpeed?" amd-marker-text-obsvalue-wind":" amd-marker-text-obsvalue")}};var makeMarkerPriority=function(elemKey,markerValue){var value=parseFloat(markerValue);if(!(typeof value==="number"&&isFinite(value)))value=0;return elemKey===DK.tem?Math.abs(15*10-value*10):value*10};var makeMessage=function(messageType){var div=document.createElement("div");div.className="amd-contentsInfo-nodata";div.textContent=ACM.getMessage(messageType);return div};var makeMarkerDomElement=function(amedasInfoJSON,domLayerInfo){var result={};UC.each(amedasInfoJSON,function(amdNo,pointInfo){UC.each(domLayerInfo,function(layerProp){var ctrlKey=makeControlKey("dom",layerProp);var wrapDiv=document.createElement("div");var obsValueDiv=document.createElement("div");var amedasNameDiv;wrapDiv.setAttribute("id",amdNo);wrapDiv.className="amd-marker-wrap";wrapDiv.title=AC.getAmedasName(pointInfo);wrapDiv.appendChild(obsValueDiv);result[amdNo]=result[amdNo]||{};result[amdNo][ctrlKey]={wrapDiv:wrapDiv,obsValueDiv:obsValueDiv};if(isShowAmedasName("dom",layerProp.minZoom)){amedasNameDiv=document.createElement("div");amedasNameDiv.textContent=TR.select(pointInfo[IK.kjName],pointInfo[IK.enName]);wrapDiv.appendChild(amedasNameDiv);result[amdNo][ctrlKey].amedasNameDiv=amedasNameDiv}})});return result};var makePopupDomElement=function(amdNo,pointInfo){var cells=[];var elemKeys=ACO.selectObserveElemKeys(POPUP_ELEM_KEYS,amdNo,pointInfo);var wrapDiv=document.createElement("div");var table=document.createElement("table");var tablePageAnchor=makeLinkToTablePage(amdNo);var amedasNameTr,amedasNameTh,obsTimeTr,obsTimeTh;table.className="amd-popup-table";amedasNameTr=document.createElement("tr");amedasNameTr.className="contents-title";amedasNameTh=document.createElement("th");amedasNameTh.setAttribute("colspan",2);amedasNameTh.textContent=AC.getAmedasName(pointInfo);amedasNameTr.appendChild(amedasNameTh);table.appendChild(amedasNameTr);obsTimeTr=document.createElement("tr");obsTimeTr.className="contents-header";obsTimeTh=document.createElement("th");obsTimeTh.setAttribute("colspan",2);obsTimeTr.appendChild(obsTimeTh);table.appendChild(obsTimeTr);cells.push({key:"infotime",element:obsTimeTh});UC.each(elemKeys,function(elemKey){var dataIsEstimate=ACE.isSunEstimate(elemKey,pointInfo.elems);var elemName=ACE.getElemName(elemKey);var elemUnit=ACE.getElemUnit(elemKey);var dataTr=document.createElement("tr");var elemInfoTd=document.createElement("td");var obsValueTd=document.createElement("td");elemInfoTd.textContent=elemName+TR.space()+"("+elemUnit+")"+(dataIsEstimate?TR.space()+"("+TR.tr("推計")+")":"");obsValueTd.className="amd-popup-table-td-value";dataTr.appendChild(elemInfoTd);dataTr.appendChild(obsValueTd);table.appendChild(dataTr);cells.push({key:elemKey,element:obsValueTd})});wrapDiv.appendChild(table);wrapDiv.appendChild(tablePageAnchor);return{wrapDiv:wrapDiv,cells:cells}};var makeLinkToTablePage=function(amdNo){var a=document.createElement("a");var areaInfo=AC.makeAreaInfo(amdNo);a.textContent=TR.select("この地点の観測表を見る","See the observation table of this site");a.className="amd-popup-a-tablelink";a.href="amedas/"+"#area_type="+areaInfo.areaType+"&area_code="+areaInfo.areaCode+"&"+HASH_KEYS.amdNo+"="+amdNo+"&"+HASH_KEYS.format+"="+AC.FORMAT_VALUES.table1h;if(TR.isEnglish())a.href+="&lang="+TR.getLang();return a};var setDataForPopupElements=function(cellsData,infoTimeText,popupValues){UC.each(cellsData,function(cellData){cellData.element.textContent=cellData.key==="infotime"?infoTimeText:popupValues[cellData.key]})};var setDataForMarkerElements=function(layerProp,markerProps,markerElements,elemIsObsStation){var wrapDiv=markerElements.wrapDiv;var obsValueDiv=markerElements.obsValueDiv;var amedasNameDiv=markerElements.amedasNameDiv;var isShowAmdName=isShowAmedasName("dom",layerProp.minZoom);obsValueDiv.textContent="";obsValueDiv.className="";if(elemIsObsStation){if(!isShowAmdName)return;wrapDiv.style.visibility="visible";amedasNameDiv.className="amd-marker-text-amedasname";return}wrapDiv.style.visibility=markerProps.isObserving?"visible":"hidden";if(!markerProps.isObserving)return;if(markerProps.markerValues){obsValueDiv.className=markerProps.textClass;if(markerProps.textIsDraw){obsValueDiv.textContent=markerProps.markerValues.text.value;obsValueDiv.style.color="rgb("+markerProps.color.join(",")+")"}}if(!isShowAmdName)return;amedasNameDiv.className="amd-marker-text-amedasname-addto-obsvalue"};var setDataForDom=function(index){var elemKey=globals.lastOption.elemKey;var lastDataInterval=globals.lastOption.dataInterval;var lastDataIntervalKey=AC.getDataIntervalKey(lastDataInterval);var obsTime=globals.timeListData[lastDataIntervalKey][index];var dateKey=ACD.makeDateKey(obsTime);var elemIsObsStation=elemKey===DK.station;UC.each(globals.amedasNumbers,function(amdNo){var markerProps=globals.markerProps[dateKey][amdNo];if(!elemIsObsStation&&!markerProps.isObserving)return;if(globals.lastPopup&&amdNo===globals.lastPopup.amdNo){setDataForPopupElements(globals.lastPopup.cells,markerProps.infoTimeText,markerProps.popupValues)}UC.each(LAYERS_INFO.dom,function(layerProp){var ctrlKey=makeControlKey("dom",layerProp);var markerElements=globals.doms.markers[amdNo][ctrlKey];setDataForMarkerElements(layerProp,markerProps,markerElements,elemIsObsStation)})})};var makeInfoTime=function(elemKey,obsTime,elemIsWindSpeed){var elemName=elemIsWindSpeed?TR.tr("風向・風速"):ACE.getElemName(elemKey,"head");var timeText=UD.strftime(obsTime,TR.tr("%Yp年%mp月%dp日%Hp時%M分"));if(elemName===null)return timeText;return elemKey===DK.station?elemName:TR.select(timeText+"の"+elemName,timeText+", "+elemName)};var makeDataIntervalButton=function(elemKey,dataInterval){var buttonsInfo=UC.contains(KG.onlyOnTheDotElems,elemKey)?[{type:DATA_INTERVAL[K_1H],text:TR.tr("1時間毎")}]:[{type:DATA_INTERVAL[K_1H],text:TR.tr("1時間毎")},{type:DATA_INTERVAL[K_10MIN],text:TR.tr("10分毎")}];var buttonOptions=function(){var defaultIndex=UC.expand(buttonsInfo).map(function(props){return props.type}).findIndex(function(value){return value===dataInterval});buttonsInfo[defaultIndex].default=true;return buttonsInfo}();var buttons=ContentsCommon.makeRadioButtons(buttonOptions,function(type){changeDataInterval(parseInt(type,10))});return $("<div>").append(buttons)[0]};var makeStationLegend=function(){var table=new SimpleTable;var HEADER_TEXTS=[TR.select("シンボル","Symbol"),TR.select("観測所の種類","Stations"),TR.select("観測要素","Observed data")];table.appendRow().addClass("contents-header");UC.each(HEADER_TEXTS,function(text){table.appendHeader(text)});UC.each(STATIONS_INFO,function(props){var square=AC.shape.makeSquare(props.size,props.rgb,"amd-legend-station-icon ");var elemsName=TR.select(props.elemsName,function(){var elems=props.elemsName.split("・");return UC.chain(elems).map(function(elemName,i){return elems.length>1&&i===elems.length-1?"and"+TR.tr(elemName):TR.tr(elemName)}).value().join(", ")}());table.appendRow();table.appendCell(square);table.appendCell(TR.tr(props.typeName)).addClass("amd-legend-station-table-td-type");table.appendCell(elemsName).addClass("amd-legend-station-table-td-elems")});return $("<span>").append($("<div>").addClass("contents-block").append(table.make().addClass("amd-legend-station-table")))[0]};var makeMarkerValues=function(elemKey,observeCodeIndex,pointInfo,pointData,elemIsWindSpeed){var isObserving=isObserve(pointInfo[IK.elemsCode],observeCodeIndex);var status=function(){var elemData;if(!isObserving)return DATA_STATUS.notDisp;if(!pointData||!pointData[elemKey])return DATA_STATUS.notNormal;elemData=ACV.arr2obj(pointData[elemKey]);if(!elemData||!AC.isNormalData(elemData)||pointInfo.type!=="C"&&UC.contains(KG.snowfallElems,elemKey)&&!isNormalSnowValue(pointData)){return DATA_STATUS.notNormal}return DATA_STATUS.normal}();var dataStatusIsNormal=status===DATA_STATUS.normal;var value=function(){var elemData;if(!dataStatusIsNormal)return"";elemData=ACV.arr2obj(pointData[elemKey]);if(elemIsWindSpeed)return Math.round(elemData.value).toString();if(UC.contains(KG.precipitationElems,elemKey)&&elemData.value===0||UC.contains(KG.snowElems,elemKey)||elemKey===DK.hum){return elemData.value.toString()}return elemData.value.toFixed(1)}();return{icon:{status:dataStatusIsNormal&&(UC.contains(ZEROVALUE_ICON_HIDE_ELEM_KEYS,elemKey)&&value==="0")?DATA_STATUS.notDisp:status,value:value},text:{status:dataStatusIsNormal&&(elemIsWindSpeed&&value==="0")?DATA_STATUS.windCalm:status,value:value}}};var isNormalSnowValue=function(pointData){var sncValues=pointData[DK.snc];var sncData;if(!sncValues)return false;sncData=ACV.arr2obj(sncValues);return AC.isNormalData(sncData)};var isObserve=function(observeCode,observeCodeIndex){return observeCode.split("")[observeCodeIndex]!=="0"};var makeMarkerProperties=function(elemKey,observeCodeIndex,pointInfo,pointData,infoTimeText,popupElemKeys,curDataExists,elemIsWindSpeed,elemIsObsStation){var isObserving=isObserve(pointInfo[IK.elemsCode],observeCodeIndex);var latlon=convertDMM2DEG(pointInfo[IK.latitude],pointInfo[IK.longitude]);var popupValues=makePopupValues(popupElemKeys,pointData);var stationInfo,markerValues,gradeInfo;if(elemIsObsStation){stationInfo=UC.find(STATIONS_INFO,function(props){var elemCode=pointInfo[IK.elemsCode].replace(/2/g,"1");return pointInfo[IK.typeCode]===props.typeCode&&elemCode===props.elemsCode});return{latlon:latlon,size:stationInfo?stationInfo.size:6,color:stationInfo?stationInfo.rgb:[255,255,255],textClass:null,priority:null,markerValues:null,popupValues:popupValues,iconIsDraw:true,textIsDraw:false,isObserving:false,infoTimeText:infoTimeText}}if(!curDataExists){return{latlon:latlon,size:null,color:[255,255,255],textClass:null,priority:null,markerValues:null,iconIsDraw:false,textIsDraw:false,popupValues:popupValues,isObserving:isObserving,infoTimeText:infoTimeText}}markerValues=makeMarkerValues(elemKey,observeCodeIndex,pointInfo,pointData,elemIsWindSpeed);gradeInfo=ACE.getGradeInfo(elemKey,markerValues.text.value);return{latlon:latlon,size:null,color:gradeInfo?gradeInfo.rgb:[255,255,255],textClass:makeMarkerValueTextClass(markerValues.text.status,gradeInfo,elemIsWindSpeed,elemIsObsStation),priority:makeMarkerPriority(elemKey,markerValues.text.value),markerValues:markerValues,iconIsDraw:isNormal(markerValues.icon.status),textIsDraw:isNormal(markerValues.text.status),popupValues:popupValues,isObserving:isObserving,infoTimeText:infoTimeText}};var makePopupValues=function(elemKeys,pointData){var values={};UC.each(elemKeys,function(elemKey){var elemData;if(!pointData){values[elemKey]="---";return}elemData=ACV.arr2obj(pointData[elemKey]);values[elemKey]=UC.invalid(elemData)?"---":ACV.toDispFormat(elemKey,elemData)});return values};var makeClickEvent=function(infoTimeText,amdNo,pointInfo,popupWrapDiv,popupValues){var popupElements=makePopupDomElement(amdNo,pointInfo);var cells=popupElements.cells;return function(){popupWrapDiv.textContent="";popupWrapDiv.appendChild(popupElements.wrapDiv);setDataForPopupElements(cells,infoTimeText,popupValues);globals.lastPopup={amdNo:amdNo,cells:cells}}};var makeDataObject=function(layerType,layerProp,pointData,markerProps,markerDiv,popupContainerDiv,clickCallback,requestIsRapidRequest,elemIsWindSpeed,elemIsObsStation){var obj={};var typeIsRect=layerType==="rect";var typeIsYabane=layerType==="yabane";var typeIsDom=layerType==="dom";var isIconDraw=markerProps.iconIsDraw;var isRectDraw=isIconDraw&&(!elemIsWindSpeed&&typeIsRect&&layerProp.maxZoom<=7);var isYabaneDraw=isIconDraw&&(elemIsWindSpeed&&typeIsYabane);var popupProp={content:popupContainerDiv,on:"click",options:{className:"contents-block"}};var size,wdrData;obj.priority=markerProps.priority;if(typeIsDom&&requestIsRapidRequest)return obj;obj.type=layerType;obj.latlon=[markerProps.latlon.lat,markerProps.latlon.lon];obj.events={click:clickCallback};if(typeIsDom){obj.popup=popupProp;obj.domElement=markerDiv;return obj}obj.popup=isIconDraw&&(typeIsRect||typeIsYabane)?popupProp:null;size=function(){var originalSize=elemIsObsStation?markerProps.size:layerProp.size;if(typeIsDom)return null;if(elemIsObsStation){if(layerProp.maxZoom===4)return originalSize*.4;if(layerProp.maxZoom===5)return originalSize*.5}return originalSize}();if(typeIsRect){obj.svgConfig={height:isIconDraw?size:0,width:isIconDraw?size:0}}if(typeIsYabane){obj.size=0;obj.arg=0;if(pointData&&pointData[DK.wdr]){wdrData=ACV.arr2obj(pointData[DK.wdr]);if(isIconDraw&&AC.isNormalData(wdrData)){obj.size=size;obj.arg=wdrData.value*(360/16)}}}obj.options=elemIsObsStation&&!typeIsYabane||isRectDraw||isYabaneDraw?{stroke:true,fill:true,color:"#000",weight:.2,fillColor:markerProps.color?"rgb("+markerProps.color.join(",")+")":"rgb(0 0 0)",fillOpacity:1}:{stroke:false,fill:false};if(isYabaneDraw)obj.options.centerShift=.2;return obj};var makeData=function(elemKey,obsTime,amedasDataJSON,amedasInfoJSON,amedasNumbers,dispControlKeys,curDataExists,requestIsDraw,requestIsRapidRequest,elemIsWindSpeed,elemIsObsStation){var result={};var observeCodeIndex=ACO.getObserveCodeIndex(elemKey);var timeStr=UD.strftime(obsTime,TR.tr("%mp月%dp日%Hp時%M分"));var infoTimeText=TR.select(timeStr+"の観測データ","Observation at "+timeStr);var dateKey=ACD.makeDateKey(obsTime);UC.each(amedasNumbers,function(amdNo){var pointInfo=amedasInfoJSON[amdNo];var pointData=curDataExists?amedasDataJSON[amdNo]:null;var popupElemKeys=ACO.selectObserveElemKeys(POPUP_ELEM_KEYS,amdNo,pointInfo);var markerProps=function(){var savedData=globals.markerProps;var props;savedData[dateKey]=savedData[dateKey]||{};if(savedData[dateKey][amdNo])return savedData[dateKey][amdNo];props=makeMarkerProperties(elemKey,observeCodeIndex,pointInfo,pointData,infoTimeText,popupElemKeys,curDataExists,elemIsWindSpeed,elemIsObsStation);savedData[dateKey][amdNo]=props;return props}();var clickCallback=makeClickEvent(infoTimeText,amdNo,pointInfo,globals.doms.popup.containerDiv,markerProps.popupValues);UC.each(LAYERS_INFO,function(layerType,layerProps){if(requestIsRapidRequest&&(layerType==="rect"&&elemIsWindSpeed||layerType==="yabane"&&!elemIsWindSpeed)){return}UC.each(layerProps,function(layerProp){var ctrlKey=makeControlKey(layerType,layerProp);var markerElements;if(layerType==="dom"&&!requestIsRapidRequest){markerElements=globals.doms.markers[amdNo][ctrlKey];setDataForMarkerElements(layerProp,markerProps,markerElements,elemIsObsStation)}result[ctrlKey]=result[ctrlKey]||{};if(requestIsDraw){result[ctrlKey].zindex=layerType==="dom"?11e3:1e4;result[ctrlKey].minZoom=layerProp.minZoom;result[ctrlKey].maxZoom=layerProp.maxZoom}if(!requestIsRapidRequest){result[ctrlKey].display=UC.contains(dispControlKeys,ctrlKey)}if(requestIsDraw||UC.contains(dispControlKeys,ctrlKey)){result[ctrlKey].data=result[ctrlKey].data||[];result[ctrlKey].data.push(makeDataObject(layerType,layerProp,pointData,markerProps,markerElements?markerElements.wrapDiv:null,globals.doms.popup.containerDiv,clickCallback,requestIsRapidRequest,elemIsWindSpeed,elemIsObsStation))}})})});return result};var makeMovieConfig=function(obsTime,dataInterval,timeListData){var intervalKey=AC.getDataIntervalKey(dataInterval);var intervalIs1h=dataInterval===DATA_INTERVAL[K_1H];var labelInterval=SLIDER_LABEL_INTERVAL[intervalKey];var timeList=timeListData[intervalKey];var mainSliderList=[];var subSliderList=[];UC.each(timeList,function(date){var mainWrapDiv=document.createElement("div");var subWrapDiv=document.createElement("div");var subDateText=document.createElement("span");mainWrapDiv.insertAdjacentHTML("afterbegin",intervalIs1h&&UD.getHours(date,9)%(labelInterval/60)===0||!intervalIs1h&&date.getMinutes()%labelInterval===0?UD.strftime(date,"%mp/%dp<br>%Hp:%M"):" ");subDateText.textContent=UD.strftime(date,TR.tr("%dp日%Hp:%M"));subWrapDiv.appendChild(subDateText);mainSliderList.push(mainWrapDiv);subSliderList.push(subWrapDiv)});return{slider:mainSliderList,startPosition:function(){var i=UC.findIndex(timeList,function(time){return time.valueOf()===obsTime.valueOf()});return i<0?timeList.length-1:i}(),scaleStyle:"point",subSliderList:subSliderList,childHighlight:true,callback:function(index){setDataForDom(index)}}};var makeMapData=function(elemKey,latestTime,obsTime,dataInterval,explain,requestKeys,requestIsDraw,requestIsRapidRequest,amedasDataJSON){var result={};var curDataExists=UC.valid(amedasDataJSON)&&amedasDataJSON instanceof Object&&Object.keys(amedasDataJSON).length>0;var elemIsWindSpeed=elemKey===DK.wsp;var elemIsObsStation=elemKey===DK.station;var dispControlKeys=makeDispControlKeys(elemIsWindSpeed,elemIsObsStation);if(elemIsObsStation)obsTime=latestTime;UC.each(requestKeys,function(requestKey){switch(requestKey){case"infoTime":result.infoTime=makeInfoTime(elemKey,obsTime,elemIsWindSpeed);break;case"contentsInfo":result.contentsInfo=elemIsObsStation?null:makeDataIntervalButton(elemKey,dataInterval);break;case"legend":result.legend=elemIsObsStation?makeStationLegend():ACE.makeLegend(elemKey,"amd-map-legend-grades","vertical",false);break;case"explain":result.explain=function(){var explainClass="amedas-explain-map-"+(TR.isEnglish()?"en":"ja");var explainHtml=document.createElement("div");explainHtml.insertAdjacentHTML("afterbegin",explain);return explainHtml.getElementsByClassName(explainClass)[0]}();break;case"data":result.data=makeData(elemKey,obsTime,amedasDataJSON,globals.amedasInfoJSON,globals.amedasNumbers,dispControlKeys,curDataExists,requestIsDraw,requestIsRapidRequest,elemIsWindSpeed,elemIsObsStation);break;case"movieConfig":result.movieConfig=elemIsObsStation?{}:makeMovieConfig(obsTime,dataInterval,globals.timeListData);break;default:break}});result.freeSpace=elemIsObsStation||curDataExists?null:makeMessage("noData");if(!elemIsObsStation||elemIsObsStation&&requestIsDraw){globals.lastOption.obsTime=obsTime}globals.lastOption.elemKey=elemKey;result.defaultOpen="legend";return result};var toOnTheDot=function(originalDate,timeList10min){var ROUND_UP_BOUNDARY=40;var minutes=originalDate.getMinutes();var preOnTheDot=ACD.preOnTheDot(originalDate);var nextOnTheDot=ACD.nextOnTheDot(originalDate);var upperLimit=UC.last(timeList10min);var lowerLimit=UC.first(timeList10min);if(minutes<ROUND_UP_BOUNDARY){return preOnTheDot<lowerLimit?nextOnTheDot:preOnTheDot}return nextOnTheDot>upperLimit?preOnTheDot:nextOnTheDot};var setLocationHashDatainterval=function(dataInterval){var hash=UH.getHashData(location.hash);hash[HASH_KEYS.interval]=dataInterval;history.replaceState(null,null,UH.hashString(hash));UnitMap.memoryHash()};var loadAmedasData=function(savedAmedasData,obsTime,callback){var dateKey=ACD.makeDateKey(obsTime);var savedData=savedAmedasData[dateKey];if(savedData){callback(savedData);return}JMAWebUtility.parallelRequest({amedasDataJSON:"amedas/data/map/"+dateKey+".json"},function(data){globals.amedasDataJSONs[ACD.makeDateKey(obsTime)]=data.amedasDataJSON;callback(data.amedasDataJSON)})};var changeDataInterval=function(newDataInterval){var requestKeys=["infoTime","contentsInfo","data","movieConfig"];var latestTime=globals.latestTime;var timeList=globals.timeListData;var lastElemKey=globals.lastOption.elemKey;var lastDataInterval=globals.lastOption.dataInterval;var lastDataIntervalKey=AC.getDataIntervalKey(lastDataInterval);var lastSelectIndex=UnitMap.getStatus().sliderIndex;var lastSelectTime=timeList[lastDataIntervalKey][lastSelectIndex];var newDataIntervalKey=AC.getDataIntervalKey(newDataInterval);var newTimeList=timeList[newDataIntervalKey];var obsTime=function(){if(newDataInterval===DATA_INTERVAL[K_1H]){return toOnTheDot(lastSelectTime,timeList[K_1H])}if(lastSelectTime===UC.last(timeList[lastDataIntervalKey])){return UC.last(newTimeList)}if(!UC.chain(newTimeList).map(function(date){return date.getTime()}).contains(lastSelectTime.getTime())){return UC.first(newTimeList)}return lastSelectTime}();globals.lastOption.dataInterval=newDataInterval;setLocationHashDatainterval(newDataInterval);loadAmedasData(globals.amedasDataJSONs,obsTime,function(amedasDataJSON){UnitMap.makePage(makeMapData(lastElemKey,latestTime,obsTime,newDataInterval,null,requestKeys,false,false,amedasDataJSON))})};var amedasRapidRequest=function(index,resolve){var requestKeys=["infoTime","data"];var latestTime=globals.latestTime;var elemKey=globals.lastOption.elemKey;var lastDataInterval=globals.lastOption.dataInterval;var lastDataIntervalKey=AC.getDataIntervalKey(lastDataInterval);var obsTime=globals.timeListData[lastDataIntervalKey][index];loadAmedasData(globals.amedasDataJSONs,obsTime,function(amedasDataJSON){var mapData=makeMapData(elemKey,latestTime,obsTime,lastDataInterval,null,requestKeys,false,true,amedasDataJSON);mapData.argument=index;resolve(mapData)})};var amedasChangeMap=function(hashObject,_mapOptions,resolve){var requestKeys=["infoTime","contentsInfo","legend","data","movieConfig"];var elemKey=getElemKey(hashObject.elem);var elemIsOnlyOnTheDot=UC.contains(KG.onlyOnTheDotElems,elemKey);var latestTime=globals.latestTime;var lastObsTime=globals.lastOption.obsTime;var lastDataInterval=globals.lastOption.dataInterval;var timeList=globals.timeListData;var obsTime=elemIsOnlyOnTheDot?toOnTheDot(lastObsTime,timeList[K_1H]):lastObsTime;var dataInterval=elemIsOnlyOnTheDot?DATA_INTERVAL[K_1H]:lastDataInterval;globals.lastOption.dataInterval=dataInterval;globals.markerProps={};setLocationHashDatainterval(dataInterval);loadAmedasData(globals.amedasDataJSONs,obsTime,function(amedasDataJSON){resolve(makeMapData(elemKey,latestTime,obsTime,dataInterval,null,requestKeys,false,false,amedasDataJSON))})};var amedasDraw=function(hashObject,mapOptions,resolve){var requestKeys=["infoTime","contentsInfo","legend","explain","data","movieConfig"];JMAWebUtility.parallelRequest({amedasInfoJSON:"amedas/const/amedastable.json",latestTime:"amedas/data/latest_time.txt",explain:"amedas/const/amedas_explain.html"},function(data){var amedasInfoJSON=data.amedasInfoJSON;var latestTime=data.latestTime;var explain=data.explain;var isBosaitop,elemKey,dataInterval,obsTime,amedasNumbers;if(!amedasInfoJSON){resolve({contentsInfo:makeMessage("failureGetData")});console.error("[amedas-error]-[map-amedasDraw] no amedasInfoJSON");return}else if(!latestTime){resolve({contentsInfo:makeMessage("failureGetData")});console.error("[amedas-error]-[map-amedasDraw] no latestTime");return}else if(!explain){console.error("[amedas-error]-[map-amedasDraw] no explain")}latestTime=new Date(latestTime);isBosaitop=mapOptions.contentsType==="bosaiTop";elemKey=getElemKey(hashObject.elem);dataInterval=function(){var hash=UH.getHashData(location.hash);var hashInterval=parseInt(hash.interval,10);var intervalValues=[DATA_INTERVAL[K_1H],DATA_INTERVAL[K_10MIN]];if(hashInterval&&UC.contains(intervalValues,hashInterval)){return UC.contains(KG.onlyOnTheDotElems,elemKey)?DATA_INTERVAL[K_1H]:hashInterval}return!isBosaitop||isBosaitop&&UC.contains(KG.onlyOnTheDotElems,elemKey)?DATA_INTERVAL[K_1H]:DATA_INTERVAL[K_10MIN]}();obsTime=dataInterval===DATA_INTERVAL[K_1H]?ACD.preOnTheDot(latestTime):latestTime;amedasNumbers=Object.keys(amedasInfoJSON);if(elemKey===DK.station){requestKeys=UC.reject(requestKeys,function(key){return key==="movieConfig"})}globals.amedasInfoJSON=amedasInfoJSON;globals.latestTime=latestTime;globals.amedasNumbers=amedasNumbers;globals.timeListData[K_1H]=ACD.makeTimeList(latestTime,DATA_INTERVAL[K_1H],MAP_TERM[K_1H]);globals.timeListData[K_10MIN]=ACD.makeTimeList(latestTime,DATA_INTERVAL[K_10MIN],MAP_TERM[K_10MIN]);globals.doms={markers:makeMarkerDomElement(amedasInfoJSON,LAYERS_INFO.dom),popup:{containerDiv:document.createElement("div")}};globals.lastOption.dataInterval=dataInterval;globals.markerProps={};if(!isBosaitop)setLocationHashDatainterval(dataInterval);loadAmedasData(amedasInfoJSON,obsTime,function(amedasDataJSON){resolve(makeMapData(elemKey,latestTime,obsTime,dataInterval,explain,requestKeys,true,false,amedasDataJSON))})})};root.Amedas=root.Amedas||{};root.Amedas.draw=amedasDraw;root.Amedas.changeMap=amedasChangeMap;root.Amedas.rapidRequest=amedasRapidRequest})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var DICTIONARY={"浅間山":"Asamayama","草津白根山（白根山（湯釜付近））":"Kusatsu-Shiranesan(Shiranesan(Yugama Area))","桜島":"Sakurajima","薩摩硫黄島":"Satsuma-Iojima","口永良部島":"Kuchinoerabujima","諏訪之瀬島":"Suwanosejima","霧島山（新燃岳）":"Kirishimayama (Shinmoedake)","定時":"Scheduled","速報":"Preliminary","詳細":"Detailed","降灰":"Ash fall","少量の降灰":"Low ash fall","やや多量の降灰":"Moderate ash fall","多量の降灰":"Heavy ash fall","小さな噴石の落下":"Falling debris","全国へ戻る":"Back","降灰予報関連のリンク":"Links about volcanic ash fall forecasts","降灰予報の説明":"Explain about volcanic ash fall forecasts","降灰予報の発表状況（全国）":"Published ash fall forecasts","現在発表中の降灰予報（定時）":"Volcanic Ash Fall Forecasts (Scheduled)","現在発表中の降灰予報（速報・詳細）":"Volcanic Ash Fall Forecasts (Preliminary or Detailed)","最近発表された降灰予報（速報・詳細）":"Recent ash fall forecasts(Preliminary and Detailed","降灰予報（定時）のみ発表中の火山":"Volcanones where Volcanic Ash Fall Forecasts (Scheduled) are in effect","降灰予報（速報）または降灰予報（詳細）発表中の火山":"Volcanones where Volcanic Ash Fall Forecasts (Preliminary or Detailed) are in effect","降灰範囲を確認するには火山を選択してください。":"Click the icon to show the latest forecasts.","上空の風が弱い場合、あるいは高度によって風向きが大きく変化している場合、降灰予報と実際の降灰範囲及び降灰量が異なることがあります。":"In cases where winds in the upper air are weak, or their directions significantly change in altitudes, volcanic ash fall (and lapilli) areas and amounts of forecasts may differ from ones of actual status."};root.Ashfall=root.Ashfall||{};root.Ashfall.translator=new Translator(DICTIONARY)})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var c=JMAWebUtility.common;var strftime=JMAWebUtility.date.strftime;var TR=Ashfall.translator;var globals={};globals.data={};var interfaces={draw:function(hash,option,callback){var code=hash.code;var requests=util.makeRequests(code);JMAWebUtility.parallelRequest(requests,function(data){globals.data.all=data.ashfall;if(data.volcanoList)globals.data.volcanoList=util.makeVolcanoListHash(data.volcanoList);if(data[code])globals.data[code]=data[code];if(c.contains(Object.keys(globals.data.all),code)){callback(individual.makeData(code,hash.type,hash.time,hash.index,false))}else{callback(japan.makeData())}})},rapidRequest:function(index,callback){JMAWebUtility.hashController.changeHashData({index:String(index)},false,true);var hash=JMAWebUtility.hashController.getHashData();var code=hash.code;callback(individual.makeData(code,hash.type,hash.time,index,true))}};var util={lf2br:function(str){return str.replace(/\n/g,"<br>")},makeVolcanoListHash:function(volcanoList){return c.chain(volcanoList).map(function(volcano){return[volcano.code,volcano]}).toHash().value()},getLatestTime:function(timeList){var latest=c.maxBy(timeList,function(timeString){return new Date(timeString).getTime()});if(!latest)return null;return new Date(latest)},makeRequests:function(code){var requests={};requests.ashfall="ashfall/data/ashfall/japan.json";if(!globals.data.volcanoList)requests.volcanoList="volcano/const/volcano_list.json";if(code)requests[code]="ashfall/data/ashfall/"+code+".json";return requests},parseLatlon:function(latlonString){if(typeof latlonString!=="string")return null;var regexp=/([+-])(\d{2})(\d{2})\.(\d{2})([+-])(\d{3})(\d{2})\.(\d{2})[+-]\d+\/?/;var m=latlonString.match(regexp);if(!m)return null;var lat=parseInt(m[1]+m[2])+parseFloat(m[1]+"0."+m[3]+m[4])*(100/60);var lon=parseInt(m[5]+m[6])+parseFloat(m[5]+"0."+m[7]+m[8])*(100/60);return[lat,lon]},hasIrregular:function(){return c.chain(globals.data.all).values().pluck("type").contains("irregular")}};var japan={makeData:function(){return{infoTime:japan.makeInfoTime(),contentsInfo:japan.makeContentsInfo()[0],legend:japan.makeLegend()[0],explain:japan.makeExplain()[0],textInfo:null,zxy:[5,38,135],movieConfig:null,defaultOpen:"legend",data:{"ashfall-all-icon":{data:japan.makeIcons(),display:true,zindex:100},"ashfall-all-text":{data:japan.makeTexts(),display:true,minZoom:7,zindex:101},"ashfall-individual-icon":{display:false},"ashfall-polygons":{display:false}}}},makePriority:function(lat,hasIrregular){return(hasIrregular?10:1)*100-lat},makeEventCallback:function(code){return function(){JMAWebUtility.hashController.changeHashData({code:code,index:null},false,true);JMAWebUtility.parallelRequest({data:"ashfall/data/ashfall/"+code+".json"},function(d){globals.data[code]=d.data;UnitMap.makePage(individual.makeData(code,null))})}},makeExplain:function(){var block=$("<div>").addClass("contents-explain").addClass("ashfall-all-explain").css({margin:0,"max-width":400});if(TR.isJapanese()){block.append($("<p>").html("降灰予報では、火山噴火に伴い空から降ってくる火山灰（降灰）や小さな噴石から身を守っていただくため、降灰量や小さな噴石の落下範囲等を予測して提供しています。このページでは、最新の降灰予報の発表状況を表示しています。"))}block.append($("<p>").text(TR.tr("降灰予報関連のリンク")).css("margin-top","10px"));var ul=$("<ul>").appendTo(block);$("<li>").append($("<a>").text(TR.tr("降灰予報の説明")).attr("href","//www.data.jma.go.jp/vois/data/tokyo/STOCK/kaisetsu/qvaf/qvaf_guide.html")).appendTo(ul);$("<li>").append($("<a>").text(TR.tr("降灰予報の発表状況（全国）")).addClass("ashfall-link").on("click",function(){JMAWebUtility.hashController.changeHashData({type:null,time:null,code:null,index:null},false,true);UnitMap.makePage(japan.makeData())})).appendTo(ul);$("<li>").append($("<a>").text(TR.tr("最近発表された降灰予報（速報・詳細）")).attr("href","//www.data.jma.go.jp/vois/data/kouhai/jishin/ashfall.html")).appendTo(ul);return block},makeLegend:function(){var legendSet=[[{img:"ashfall/image/ash.png",text:TR.tr("降灰予報（定時）のみ発表中の火山")}],[{img:"volcano/image/1i.png",text:TR.tr("降灰予報（速報）または降灰予報（詳細）発表中の火山")}]];return ContentsCommon.makeLegend(legendSet).addClass("contents-legend-map")},makeContentsInfo:function(){var div=$("<div>");$("<p>").text(TR.tr("降灰範囲を確認するには火山を選択してください。")).appendTo(div);$("<p>").text("※"+TR.tr("上空の風が弱い場合、あるいは高度によって風向きが大きく変化している場合、降灰予報と実際の降灰範囲及び降灰量が異なることがあります。")).appendTo(div);return div},makeInfoTime:function(){var latestReportDatetime=util.getLatestTime(c.pluck(c.values(globals.data.all),"reportDatetime"));var dateTimeFormat=TR.tr("%Y年%m月%d日%H時%M分現在");return latestReportDatetime?strftime(latestReportDatetime,dateTimeFormat):null},makeTexts:function(){return c.map(globals.data.all,function(code,volcano){var latlon=util.parseLatlon(volcano.coordinate);var text=$("<span>").text(TR.tr(volcano.name)).addClass("fs_18px tshadow_stroke").on("click",japan.makeEventCallback(code));var volcanoConf=globals.data.volcanoList[code];return{type:"dom",latlon:latlon,domElement:text[0],positionShift:[25,0]}})},makeIcons:function(){return c.map(globals.data.all,function(code,volcano){var latlon=util.parseLatlon(volcano.coordinate);var imgURL=volcano.type==="regular"?"ashfall/image/ash.png":"volcano/image/1i.png";var img=$("<img>").attr("src",imgURL).attr("title",TR.tr(volcano.name)).on("click",japan.makeEventCallback(code)).css({width:20,height:20});return{type:"dom",latlon:latlon,priority:japan.makePriority(latlon[0],volcano.type==="irregular"),domElement:img[0]}})}};var individual={makeData:function(code,type,time,index,ashOnly){type=individual.decideType(code,type);var volcano=globals.data.all[code];var info=individual.choiceInfo(code,type,time);var changeMovie=typeof index!=="undefined";index=index||0;var data={infoTime:individual.makeInfoTime(info,type,index),contentsInfo:individual.makeContentsInfo(code,type,info),explain:individual.makeExplain()[0],legend:individual.makeLegend(info,index)[0],movieConfig:individual.makeMovieConfig(code,type,info,index),defaultOpen:"legend",data:{"ashfall-all-icon":{display:false},"ashfall-all-text":{display:false},"ashfall-polygons":{display:true,zindex:200,data:individual.makePolygonData(info,index)}}};if(!ashOnly){data.data["ashfall-individual-icon"]={data:individual.makeIcon(code,info),display:true,zindex:1e4};if(TR.isJapanese())data.textInfo=individual.makeTextInfo(info)[0];data.zxy=individual.makeZXY(volcano)}return data},makeTextInfo:function(info){var block=$("<div>").addClass("contents-block").css({margin:0,"margin-bottom":25});var table=new SimpleTable;var pdfSizeText=function(){if(!info.pdfSize)return"";return["[",Math.round(info.pdfSize/1024),"KB]"].join("")}();table.appendRow().addClass("contents-title");table.appendHeader(info.headTitle).attr("colspan",2);table.appendRow();table.appendHeader(strftime(new Date(info.reportDatetime),"%Y年%m月%d日%H時%M分現在")).addClass("contents-header").attr("colspan",2);if(info.volcanoHeadline){table.appendRow();table.appendHeader("主文").addClass("contents-header");table.appendCell(util.lf2br(info.volcanoHeadline)).css("padding","4px")}if(info.volcanoActivity){table.appendRow();table.appendHeader("詳細").addClass("contents-header");table.appendCell(util.lf2br(info.volcanoActivity)).css("padding","4px")}if(info.volcanoPrevention){table.appendRow();table.appendHeader("留意事項").addClass("contents-header");table.appendCell(util.lf2br(info.volcanoPrevention)).css("padding","4px")}table.make().css({"min-width":750,"max-width":750}).appendTo(block);return block},makeMovieConfig:function(code,type,info,index){if(info.ashinfos.length<2)return null;var slider=c.map(info.ashinfos,function(ashinfo){var endTime=ashinfo.endTime;var startTime=ashinfo.startTime;var text=function(){if(type==="detail"){return strftime(new Date(ashinfo.endTime),TR.select("%d日%H時<br>まで","until %m/%d<br>%H:00"))}return TR.select(strftime(new Date(startTime),"%d日<br>%H-")+strftime(new Date(endTime),"%Hp時"),strftime(new Date(startTime),"%m/%d<br>%H:00-")+strftime(new Date(endTime),"%Hp:00"))}();return $("<div>").html(text).addClass("ashfall-slider-cell").css({padding:"5px","text-align":"center","font-weight":"bold"})[0]});return{slider:slider,startPosition:index,childHighlight:false}},makeLegend:function(info,index){var legendSet=[];var ashinfo=individual.getAshinfo(info,index);c.each(ASHFALL_ITEM_TYPES,function(itemType){if(!c.contains(c.pluck(ashinfo.items,"code"),itemType.code))return;if(itemType.legendImage){legendSet.push([{img:itemType.legendImage,text:itemType.name}])}else{legendSet.push([{box:itemType.color,text:itemType.name}])}});return ContentsCommon.makeLegend(legendSet).addClass("contents-legend-map")},makeZXY:function(volcano){return c.concat([10],util.parseLatlon(volcano.coordinate))},decideType:function(code,type){if(c.contains(["quick","detail"],type)&&globals.data[code].others&&c.findWhere(globals.data[code].others,{type:type}))return type;if(type==="scheduled")return"scheduled";if(globals.data[code].others){var latest=c.maxBy(globals.data[code].others,function(info){return new Date(info.reportDatetime).getTime()});if(latest)return latest.type}return"scheduled"},choiceInfo:function(code,type,time){if(type==="scheduled")return globals.data[code].scheduled;if(time){var targetInfo=c.find(globals.data[code].others,function(info){return type===info.type&&time===strftime(new Date(info.reportDatetime),"%Y%m%d%H%M%S")});if(targetInfo)return targetInfo}return c.chain(globals.data[code].others).filter(function(info){return info.type===type}).maxBy(function(info){return new Date(info.reportDatetime).getTime()})},makeInfoTime:function(info,type,index){var infoTime=$("<div>");infoTime.append(TR.select("","Forecast at ")+TR.tr(info.name)+TR.select("の降灰予報","")+"<br>"+strftime(new Date(info.reportDatetime),TR.tr("%Y年%m月%d日%H時%M分現在"))+TR.select("　",", "));if(type!=="quick"){var text=function(){var ashinfo=info.ashinfos[index];if(type==="detail"){return strftime(new Date(ashinfo.endTime),TR.select("%d日%H時までの予想","Forecast until %m/%d %H:00 JST"))}return TR.select(strftime(new Date(ashinfo.startTime),"%d日%H時〜")+strftime(new Date(ashinfo.endTime),"%Hp時の予想"),strftime(new Date(ashinfo.startTime),"Forecast for %m/%d %H:00-")+strftime(new Date(ashinfo.endTime),"%Hp:00 JST"))}();infoTime.append(text)}return infoTime[0]},makeIcon:function(code,info){var latlon=util.parseLatlon(info.coordinate);var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttribute("viewBox","0 0 100 100");var path=document.createElementNS("http://www.w3.org/2000/svg","path");svg.appendChild(path);path.setAttribute("d","M50 15 L10 90 L90 90 Z");path.setAttribute("stroke-linejoin","round");path.setAttribute("stroke","#000000");path.setAttribute("stroke-width",10);path.setAttribute("fill-opacity",0);return[{type:"svg",latlon:latlon,svg:svg,svgConfig:{width:30,height:26}}]},makePolygonData:function(info,index){var ashinfo=individual.getAshinfo(info,index);return c.chain(ASHFALL_ITEM_TYPES).map(function(itemType){var partialPolygon=individual.makePartialPolygon(ashinfo,itemType.code);if(!partialPolygon)return null;var polygon={type:"polygon",latlon:individual.makePartialPolygon(ashinfo,itemType.code),priority:parseInt(itemType.code),options:{color:itemType.border,fillOpacity:itemType.opacity,weight:2}};if(itemType.stripe){var defs=document.createElementNS("http://www.w3.org/2000/svg","defs");var pattern=document.createElementNS("http://www.w3.org/2000/svg","pattern");var patternID="ashfall-stripe-"+itemType.code;pattern.setAttribute("id",patternID);pattern.setAttribute("patternUnits","userSpaceOnUse");pattern.setAttribute("patternTransform","rotate(45)");pattern.setAttribute("width",10);pattern.setAttribute("height",5);var line=document.createElementNS("http://www.w3.org/2000/svg","line");line.setAttribute("x1",0);line.setAttribute("y1",0);line.setAttribute("x2",0);line.setAttribute("y2",9.5);line.setAttribute("stroke",itemType.stripe);line.setAttribute("stroke-width",3);pattern.appendChild(line);defs.appendChild(pattern);var renderer=L.svg();renderer.defs=defs;polygon.type="path";polygon.options.renderer=renderer;polygon.options.fill=true;polygon.options.fillColor="url(#"+patternID+")"}else{polygon.options.fillColor=itemType.color}return polygon}).compact().value()},makePartialPolygon:function(ashinfo,code){if(!ashinfo)return null;var item=c.find(ashinfo.items,function(itm){return itm.code==code});if(!item)return null;return c.map(item.polygons,function(polygon){return individual.makePolygon(polygon)})},getAshinfo:function(info,index){if(!info.ashinfos)return null;index=parseInt(index,10)||0;if(index>=info.ashinfos.length)index=0;return info.ashinfos[index]},makePolygon:function(string){var regexp=/([+-]\d+\.\d+)([+-]\d+\.\d+)/;return c.chain(string.split("/")).map(function(str){var m=str.match(regexp);if(!m)return null;return[parseFloat(m[1]),parseFloat(m[2])]}).compact().value()},makeExplain:japan.makeExplain,makeContentsInfoEventCallback:function(code,info){return function(){var time=strftime(new Date(info.reportDatetime),"%Y%m%d%H%M%S");JMAWebUtility.hashController.changeHashData({type:info.type,time:time,index:null},false,true);UnitMap.makePage(individual.makeData(code,info.type,time))}},makeContentsInfo:function(code,type,info){var block=$("<div>").addClass("contents-block").css("margin",0);$("<p>").text(TR.tr("全国へ戻る")).addClass("contents-clickable").css({color:"#0000ff"}).on("click",function(){JMAWebUtility.hashController.changeHashData({type:null,time:null,code:null,index:null},false,true);UnitMap.makePage(japan.makeData())}).appendTo(block);var table=new SimpleTable;if(globals.data[code].others){table.appendRow().addClass("contents-title");table.appendHeader(TR.tr("現在発表中の降灰予報（速報・詳細）")).attr("colspan",TR.select(4,3));table.appendRow().addClass("contents-header");table.appendHeader(TR.select("噴煙高","Plume Height"));table.appendHeader(TR.select("発表時刻","Published Time"));table.appendHeader(TR.select("種別","Type"));if(TR.isJapanese())table.appendHeader("図情報(PDF)");c.chain(globals.data[code].others).sortBy(function(inf){return-new Date(inf.reportDatetime).getTime()}).each(function(inf){var tr=table.appendRow();var selected=type===inf.type&&inf.reportDatetime===info.reportDatetime;if(selected)tr.addClass("ashfall-contents-info-selected");table.appendCell(inf.plumeHeight?inf.plumeHeight+"m":"").css("text-align","center");var td=table.appendCell(strftime(new Date(inf.reportDatetime),TR.tr("%Y年%m月%d日%H時%M分")));if(!selected){td.addClass("contents-clickable").css({color:"#0000ff"}).on("click",individual.makeContentsInfoEventCallback(code,inf))}table.appendCell(inf.type==="quick"?TR.tr("速報"):TR.tr("詳細"));if(TR.isJapanese()){table.appendCell($("<a>").text(Math.round(inf.pdfSize/1024)+"KB").attr({href:"ashfall/data/ashfall/pdf/"+inf.pdf,target:"_blank"})).css("text-align","center")}})}if(globals.data[code].scheduled){table.appendRow().addClass("contents-title");table.appendHeader(TR.tr("現在発表中の降灰予報（定時）")).attr("colspan",TR.select(4,3));table.appendRow().addClass("contents-header");table.appendHeader(TR.select("発表時刻","Published Time")).attr("colspan",3);if(TR.isJapanese())table.appendHeader("図情報(PDF)");var scheduledRow=table.appendRow();var scheduledLink=$("<span>").text(strftime(new Date(globals.data[code].scheduled.reportDatetime),TR.tr("%Y年%m月%d日%H時%M分")));if(type==="scheduled"){scheduledRow.css({color:"#000000"});scheduledRow.addClass("ashfall-contents-info-selected")}else{scheduledRow.css({color:"#0000ff"});scheduledLink.addClass("contents-clickable").on("click",individual.makeContentsInfoEventCallback(code,globals.data[code].scheduled))}table.appendCell(scheduledLink).attr("colspan",3).css("text-align","center");if(TR.isJapanese()){table.appendCell($("<a>").text(Math.round(globals.data[code].scheduled.pdfSize/1024)+"KB").attr({href:"ashfall/data/ashfall/pdf/"+globals.data[code].scheduled.pdf,target:"_blank"})).css("text-align","center")}}table.make().addClass("ashfall-contents-info-table").css({"min-width":300}).appendTo(block);var text=function(){if(type==="scheduled")return TR.select("各期間（３時間ごと）に噴火が発生した場合に予想される降灰範囲及び小さな噴石の落下範囲","Ash fall area and debris area forecast of each time (per 3 hours) when eruption is occured");var textTime=strftime(new Date(info.targetDatetime),TR.select("%d日%H時%M分","%m/%d %H:%M JST"));if(type==="detail")return TR.select(textTime+"の噴火から各時刻までに予想される降灰量","Ash fall forecast from Eruption time of "+textTime);if(type==="quick")return TR.select(textTime+"の噴火から１時間後までに予想される降灰量及び小さな噴石の落下範囲","Ash quantity and area of falling debris forecast from Eruption time of "+textTime);return""}();$("<p>").css("margin-top",5).html(text).css("width",260).appendTo(block);return block[0]},hasType:function(code,type){if(!globals.data[code].others)return false;return!!c.findWhere(globals.data[code].others,{type:type})}};var ASHFALL_ITEM_TYPES=[{code:"70",name:TR.tr("降灰"),color:"#b0b0b4",border:"#c8c8cb",opacity:.8},{code:"71",name:TR.tr("少量の降灰"),color:"#b0b0b4",border:"#c8c8cb",opacity:.8},{code:"72",name:TR.tr("やや多量の降灰"),color:"#faf500",border:"#faf500",opacity:.5},{code:"73",name:TR.tr("多量の降灰"),color:"#ff2800",border:"#ff2800",opacity:.5},{code:"75",legendImage:"ashfall/image/legend01.png",name:TR.tr("小さな噴石の落下"),color:"#ffffff",border:"#ff0000",opacity:1,stripe:"#ff0000"}];root.Ashfall=root.Ashfall||{};root.Ashfall.draw=interfaces.draw;root.Ashfall.rapidRequest=interfaces.rapidRequest})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var VOLCANO_DATA;var VOLCANO_LIST;var VOLCANO_DICT;var c=JMAWebUtility.common;var ACTIVITY_INFO_URL="//www.data.jma.go.jp/svd/vois/data/tokyo/STOCK/activity_info/";var TR=new Translator;var draw=function(_context,_option,resolve){var requests={volcanoList:"volcano/const/volcano_list.json",warning:"volcano/data/warning.json",eruption:"volcano/data/eruption.json",info:"volcano/data/info.json",explain:"volcano/const/explain_map.html",legend:"volcano/const/legend_map.html"};if(TR.isEnglish())requests.dict="volcano/const/volcano_dictionary.json";JMAWebUtility.parallelRequest(requests,function(data){var explain=$(data.explain).filter("div.volcano-explain-map"+TR.select("","-en"))[0];var legend=$(data.legend).filter("div.volcano-legend-map"+TR.select("","-en"))[0];var mapData;VOLCANO_LIST=convertVolcanoList(data.volcanoList);VOLCANO_DATA={WARNING:c.sortBy(data.warning||[],sortFunction),ERUPTION:c.sortBy(data.eruption||[],sortFunction),INFO:c.sortBy(data.info||[],sortFunction)};if(TR.isEnglish()){VOLCANO_DICT=data.dict;addVolcanoDictionary(data.dict)}mapData=makeMapData(explain,legend);resolve(mapData)})};var sortFunction=function(v){return[-new Date(v.reportDatetime).getTime(),parseInt(getVolcanoCode(v.eventId),10)]};var makeMapData=function(explain,legend){return{explain:$(explain).addClass("contents-explain")[0],legend:$(legend)[0],infoTime:makeInfoTime(),contentsInfo:makeContentsInfo()[0],textInfo:makeTextInfo()[0],data:makeIconData(),defaultOpen:"legend"}};var decidePriority=function(icon){switch(icon){case"0":return 100;case"0i":return 120;case"1":return 200;case"1i":return 300;case"2":return 400;case"2i":return 500;case"3":return 600;case"3i":return 700;case"4":return 800;case"4i":return 900;case"5":return 1e3;case"5i":return 1100;default:return 1}};var decideIcon=function(level,info){if(info&&info.within120&&info.headTitle&&info.headTitle.match(/臨時/))return String(level)+"i";return String(level)};var makeIconData=function(){var iconPropCommon={type:"dom",autoCenter:true};var textPropCommon={type:"dom",autoCenter:false,options:{className:"zi_0",iconAnchor:[28,10]}};var warnData=c.map(VOLCANO_DATA.WARNING,function(warning){var vinfo=parseVolcanoInfos(warning.volcanoInfos);var infoData=c.findWhere(VOLCANO_DATA.INFO,{eventId:warning.eventId});var volcanoName=TR.select(vinfo.name,getVolcanoEnName(vinfo.code));return{warn:true,info:infoData,alarm:vinfo.alarm,kindName:vinfo.kindName,code:vinfo.code,name:volcanoName,reportDatetime:warning.reportDatetime,level:vinfo.level,latlon:getLatLon(vinfo.code),icon:decideIcon(vinfo.level,infoData),pointShift:getPointShift(vinfo.code),pointShift18:getPointShift(vinfo.code,"pointShift18")}});var normalData=c.map(VOLCANO_LIST,function(code,volcano){var infoData=c.findWhere(VOLCANO_DATA.INFO,{eventId:code});if(c.findWhere(VOLCANO_DATA.WARNING,{eventId:code}))return;if(!volcano.latlon)return;return{code:code,info:infoData,name:TR.select(volcano["name_jp"],getVolcanoEnName(volcano.code)),reportDatetime:infoData?infoData.reportDatetime:null,latlon:volcano.latlon,icon:decideIcon(0,infoData),pointShift:volcano.pointShift,pointShift18:volcano.pointShift18}});var data=c.concat(normalData,warnData);var iconUnder8Data=[];var iconOver8Data=[];var textUnder8Data=[];var textOver8Data=[];c.each(c.concat(normalData,warnData),function(volcano){var srcImg="volcano/image/"+volcano.icon+".png";var mapImg=makeTag("img",{src:srcImg,class:"volcano-ico01"})[0];var mapImg18=makeTag("img",{src:srcImg,class:"volcano-ico02"})[0];var mapText=makeTag("a",{class:"contents-clickable volcano-map-text",content:volcano.name})[0];var mapText18=makeTag("a",{class:"contents-clickable volcano-map-text",content:volcano.name})[0];var popup=makePopup(volcano);var iconProp=c.merge(iconPropCommon,{domElement:mapImg,latlon:volcano.latlon,priority:decidePriority(volcano.icon),popup:{content:popup,on:"click"},svgConfig:{width:15,height:15}});var iconProp18=c.merge(iconPropCommon,{domElement:mapImg18,latlon:volcano.latlon,priority:decidePriority(volcano.icon),popup:{content:popup,on:"click"},svgConfig:{width:20,height:20}});var textProp=c.merge(textPropCommon,{latlon:volcano.latlon,priority:decidePriority(volcano.icon),popup:{content:popup,on:"click"},domElement:mapText});textProp.positionShift=volcano.pointShift||[40,0];var textProp18=c.merge(textPropCommon,{latlon:volcano.latlon,priority:decidePriority(volcano.icon),popup:{content:popup,on:"click"},domElement:mapText18});textProp18.positionShift=volcano.pointShift18||[40,0];iconUnder8Data.push(iconProp);textUnder8Data.push(textProp);iconOver8Data.push(iconProp18);textOver8Data.push(textProp18)});return{iconOver8:{minZoom:8,zindex:1e3,data:iconOver8Data},iconUnder8:{maxZoom:7,zindex:1e3,data:iconUnder8Data},textOver8Data:{minZoom:8,zindex:2e3,data:textOver8Data},textUnder8Data:{maxZoom:7,minZoom:7,zindex:2e3,data:textUnder8Data}}};var makeTextInfo=function(){var block=$("<div>");var warningTitle=$("<p>").addClass("forecast_tle00").text(TR.select("噴火警報・予報一覧（噴火予報は１カ月以内）：クリックすると地図上のそれぞれの火山へ移動します。","The Volcanic Warnings/Forecasts list "+"(The Volcanic Forecasts shown here are those issued within the last 30 days.): "+"Click to move to each volcano on the map."));var infoTitle=$("<p>").addClass("forecast_tle00").text("火山の状況に関する解説情報（10日以内）：クリックすると地図上のそれぞれの火山へ移動します。");block.append(warningTitle).append(makeWarningTextInfoTable());if(TR.isJapanese()){block.append(infoTitle).append(makeInfoTextInfoTable()).append($("<p>").append($("<a>").text("全国の火山解説情報").attr("href","volcano/#type=info&event_id=900")))}return block};var makeWarningTextInfoTable=function(){var div=$("<div>").addClass("forecast_table forecast_visible");var table=new SimpleTable;var TH_LIST=TR.select(["発表日時","火山名","噴火警報・予報","キーワード"],["Issued at","Volcano","Abbreviation","Keyword"]);table.appendRow();c.each(TH_LIST,function(title){table.appendHeader(TR.tr(title)).css({"min-width":"175px"})});if(VOLCANO_DATA.WARNING.length===0)return div;c.each(VOLCANO_DATA.WARNING,function(warning){var vinfo=parseVolcanoInfos(warning.volcanoInfos);var dateAD=JMAWebUtility.date.strftime(new Date(warning.reportDatetime),TR.tr("%Y年%m月%d日%H時%M分"));var volcanoLevel=vinfo.level;var tdbg="volcano-level"+volcanoLevel;var latlon=getLatLon(warning.eventId);var volcanoName=TR.select(vinfo.name,getVolcanoEnName(vinfo.code));table.appendRow().on("click",function(){var offSetX,offSetY;switch(UnitMap.getStatus().responsiveMode.charAt(0)){case"m":offSetX=-.02;offSetY=0;break;case"t":offSetX=-.15;offSetY=0;break;default:offSetX=0;offSetY=.4;break}UnitMap.makePage({zxy:[10,parseFloat(latlon[0])+offSetX,parseFloat(latlon[1])+offSetY]})});table.appendCell(dateAD);table.appendCell(volcanoName);table.appendCell(TR.tr(vinfo.alarm)).addClass(tdbg);table.appendCell(TR.tr(vinfo.kindName)).addClass(tdbg)});table.make().appendTo(div);return div};var makeInfoTextInfoTable=function(){var div=$("<div>").addClass("forecast_table forecast_visible");var thList=TR.select(["発表日時","火山名"],["Issued at","Volcano"]);var pFooter=$("<p>").addClass("forecast_p");var table=new SimpleTable;table.appendRow();c.each(thList,function(value){table.appendHeader(value)});c.each(VOLCANO_DATA.INFO,function(info){var dateAD=JMAWebUtility.date.strftime(new Date(info.reportDatetime),"%Y年%m月%d日%H時%M分");var url="volcano/#type=info&event_id="+info.eventId;switch(info.eventId){case"900":break;default:table.appendRow().on("click",function(){var offSetX,offSetY;var latlon=getLatLon(info.eventId);switch(UnitMap.getStatus().responsiveMode.charAt(0)){case"m":offSetX=-.02;offSetY=0;break;case"t":offSetX=-.15;offSetY=0;break;default:offSetX=0;offSetY=.4;break}UnitMap.makePage({zxy:[10,parseFloat(latlon[0])+offSetX,parseFloat(latlon[1])+offSetY]})});table.appendCell(dateAD);table.appendCell(getVolcanoName(info.eventId));break}});div.append(table.make());div.append(pFooter);return div};var convertVolcanoList=function(volcanoList){return c.chain(volcanoList).map(function(volcano){return[volcano.code,volcano]}).toHash().value()};var makeInfoTime=function(){var allData=c.concat(VOLCANO_DATA.WARNING,VOLCANO_DATA.ERUPTION,VOLCANO_DATA.INFO);var latestData=c.maxBy(allData,function(data){return new Date(data.reportDatetime).getTime()});var timeStr;if(!latestData)return null;return JMAWebUtility.date.strftime(new Date(latestData.reportDatetime),TR.tr("%Y年%m月%d日%H時%M分現在"))};var makeContentsInfo=function(){var titleTelop=$("<p>").addClass("forecast_tle00").text(TR.select("24時間以内に発表された噴火警報・予報、噴火速報","The Volcanic Warnings/Forecasts and Eruption Notice shown here are those issued within the last 24 hours."));return $("<div>").append(titleTelop).append(makeTelopTable())};var makeWarningTelops=function(){return c.chain(VOLCANO_DATA.WARNING).filter(function(warning){return warning.within24}).map(function(warning){return{reportDatetime:warning.reportDatetime,name:getVolcanoName(warning.eventId),link:"volcano/#type=warning&event_id="+warning.eventId+TR.select("","&lang="+TR.getLang()),kind:"噴火警報",level:"【"+parseVolcanoInfos(warning.volcanoInfos).kindName+"】"}}).value()};var makeEruptionTelops=function(){return c.map(VOLCANO_DATA.ERUPTION,function(value){return{reportDatetime:value.reportDatetime,name:getVolcanoName(value.eventId),link:"volcano/#type=eruption&event_id="+value.eventId+TR.select("","&lang="+TR.getLang()),kind:"噴火速報",isClear:value.infoType==="取消",level:""}})};var makeTelopTable=function(){var div=$("<div>").addClass("forecast_table_ci");var table;var telops=c.concat(makeEruptionTelops(),makeWarningTelops());if(telops.length===0){div.append($("<p>").text(TR.select("24時間以内に発表された噴火警報等はありません","No Volcanic Warnings and others issued within the last 24 hours.")));return div}table=new SimpleTable;table.appendRow();table.appendHeader(TR.select("発表時刻","Issued at")).css({"min-width":"100px"});table.appendHeader(TR.select("火山名","Volcano")).css({"min-width":"150px"});table.appendHeader(TR.select("内容","Contents")).css({"min-width":"100px"});c.each(telops,function(telop){var kind,level;if(telop.isClear)return;kind=TR.tr(telop.kind);level=TR.select(telop.level,TR.tr(telop.level.replace("【","").replace("】","")));table.appendRow().on("click",function(){location.href=telop.link});table.appendCell(JMAWebUtility.date.strftime(new Date(telop.reportDatetime),TR.select("%d日%H時%M分","%H:%M JST, %d")));table.appendCell(telop.name);table.appendCell(TR.select(kind+level+"を発表",kind+" "+level))});div.append(table.make());return div};var makePopup=function(data){var urlInfo=ACTIVITY_INFO_URL+data.code+".html";var table=new SimpleTable;setPopupRow(table,data.name,TR.select("火山名","Volcano"));if(data.reportDatetime){setPopupRow(table,JMAWebUtility.date.strftime(new Date(data.reportDatetime),TR.tr("%Y年%m月%d日%H時%M分")),TR.select("発表日時","Issued at"))}if(data.warn){setPopupRow(table,TR.tr(data.alarm),TR.select("警報・予報","Abbreviation"));setPopupRow(table,TR.tr(data.kindName),TR.select("キーワード","Keyword"))}if(data.warn){var urlWarn="volcano/#type=warning&event_id="+data.code+TR.select("","&lang="+TR.getLang());setPopupRow(table,makeTag("a",{href:urlWarn,content:TR.select("噴火警報・予報を見る","View Volcanic Warnings/Forecasts"),target:"_blank",rel:"noopener noreferrer"})[0])}if(data.info&&TR.isJapanese()){setPopupRow(table,makeTag("a",{content:"解説情報を見る",href:"volcano/#type=info&event_id="+data.code,target:"_blank",rel:"noopener noreferrer"})[0])}if(TR.isJapanese()){setPopupRow(table,makeTag("a",{content:TR.select(data.name+"の活動状況について","About "+data.name),href:urlInfo,target:"_blank",rel:"noopener noreferrer"})[0])}return table.make().addClass("volcano_popup")[0]};var setPopupRow=function(table,value,title){var title=title||"";table.appendRow();if(title){table.appendHeader(title);table.appendCell(value)}else{table.appendCell(value).attr("colspan",2)}};var getVolcanoName=function(eventId){var volcanoCode=getVolcanoCode(eventId);if(!volcanoCode)return"";if(TR.isJapanese())return VOLCANO_LIST[volcanoCode]["name_jp"];return getVolcanoEnName(volcanoCode)};var getVolcanoEnName=function(volcanoCode){var dictNames=VOLCANO_DICT?c.findWhere(VOLCANO_DICT.volcanoes,{code:volcanoCode}):null;return dictNames?dictNames.enName:VOLCANO_LIST[volcanoCode]["name_en"]};var getLatLon=function(eventId){var volcanoCode=getVolcanoCode(eventId);if(!volcanoCode)return"";return VOLCANO_LIST[volcanoCode].latlon};var getPointShift=function(eventId,type){var volcanoCode=getVolcanoCode(eventId);if(!volcanoCode)return"";return VOLCANO_LIST[volcanoCode][type==="pointShift18"?"pointShift18":"pointShift"]};var getVolcanoCode=function(eventId){var regexpForEruption=/^\d{14}_(\d{3})$/;var regexpForOther=/^(\d{3})$/;var m;m=eventId.match(regexpForEruption);if(m)return m[1];m=eventId.match(regexpForOther);if(m)return m[1];return null};var parseVolcanoInfos=function(volcanoInfos){var ret={};c.each(volcanoInfos,function(volcanoInfo){var item=volcanoInfo.items[0];switch(volcanoInfo.type){case"噴火警報・予報（対象火山）":ret.name=item.areas[0].name;ret.code=item.areas[0].code;ret.kindCode=item.code;ret.kindName=item.name;ret.level=code2level(item.code);break;case"噴火警報・予報（対象市町村等）":ret.alarm=item.name;ret.areas=item.areas;break;case"噴火警報・予報（対象市町村の防災対応等）":break;default:break}});return ret};var makeTag=function(tagName,option){var tag=$("<"+tagName+">");c.each(option,function(key,value){switch(key){case"content":tag.text(value);break;case"class":tag.addClass(value);break;default:tag.attr(key,value);break}});return tag};var code2level=function(code){switch(code){case"15":case"25":return 5;case"14":return 4;case"13":case"23":case"36":return 3;case"12":case"22":return 2;case"11":case"21":case"35":return 1;default:return 0}};var addVolcanoDictionary=function(dict){var codeTexts;if(!dict){console.error("[volcano-error] no dictionary");return}codeTexts=c.chain(dict.warningCode).map(function(obj){return[obj.jp,obj.en]}).toHash().value();TR.addDictionary(c.merge({"噴火速報":"Eruption Notice"},codeTexts))};root.Volcano=root.Volcano||{};root.Volcano.draw=draw})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var ud=util.date;var c=util.common;var colorBlack="tshadow_stroke";var colorRed="tshadow_stroke fc_red";var draw=function(info,opt,res){util.parallelRequest({pointinfo:"wave/const/pointinfo.json",mapssvb:"wave/data/ssvb/map_ssvb.json",mapswjp:"wave/data/swjp/map_swjp.json",info:"wave/const/explain.html"},function(data){try{var infoTime=new Date(makeInfoTime(data.mapssvb,data.mapswjp));res({zxy:[5,38,135],data:makeData(data),infoTime:util.date.strftime(infoTime,"%Y年%m月%d日%H時%M分"),explain:$("<div>").addClass("contents-explain").append($(data.info).filter("div.explain-map"))[0]})}catch(e){res({fail:e})}})};var makeInfoTime=function(ssvbTime,swjpTime){var ssvbTimeList=c.chain(ssvbTime).map(function(_key,value){return value}).map(function(value){return c.map(value,function(_k,v){return v.date})}).flatten().uniq().value();var swjpTimeList=c.chain(swjpTime).map(function(_key,value){return value}).map(function(value){return c.map(value,function(_k,v){return v.date})}).flatten().uniq().value();var ssvbMax=c.max(ssvbTimeList);var swjpMax=c.max(swjpTimeList);if(!ssvbMax)return swjpMax;if(!swjpMax)return ssvbMax;return c.max([ssvbMax,swjpMax])};var makeData=function(data){var pointInfo=data.pointinfo;var mapBuoyData=data.mapssvb;var mapPointData=data.mapswjp;var dispImg=[];var dispText=[];var buoyKeys=c.chain(mapBuoyData).map(function(_k,v){return Object.keys(v)}).flatten().value();setPoint(pointInfo,mapPointData,dispImg,dispText);if(buoyKeys.length>0)setBuoy(mapBuoyData,dispImg,dispText,mapPointData);return{dispImg:{data:dispImg,display:true},dispText:{data:dispText,display:true}}};var makePointPopup=function(targetData){var date=new Date(targetData.date);var height=targetData.height?(targetData.height/100).toFixed(1)+"m":"0.0m";var period=targetData.period?targetData.period.toFixed(1)+"s":"ただいま欠測中です。";var waveHeight="有義波の波高："+height;var wavePeriod="有義波の周期："+period;var waveDate=targetData.date?ud.strftime(date,"日時：%m月%d日%H時"):"日時：-";return waveHeight+"<br>"+wavePeriod+"<br>"+waveDate};var offsetDecimal=function(v){return Math.round(v*1e3)/1e3};var makeBuoyPopup=function(targetData){var date=new Date(targetData.date);var height=targetData.wave_height?targetData.wave_height.toFixed(1):"-";var period=targetData.wave_period?targetData.wave_period.toFixed(1):"-";var waveHeight="有義波の波高："+(height>.3&&height!=="-"?height+"m":"0.0m");var wavePeriod="有義波の周期："+(height>.3&&period!=="-"?period+"s":"ただいま欠測中です。");var pressure="気圧："+targetData.sea_level_pressure.toFixed(1)+"hPa";var temp="水温："+targetData.sea_surf_temp.toFixed(1)+"℃";var lat="北緯："+offsetDecimal(targetData.latlon[0]).toFixed(3)+"度";var lon="東経："+offsetDecimal(targetData.latlon[1]).toFixed(3)+"度";var waveDate=ud.strftime(date,"日時：%m月%d日%H時");return[waveHeight,wavePeriod,pressure,temp,lat,lon,waveDate].join("<br>")};var setPoint=function(pointInfo,mapPointData,pointSvg,pointText){c.each(pointInfo,function(info){var dataCandidate=mapPointData[info.number];var targetData=function(){if(Object.keys(dataCandidate).length===0){return{date:null,height:0,id:info.id,period:null}}var targetKey=findTargetKey(dataCandidate);return dataCandidate[targetKey]}();pointSvg.push({type:"rect",latlon:info.latlon,svgConfig:{height:13,width:13},options:{stroke:false,fillColor:"#006fc0",fillOpacity:1},popup:{content:makePointPopup(targetData),on:"mouseover",off:"mouseout"},events:{click:function(){location.href="wave/#code="+info.number+"&type=point"}}});pointText.push({type:"dom",popup:{content:makePointPopup(targetData),on:"mouseover",off:"mouseout"},events:{click:function(){location.href="wave/#code="+info.number+"&type=point"}},latlon:info.latlon,domElement:info.name,options:makeTextOption(targetData.height/100)})})};var setBuoy=function(mapBuoyData,buoySvg,buoyText,mapPointData){var actualData=c.map(mapBuoyData,function(_code,obj){if(Object.keys(obj).length>0)return obj});var infoTime=new Date(makeInfoTime(mapBuoyData,mapPointData));c.each(actualData,function(obj){var timeList=c.map(obj,function(time,value){return time});var latestTime=new Date(c.last(timeList));if((infoTime-latestTime)/864e5<7){var targetKey=findTargetKey(obj);var targetData=obj[targetKey];buoySvg.push(makeOrbitObj(obj));buoySvg.push({type:"circle",latlon:[targetData.latlon[0],targetData.latlon[1]],radius:7,popup:{content:makeBuoyPopup(targetData),on:"mouseover",off:"mouseout"},events:{click:function(){location.href="wave/#code="+targetData.id+"&type=buoy"}},options:{stroke:false,fillColor:"#f80101",fillOpacity:1}});buoyText.push({type:"dom",latlon:[targetData.latlon[0],targetData.latlon[1]],popup:{content:makeBuoyPopup(targetData),on:"mouseover",off:"mouseout"},events:{click:function(){location.href="wave/#code="+targetData.id+"&type=buoy"}},domElement:targetData.id,options:makeTextOption(targetData.wave_height)})}})};var makeOrbitObj=function(data){var latlonList=c.map(data,function(_key,value){var latlon=value.latlon;return[latlon[0],latlon[1]]});return{type:"path",latlon:latlonList,options:{weight:1,color:"#000",opacity:.65,fill:false}}};var makeTextOption=function(waveHeight){return{iconAnchor:[-10,8],className:waveHeight>=3?colorRed:colorBlack}};var findTargetKey=function(data){var maxTime=c.chain(data).map(function(time,_valuue){return Date.parse(time)}).max(function(time){return new Date(time)});return maxTime.toISOString().split(".")[0]+"Z"};root.Wave=root.Wave||{};root.Wave.draw=draw})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var DICTIONARY={"警報・注意報は発表されていません":"No Warnings and Advisories has been issued","警報・注意報":"Warnings and Advisories","ただいま準備中です。しばらくお待ち下さい":"We are preparing now. Please wait for a while.","大雨":"Heavy Rain","洪水":"Flood","暴風":"Storm","強風":"Gale","暴風雪":"Snowstorm","風雪":"Gale and Snow","大雪":"Heavy Snow","波浪":"High Wave","高潮":"Storm Surge","雷":"Thunder Storm","融雪":"Snow Melting","濃霧":"Dense Fog","乾燥":"Dry Air","なだれ":"Avalanche","低温":"Low Temperature","霜":"Frost","着氷":"Ice Accretion","着雪":"Snow Accretion","特別警報":"Emergency Warning","警報":"Warning","注意報":"Advisory","土砂災害、浸水害":"Landslide and Inundation","土砂災害":"Landslide","浸水害":"Inundation","土砂災害警戒情報":"Landslide Alert Information","発表":"Announcement","継続":"Continuation","特別警報から警報":"Downgrade of Emergency Warnings to Warnings","特別警報から注意報":"Downgrade of Emergency Warnings to Advisories","警報から注意報":"Downgrade of Warnings to Advisories","解除":"Cancel","土砂災害警戒":"Landslide Warning","土砂災害注意":"Landslide Advisory","浸水警戒":"Inundation Warning","浸水注意":"Inundation Advisory","地吹雪":"Drifting snow","氾濫":"Flooding","塩害":"Saltwater damage","フェーン":"Foehn","降雪による交通障害":"Traffic disruption caused by heavy snow","うねり":"Sea swell","副振動":"Seiche","潮位変動大":"Large tidal fluctuations","突風":"Damaging winds","竜巻":"Tornado","ひょう":"Hail","低地浸水":"Flooding of lowland areas","水道凍結":"Water pipe freezing","路面凍結":"Road icing","６時間最大降雪量":"Maximum 6-hour snowfall","１２時間最大降雪量":"Maximum 12-hour snowfall","２４時間最大降雪量":"Maximum 24-hour snowfall","大雨<br>(浸水)":"Heavy Rain<br>(Inundation)","大雨<br>(土砂)":"Heavy Rain<br>(Landslide)","大雨<br>(土砂災害)":"Heavy Rain<br>(Landslide)","暴風<br>強風":"Storm<br>Gale","暴風雪<br>風雪":"Snowstorm<br>Gale and Snow","特":"Emergency","警":"Warning","注":"Advisory","土砂":"Alert","・":"/","発表なし":"No Warnings and Advisories","予想期間外":"Outside the forecast period","(大雨以外)":"(Except Heavy Rain)","(高潮以外)":"(Except Storm Surge)","上記以外の高潮注意報":"Without a high probability of a subsequent Storm Surge Warning","警報級の可能性":"Probability of warnings","暴風(雪)":"Storm Snowstorm","1時間最大":"Maximum hourly","3時間最大":"Maximum 3-hour","6時間最大":"Maximum 6-hour","24時間最大":"Maximum 24-hour","最大風速":"Maximum wind speed","波高":"Wave height","［高］":"[High]","［中］":"[Mid]","オホーツク海":"Sea of Okhotsk","オホーツク海側":"Sea of Okhotsk side","伊勢湾側":"Ise-wan side","伊予灘":"Iyo-nada","伊予灘側":"Iyo-nada side","宇和海":"Uwa Sea","宇和海側":"Uwa Sea side","黄金道路方面":"Ogon-doro","黄金道路方面以外の地域":"Except in Ogon-doro","沖ノ島周辺":"Around Okinoshima","下対馬南西側":"southwestern side of Shimotsushima","下対馬北東側":"northeastern side of Shimotsushima","海上":"Sea","外海":"Open sea","外海側":"Open-sea side","関門海峡":"Kanmon Strait","紀伊水道側":"Kii Channel side","橘湾側":"Tachibanawan-side","響灘":"Hibiki-nada","九十九島側":"Kujuku-shima side","玄界灘":"Genkai-nada","五島灘側":"Goto-nada side","三河湾側":"Mikawa-wan side","山沿い":"Mountain foothills","山沿いを除く地域":"Except in mountain foothills","山間部":"Mountainous area","山地":"Mountains","山地を除く地域":"Except in mountains","鹿児島湾":"Kagoshima-wan","珠洲外浦":"Suzu-sotoura","珠洲内浦":"Suzu-uchiura","酒田":"Sakata","周防灘":"Suo-nada","宗谷海峡":"Soya Strait","秋田市市街地":"Urban area in Akita-shi","駿河湾":"Suruga-wan","上対馬西側":"western side of Kamitsushima","上対馬東側":"eastern side of Kamitsushima","瀬戸内側":"Setouchi side","瀬戸内側の海上":"Seto inland Sea","聖高原周辺":"around Hijiri Plateau","聖高原周辺を除く地域":"Except in Hijiri Plateau","西海上":"Western sea","西部":"Western part","相模湾":"Sagami-wan","相模湾側":"Sagami-wan side","太平洋":"Pacific Ocean","太平洋側":"Pacific Ocean side","大阪湾側":"Osaka-wan side","大村湾":"Omura-wan","大村湾側":"Omura-wan side","淡路島南部":"southern part of Awaji-shima","淡路島南部を除く地域":"Except in southern part of Awaji-shima","知床岬沖":"Offing of Shiretoko-misaki","知多湾側":"Chita-wan side","津軽海峡":"Tsugaru Strait","津軽海峡側":"Tsugaru Strait side","天草灘側":"Amakusa-nada side","東シナ海側":"East China Sea side","東海上":"Eastern sea","東京湾":"Tokyo-wan","東京湾側":"Tokyo-wan side","東部":"Eastern part","内海":"Inland sea","南島原市南側":"southern part of Minamisimabara-shi","南島原市北側":"northern part of Minamisimabara-shi","日勝方面":"Nissho","日勝方面以外の地域":"Except in Nissho","日本海":"Japan Sea","日本海側":"Japan Sea side","播磨灘側":"Harima-nada side","八代海":"Yatsushiro Sea","八代海側":"Yatsushiro Sea side","飛島":"Tobi-shima","琵琶湖":"Biwa-ko","琵琶湖を除く地域":"Except in Biwa-ko","平戸島西側":"western part of Hirado-shima","平戸島東側":"eastern part of Hirado-shima","平地":"Flatland","平野部":"Plains","北海上":"Northern sea","盆地":"Basin","門司区西部":"western part of Moji-ku","有明海":"Ariake Sea","有明海側":"Ariake Sea side","羅臼・標津沖":"Offing of Rausu/Shibetsu","陸奥湾":"Mutsu-wan","陸奥湾側":"Mutsu-wan side","陸上":"Land"};root.Warning=root.Warning||{};root.Warning.translator=new Translator(DICTIONARY)})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var UC=JMAWebUtility.common;var TR=Warning.translator;var getAreaTypeIndex=function(areaType){switch(areaType){case"class10s":return 0;case"class20s":return 1;case"landslides":return 2;default:console.error("エリアタイプが不正: "+areaType);return null}};var getWarningLevel=function(warning){return getLevel(warning,null)};var getRainLevel=function(warning,name){return getLevel(warning,name)};var getLevel=function(warning,name){if(warning.status==="解除")return 0;var code=function(){if(warning.code==="19"&&warning.nextKinds)return"19+";return warning.code}();var level=WARNING_INFOS[code].level;if(!name)return level;if(level===50&&warning.condition&&warning.condition.indexOf(name)>=0)return 50;if(UC.contains(warning.attentions,name+"警戒"))return 30;if(UC.contains(warning.attentions,name+"注意"))return 20;return 0};var getTimeSeriesLevel=function(values,index,elemCode,tideLevel){var allMissing=UC.all(values.slice(index),function(value){return value==="00"});if(allMissing)return null;var level=getTSLevel(values[index],elemCode);if(elemCode!=="tide")return level;if(level!==20)return level;if(tideLevel!==30)return level;var hasWarning=UC.find(values.slice(index+1),function(value){return getTSLevel(value,elemCode)>=40});if(!hasWarning)return level;return 30};var getTimeSeriesContinueLevel=function(value,elemCode){return getTSLevel(value,elemCode)};var getTSLevel=function(value,elemCode){switch(value){case"00":return 0;case"10":return 20;case"30":if(elemCode==="tide")return 40;return 30;case"50":if(elemCode==="rain"||elemCode==="inundation"||elemCode==="landslide")return 50;return 40;default:console.error("不正な危険度: "+value);return 0}};var getAreaName=function(areaJson,areaType,areaCode){var areaNames=[];if(areaType==="class10s"){var officeName=getOfficeName(areaJson,areaCode);if(officeName)areaNames.push(officeName)}areaNames.push(TR.areaName(areaJson,areaType,areaCode));return areaNames.join(TR.select("",": "))};var getOfficeName=function(areaJson,class10Code){var prefCode=class10Code.substr(0,2);switch(prefCode){case"01":return TR.select("北海道","Hokkaido");case"27":case"37":return null;case"46":return TR.select("鹿児島県","Kagoshima");case"47":return TR.select("沖縄県","Okinawa")}var officeCode=areaJson.class10s[class10Code].parent;return TR.areaName(areaJson,"offices",officeCode)};var getLegend=function(mode,isForecast){if(mode==="summary"||mode==="timeSeries"||mode==="table"||mode==="map"){return getLegendAll(mode,isForecast)}return getLegendElem(mode,isForecast)};var getLegendAll=function(mode,isForecast){var legends1=[{box:"contents-level50",text:TR.tr("大雨","特別警報")},{box:"contents-level40",text:function(){if(mode==="map"){if(isForecast){return TR.tr("特別警報","(大雨以外)","・","高潮","警報")}return TR.tr("特別警報","(大雨以外)","・","高潮","警報","<br>","土砂災害警戒情報")}return TR.tr("特別警報","(大雨以外)","・","高潮","警報","・","土砂災害警戒情報")}()},{box:"contents-level30",text:TR.tr("警報","(高潮以外)","・","高潮","注意報","(*1)")},{box:"contents-level20",text:TR.tr("注意報","(高潮以外)","・","高潮","注意報","(*2)")},{box:"contents-missing",text:function(){switch(mode){case"summary":return TR.tr("解除");case"timeSeries":return TR.tr("予想期間外");case"table":return TR.tr("解除","・","発表なし");case"map":if(isForecast)return TR.tr("発表なし","・","予想期間外");return TR.tr("発表なし");default:return""}}()}];var legends2=[];if(mode==="summary"||mode==="table"){legends2=legends2.concat([{box:"contents-level50",boxText:"！",text:getYokokuText(TR.tr("大雨","特別警報"))},{box:"contents-level40",boxText:"！",text:getYokokuText(TR.tr("特別警報","(大雨以外)","・","高潮","警報"))},{box:"contents-level30",boxText:"！",text:getYokokuText(TR.tr("警報","(高潮以外)"))}])}legends2=legends2.concat([{text:"　*1 "+getYokokuText(TR.tr("高潮","警報"))},{text:"　*2 "+TR.tr("上記以外の高潮注意報")}]);if(mode==="map"){return $("<div>").append(ContentsCommon.makeLegend(legends1.concat(legends2)))}return $("<div>").append([$("<div>").css("display","inline-block").css("vertical-align","top").append(ContentsCommon.makeLegend(legends1)),$("<div>").css("display","inline-block").css("vertical-align","top").append(ContentsCommon.makeLegend(legends2))]).css("overflow","auto")};var getYokokuText=function(text){return TR.select(text+"に切り替える可能性が高い","With a high probability of a subsequent "+text)};var getLegendElem=function(mode,isForecast){var legends=[];if(mode==="tide"){legends=legends.concat([{box:"contents-level40",text:TR.tr("特別警報","・","警報")},{box:"contents-level30",text:TR.tr("注意報","(*1)")},{box:"contents-level20",text:TR.tr("注意報","(*2)")},{text:"　*1 "+getYokokuText(TR.tr("高潮","警報"))},{text:"　*2 "+TR.tr("上記以外の高潮注意報")}])}else{if(mode==="inundation"||mode==="landslide"){legends.push({box:"contents-level50",text:TR.tr("特別警報")})}if(mode==="wind"||mode==="wind_snow"||mode==="snow"||mode==="wave"){legends.push({box:"contents-level40",text:TR.tr("特別警報")})}if(mode==="landslide"&&!isForecast){legends.push({box:"contents-level40",text:TR.tr("土砂災害警戒情報")})}if(mode==="inundation"||mode==="landslide"||mode==="flood"||mode==="wind"||mode==="wind_snow"||mode==="snow"||mode==="wave"){legends.push({box:"contents-level30",text:TR.tr("警報")})}legends.push({box:"contents-level20",text:TR.tr("注意報")})}if(isForecast){legends.push({box:"contents-missing",text:TR.tr("発表なし","<br>","予想期間外")})}else{legends.push({box:"contents-missing",text:TR.tr("発表なし")})}return ContentsCommon.makeLegend(legends)};var getLandslideCodes=function(officeCode){var landslideCodes=OFFICE_TO_LANDSLIDES[officeCode];if(landslideCodes)return landslideCodes;return[officeCode]};var getLatestTime=function(warningJson,landslideJson){var time=null;UC.each(warningJson,function(office){var t=new Date(office.reportDatetime);if(!time||t.getTime()>time.getTime()){time=t}});UC.each(landslideJson,function(office){var t;if(!office)return;t=new Date(office.reportDatetime);if(!time||t.getTime()>time.getTime()){time=t}});return time};var makeMessageDiv=function(message){return $("<div>").append(message).addClass("contents-message")};var getNoWarnings=function(){return TR.tr("警報・注意報は発表されていません")};var insert=function(tag,areaType,areaCode,_areaCode,options){switch(options.contentsName){case"warning_summary":Warning.Summary.insert(tag,areaType,areaCode,options);break;case"warning_time_series":Warning.TimeSeries.insert(tag,areaType,areaCode,options);break;default:console.error("不正なコンテンツ名: "+options.contentsName);break}};var WARNING_INFOS={33:{name1:"大雨",name2:"特別警報",elem:"rain",level:50},"03":{name1:"大雨",name2:"警報",elem:"rain",level:30},10:{name1:"大雨",name2:"注意報",elem:"rain",level:20},"04":{name1:"洪水",name2:"警報",elem:"flood",level:30},18:{name1:"洪水",name2:"注意報",elem:"flood",level:20},35:{name1:"暴風",name2:"特別警報",elem:"wind",level:40},"05":{name1:"暴風",name2:"警報",elem:"wind",level:30},15:{name1:"強風",name2:"注意報",elem:"wind",level:20},32:{name1:"暴風雪",name2:"特別警報",elem:"wind_snow",level:40},"02":{name1:"暴風雪",name2:"警報",elem:"wind_snow",level:30},13:{name1:"風雪",name2:"注意報",elem:"wind_snow",level:20},36:{name1:"大雪",name2:"特別警報",elem:"snow",level:40},"06":{name1:"大雪",name2:"警報",elem:"snow",level:30},12:{name1:"大雪",name2:"注意報",elem:"snow",level:20},37:{name1:"波浪",name2:"特別警報",elem:"wave",level:40},"07":{name1:"波浪",name2:"警報",elem:"wave",level:30},16:{name1:"波浪",name2:"注意報",elem:"wave",level:20},38:{name1:"高潮",name2:"特別警報",elem:"tide",level:40},"08":{name1:"高潮",name2:"警報",elem:"tide",level:40},19:{name1:"高潮",name2:"注意報",elem:"tide",level:20},"19+":{name1:"高潮",name2:"注意報",elem:"tide",level:30},14:{name1:"雷",name2:"注意報",elem:"thunder",level:20},17:{name1:"融雪",name2:"注意報",elem:"snow_melting",level:20},20:{name1:"濃霧",name2:"注意報",elem:"fog",level:20},21:{name1:"乾燥",name2:"注意報",elem:"dry",level:20},22:{name1:"なだれ",name2:"注意報",elem:"avalanche",level:20},23:{name1:"低温",name2:"注意報",elem:"cold",level:20},24:{name1:"霜",name2:"注意報",elem:"frost",level:20},25:{name1:"着氷",name2:"注意報",elem:"ice_accretion",level:20},26:{name1:"着雪",name2:"注意報",elem:"snow_accretion",level:20}};var OFFICE_TO_LANDSLIDES={"012000":["012010","012020"],"016000":["016100","016030"],460100:["460000"],460040:["460000"],map:["map"]};root.Warning=root.Warning||{};root.Warning.insert=insert;root.Warning.Common={getAreaTypeIndex:getAreaTypeIndex,getWarningLevel:getWarningLevel,getRainLevel:getRainLevel,getTimeSeriesLevel:getTimeSeriesLevel,getTimeSeriesContinueLevel:getTimeSeriesContinueLevel,getAreaName:getAreaName,getLegend:getLegend,getLandslideCodes:getLandslideCodes,getLatestTime:getLatestTime,makeMessageDiv:makeMessageDiv,getNoWarnings:getNoWarnings,WARNING_INFOS:WARNING_INFOS}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var UC=JMAWebUtility.common;var UD=JMAWebUtility.date;var TR=Warning.translator;var globals;var draw=function(hash,options,callback){JMAWebUtility.parallelRequest({warningJson:"warning/data/warning/map.json",landslideJson:"warning/data/landslide/map.json",landslideAreaJson:"common/const/landslide_area.json",explainHtml:"warning/const/explain.html"},function(data){callback(makeMap(data.warningJson,data.landslideJson,options.areas,data.landslideAreaJson,data.explainHtml,options.defaultSelector,options.optionList,options.contentsName,hash.elem))})};var makeMap=function(warningJson,landslideJson,areaJson,landslideAreaJson,explainHtml,defaultSelector,defaultOptionList,contentsName,initElem){var colors={};var mapData,latestTime;setWarningColors(colors,warningJson,landslideAreaJson);setLandslideColors(colors,landslideJson,landslideAreaJson);if(!colors.class10s[initElem])initElem="all";mapData=makeMapData(colors,initElem,areaJson,landslideAreaJson);latestTime=Warning.Common.getLatestTime(warningJson,landslideJson);globals={timeDefines:null,colors:colors,movieColors:null,elem:initElem,index:null,time:latestTime};return{data:mapData,infoTime:getInfoTime(latestTime),legend:Warning.Common.getLegend(getLegendMode(initElem))[0],contentsName:contentsName,selectorObject:defaultSelector?makeSelectorObject(colors,defaultSelector,initElem):null,optionList:defaultOptionList?makeOptionList(colors,defaultOptionList,initElem):null,contentsInfo:makeContentsInfo(latestTime,landslideAreaJson),explain:$("<div>").addClass("contents-explain").append($(explainHtml).filter(TR.select("div.warning-explain-map","div.warning-explain-map-en")))[0],defaultOpen:"legend"}};var getLegendMode=function(elem){if(elem==="all")return"map";return elem};var setWarningColors=function(colors,warningJson,landslideAreaJson){UC.each(warningJson,function(office){UC.each(["class10s","class20s"],function(areaType){var index=Warning.Common.getAreaTypeIndex(areaType);UC.each(office.areaTypes[index].areas,function(area){var allLevel=0;UC.each(area.warnings,function(warning){var elemCode,level,inundationLevel,landslideLevel;if(!warning.code)return;if(warning.status==="解除")return;elemCode=Warning.Common.WARNING_INFOS[warning.code].elem;if(elemCode!=="rain"){level=Warning.Common.getWarningLevel(warning);setColor(colors,areaType,elemCode,area.code,level,landslideAreaJson);if(level>allLevel)allLevel=level;return}inundationLevel=Warning.Common.getRainLevel(warning,"浸水");landslideLevel=Warning.Common.getRainLevel(warning,"土砂災害");if(inundationLevel>0){setColor(colors,areaType,"inundation",area.code,inundationLevel,landslideAreaJson)}if(landslideLevel>0){setColor(colors,areaType,"landslide",area.code,landslideLevel,landslideAreaJson)}if(inundationLevel>allLevel)allLevel=inundationLevel;if(landslideLevel>allLevel)allLevel=landslideLevel});setColor(colors,areaType,"all",area.code,allLevel,landslideAreaJson)})})})};var setLandslideColors=function(colors,landslideJson,landslideAreaJson){UC.each(landslideJson,function(office){UC.each(["class10s","landslides"],function(areaType){var index=Warning.Common.getAreaTypeIndex(areaType);UC.each(office.areaTypes[index].areas,function(area){if(area.warningCode!=="3")return;UC.each(["landslide","all"],function(elemCode){setColor(colors,areaType,elemCode,area.areaCode,40,landslideAreaJson)})})})})};var setColor=function(colors,areaType,elemCode,areaCode,level,landslideAreaJson){var areaCodes;if(level===0)return;if(areaType==="class20s"){areaType="landslides";areaCodes=landslideAreaJson.class20s[areaCode]?landslideAreaJson.class20s[areaCode].children:[areaCode]}else{areaCodes=[areaCode]}colors[areaType]=colors[areaType]||{};colors[areaType][elemCode]=colors[areaType][elemCode]||{};UC.each(areaCodes,function(code){if(level!=="missing"&&getLevel(colors,areaType,elemCode,code)>level)return;colors[areaType][elemCode][code]=LEVEL_TO_COLOR[level]})};var getLevel=function(colors,areaType,elemCode,areaCode){var color=colors[areaType][elemCode][areaCode];if(UC.invalid(color))return 0;return COLOR_TO_LEVEL[color]};var makeMapData=function(colors,initElem,areaJson,landslideAreaJson){return{class10sFill:{mapKey:"class10s",zindex:10,minZoom:4,maxZoom:7,plte:ContentsCommon.getMapPlte(CLASS_NAMES),colorData:colors.class10s[initElem],islandBold:true,permanent:true,options:ContentsCommon.getMapOptions("missing"),events:{click:function(e){if(e.target.feature.properties.code==="hoppo")return;clickCallback("class10s",e.target.feature.properties.code,areaJson)}}},landslidesFill:{mapKey:"landslides",zindex:10,minZoom:8,maxZoom:11,plte:ContentsCommon.getMapPlte(CLASS_NAMES),colorData:colors.landslides[initElem],permanent:true,options:ContentsCommon.getMapOptions("missing"),events:{click:function(e){if(e.target.feature.properties.code==="hoppo")return;clickCallback("landslides",e.target.feature.properties.code,landslideAreaJson)}}}}};var clickCallback=function(areaType,areaCode,areaJson){switch(areaType){case"class10s":areaType="offices";areaCode=areaJson.class10s[areaCode].parent;break;case"landslides":areaType="class20s";if(areaJson.landslides[areaCode]){areaCode=areaJson.landslides[areaCode].parent}break}document.location="warning/"+JMAWebUtility.hashController.hashString({area_type:areaType,area_code:areaCode,lang:TR.getLang()})};var getInfoTime=function(time){return UD.strftime(time,TR.tr("%Y年%m月%d日%H時%M分発表"))};var makeSelectorObject=function(colors,defaultSelector,initElem){var elemCodes=Object.keys(colors.class10s);var selectors=[];UC.each(defaultSelector[0].values,function(selector){if(!UC.contains(elemCodes,selector.value))return;selector.selected=selector.value===initElem;selectors.push(selector)});return[{key:"elem",values:selectors}]};var makeOptionList=function(colors,defaultOptionList,initElem){var elemCodes=Object.keys(colors.class10s);var optionList=[];UC.each(defaultOptionList,function(option){if(!UC.contains(elemCodes,option.key))return;option.selected=option.key===initElem;optionList.push(option)});return optionList};var makeContentsInfo=function(time,landslideAreaJson){var radioButtons=ContentsCommon.makeRadioButtons([{type:"now",text:TR.select("現在","Now"),default:true},{type:"forecast",text:TR.select("予想","Forecast")}],function(mode){changeMode(mode,time,landslideAreaJson)});var button=ContentsCommon.makeLink(TR.select("全国一覧","Table"),function(){document.location="warning/#lang="+TR.getLang()});button.css("margin-left","10px");return $("<div>").append(radioButtons).append(button)[0]};var changeMode=function(mode,time,landslideAreaJson){if(mode==="forecast"){if(globals.movieColors){startMovie(globals.timeDefines,globals.movieColors,globals.elem,time);globals.index=0}else{$.getJSON("warning/data/warning/movie.json",function(movieJson){var timeDefines=getTimeDefines(movieJson,time);var colors=[];setMovieColors(colors,timeDefines,movieJson,landslideAreaJson);setMovieWhiteColors(colors);startMovie(timeDefines,colors,globals.elem,time);globals.timeDefines=timeDefines;globals.movieColors=colors;globals.index=0})}}else{endMovie(globals.colors,time,globals.elem);globals.index=null}};var getTimeDefines=function(movieJson,time){var timeDefines={startTimes:{},timeTypes:{}};var hours=UD.getHours(time);hours-=hours%3;timeDefines.startTimes["3h"]=UD.create(UD.getFullYear(time),UD.getMonth(time),UD.getDate(time),hours);timeDefines.startTimes["1d"]=UD.create(UD.getFullYear(time),UD.getMonth(time),UD.getDate(time));UC.each(movieJson,function(office){UC.each(office.timeSeries,function(timeSeries){UC.each(timeSeries.areaTypes,function(areaType){UC.each(areaType.areas,function(area){UC.each(area.warnings,function(warning){var elemCode=Warning.Common.WARNING_INFOS[warning.code].elem;var timeType=getTimeType(timeSeries.timeDefines.length);if(elemCode==="rain"){setTimeType(timeDefines.timeTypes,"inundation",timeType);setTimeType(timeDefines.timeTypes,"landslide",timeType)}else{setTimeType(timeDefines.timeTypes,elemCode,timeType)}setTimeType(timeDefines.timeTypes,"all",timeType)})})})})});return timeDefines};var setTimeType=function(timeTypes,elemCode,timeType){if(!timeTypes[elemCode]||timeType==="3h"){timeTypes[elemCode]=timeType}};var setMovieColors=function(colors,timeDefines,movieJson,landslideAreaJson){UC.each(movieJson,function(office){UC.each(office.timeSeries,function(timeSeries){var dataTimeType=getTimeType(timeSeries.timeDefines.length);var dataStartTime=new Date(timeSeries.timeDefines[0]);UC.each(timeSeries.areaTypes,function(areaType,areaTypeIndex){var areaTypeName=areaTypeIndex===0?"class10s":"class20s";UC.each(areaType.areas,function(area){UC.each(area.warnings,function(warning){UC.each(warning.levels,function(level){var elemCode=Warning.Common.WARNING_INFOS[warning.code].elem;var continueLevel;if(level.type==="土砂災害危険度"){elemCode="landslide"}else if(level.type==="浸水害危険度"){elemCode="inundation"}continueLevel=getContinueLevel(warning.continueLevels,level.type,elemCode);UC.each([elemCode,"all"],function(targetCode){setMovieColorsForElem(colors,timeDefines,dataTimeType,dataStartTime,areaTypeName,area,level,elemCode,targetCode,continueLevel,landslideAreaJson)})})})})})})})};var setMovieColorsForElem=function(colors,timeDefines,dataTimeType,dataStartTime,areaTypeName,area,level,elemCode,targetCode,continueLevel,landslideAreaJson){var mapTimeType=timeDefines.timeTypes[targetCode];var mapStartTime=timeDefines.startTimes[mapTimeType];var tideLevel=function(){if(elemCode!=="tide")return null;return getTideLevel(areaTypeName,area.code,landslideAreaJson)}();UC.each(level.localAreas,function(local){UC.times(getTimeSize(mapTimeType),function(mapIndex){var valueIndex=getValueIndex(dataTimeType,dataStartTime,mapTimeType,mapStartTime,mapIndex);var lv=function(){if(valueIndex<0)return continueLevel;return Warning.Common.getTimeSeriesLevel(local.values,valueIndex,elemCode,tideLevel)}();if(lv===null)return;if(lv===0)return;colors[mapIndex]=colors[mapIndex]||{};setColor(colors[mapIndex],areaTypeName,targetCode,area.code,lv,landslideAreaJson)})})};var getTideLevel=function(areaType,areaCode,landslideAreaJson){if(areaType==="class20s"){areaType="landslides";if(landslideAreaJson.class20s[areaCode]){areaCode=landslideAreaJson.class20s[areaCode].children[0]}}if(!globals.colors[areaType].tide)return 0;if(!globals.colors[areaType].tide[areaCode])return 0;return COLOR_TO_LEVEL[globals.colors[areaType].tide[areaCode]]};var getContinueLevel=function(levels,type,elemCode){var continueLevel=0;UC.each(levels,function(level){if(level.type!==type)return;UC.each(level.localAreas,function(local){var lv=Warning.Common.getTimeSeriesContinueLevel(local.value,elemCode);if(lv>continueLevel)continueLevel=lv})});return continueLevel};var getValueIndex=function(valueTimeType,valueStartTime,mapTimeType,mapStartTime,mapIndex){var offset,valueIndex,mapTime,valueTime;if(valueTimeType==="3h"&&mapTimeType==="3h"){offset=(mapStartTime.getTime()-valueStartTime.getTime())/1e3/3600/3;valueIndex=mapIndex+offset}else if(valueTimeType==="1d"&&mapTimeType==="1d"){offset=(mapStartTime.getTime()-valueStartTime.getTime())/1e3/3600/24;valueIndex=mapIndex+offset}else if(valueTimeType==="1d"&&mapTimeType==="3h"){mapTime=new Date(mapStartTime.getTime()+1e3*3600*3*mapIndex);valueTime=UD.create(UD.getFullYear(mapTime),UD.getMonth(mapTime),UD.getDate(mapTime));valueIndex=(valueTime.getTime()-valueStartTime.getTime())/1e3/3600/24}if(valueIndex<0||valueIndex>=getTimeSize(valueTimeType)){valueIndex=-1}return valueIndex};var setMovieWhiteColors=function(colors){UC.each(UC.range(8,0,-1),function(index){UC.each(colors[index],function(areaType,elems){UC.each(elems,function(elemCode,areas){UC.each(areas,function(areaCode){UC.each(UC.range(index-1,0,-1),function(i){if(colors[i][areaType][elemCode]===undefined){colors[i][areaType][elemCode]={}}if(colors[i][areaType][elemCode][areaCode]===undefined){colors[i][areaType][elemCode][areaCode]=LEVEL_TO_COLOR[0]}})})})})})};var startMovie=function(timeDefines,colors,elem,time){UnitMap.makePage({data:getMapData(colors,elem,0),infoTime:getMovieInfoTime(time,timeDefines,elem,0),legend:Warning.Common.getLegend(getLegendMode(elem),true)[0],movieConfig:{slider:getSlider(timeDefines,elem),interval:1e3,startPosition:0},defaultOpen:"legend"})};var endMovie=function(colors,time,elem){UnitMap.makePage({data:getMapData(colors,elem,null),infoTime:getInfoTime(time),legend:Warning.Common.getLegend(getLegendMode(elem))[0],movieConfig:{},defaultOpen:"legend"})};var rapidRequest=function(index,callback){globals.index=index;callback({data:getMapData(globals.movieColors,globals.elem,index),infoTime:getMovieInfoTime(globals.time,globals.timeDefines,globals.elem,index)})};var movieStart=function(callback){var size=getTimeSize(globals.timeDefines.timeTypes[globals.elem]);var maps=[];UC.times(size,function(index){maps.push({data:getMapData(globals.movieColors,globals.elem,index),infoTime:getMovieInfoTime(globals.time,globals.timeDefines,globals.elem,index)})});callback(maps)};var changeMap=function(hash,_options,callback){var elem=hash.elem;var mapStatus,timeTypes,index;if(globals.index===null){callback({data:getMapData(globals.colors,elem,null),legend:Warning.Common.getLegend(getLegendMode(elem))[0],defaultOpen:"legend"});globals.elem=elem}else{mapStatus=UnitMap.getStatus();globals.index=mapStatus.sliderIndex;timeTypes=globals.timeDefines.timeTypes;if(timeTypes[elem]===timeTypes[globals.elem]){index=globals.index}else{index=0}var movieConfig={slider:getSlider(globals.timeDefines,elem),interval:1e3,startPosition:index};callback({data:getMapData(globals.movieColors,elem,index),infoTime:getMovieInfoTime(globals.time,globals.timeDefines,elem,index),legend:Warning.Common.getLegend(getLegendMode(elem),true)[0],movieConfig:movieConfig,defaultOpen:"legend"});globals.elem=elem;globals.index=index}};var getMapData=function(colors,elem,index){var cs=index===null?colors:colors[index];return{class10sFill:{options:ContentsCommon.getMapOptions("missing"),colorData:cs&&cs.class10s&&cs.class10s[elem]?cs.class10s[elem]:[]},landslidesFill:{options:ContentsCommon.getMapOptions("missing"),colorData:cs&&cs.landslides&&cs.landslides[elem]?cs.landslides[elem]:[]}}};var getMovieInfoTime=function(time,timeDefines,elem,index){var timeType=timeDefines.timeTypes[elem];var startTime=timeDefines.startTimes[timeType];var timeStep=getTimeStep(timeType);var fromTime=new Date(startTime.getTime()+timeStep*index);var toTime=new Date(startTime.getTime()+timeStep*(index+1));var toHour=UD.strftime(toTime,"%H");if(toHour==="00")toHour="24";return UD.strftime(time,TR.tr("%Y年%m月%d日%H時%M分発表"))+"<br>"+TR.select(UD.strftime(fromTime,"%d日%H-")+toHour+"時の予想","Forecast for "+UD.strftime(fromTime,"%m/%d %H-")+toHour+" JST")};var getSlider=function(timeDefines,elem){var timeType=timeDefines.timeTypes[elem];var startTime=timeDefines.startTimes[timeType];var timeSize=getTimeSize(timeType);if(timeType==="3h"){return UC.chain(UC.range(0,timeSize-1,1)).map(function(i){var fromTime=new Date(startTime.getTime()+1e3*3600*3*i);var toTime=new Date(startTime.getTime()+1e3*3600*3*(i+1));var toHour=UD.strftime(toTime,"%H");if(toHour==="00")toHour="24";return $("<div>").html(TR.select(UD.strftime(fromTime,"%d日<br>%H-")+toHour+"時",UD.strftime(fromTime,"%m/%d<br>%H-")+toHour)).addClass("warning-map-slider")[0]}).value()}return UC.chain(UC.range(0,timeSize-1,1)).map(function(i){var day=new Date(startTime.getTime()+1e3*3600*24*i);return $("<div>").html(TR.select(UD.strftime(day,"%d日"),UD.strftime(day,"%m/%d"))).addClass("warning-map-slider")[0]}).value()};var getTimeType=function(length){return length===9?"3h":"1d"};var getTimeSize=function(timeType){return timeType==="3h"?9:3};var getTimeStep=function(timeType){return timeType==="3h"?1e3*3600*3:1e3*3600*24};var getLevelToColor=function(classNames){var levelToColor={};UC.each(classNames,function(className,color){var level=className==="missing"?"missing":parseInt(className.replace("level",""),10);levelToColor[level]=color});return levelToColor};var CLASS_NAMES=["missing","level0","level20","level25","level30","level40","level50"];var COLOR_TO_LEVEL=UC.map(CLASS_NAMES,function(className){return className==="missing"?"missing":parseInt(className.replace("level",""),10)});var LEVEL_TO_COLOR=getLevelToColor(CLASS_NAMES);root.Warning=root.Warning||{};root.Warning.draw=draw;root.Warning.changeMap=changeMap;root.Warning.rapidRequest=rapidRequest;root.Warning.movieStart=movieStart})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var UC=JMAWebUtility.common;var UD=JMAWebUtility.date;var globals;var draw=function(hash,options,callback){JMAWebUtility.parallelRequest({warningLevelJson:"warning_level/data/warning_level.json",warningJson:"warning/data/warning/map.json",landslideAreaJson:"common/const/landslide_area.json",explainHtml:"warning_level/const/explain.html"},function(data){callback(makeMap(data.warningLevelJson,data.warningJson,options.areas,data.landslideAreaJson,hash.elem,options.contentsName,data.explainHtml))})};var makeMap=function(warningLevelJson,warningJson,areaJson,landslideAreaJson,elem,contentsName,explainHtml){var mapData,time;var colors={class10s:{},landslides:{}};setColors(colors,warningLevelJson,landslideAreaJson);setWarningColors(colors,warningJson,landslideAreaJson);mapData=makeMapData(colors,elem,areaJson,landslideAreaJson);time=new Date(warningLevelJson.reportDatetime);globals={colors:colors};return{data:mapData,infoTime:getInfoTime(time),legend:getLegend(elem)[0],contentsName:contentsName,explain:$("<div>").addClass("contents-explain").append(explainHtml)[0],defaultOpen:"legend"}};var setColors=function(colors,warningLevelJson,landslideAreaJson){UC.each(["class10s","class20s"],function(areaType){var index=Warning.Common.getAreaTypeIndex(areaType);UC.each(warningLevelJson.areaTypes[index].areas,function(area){UC.each(["landslide","inundation","flood"],function(elemCode){switch(elemCode){case"landslide":if(landslideAreaJson.class20s[area.code])return;if(landslideAreaJson.landslides[area.code]){areaType="landslides"}break;default:if(landslideAreaJson.landslides[area.code])return;break}var level=parseInt(area[elemCode],10);level-=level%10;level=function(){if(level===50)return 45;if(level===10)return 0;if(level===0)return null;return level}();UC.each([elemCode,"all"],function(code){setColor(colors,areaType,code,area.code,level,landslideAreaJson)})})})})};var setWarningColors=function(colors,warningJson,landslideAreaJson){UC.each(warningJson,function(office){UC.each(["class10s","class20s"],function(areaType){var index=Warning.Common.getAreaTypeIndex(areaType);UC.each(office.areaTypes[index].areas,function(area){UC.each(area.warnings,function(warning){if(!warning.code)return;if(warning.status==="解除")return;var elemCode=Warning.Common.WARNING_INFOS[warning.code].elem;if(elemCode!=="rain")return;var inundationLevel=Warning.Common.getRainLevel(warning,"浸水");var landslideLevel=Warning.Common.getRainLevel(warning,"土砂災害");if(inundationLevel===50){UC.each(["inundation","all"],function(code){setColor(colors,areaType,code,area.code,inundationLevel,landslideAreaJson)})}if(landslideLevel===50){UC.each(["landslide","all"],function(code){setColor(colors,areaType,code,area.code,landslideLevel,landslideAreaJson)})}})})})})};var setColor=function(colors,areaType,elemCode,areaCode,level,landslideAreaJson){var areaCodes;if(level===null)return;if(areaType==="class20s"){areaType="landslides";areaCodes=landslideAreaJson.class20s[areaCode]?landslideAreaJson.class20s[areaCode].children:[areaCode]}else{areaCodes=[areaCode]}colors[areaType]=colors[areaType]||{};colors[areaType][elemCode]=colors[areaType][elemCode]||{};UC.each(areaCodes,function(code){if(getLevel(colors,areaType,elemCode,code)>level)return;colors[areaType][elemCode][code]=LEVEL_TO_COLOR[level]})};var getLevel=function(colors,areaType,elemCode,areaCode){var color=colors[areaType][elemCode][areaCode];if(UC.invalid(color))return 0;return COLOR_TO_LEVEL[color]};var makeMapData=function(colors,initElem,areaJson,landslideAreaJson){return{class10sFill:{mapKey:"class10s",zindex:10,minZoom:4,maxZoom:7,plte:ContentsCommon.getMapPlte(CLASS_NAMES),colorData:colors.class10s[initElem],islandBold:true,permanent:true,options:ContentsCommon.getMapOptions("missing"),events:{click:function(e){if(e.target.feature.properties.code==="hoppo")return;clickCallback("class10s",e.target.feature.properties.code,areaJson)}}},landslidesFill:{mapKey:"landslides",zindex:10,minZoom:8,maxZoom:11,plte:ContentsCommon.getMapPlte(CLASS_NAMES),colorData:colors.landslides[initElem],permanent:true,options:ContentsCommon.getMapOptions("missing"),events:{click:function(e){if(e.target.feature.properties.code==="hoppo")return;clickCallback("landslides",e.target.feature.properties.code,landslideAreaJson)}}}}};var clickCallback=function(areaType,areaCode,areaJson){switch(areaType){case"class10s":areaType="offices";areaCode=areaJson.class10s[areaCode].parent;break;case"landslides":areaType="class20s";if(areaJson.landslides[areaCode]){areaCode=areaJson.landslides[areaCode].parent}break}document.location="./"+JMAWebUtility.hashController.hashString({pattern:"rain_level",area_type:areaType,area_code:areaCode})};var getInfoTime=function(time){return UD.strftime(time,"%Y年%m月%d日%H時%M分発表")};var getLegend=function(mode){var legends=[];if(mode!=="flood"){legends.push({box:"contents-level50",text:"大雨特別警報"})}legends=legends.concat([{box:"contents-level45",text:"災害発生のおそれ"},{box:"contents-level40",text:"警戒レベル４（避難）相当"},{box:"contents-level30",text:"警戒レベル３（高齢者等避難）相当"},{box:"contents-level20",text:"警戒レベル２（避難行動の確認）"},{box:"contents-level0",text:"警戒レベル１（心構えを高める）"},{box:"contents-missing",text:"今後の情報等に留意"}]);return ContentsCommon.makeLegend(legends)};var changeMap=function(hash,_options,callback){callback({data:{class10sFill:{colorData:globals.colors.class10s[hash.elem]},landslidesFill:{colorData:globals.colors.landslides[hash.elem]}},legend:getLegend(hash.elem)[0],defaultOpen:"legend"})};var COLOR_TO_LEVEL=[0,20,30,40,45,50];var CLASS_NAMES=UC.map(COLOR_TO_LEVEL,function(level){return"level"+level});var LEVEL_TO_COLOR=UC.chain(COLOR_TO_LEVEL).map(function(level,color){return[level,color]}).toHash().value();root.WarningLevel=root.WarningLevel||{};root.WarningLevel.draw=draw;root.WarningLevel.changeMap=changeMap})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var DICTIONARY={"天気予報":"Daily Forecasts","降水確率":"Probability of precipitation","気温":"Temp.","今日":"Today","今夜":"Tonight","明日":"Tomorrow","明後日":"The day after tomorrow","最高":"Max.","最低":"Min.","最高気温":"Maximum temperature","最低気温":"Minimum temperature","信頼度":"Reliability","%d日(%W)":"%d(%EW)","釧路":"Kushiro","旭川":"Asahikawa","札幌":"Sapporo","青森":"Aomori","秋田":"Akita","仙台":"Sendai","新潟":"Niigata","金沢":"Kanazawa","東京":"Tokyo","宇都宮":"Utsunomiya","長野":"Nagano","名古屋":"Nagoya","大阪":"Osaka","高松":"Takamatsu","松江":"Matsue","広島":"Hiroshima","高知":"Kochi","福岡":"Fukuoka","鹿児島":"Kagoshima","奄美":"Amami","那覇":"Naha","石垣":"Ishigaki"};root.Forecast=root.Forecast||{};root.Forecast.translator=new Translator(DICTIONARY)})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var ud=util.date;var uc=util.common;var TR=Forecast.translator;var getPathCode=function(officeCode){if(officeCode==="014030")return"014100";if(officeCode==="460040")return"460100";return officeCode};var isAnniversary=function(anniversary,time){var year=ud.getFullYear(time);var month=ud.getMonth(time);var date=ud.getDate(time);return uc.find(anniversary,function(aniv){var anivTime=new Date(aniv);return year===ud.getFullYear(anivTime)&&month===ud.getMonth(anivTime)&&date===ud.getDate(anivTime)})};var getClass10Name=function(areaJson,class10Code){var title="";var officeCode=areaJson.class10s[class10Code].parent;if(!uc.contains(NO_TITLE_OFFICE_CODES,officeCode)){title+=TR.areaName(areaJson,"offices",officeCode)}title+=TR.space()+TR.areaName(areaJson,"class10s",class10Code);return title};var NO_TITLE_OFFICE_CODES=["011000","012000","013000","014030","014100","015000","016000","017000","130000","270000","370000","460040","471000","472000","473000","474000"];root.Forecast=root.Forecast||{};root.Forecast.Common={getPathCode:getPathCode,isAnniversary:isAnniversary,getClass10Name:getClass10Name,NO_TITLE_OFFICE_CODES:NO_TITLE_OFFICE_CODES}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var Const={};Const.TELOPS={100:["100.svg","500.svg","100","晴","CLEAR"],101:["101.svg","501.svg","100","晴時々曇","PARTLY CLOUDY"],102:["102.svg","502.svg","300","晴一時雨","CLEAR, OCCASIONAL SCATTERED SHOWERS"],103:["102.svg","502.svg","300","晴時々雨","CLEAR, FREQUENT SCATTERED SHOWERS"],104:["104.svg","504.svg","400","晴一時雪","CLEAR, SNOW FLURRIES"],105:["104.svg","504.svg","400","晴時々雪","CLEAR, FREQUENT SNOW FLURRIES"],106:["102.svg","502.svg","300","晴一時雨か雪","CLEAR, OCCASIONAL SCATTERED SHOWERS OR SNOW FLURRIES"],107:["102.svg","502.svg","300","晴時々雨か雪","CLEAR, FREQUENT SCATTERED SHOWERS OR SNOW FLURRIES"],108:["102.svg","502.svg","300","晴一時雨か雷雨","CLEAR, OCCASIONAL SCATTERED SHOWERS AND/OR THUNDER"],110:["110.svg","510.svg","100","晴後時々曇","CLEAR, PARTLY CLOUDY LATER"],111:["110.svg","510.svg","100","晴後曇","CLEAR, CLOUDY LATER"],112:["112.svg","512.svg","300","晴後一時雨","CLEAR, OCCASIONAL SCATTERED SHOWERS LATER"],113:["112.svg","512.svg","300","晴後時々雨","CLEAR, FREQUENT SCATTERED SHOWERS LATER"],114:["112.svg","512.svg","300","晴後雨","CLEAR,RAIN LATER"],115:["115.svg","515.svg","400","晴後一時雪","CLEAR, OCCASIONAL SNOW FLURRIES LATER"],116:["115.svg","515.svg","400","晴後時々雪","CLEAR, FREQUENT SNOW FLURRIES LATER"],117:["115.svg","515.svg","400","晴後雪","CLEAR,SNOW LATER"],118:["112.svg","512.svg","300","晴後雨か雪","CLEAR, RAIN OR SNOW LATER"],119:["112.svg","512.svg","300","晴後雨か雷雨","CLEAR, RAIN AND/OR THUNDER LATER"],120:["102.svg","502.svg","300","晴朝夕一時雨","OCCASIONAL SCATTERED SHOWERS IN THE MORNING AND EVENING, CLEAR DURING THE DAY"],121:["102.svg","502.svg","300","晴朝の内一時雨","OCCASIONAL SCATTERED SHOWERS IN THE MORNING, CLEAR DURING THE DAY"],122:["112.svg","512.svg","300","晴夕方一時雨","CLEAR, OCCASIONAL SCATTERED SHOWERS IN THE EVENING"],123:["100.svg","500.svg","100","晴山沿い雷雨","CLEAR IN THE PLAINS, RAIN AND THUNDER NEAR MOUTAINOUS AREAS"],124:["100.svg","500.svg","100","晴山沿い雪","CLEAR IN THE PLAINS, SNOW NEAR MOUTAINOUS AREAS"],125:["112.svg","512.svg","300","晴午後は雷雨","CLEAR, RAIN AND THUNDER IN THE AFTERNOON"],126:["112.svg","512.svg","300","晴昼頃から雨","CLEAR, RAIN IN THE AFTERNOON"],127:["112.svg","512.svg","300","晴夕方から雨","CLEAR, RAIN IN THE EVENING"],128:["112.svg","512.svg","300","晴夜は雨","CLEAR, RAIN IN THE NIGHT"],130:["100.svg","500.svg","100","朝の内霧後晴","FOG IN THE MORNING, CLEAR LATER"],131:["100.svg","500.svg","100","晴明け方霧","FOG AROUND DAWN, CLEAR LATER"],132:["101.svg","501.svg","100","晴朝夕曇","CLOUDY IN THE MORNING AND EVENING, CLEAR DURING THE DAY"],140:["102.svg","502.svg","300","晴時々雨で雷を伴う","CLEAR, FREQUENT SCATTERED SHOWERS AND THUNDER"],160:["104.svg","504.svg","400","晴一時雪か雨","CLEAR, SNOW FLURRIES OR OCCASIONAL SCATTERED SHOWERS"],170:["104.svg","504.svg","400","晴時々雪か雨","CLEAR, FREQUENT SNOW FLURRIES OR SCATTERED SHOWERS"],181:["115.svg","515.svg","400","晴後雪か雨","CLEAR, SNOW OR RAIN LATER"],200:["200.svg","200.svg","200","曇","CLOUDY"],201:["201.svg","601.svg","200","曇時々晴","MOSTLY CLOUDY"],202:["202.svg","202.svg","300","曇一時雨","CLOUDY, OCCASIONAL SCATTERED SHOWERS"],203:["202.svg","202.svg","300","曇時々雨","CLOUDY, FREQUENT SCATTERED SHOWERS"],204:["204.svg","204.svg","400","曇一時雪","CLOUDY, OCCASIONAL SNOW FLURRIES"],205:["204.svg","204.svg","400","曇時々雪","CLOUDY FREQUENT SNOW FLURRIES"],206:["202.svg","202.svg","300","曇一時雨か雪","CLOUDY, OCCASIONAL SCATTERED SHOWERS OR SNOW FLURRIES"],207:["202.svg","202.svg","300","曇時々雨か雪","CLOUDY, FREQUENT SCCATERED SHOWERS OR SNOW FLURRIES"],208:["202.svg","202.svg","300","曇一時雨か雷雨","CLOUDY, OCCASIONAL SCATTERED SHOWERS AND/OR THUNDER"],209:["200.svg","200.svg","200","霧","FOG"],210:["210.svg","610.svg","200","曇後時々晴","CLOUDY, PARTLY CLOUDY LATER"],211:["210.svg","610.svg","200","曇後晴","CLOUDY, CLEAR LATER"],212:["212.svg","212.svg","300","曇後一時雨","CLOUDY, OCCASIONAL SCATTERED SHOWERS LATER"],213:["212.svg","212.svg","300","曇後時々雨","CLOUDY, FREQUENT SCATTERED SHOWERS LATER"],214:["212.svg","212.svg","300","曇後雨","CLOUDY, RAIN LATER"],215:["215.svg","215.svg","400","曇後一時雪","CLOUDY, SNOW FLURRIES LATER"],216:["215.svg","215.svg","400","曇後時々雪","CLOUDY, FREQUENT SNOW FLURRIES LATER"],217:["215.svg","215.svg","400","曇後雪","CLOUDY, SNOW LATER"],218:["212.svg","212.svg","300","曇後雨か雪","CLOUDY, RAIN OR SNOW LATER"],219:["212.svg","212.svg","300","曇後雨か雷雨","CLOUDY, RAIN AND/OR THUNDER LATER"],220:["202.svg","202.svg","300","曇朝夕一時雨","OCCASIONAL SCCATERED SHOWERS IN THE MORNING AND EVENING, CLOUDY DURING THE DAY"],221:["202.svg","202.svg","300","曇朝の内一時雨","CLOUDY OCCASIONAL SCCATERED SHOWERS IN THE MORNING"],222:["212.svg","212.svg","300","曇夕方一時雨","CLOUDY, OCCASIONAL SCCATERED SHOWERS IN THE EVENING"],223:["201.svg","601.svg","200","曇日中時々晴","CLOUDY IN THE MORNING AND EVENING, PARTLY CLOUDY DURING THE DAY,"],224:["212.svg","212.svg","300","曇昼頃から雨","CLOUDY, RAIN IN THE AFTERNOON"],225:["212.svg","212.svg","300","曇夕方から雨","CLOUDY, RAIN IN THE EVENING"],226:["212.svg","212.svg","300","曇夜は雨","CLOUDY, RAIN IN THE NIGHT"],228:["215.svg","215.svg","400","曇昼頃から雪","CLOUDY, SNOW IN THE AFTERNOON"],229:["215.svg","215.svg","400","曇夕方から雪","CLOUDY, SNOW IN THE EVENING"],230:["215.svg","215.svg","400","曇夜は雪","CLOUDY, SNOW IN THE NIGHT"],231:["200.svg","200.svg","200","曇海上海岸は霧か霧雨","CLOUDY, FOG OR DRIZZLING ON THE SEA AND NEAR SEASHORE"],240:["202.svg","202.svg","300","曇時々雨で雷を伴う","CLOUDY, FREQUENT SCCATERED SHOWERS AND THUNDER"],250:["204.svg","204.svg","400","曇時々雪で雷を伴う","CLOUDY, FREQUENT SNOW AND THUNDER"],260:["204.svg","204.svg","400","曇一時雪か雨","CLOUDY, SNOW FLURRIES OR OCCASIONAL SCATTERED SHOWERS"],270:["204.svg","204.svg","400","曇時々雪か雨","CLOUDY, FREQUENT SNOW FLURRIES OR SCATTERED SHOWERS"],281:["215.svg","215.svg","400","曇後雪か雨","CLOUDY, SNOW OR RAIN LATER"],300:["300.svg","300.svg","300","雨","RAIN"],301:["301.svg","701.svg","300","雨時々晴","RAIN, PARTLY CLOUDY"],302:["302.svg","302.svg","300","雨時々止む","SHOWERS THROUGHOUT THE DAY"],303:["303.svg","303.svg","400","雨時々雪","RAIN,FREQUENT SNOW FLURRIES"],304:["300.svg","300.svg","300","雨か雪","RAINORSNOW"],306:["300.svg","300.svg","300","大雨","HEAVYRAIN"],308:["308.svg","308.svg","300","雨で暴風を伴う","RAINSTORM"],309:["303.svg","303.svg","400","雨一時雪","RAIN,OCCASIONAL SNOW"],311:["311.svg","711.svg","300","雨後晴","RAIN,CLEAR LATER"],313:["313.svg","313.svg","300","雨後曇","RAIN,CLOUDY LATER"],314:["314.svg","314.svg","400","雨後時々雪","RAIN, FREQUENT SNOW FLURRIES LATER"],315:["314.svg","314.svg","400","雨後雪","RAIN,SNOW LATER"],316:["311.svg","711.svg","300","雨か雪後晴","RAIN OR SNOW, CLEAR LATER"],317:["313.svg","313.svg","300","雨か雪後曇","RAIN OR SNOW, CLOUDY LATER"],320:["311.svg","711.svg","300","朝の内雨後晴","RAIN IN THE MORNING, CLEAR LATER"],321:["313.svg","313.svg","300","朝の内雨後曇","RAIN IN THE MORNING, CLOUDY LATER"],322:["303.svg","303.svg","400","雨朝晩一時雪","OCCASIONAL SNOW IN THE MORNING AND EVENING, RAIN DURING THE DAY"],323:["311.svg","711.svg","300","雨昼頃から晴","RAIN, CLEAR IN THE AFTERNOON"],324:["311.svg","711.svg","300","雨夕方から晴","RAIN, CLEAR IN THE EVENING"],325:["311.svg","711.svg","300","雨夜は晴","RAIN, CLEAR IN THE NIGHT"],326:["314.svg","314.svg","400","雨夕方から雪","RAIN, SNOW IN THE EVENING"],327:["314.svg","314.svg","400","雨夜は雪","RAIN,SNOW IN THE NIGHT"],328:["300.svg","300.svg","300","雨一時強く降る","RAIN, EXPECT OCCASIONAL HEAVY RAINFALL"],329:["300.svg","300.svg","300","雨一時みぞれ","RAIN, OCCASIONAL SLEET"],340:["400.svg","400.svg","400","雪か雨","SNOWORRAIN"],350:["300.svg","300.svg","300","雨で雷を伴う","RAIN AND THUNDER"],361:["411.svg","811.svg","400","雪か雨後晴","SNOW OR RAIN, CLEAR LATER"],371:["413.svg","413.svg","400","雪か雨後曇","SNOW OR RAIN, CLOUDY LATER"],400:["400.svg","400.svg","400","雪","SNOW"],401:["401.svg","801.svg","400","雪時々晴","SNOW, FREQUENT CLEAR"],402:["402.svg","402.svg","400","雪時々止む","SNOWTHROUGHOUT THE DAY"],403:["403.svg","403.svg","400","雪時々雨","SNOW,FREQUENT SCCATERED SHOWERS"],405:["400.svg","400.svg","400","大雪","HEAVYSNOW"],406:["406.svg","406.svg","400","風雪強い","SNOWSTORM"],407:["406.svg","406.svg","400","暴風雪","HEAVYSNOWSTORM"],409:["403.svg","403.svg","400","雪一時雨","SNOW, OCCASIONAL SCCATERED SHOWERS"],411:["411.svg","811.svg","400","雪後晴","SNOW,CLEAR LATER"],413:["413.svg","413.svg","400","雪後曇","SNOW,CLOUDY LATER"],414:["414.svg","414.svg","400","雪後雨","SNOW,RAIN LATER"],420:["411.svg","811.svg","400","朝の内雪後晴","SNOW IN THE MORNING, CLEAR LATER"],421:["413.svg","413.svg","400","朝の内雪後曇","SNOW IN THE MORNING, CLOUDY LATER"],422:["414.svg","414.svg","400","雪昼頃から雨","SNOW, RAIN IN THE AFTERNOON"],423:["414.svg","414.svg","400","雪夕方から雨","SNOW, RAIN IN THE EVENING"],425:["400.svg","400.svg","400","雪一時強く降る","SNOW, EXPECT OCCASIONAL HEAVY SNOWFALL"],426:["400.svg","400.svg","400","雪後みぞれ","SNOW, SLEET LATER"],427:["400.svg","400.svg","400","雪一時みぞれ","SNOW, OCCASIONAL SLEET"],450:["400.svg","400.svg","400","雪で雷を伴う","SNOW AND THUNDER"]};Const.AREA_FUKEN=[{center:"016000",offices:["016000","011000","013000","014030","014100","015000","012000","017000"]},{center:"040000",offices:["040000","060000","070000","020000","050000","030000"]},{center:"130000",offices:["130000","120000","140000","190000","090000","100000","110000","080000","200000"]},{center:"150000",offices:["150000","170000","180000","160000"]},{center:"230000",offices:["230000","240000","220000","210000"]},{center:"270000",offices:["270000","300000","260000","250000","280000","290000"]},{center:"340000",offices:["340000","310000","330000","320000"]},{center:"370000",offices:["370000","380000","360000","390000"]},{center:"400000",offices:["400000","440000","410000","430000","420000","350000"]},{center:"460100",offices:["460100","450000","460040"]},{center:"471000",offices:["471000","473000","474000","472000"]}];Const.WEEK_AREAS={"011000":"Soya Region","012000":"Kamikawa Rumoi Region","013000":"Abashiri Kitami Mombetsu Region","014000":"Kushiro Nemuro Tokachi Region","014030":"Tokachi Region","014100":"Kushiro Nemuro Region","015000":"Iburi Hidaka Region","016000":"Ishikari Sorachi Shiribeshi Region","017000":"Oshima Hiyama Region","020000":"Aomori Prefecture","020010":"Tsugaru","020030":"Sanpachi Kamikita","020100":"Tsugaru Shimokita","020200":"Shimokita Sanpachi Kamikita","030000":"Iwate Prefecture","030010":"Inland","030100":"Coast","040000":"Miyagi Prefecture","040010":"Eastern Region","040020":"Western Region","050000":"Akita Prefecture","060000":"Yamagata Prefecture","070000":"Fukushima Prefecture","070030":"Aizu","070100":"Nakadori Hamadori","080000":"Ibaraki Prefecture","090000":"Tochigi Prefecture",1e5:"Gunma Prefecture",100010:"Southern Region",100020:"Northern Region",11e4:"Saitama Prefecture",12e4:"Chiba Prefecture",130010:"Tokyo Region",130020:"Northern Izu Islands",130030:"Southern Izu Islands",130040:"Ogasawara Islands",130100:"Izu Islands",14e4:"Kanagawa Prefecture",15e4:"Niigata Prefecture",16e4:"Toyama Prefecture",17e4:"Ishikawa Prefecture",18e4:"Fukui Prefecture",19e4:"Yamanashi Prefecture",2e5:"Nagano Prefecture",200010:"Northern Region",200100:"Central Region Southern Region",21e4:"Gifu Prefecture",210010:"Mino Region",210020:"Hida Region",22e4:"Shizuoka Prefecture",23e4:"Aichi Prefecture",24e4:"Mie Prefecture",25e4:"Shiga Prefecture",250010:"Southern Region",250020:"Northern Region",26e4:"Kyoto Prefecture",260010:"Southern Region",260020:"Northern Region",27e4:"Osaka Prefecture",28e4:"Hyogo Prefecture",280010:"Southern Region",280020:"Northern Region",29e4:"Nara Prefecture",3e5:"Wakayama Prefecture",31e4:"Tottori Prefecture",32e4:"Shimane Prefecture",33e4:"Okayama Prefecture",330010:"Southern Region",330020:"Northern Region",34e4:"Hiroshima Prefecture",340010:"Southern Region",340020:"Northern Region",35e4:"Yamaguchi Prefecture",36e4:"Tokushima Prefecture",37e4:"Kagawa Prefecture",38e4:"Ehime Prefecture",39e4:"Kochi Prefecture",4e5:"Fukuoka Prefecture",41e4:"Saga Prefecture",42e4:"Nagasaki Prefecture",420030:"Iki Tsushima",420100:"Southern Region<br>Northern Region<br>Goto",43e4:"Kumamoto Prefecture",44e4:"Oita Prefecture",45e4:"Miyazaki Prefecture",460040:"Amami Region",460100:"Kagoshima Prefecture",471e3:"Okinawa Main Island Region",472e3:"Daitojima Region",473e3:"Miyakojima Region",474e3:"Yaeyama Region"};root.Forecast=root.Forecast||{};root.Forecast.Const=Const})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var UA=JMAWebUtility.area;var UC=JMAWebUtility.common;var UD=JMAWebUtility.date;var TR=Forecast.translator;var globals;var make=function(forecastJson,forecastAreaJson,weekArea05Json,labelPosJson,areaJson,amedasTableJson,explain,currentIndex,contentsName,options){var time=getTime(forecastJson);var hour=getHour(time);var class10s=getClass10s(weekArea05Json);var forecasts=getForecasts(forecastJson,class10s,hour,areaJson);var pointNames=getPointNames(forecastJson);var mapData={};var panels,colors;options=options||{};mapData=makeMapData(forecastAreaJson);panels=makePanels(mapData,forecastAreaJson,labelPosJson,pointNames,areaJson,amedasTableJson,options.top);colors=UC.map(forecasts,function(forecast){return getColors(forecast,forecastAreaJson)});globals={time:time,panels:panels,colors:colors,panelMode:"on"};setPanel(forecasts[currentIndex],panels,currentIndex===0&&hour===17,areaJson);mapData.class10sFill.colorData=colors[currentIndex];return{data:mapData,infoTime:getInfoTime(time,currentIndex),legend:makeLegends()[0],contentsName:contentsName,movieConfig:{slider:makeSlider(time,hour),type:"table",startPosition:currentIndex,callback:function(index){setPanel(forecasts[index],panels,index===0&&hour===17,areaJson)}},optionList:makeOptionList(time,hour,currentIndex),contentsInfo:makeContentsInfo(),explain:$("<div>").addClass("contents-explain").append($(explain).filter("div.forecast-explain-map"+TR.select("","-en")))[0],defaultOpen:"legend"}};var makeContentsInfo=function(){var div=$("<div>");div.append($("<div>").text(TR.select("パネル","Panel")).addClass("forecast-map-radio-caption"));div.append(ContentsCommon.makeRadioButtons([{type:"on",text:TR.select("表示","Show"),default:true},{type:"off",text:TR.select("非表示","Hide")}],function(type){globals.panelMode=type;UC.each(globals.panels,function(panel){var display=function(){if(!panel.display)return"none";if(type==="off")return"none";return"table"}();panel.table.css("display",display)})}));ContentsCommon.makeLink(TR.select("全国一覧","Table"),function(){document.location="forecast/"+TR.select("","#lang="+TR.getLang())}).css("margin-left","10px").appendTo(div);return div[0]};var getInfoTime=function(time,currentIndex){var validTime=new Date(time);validTime.setDate(validTime.getDate()+currentIndex);return UD.strftime(time,TR.tr("%Y年%m月%d日%H時発表"))+"<br>"+UD.strftime(validTime,TR.select("%d日(%W)の予報","Forecast for %m/%d(%EW)"))};var getTime=function(forecastJson){return new Date(UC.max(forecastJson,function(office){return UC.max(office,function(forecast){return new Date(forecast.reportDatetime).getTime()})}))};var getHour=function(time){var hour=UD.getHours(time);if(hour<5)return 17;if(hour<11)return 5;if(hour<17)return 11;return 17};var getClass10s=function(weekArea05Json){var class10s={};UC.each(weekArea05Json,function(class10,class05s){UC.each(class05s,function(class05){class10s[class05]=class10s[class05]||[];class10s[class05].push(class10)})});return class10s};var getForecasts=function(forecastJson,class10s,hour,areaJson){var forecasts=[];UC.each(forecastJson,function(office){if(office[1].timeSeries){setLongForecast(forecasts,office[1].timeSeries,hour,class10s,areaJson)}if(office[0].timeSeries){setShortForecast(forecasts,office[0].timeSeries,hour,areaJson)}});return forecasts};var setLongForecast=function(forecasts,timeSeries,hour,class10s,areaJson){var offset=hour===5?0:1;UC.each(timeSeries[0].areas,function(area){UC.each(area.weatherCodes,function(weatherCode,i){setForecast(forecasts,i,class10s[area.area.code],"areaCode",area.area.code);setForecast(forecasts,i+offset,class10s[area.area.code],"areaName",getAreaName(area.area.name,class10s[area.area.code][0],areaJson));setForecast(forecasts,i+offset,class10s[area.area.code],"forecastType","long");setForecast(forecasts,i+offset,class10s[area.area.code],"weatherCode",weatherCode)});UC.each(area.pops,function(pop,i){setForecast(forecasts,i+offset,class10s[area.area.code],"pops",[pop])})});UC.each(timeSeries[1].areas,function(area){UC.each(area.tempsMin,function(minTemp,i){setForecast(forecasts,i+offset,[area.area.code],"minTemp",minTemp)});UC.each(area.tempsMax,function(maxTemp,i){setForecast(forecasts,i+offset,[area.area.code],"maxTemp",maxTemp)})})};var setShortForecast=function(forecasts,timeSeries,hour,areaJson){UC.each(timeSeries[0].areas,function(area){UC.each(area.weatherCodes,function(weatherCode,i){setForecast(forecasts,i,[area.area.code],"areaCode",area.area.code);setForecast(forecasts,i,[area.area.code],"areaName",getAreaName(area.area.name,area.area.code,areaJson));setForecast(forecasts,i,[area.area.code],"forecastType","short");setForecast(forecasts,i,[area.area.code],"weatherCode",weatherCode)})});UC.each(timeSeries[1].areas,function(area){var npop=area.pops.length;var pops=[];UC.times(8-npop,function(){pops.push("--")});pops=pops.concat(area.pops);setForecast(forecasts,0,[area.area.code],"pops",pops.slice(0,4));setForecast(forecasts,1,[area.area.code],"pops",pops.slice(4,8))});UC.each(timeSeries[2].areas,function(area){if(hour===17){setForecast(forecasts,1,[area.area.code],"minTemp",area.temps[0]);setForecast(forecasts,1,[area.area.code],"maxTemp",area.temps[1])}else{setForecast(forecasts,0,[area.area.code],"maxTemp",area.temps[0]);setForecast(forecasts,1,[area.area.code],"minTemp",area.temps[2]);setForecast(forecasts,1,[area.area.code],"maxTemp",area.temps[3])}})};var getAreaName=function(areaName,class10Code,areaJson){var officeCode=areaJson.class10s[class10Code].parent;var officeName=areaJson.offices[officeCode].name;if(areaName===officeName)return makeTitle(areaName);if(UC.contains(Forecast.Common.NO_TITLE_OFFICE_CODES,officeCode)){return makeTitle(areaName)}return makeTitle(officeName+areaName)};var setForecast=function(forecasts,i,areaCodes,keyName,value){UC.each(areaCodes,function(areaCode){forecasts[i]=forecasts[i]||{};forecasts[i][areaCode]=forecasts[i][areaCode]||{};forecasts[i][areaCode][keyName]=value})};var getPointNames=function(forecastJson){var pointNames={};UC.each(forecastJson,function(office){var areas=[].concat(office[1].timeSeries?office[1].timeSeries[1].areas:[],office[0].timeSeries?office[0].timeSeries[2].areas:[]);UC.each(areas,function(area){pointNames[area.area.code]=area.area.name})});return pointNames};var getColors=function(forecasts,forecastAreaJson){var colors={};UC.eachValue(forecastAreaJson,function(office){UC.each(office,function(class10){if(!forecasts[class10.class10])return;var className=Forecast.Const.TELOPS[forecasts[class10.class10].weatherCode][2];colors[class10.class10]=PLTE_TO_COLOR[className]})});colors["hoppo"]=colors["014010"];return colors};var makeMapData=function(forecastAreaJson){var class10ToClass20=UC.chain(forecastAreaJson).values().flatten().map(function(class10){return[class10.class10,class10.class20]}).toHash().value();return{class10sFill:{mapKey:"class10s",zindex:10,minZoom:4,maxZoom:10,plte:UC.map(PLTE_NAMES,function(name){return MAP_OPTIONS[name]}),islandBold:true,permanent:true,options:MAP_OPTIONS.missing,events:{click:function(e){if(e.target.feature.properties.code==="hoppo"){clickCallback("class20s","0122300");return}clickCallback("class20s",class10ToClass20[e.target.feature.properties.code])}}},class20sTransparent:{mapKey:"class20s",zindex:15,minZoom:8,maxZoom:10,permanent:true,options:MAP_OPTIONS.transparent,events:{click:function(e){if(e.target.feature.properties.code==="hoppo"){clickCallback("class20s","0122300");return}clickCallback("class20s",e.target.feature.properties.code)}}}}};var makePanels=function(mapData,forecastAreaJson,labelPosJson,pointNames,areaJson,amedasTableJson,top){var panels=[];var zooms=UC.range(top?8:5,10,1);UC.eachValue(forecastAreaJson,function(office){UC.each(office,function(class10){var tables={};UC.each(zooms,function(zoom){var offset=Forecast.OFFSETS[zoom]&&Forecast.OFFSETS[zoom][class10.class10];var panelType,cntlKey,gravity;if(!offset&&zoom>=9){offset=[0,0]}if(!offset)return;if(zoom<8){panelType="point"}else if(zoom===8){panelType="office"}else if(zoom>8){panelType="class10"}if(!tables[panelType]){var table=makePanel(class10,pointNames,areaJson,amedasTableJson,panelType);tables[panelType]=table;panels.push({areaCode:class10.class10,panelType:panelType,table:table,image:table.find("img"),title:table.find(".forecast-map-panel-title"),pop:table.find(".forecast-map-panel-pop"),temps:UC.map(table.find(".forecast-temp"),function(temp){return{code:$(temp).attr("data-area-code"),tr:$(temp),min:$($(temp).find(".forecast-min-temp")[0]),max:$($(temp).find(".forecast-max-temp")[0])}})})}cntlKey="panel-zoom"+zoom;gravity=labelPosJson[class10.class10].gravity;mapData[cntlKey]=mapData[cntlKey]||[];mapData[cntlKey].push({type:"dom",latlon:[gravity[1],gravity[0]],svgConfig:{domElement:tables[panelType][0],width:150,height:145},minZoom:zoom,maxZoom:zoom,zindex:30,positionShift:offset,permanent:true})})})});return panels};var makePanel=function(class10,pointNames,areaJson,amedasTableJson,panelType){var table=new SimpleTable;var panelTitle,td,codes,mouseX,mouseY,areaType,areaCode;table.appendRow();panelTitle=getPanelTitle(class10,pointNames,areaJson,amedasTableJson,panelType);table.appendHeader(panelTitle).attr("colspan",2).addClass("forecast-map-panel-title");table.appendRow();td=table.appendCell().attr("colspan",2);$("<img>").addClass("forecast-map-panel-image").appendTo(td);table.appendRow();table.appendCell().attr("colspan",2).addClass("forecast-map-panel-pop");codes=panelType==="class10"?class10.amedas:[class10.amedas[0]];UC.each(codes,function(code){var tempTd;if(!pointNames[code])return;table.appendRow().attr("data-area-code",code).addClass("forecast-temp");table.appendCell(TR.select(pointNames[code],amedasTableJson[code].enName)).addClass("forecast-map-panel-point");tempTd=table.appendCell();$("<span>").addClass("forecast-max-temp").appendTo(tempTd);$("<span>").text(" / ").appendTo(tempTd);$("<span>").addClass("forecast-min-temp").appendTo(tempTd)});if(panelType==="class10"||panelType==="office"&&UC.contains(ZOOM8_CLASS10_CODES,class10.class10)){areaType="class20s";areaCode=class10.class20}else{areaType="offices";areaCode=UA.convertCode(areaJson,class10.class10,"class10s","offices")}var panelTable=table.make().addClass("forecast-map-panel").on("mousedown",function(e){mouseX=e.clientX;mouseY=e.clientY}).on("mouseup",function(e){if(e.clientX===mouseX&&e.clientY===mouseY){clickCallback(areaType,areaCode)}});if(TR.isEnglish())panelTable.addClass("forecast-map-panel-en");return panelTable};var getPanelTitle=function(class10,pointNames,areaJson,amedasTableJson,panelType){var officeCode,areaName;switch(panelType){case"point":return TR.select(pointNames[class10.amedas[0]],amedasTableJson[class10.amedas[0]].enName);case"office":if(UC.contains(ZOOM8_CLASS10_CODES,class10.class10)){return makeTitle(TR.areaName(areaJson,"class10s",class10.class10))}officeCode=areaJson.class10s[class10.class10].parent;areaName=TR.areaName(areaJson,"offices",officeCode);areaName=areaName.replace(/\(.*\)/,"");return makeTitle(areaName);case"class10":return null;default:console.error("不正なパネルタイプ: "+panelType,class10.class10);return null}};var makeTitle=function(name){name=name.replace(/（.*）/,"");if(name.length<=8)return name;return name.replace(/・/,"・<br>")};var makePrefEnName=function(areaJson,areaType,areaCode){var areaName=UA.convertENName(areaJson,areaCode,areaType,"offices");return areaName.replace(/\(.*\)/,"")};var makeWeekAreaEnName=function(areaCode,prefName){var areaName=Forecast.Const.WEEK_AREAS[areaCode];if(areaName===prefName)return areaName;return UC.contains(WITH_TITLE_WEEK_CODES,areaCode)?prefName+"<br>"+areaName:areaName};var setPanel=function(forecasts,panels,isNight,areaJson){UC.each(panels,function(panel){var forecast=forecasts[panel.areaCode];var display=function(){if(!forecast)return false;if(forecast.forecastType==="short")return true;return UC.some(panel.temps,function(temp){var f=forecasts[temp.code];return f&&f.minTemp})}();var displayCss=function(){if(globals.panelMode==="off")return"none";return display?"table":"none"}();panel.table.css("display",displayCss);panel.display=display;if(forecast&&panel.panelType==="class10"){panel.title.html(function(){var areaName,officeCode,prefName;if(TR.isJapanese())return forecast.areaName;prefName=makePrefEnName(areaJson,"class10s",panel.areaCode);if(forecast.forecastType==="short"){officeCode=UA.convertCode(areaJson,panel.areaCode,"class10s","offices");areaName=TR.areaName(areaJson,"class10s",panel.areaCode);return areaName===prefName||UC.contains(Forecast.Common.NO_TITLE_OFFICE_CODES,officeCode)?areaName:prefName+"<br>"+areaName}return makeWeekAreaEnName(forecast.areaCode,prefName)}())}if(forecast&&panel.panelType==="office"&&panel.areaCode.substr(0,2)==="01"){panel.title.html(function(){var prefName;if(TR.isJapanese())return forecast.areaName;if(forecast.forecastType==="short"){return TR.areaName(areaJson,"class10s",panel.areaCode)}prefName=makePrefEnName(areaJson,"class10s",panel.areaCode);return makeWeekAreaEnName(forecast.areaCode,prefName)}())}var imageName=forecast?Forecast.Const.TELOPS[forecast.weatherCode][isNight?1:0]:null;if(imageName){panel.image.attr("src","forecast/img/"+imageName).attr("title",Forecast.Const.TELOPS[forecast.weatherCode][TR.select(3,4)]).css("visibility","visible")}else{panel.image.css("visibility","hidden")}var pops=forecast&&forecast.pops?forecast.pops:["--"];panel.pop.text(pops.join(" / ")+(pops.length===1?"%":""));UC.each(panel.temps,function(temp){forecast=forecasts[temp.code];temp.min.text(forecast&&forecast.minTemp?forecast.minTemp:"--");temp.max.text(forecast&&forecast.maxTemp?forecast.maxTemp:"--");if(forecast&&(forecast.minTemp||forecast.maxTemp)){temp.tr.css("display","table-row")}else{temp.tr.css("display","none")}})})};var makeSlider=function(time,hour){return UC.chain(UC.range(0,hour===5?6:7,1)).map(function(day){var t=new Date(time);t.setDate(t.getDate()+day);return $("<div>").text(UD.strftime(t,TR.tr("%d日(%W)"))).addClass("forecast-map-slider")[0]}).value()};var makeOptionList=function(time,hour,currentIndex){var list=UC.chain(UC.range(0,hour===5?6:7,1)).map(function(day){var t=new Date(time);t.setDate(t.getDate()+day);return{key:"day"+day,name:UD.strftime(t,TR.tr("%d日(%W)"))}}).value();list[currentIndex].selected=true;return list};var makeLegends=function(){return ContentsCommon.makeLegend([[{box:"forecast-map-weather-100",text:TR.select("晴れ","CLEAR")}],[{box:"forecast-map-weather-200",text:TR.select("曇り","CLOUDY")}],[{box:"forecast-map-weather-300",text:TR.select("雨","RAIN")}],[{box:"forecast-map-weather-400",text:TR.select("雪","SNOW")}]]).addClass("contents-legend-map")};var clickCallback=function(areaType,areaCode){var hashData={area_type:areaType,area_code:areaCode};if(TR.isEnglish())hashData.lang=TR.getLang();document.location="forecast/"+JMAWebUtility.hashController.hashString(hashData)};var draw=function(hash,options,callback){JMAWebUtility.parallelRequest({forecastJson:"forecast/data/forecast/map.json",forecastAreaJson:"forecast/const/forecast_area.json",weekArea05Json:"forecast/const/week_area05.json",labelPosJson:"common/const/label_pos/class10s.json",explain:"forecast/const/explain.html",amedasTableJson:"amedas/const/amedastable.json"},function(data){var currentIndex;if(options.contentsType==="bosaiTop"){currentIndex=parseInt(hash.elem.replace("day",""),10)}else{currentIndex=0}callback(make(data.forecastJson,data.forecastAreaJson,data.weekArea05Json,data.labelPosJson,options.areas,data.amedasTableJson,data.explain,currentIndex,options.contentsName,{top:options.contentsType==="bosaiTop"}))})};var rapidRequest=function(index,callback){callback({infoTime:getInfoTime(globals.time,index),data:{class10sFill:{colorData:globals.colors[index]}},argument:index})};var getPlteToColor=function(plteNames){var plteToColor={};UC.each(plteNames,function(plteName,color){plteToColor[plteName]=color});return plteToColor};var PLTE_NAMES=["100","200","300","400","missing"];var PLTE_TO_COLOR=getPlteToColor(PLTE_NAMES);var MAP_OPTIONS={100:{color:"#ffaa00",weight:1,opacity:1,fillColor:"#ffaa00",fillOpacity:1},200:{color:"#b0b0b0",weight:1,opacity:1,fillColor:"#b0b0b0",fillOpacity:1},300:{color:"#8080ff",weight:1,opacity:1,fillColor:"#8080ff",fillOpacity:1},400:{color:"#ffffff",weight:1,opacity:1,fillColor:"#ffffff",fillOpacity:1},missing:{color:"#606060",weight:1,opacity:1,fillColor:"#606060",fillOpacity:1},transparent:{opacity:0,fillOpacity:0}};var ZOOM8_CLASS10_CODES=["011000","012010","012020","013010","013020","013030","014010","014020","014030","015010","015020","016010","016020","016030","017010","017020","130020","130030","130040","150040","320030","420030","420040","460030"];var WITH_TITLE_WEEK_CODES=["020010","020030","020100","020200","030010","030100","040010","040020","070030","070100","100010","100020","200010","200100","210010","210020","250010","250020","260010","260020","280010","280020","330010","330020","340010","340020","420030","420100"];root.Forecast=root.Forecast||{};root.Forecast.draw=draw;root.Forecast.rapidRequest=rapidRequest})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var OFFSETS={5:{"012010":[110,-110],"016010":[-110,-110],"040010":[140,0],130010:[110,110],130040:[110,20],150010:[-110,-90],27e4:[10,140],400010:[-70,-120],460010:[-150,30],471010:[80,120],474010:[0,110]},6:{"012010":[120,-120],"014020":[120,120],"016010":[-120,-120],"020010":[-140,-90],"040010":[160,0],130010:[140,140],130040:[140,0],150010:[-140,-90],230010:[90,160],27e4:[0,180],340010:[0,-190],400010:[-50,-150],460010:[-160,80],460040:[140,0],471010:[20,120],474010:[20,120]},7:{"012010":[120,-220],"013010":[120,-170],"014020":[50,160],"016010":[-140,-140],"017010":[240,120],"020010":[-210,-110],"040010":[200,0],"050010":[-160,-70],"090010":[230,0],130010:[170,170],130040:[140,-80],150010:[-80,-130],170010:[-120,-80],200010:[-130,-200],230010:[90,170],27e4:[70,240],320010:[50,-140],340010:[-100,-170],37e4:[50,220],390010:[-60,210],400010:[-40,-200],420010:[-190,-100],460010:[-180,10],460040:[180,0],471010:[20,140],474010:[20,140]},8:{"011000":[0,0],"012010":[0,0],"012020":[-40,0],"013010":[0,-20],"013020":[-40,0],"013030":[30,-50],"014010":[20,0],"014020":[-20,0],"014030":[0,0],"015010":[0,40],"015020":[0,20],"016010":[0,-30],"016020":[60,30],"016030":[-20,0],"017010":[40,20],"017020":[-50,0],"020010":[0,0],"030010":[0,0],"040010":[10,0],"050010":[0,0],"060010":[0,0],"070010":[0,0],"080010":[70,0],"090010":[20,0],100010:[0,-60],110020:[-60,50],120020:[50,0],130010:[80,-20],130020:[0,40],130030:[0,0],130040:[0,0],140010:[0,70],150010:[0,0],150040:[0,0],160010:[-30,0],170010:[-40,-60],180010:[-50,0],190010:[-60,0],200010:[0,0],210010:[0,-50],220010:[0,30],230010:[30,0],240010:[110,80],250020:[30,60],260010:[-40,0],27e4:[-50,50],280010:[-50,-40],290010:[50,30],300010:[0,90],310010:[0,-80],320010:[-20,0],320030:[0,0],330010:[-20,-50],340010:[0,0],350010:[0,-40],360010:[0,100],37e4:[0,0],380010:[0,-10],390010:[-40,120],400010:[70,0],410010:[-50,-10],420010:[-30,50],420030:[0,0],420040:[0,0],430010:[0,0],440010:[20,0],450010:[0,0],460010:[0,0],460030:[0,0],460040:[0,0],471010:[0,0],472e3:[0,0],473e3:[0,0],474010:[0,0]},9:{"017010":[10,0],"060010":[-10,0],"060030":[-10,0],"070020":[10,0],100010:[0,-50],100020:[0,-40],110010:[70,-60],110020:[-20,0],110030:[-30,0],120020:[40,0],120030:[20,0],130020:[20,0],140010:[50,20],140020:[30,20],160020:[20,0],170010:[-20,0],190010:[-40,0],190020:[-20,-30],220010:[30,0],220040:[20,0],240010:[0,30],250020:[50,0],27e4:[-20,0],290010:[20,0],310020:[0,-40],330010:[0,10],330020:[0,20],340010:[0,10],350010:[40,10],350020:[-10,30],350040:[0,-40],360010:[80,-40],360020:[50,40],37e4:[-20,0],380010:[-30,0],390010:[0,20],380030:[-20,0],390030:[20,0],400020:[-50,-90],400030:[30,10],400040:[0,10],410020:[0,-50],410010:[0,50],420010:[0,20],420020:[0,40],430010:[-20,0],430020:[20,30],440020:[0,-40],440030:[0,-30],440040:[0,20],450010:[50,0],450020:[70,0]},10:{400020:[40,0]}};root.Forecast=root.Forecast||{};root.Forecast.OFFSETS=OFFSETS})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";root.Tsunami=root.Tsunami||{};var STATION_PRM={};var infoArray=[];var currentIdx=0;var idxList=[];var WorI=true;var isIOS=false;var En=false;if(location.href.indexOf("lang=en")!=-1)En=true;var kunren=false;if(location.href.indexOf("kunren=true")!=-1)kunren=0;var cancelStr={};var clearWeb={t:{w:0,f:0},w:[],f:[]};var imgdir="tsunami/images/";var datadir="tsunami/data/";var defaultZxy=[5,38,135];var drawDataObj={data:{_hypo:{zindex:3e4,minZoom:1,maxZoom:18,display:false,data:[]},hypo:{zindex:3e4,minZoom:1,maxZoom:18,display:false,data:[]},stat:{zindex:2e4,minZoom:1,maxZoom:18,display:false,data:[]},area:{display:false}},zxy:{},duration:1.5,infoTime:null,contentsInfo:null,centerText:null,freeSpace:null,legend:null,explain:null,textInfo:null,defaultOpen:"legend"};var latestPast=[["",""],["最新の大津波警報・津波警報・津波注意報・津波予報をご利用ください","See the latest Tsunami Warnings/Advisories/Forecasts."],["最新の津波情報をご利用ください","See the latest Tsunami Information."],["これは過去に発表された大津波警報・津波警報・津波注意報・津波予報です","Previous Tsunami Warning/Advisory/Forecast."],["これは過去に発表された津波情報です","Previous Tsunami Information."],["<br>※津波の発生原因と考えられる全ての地震について震源要素を記載しています。","<br>*Hypocenter information for all tsunamigenic earthquakes."]];var buttonStr=[["最新の津波警報・津波注意報・津波予報","Latest Tsunami Warnings/Advisories/Forecasts"],["最新の津波情報","Latest Tsunami Information"],["< 前情報","< Previous Information"],["次情報 >","Next Information >"]];var legendStr=[["震央","Epicenter"],["大津波警報","Major Tsunami Warning"],["津波警報","Tsunami Warning"],["津波注意報","Tsunami Advisory"],["津波予報（若干の海面変動）","Tsunami Forecast (Slight sea level changes)"],["３ｍ超","More than 3 m"],["３ｍ以下","3 m or less"],["１ｍ以下","1 m or less"],["0.2ｍ未満","Less than 0.2 m"],["観測中","Information pending"],["各地の満潮時刻・津波到達予想時刻","High tide time / Estimated initial tsunami arrival time"],["津波を観測","Tsunami observed"]];var infoRemarks=[["最近３０日間に発表された大津波警報・津波警報・津波注意報・津波予報はありません。","No Tsunami Warnings/Advisories/Forecasts have been issued within the last 30 days."],["最近３０日間に発表された大津波警報・津波警報・津波注意報・津波予報及び津波情報です。","Tsunami Warnings/Advisories/Forecasts or Information have been issued within the last 30 days."],["グレー背景は既に解除されている大津波警報大津波警報・津波警報・津波注意報・津波予報及び津波情報です。","Grey background areas are where Tsunami Warnings/Advisories/Forecasts or Information have previously been issued but are no longer in effect."],["現在、大津波警報・津波警報・津波注意報・津波予報（若干の海面変動）を発表していません。","No Major Tsunami Warnings, Tsunami Warnings or Advisories are currently in effect."],["現在、津波情報を発表していません。","No Tsunami Information is currently in effect."]];var infoTableHeader=[["情報発表日時","発表した情報の種類","地震検知日時","震央地名","深さ","マグニチュード"],["Issued at (JST)","Announcement type","Observed at (JST)","Region name","Depth","Magnitude"]];var hlTableHeader=[["地震の発生日時","震央地名","深さ","マグニチュード"],["Occurrence at (JST)","Region name","Depth","Magnitude"]];var tsunamiColor={NT:"rgb(200,200,200)",TF:"rgb(000,170,255)",TA:"rgb(242,231,000)",TW:"rgb(255,040,000)",MW:"rgb(170,000,170)"};var strI=0;if(En)strI=1;root.Tsunami.draw=function(hashdata,opt,resolve){if(kunren===0)kunren=kunrenAuth(false);if(opt.devise.isIOS)isIOS=opt.devise.isIOS;var flg=-1;if(hashdata.elem=="warn")flg=true;if(hashdata.elem=="info")flg=false;$.when(readList(flg)).done(function(){if(opt.contentsType=="bosaiTop"){drawDataObj["freeSpace"]=drawDataObj["contentsInfo"];if("area_type"in hashdata&&(hashdata.area_type=="offices"||hashdata.area_type=="class20s")){delete drawDataObj.zxy}}resolve(drawDataObj)})};root.Tsunami.changeMap=function(hashdata,opt,resolve){var flg=-1;if(hashdata.elem=="warn")flg=true;if(hashdata.elem=="info")flg=false;$.when(readList(flg)).done(function(){drawDataObj["selectChange"]={elem:hashdata.elem};resolve(drawDataObj)})};var redrawMap=function(flg,argv,fit,selectChange){if(flg){var promise=readList(argv)}else{var promise=makeData(argv)}$.when(promise).done(function(){if(!fit)delete drawDataObj.zxy;if(selectChange!=null)drawDataObj["selectChange"]={elem:selectChange};UnitMap.makePage(drawDataObj)})};var readList=function(flg){infoArray=[];currentIdx=0;idxList["w"]=[];idxList["f"]=[];cancelStr={};var tmpDate=Date.parse("1999-01-01T00:00:00");var def=$.Deferred();JMAWebUtility.parallelRequest({clearwebJson:datadir+"clearweb.json",listJson:datadir+"list.json"},function(data){clearWeb={t:{w:tmpDate,f:tmpDate},w:[],f:[]};if(data.clearwebJson!==null){clearWeb["t"]["w"]=Date.parse(data.clearwebJson.w);clearWeb["t"]["f"]=Date.parse(data.clearwebJson.f)}var listData=data.listJson;var infoTable=$("<table>").append('<tr class="contents-title"><th>'+infoTableHeader[strI].join("</th><th>")+"</th></tr>");var pastFlg=false;for(var i=0;i<listData.length;i++){var elm=listData[i];if(kunren){if(!/_K/.test(elm.ift))continue}else{if(/_K/.test(elm.ift))continue}infoArray[i]=elm;var it="";var at="";var itut=0;if(elm.rdt!=""){itut=Date.parse(elm.rdt);it=JMAWebUtility.date.strftime(new Date(itut),"%Y年%m月%d日%H時%M分");if(En)it=JMAWebUtility.date.strftime(new Date(itut),"%H:%M JST %d %ESm %Y")}if(elm.at!=""){var atAr=multiHyp(elm.at);for(var j=0;j<atAr.length;j++){if(j>0)at+="<br>";if(En){at+=JMAWebUtility.date.strftime(new Date(atAr[j]),"%H:%M JST %d %ESm")}else{at+=JMAWebUtility.date.strftime(new Date(atAr[j]),"%m月%d日%H時%M分")}}}var regNm="";var regN=multiHyp(elm.anm);if(En)regN=multiHyp(elm.en_anm);for(var j=0;j<regN.length;j++){if(j>0)regNm+="<br>";regNm+=regN[j]}var dep="";var mag="";var codAr=multiHyp(elm.cod);var magAr=multiHyp(elm.mag);for(var j=0;j<codAr.length;j++){var coord=convCoordinate(codAr[j]);var ret=convHypstr(elm.ttl,magAr[j],coord.dep,"");var title=ret.title;var magStr=ret.mag;var depStr=ret.dep;if(j>0){dep+="<br>";mag+="<br>"}if(String(depStr)===""){dep+="---"}else{dep+=depStr}mag+=magStr}var title=elm.ttl;var cancelKey=elm.eid+"_"+elm.ttl;var pclass="tsunami-bg-PI";if(title=="各地の満潮時刻・津波到達予想時刻に関する情報"||title=="津波観測に関する情報"||title=="沖合の津波観測に関する情報"){idxList["f"].push(i);if(itut>clearWeb["t"]["f"]){clearWeb["f"].push(i);pclass=""}}else{idxList["w"].push(i);if(itut>clearWeb["t"]["w"]){clearWeb["w"].push(i);pclass=""}}if(pclass!="")pastFlg=true;if(cancelKey in cancelStr&&!/取消/.test(elm.ift)&&!/訂正/.test(elm.ift)){cancelStr[cancelKey].unshift(elm.rdt)}if(En){var title=elm.en_ttl;if(/_K/.test(elm.ift))title+=" [Drill]";if(/取消/.test(elm.ift)){title+=" [Cancel]";cancelStr[cancelKey]=[]}if(/訂正/.test(elm.ift)){title+=" [Revise]";cancelStr[cancelKey]=[]}}else{if(/_K/.test(elm.ift))title+="【訓練】";if(/取消/.test(elm.ift)){title+="【取消】";cancelStr[cancelKey]=[]}if(/訂正/.test(elm.ift)){title+="【訂正】";cancelStr[cancelKey]=[]}}var serial="";if(elm.ser>1&&!/取消/.test(elm.ift)){if(En){serial="part "+elm.ser}else{serial=toZenkaku(elm.ser)+"報"}}var tr=$("<tr>").addClass(pclass).attr("index",i).on("click",function(e){if(typeof e.target.parentNode.attributes.index.nodeValue!=="undefined")redrawMap(false,e.target.parentNode.attributes.index.nodeValue,true,null)});$(tr).addClass("contents-clickable contents-clickable-highlight").append($("<td>").html(it).addClass("").attr("width","180px"),$("<td>").html(title+" "+serial).addClass("").attr("width","400px"),$("<td>").html(at).addClass("").attr("width","140px"),$("<td>").html(regNm).addClass("").attr("width","160px"),$("<td>").html(dep).addClass("talign_center quake-nowrap").attr("width","60px"),$("<td>").html(mag).addClass("talign_center").attr("width","60px"));$(infoTable).append(tr)}if(idxList["w"].length<1&&idxList["f"].length<1){NoInfo(infoRemarks[0][strI],flg);def.resolve();return}var seisListStr=infoRemarks[1][strI];if(pastFlg)seisListStr+="<br>"+infoRemarks[2][strI];drawDataObj["textInfo"]=$("<div>").addClass("contents-block").append(seisListStr,infoTable)[0];if(flg==-1){var promise=makeData(-1)}else if(flg){WorI=true;if(clearWeb["w"].length<1){NoInfo(infoRemarks[3][strI],flg);def.resolve();return}else{var promise=makeData(idxList["w"][0])}}else{WorI=false;if(clearWeb["f"].length<1){NoInfo(infoRemarks[4][strI],flg);def.resolve();return}else{var promise=makeData(idxList["f"][0])}}$.when(promise).done(function(){def.resolve()})});return def.promise()};var NoInfo=function(text,flg){currentIdx=-3;if(flg)currentIdx=-2;var buttons=$("<div>");var btn0=$("<div>").text(buttonStr[0][strI]).addClass("contents-button").on("click",function(e){redrawMap(true,true,true,"warn")});var btn1=$("<div>").text(buttonStr[1][strI]).addClass("contents-button").on("click",function(e){redrawMap(true,false,true,"info")});$(buttons).append($('<p class="mb_5px talign_right">').append(btn0));$(buttons).append($('<p class="mb_5px talign_right">').append(btn1));drawDataObj["data"]["_hypo"].display=false;drawDataObj["data"]["hypo"].display=false;drawDataObj["data"]["stat"].display=false;drawDataObj["data"]["area"].display=false;drawDataObj["data"]["_hypo"].data=[];drawDataObj["data"]["hypo"].data=[];drawDataObj["data"]["stat"].data=[];drawDataObj["zxy"]=defaultZxy;drawDataObj["infoTime"]=null;drawDataObj["contentsInfo"]=null;drawDataObj["centerText"]=$("<div>").append(text)[0];drawDataObj["freeSpace"]=buttons[0];drawDataObj["legend"]=null;drawDataObj["explain"]=null;drawDataObj["textInfo"]=null;drawDataObj["defaultOpen"]=null;return};var makeData=function(idx){var def=$.Deferred();if(idx==-9||isNaN(idx)||typeof idx=="undefined")idx=currentIdx;idx=parseInt(idx);drawDataObj["infoTime"]=null;drawDataObj["contentsInfo"]=null;drawDataObj["centerText"]=null;drawDataObj["freeSpace"]=null;drawDataObj["legend"]=null;drawDataObj["explain"]=null;drawDataObj["defaultOpen"]="legend";var buttons=$("<div>");var btn0=$("<div>").text(buttonStr[0][strI]).addClass("contents-button").on("click",function(e){redrawMap(true,true,true,"warn")});var btn1=$("<div>").text(buttonStr[1][strI]).addClass("contents-button").on("click",function(e){redrawMap(true,false,true,"info")});$(buttons).append($('<p class="mb_5px talign_right">').append(btn0));$(buttons).append($('<p class="mb_5px talign_right">').append(btn1));if(idx==-1){drawDataObj["zxy"]={};drawDataObj["data"]["_hypo"].display=true;drawDataObj["data"]["hypo"].display=false;drawDataObj["data"]["stat"].display=false;drawDataObj["data"]["area"].display=false;drawDataObj["data"]["hypo"].data=[];drawDataObj["data"]["stat"].data=[];var points=[];var dupli=[];for(var i=0;i<infoArray.length;i++){if(i in infoArray){var elm=infoArray[i]}else{continue}if(dupli.indexOf(elm.eid)>-1)continue;dupli.push(elm.eid);if(kunren){if(!/_K/.test(elm.ift))continue}else{if(/_K/.test(elm.ift))continue}var point=setHypo(elm,i,false,false);if(point.length==0)continue;points=points.concat(point)}drawDataObj["data"]["_hypo"].data=points;if(points.length==0){drawDataObj["zxy"]=defaultZxy}else if(points.length<2){var hypoLatlon=points[0].latlon;drawDataObj["zxy"]=[7,hypoLatlon[0],hypoLatlon[1]]}else{drawDataObj["zxy"]["_hypo"]="all"}var hlLatestStr=latestPast[1][0];if(En)hlLatestStr=latestPast[1][1];drawDataObj["contentsInfo"]=$("<span>").addClass("quake-must").append(hlLatestStr)[0];drawDataObj["freeSpace"]=buttons[0];drawDataObj["legend"]=imgdir+"hypLeg.svg";def.resolve()}else{currentIdx=parseInt(idx);if(idx in infoArray){var elm=infoArray[idx]}else{def.resolve();return}var id=elm.eid;var title=elm.ttl;var url=datadir+elm.json;var legend0='<img src="'+imgdir+'Hypo.svg" width="18px" height="18px" /> '+legendStr[0][strI]+"<br>";var legend1='<img src="'+imgdir+'tm.svg" width="15px" height="15px" /> '+legendStr[1][strI]+"<br>"+'<img src="'+imgdir+'tw.svg" width="15px" height="15px" /> '+legendStr[2][strI]+"<br>"+'<img src="'+imgdir+'ta.svg" width="15px" height="15px" /> '+legendStr[3][strI]+"<br>"+'<img src="'+imgdir+'tf.svg" width="15px" height="15px" /> '+legendStr[4][strI]+"<br>";var legend2='<img src="'+imgdir+'lv4.png" width="10px" height="20px" /> '+legendStr[5][strI]+"<br>"+'<img src="'+imgdir+'lv3.png" width="10px" height="20px" /> '+legendStr[6][strI]+"<br>"+'<img src="'+imgdir+'lv2.png" width="10px" height="20px" /> '+legendStr[7][strI]+"<br>"+'<img src="'+imgdir+'lv0.png" width="10px" height="20px" /> '+legendStr[8][strI]+"<br>"+'<img src="'+imgdir+'lv5.png" width="10px" height="20px" /> '+legendStr[9][strI]+"<br>";var legend3='<img src="'+imgdir+'htat.svg" width="18px" height="18px" /> '+legendStr[10][strI]+"<br>";var legend4='<img src="'+imgdir+'offs.svg" width="18px" height="18px" /> '+legendStr[11][strI]+"<br>";var legend="";var latestFlg=false;var offshoreFlg=false;var panelTitle=title;if(En)panelTitle=elm.en_ttl;if(/_K/.test(elm.ift)){if(En){panelTitle+=" [Drill]"}else{panelTitle+="【訓練】"}}var serial="";if(elm.ser>1&&!/取消/.test(elm.ift)){if(En){serial="part "+elm.ser}else{serial=toZenkaku(elm.ser)+"報"}}var btn2=$("<div>").text(buttonStr[2][strI]).addClass("contents-button").on("click",function(e){backForward(+1)});var btn3=$("<div>").text(buttonStr[3][strI]).addClass("contents-button").on("click",function(e){backForward(-1)});if(title=="各地の満潮時刻・津波到達予想時刻に関する情報"||title=="津波観測に関する情報"||title=="沖合の津波観測に関する情報"){WorI=false;var lastI=idxList["f"].length-1;if(idx<idxList["f"][lastI]&&idx>idxList["f"][0]){latestFlg=2}else if(idx<idxList["f"][lastI]){$(btn3).attr("disabled","disabled").addClass("quake-contents-button-disabled").off("click")}else if(idx>idxList["f"][0]){$(btn2).attr("disabled","disabled").addClass("quake-contents-button-disabled").off("click");latestFlg=2}if(idx<idxList["f"][lastI]||idx>idxList["f"][0]){$(buttons).append($('<p class="mb_5px talign_right">').append(btn2,btn3))}legend=legend0+legend1+legend2;if(title=="各地の満潮時刻・津波到達予想時刻に関する情報"){legend=legend0+legend3}else if(title=="沖合の津波観測に関する情報"){legend=legend0+legend4;offshoreFlg=true}}else{WorI=true;if(clearWeb["w"].length<1||idx>idxList["w"][0])latestFlg=1;legend=legend0+legend1}drawDataObj["freeSpace"]=buttons[0];drawDataObj["legend"]=$("<div>").append(legend)[0];if(latestFlg==1&&clearWeb["w"].indexOf(idx)<0)latestFlg=3;if(latestFlg==2&&clearWeb["f"].indexOf(idx)<0)latestFlg=4;if(En){var infoTime="Issued at "+JMAWebUtility.date.strftime(new Date(elm.rdt),"%H:%M JST %d %ESm %Y")}else{var infoTime=JMAWebUtility.date.strftime(new Date(elm.rdt),"%Y年%m月%d日%H時%M分発表")}drawDataObj["infoTime"]=infoTime+"<br>"+panelTitle+" "+serial;JMAWebUtility.parallelRequest({eventJson:url},function(data){drawDataObj["zxy"]={};drawDataObj["data"]["_hypo"].display=false;drawDataObj["data"]["hypo"].display=true;drawDataObj["data"]["stat"].display=true;drawDataObj["data"]["area"].display=true;drawDataObj["data"]["_hypo"].data=[];var kunrenStr="";if(/_K/.test(elm.ift)){if(En){kunrenStr='<b class="quake-must">*** This is Drill Information ***</b>'}else{kunrenStr='<b class="quake-must talign_center">＊＊＊　これは訓練です　＊＊＊</b>'}}var ret=infoText(elm,data.eventJson,WorI,latestFlg);drawDataObj["explain"]=$("<div>").addClass("quake-explain contents-explain").html(ret.text)[0];drawDataObj["contentsInfo"]=$("<div>").append(kunrenStr+ret.hl)[0];drawDataObj["textInfo"]=$("<div>").addClass("contents-block").append(ret.list)[0];drawDataObj["data"]["hypo"].data=setHypo(elm,"",true,false);drawDataObj["zxy"]["hypo"]="all";if(drawDataObj["data"]["hypo"].data.length==0){delete drawDataObj.zxy.hypo}var ret=setData(data.eventJson.Body.Tsunami,title,offshoreFlg);drawDataObj["data"]["area"]=ret.area;drawDataObj["data"]["stat"].data=ret.stat;drawDataObj["zxy"]["area"]=ret.areaNums;drawDataObj["zxy"]["stat"]="all";if(!drawDataObj["data"]["stat"].data.length)delete drawDataObj.zxy.stat;if(WorI){var alertStr=latestPast[3][0];if(En)alertStr=latestPast[3][1];if(clearWeb["w"].indexOf(idx)<0)alert(alertStr)}else{var alertStr=latestPast[4][0];if(En)alertStr=latestPast[4][1];if(clearWeb["f"].indexOf(idx)<0)alert(alertStr)}def.resolve()})}return def.promise()};var backForward=function(i){var wf="f";if(WorI)wf="w";if(currentIdx<0)currentIdx=0;currentIdx=parseInt(currentIdx);var idxIdx=idxList[wf].indexOf(currentIdx);if(idxIdx<0){return}var searchI=idxIdx+i;if(searchI in idxList[wf]){currentIdx=idxList[wf][searchI]}else{return}redrawMap(false,currentIdx,false,null)};var setData=function(data,title,offshoreFlg){var points=[];var areas={mapKey:"tsunami",display:false,colorData:[]};var areaNums=[];var onEvent="mouseover";if(isIOS)onEvent="click";if("Forecast"in data){var categoryAr=[];var For=generateDataArray(data.Forecast.Item);for(var i=0;i<For.length;i++){var Item=For[i];var Area=Item.Area;var CatN=Item.Category.Kind.Name;var CatC=Item.Category.Kind.Code;var aNam=Area.Name;var aCod=Area.Code;if(En&&"enName"in Area)aNam=Area.enName;if(En&&"enName"in Item.Category.Kind)CatN=Item.Category.Kind.enName;var ret=FstMaxHeight(Item);var fstT=ret.fstT;var fstI=ret.fstI;var maxT=ret.maxT;var maxH=ret.maxH;var mh=ret.mh;var revF=ret.revF;var revM=ret.revM;var fsTtl="　第１波の到達予想時刻　";var mhTtl="予想される最大波の高さ　";if(En){fsTtl="Estimated initial tsunami arrival time : ";mhTtl="Estimated maximum tsunami height : "}var titleStr='<div style="font-size: 16px; font-weight:bold; color: #272d79;">'+aNam+"</div>"+'<div style="font-size: 12px; color: #272d79">'+CatN+"</div>";if(fstT)titleStr+='<div style="font-size: 10px; color: black">'+fsTtl+'<span style="font-weight: bold; font-size: 14px;">'+revF+fstT+"</span></div>";if(maxH)titleStr+='<div style="font-size: 10px; color: black">'+mhTtl+'<span style="font-weight: bold; font-size: 14px;">'+revM+maxH+"</span></div>";categoryAr[aCod]={name:aNam,catg:Item.Category.Kind.Name,titl:titleStr};if(title=="各地の満潮時刻・津波到達予想時刻に関する情報"&&"Station"in Item){var Stations=generateDataArray(Item.Station);for(var j=0;j<Stations.length;j++){var Station=Stations[j];var sNam=Station.Name;var sCod=Station.Code;if(En&&"enName"in Station)sNam=Station.enName;var htT=JMAWebUtility.date.strftime(new Date(Station.HighTideDateTime),"%Zd日%2ZH時%2ZM分");if(En)htT=JMAWebUtility.date.strftime(new Date(Station.HighTideDateTime),"%H:%M JST %d %ESm");var ret=FstMaxHeight(Station);var fstT=ret.fstT;var fstI=ret.fstI;var maxT=ret.maxT;var maxH=ret.maxH;var mh=ret.mh;var revF=ret.revF;var revM=ret.revM;var htTtl="　　　　満潮時刻　";var atTtl="津波到達予想時刻　";if(En){htTtl="High tide times : ";atTtl="Estimated initial tsunami arrival time : "}var titleStr='<div style="font-size: 16px; font-weight:bold; color: #272d79;">'+sNam+"</div>"+'<div style="font-size: 10px; color: black">'+htTtl+'<span style="font-weight: bold; font-size: 14px;">'+htT+"</span></div>"+'<div style="font-size: 10px; color: black">'+atTtl+'<span style="font-weight: bold; font-size: 14px;">'+revF+fstT+"</span></div>";if("latlon"in Station){var lat=Station.latlon.lat;var lon=Station.latlon.lon}else{console.log(sNam+"：緯度経度が存在しません");continue}if(typeof STATION_PRM[sCod]==="undefined")STATION_PRM[sCod]=Station.latlon;points.push({type:"dom",latlon:[lat,lon],domElement:'<img src="'+imgdir+'htat.svg" width="20px" height="20px" />',svgConfig:{height:20,width:20},tooltip:{content:titleStr,on:onEvent}})}}}var codePltenumber={};var codePopuptexts={};for(var code in categoryAr){var name=categoryAr[code].name;var catg=categoryAr[code].catg;var titl=categoryAr[code].titl;var pltn=4;if(catg=="大津波警報"||catg=="大津波警報：発表")pltn=0;if(catg=="津波警報")pltn=1;if(catg=="津波注意報")pltn=2;if(catg=="津波予報（若干の海面変動）")pltn=3;codePltenumber[code]=pltn;codePopuptexts[code]=titl;areaNums.push(code)}var colorPlte=[{weight:20,color:tsunamiColor.MW,interactive:true},{weight:20,color:tsunamiColor.TW,interactive:true},{weight:20,color:tsunamiColor.TA,interactive:true},{weight:20,color:tsunamiColor.TF,interactive:true},{weight:20,color:tsunamiColor.NT,interactive:true}];var areas={mapKey:"tsunami",display:true,zindex:5e3,plte:colorPlte,colorData:codePltenumber,options:{weight:0,interactive:false},tooltips:{contents:codePopuptexts,on:onEvent}}}if("Observation"in data&&title!="各地の満潮時刻・津波到達予想時刻に関する情報"){var Obs=generateDataArray(data.Observation.Item);for(var i=0;i<Obs.length;i++){var Item=Obs[i];var Area=Item.Area;var Stations=generateDataArray(Item.Station);for(var j=0;j<Stations.length;j++){var Station=Stations[j];var sNam=Station.Name;var sCod=Station.Code;if(En&&"enName"in Station)sNam=Station.enName;var ret=FstMaxHeight(Station);var fstT=ret.fstT;var fstI=ret.fstI;var maxT=ret.maxT;var maxH=ret.maxH;var mh=ret.mh;var revF=ret.revF;var revM=ret.revM;var ftTtl="　第１波到達時刻　";var mhTtl="これまでの最大波　";if(En){ftTtl="Initial tsunami arrival time : ";mhTtl="Current largest tsunami observed : "}var titleStr='<div style="font-size: 16px; font-weight:bold; color: #272d79;">'+sNam+"</div>"+'<div style="font-size: 10px; color: black">'+ftTtl+'<span style="font-weight: bold; font-size: 14px;">'+revF+fstT+"　"+fstI+"</span></div>"+'<div style="font-size: 10px; color: black">'+mhTtl+'<span style="font-weight: bold; font-size: 14px;">'+revM+maxT+"　"+maxH+"</span></div>";var iconHgt=20;if(mh>.1)iconHgt=15*(mh-.1)+20;var iconUrl=imgdir+"lv5.png";if(mh>3){iconUrl=imgdir+"lv4.png"}else if(mh>1){iconUrl=imgdir+"lv3.png"}else if(mh>=.2){iconUrl=imgdir+"lv2.png"}else if(mh>0){iconUrl=imgdir+"lv0.png"}if("latlon"in Station){var lat=Station.latlon.lat;var lon=Station.latlon.lon}else{console.log(sNam+"：緯度経度が存在しません");continue}if(typeof STATION_PRM[sCod]==="undefined")STATION_PRM[sCod]=Station.latlon;if(offshoreFlg){points.push({type:"dom",latlon:[lat,lon],domElement:'<img src="'+imgdir+'offs.svg" width="20px" height="20px" />',svgConfig:{height:20,width:20},tooltip:{content:titleStr,on:onEvent}})}else{points.push({type:"dom",latlon:[lat,lon],domElement:'<img src="'+iconUrl+'" width="10px" height="'+iconHgt+'px">',autoCenter:false,options:{iconAnchor:[10,iconHgt-10]},tooltip:{content:titleStr,on:onEvent}})}}}}return{stat:points,area:areas,areaNums:areaNums}};var infoText=function(elm,data,WorI,latestFlg){var text="";var list="";var hl="";var separator=[];if($(window).width()>576){separator[0]="＊＊＊＊＊＊＊＊＊＊＊＊＊＊　見出し　＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊\n";separator[1]="＊＊＊＊＊＊＊＊＊＊＊＊＊＊　本文　＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊";separator[2]="＊＊＊＊＊＊＊＊＊＊＊＊＊＊　解説　＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊\n";separator[3]="\n＊＊＊＊＊＊＊＊＊＊＊＊　震源要素の速報　＊＊＊＊＊＊＊＊＊＊＊＊＊\n"}else{separator[0]="＊＊＊＊＊＊＊＊＊　見出し　＊＊＊＊＊＊＊＊＊＊\n";separator[1]="＊＊＊＊＊＊＊＊＊　本文　＊＊＊＊＊＊＊＊＊＊＊";separator[2]="＊＊＊＊＊＊＊＊＊　解説　＊＊＊＊＊＊＊＊＊＊＊\n";separator[3]="\n＊＊＊＊＊＊＊　震源要素の速報　＊＊＊＊＊＊＊＊\n"}if(/_K/.test(elm.ift)){if(En){text+="*** This is Drill Information ***\n\n"}else{text+="＊＊＊　これは訓練です　＊＊＊\n\n"}}var title=elm.ttl;var titleEng=elm.en_ttl;if(En){text+=titleEng+"\n"}else{text+=title+"\n"}if(elm.rdt!=""){if(En){text+="Issued at "+JMAWebUtility.date.strftime(new Date(elm.rdt),"%H:%M JST %d %ESm %Y")+"\n"}else{text+=JMAWebUtility.date.strftime(new Date(elm.rdt),"%GG%GY年%Zm月%Zd日%2ZH時%2ZM分")+"　気象庁発表\n\n"}}if(!En&&"Text"in data.Head.Headline&&data.Head.Headline.Text!=null){if(WorI)text+=separator[0];text+=data.Head.Headline.Text+"\n\n"}if(/取消/.test(elm.ift)){text+="\n";if(En){text+="Lifting of earlier Tsunami Information ("+titleEng+")\nIssued at "}else{text+="先ほど発表した、「"+title+"」を取り消します。\n発表日時は、"}var cancelKey=elm.eid+"_"+elm.ttl;var itAr=cancelStr[cancelKey];for(var i=0;i<itAr.length;i++){var it=JMAWebUtility.date.strftime(new Date(itAr[i]),"%GG%GY年%Zm月%Zd日%2ZH時%2ZM分");if(En)it=JMAWebUtility.date.strftime(new Date(itAr[i]),"%H:%M JST %d %ESm %Y");if(En){text+="["+it+"] "}else{text+="［"+it+"］"}}text+="\n\n";if(!En&&"Text"in data.Body)text+=data.Body.Text+"\n";infoHtml(text);return}else if(/訂正/.test(elm.ift)){text+="\n";if(En){text+="Revision of earlier Tsunami Information ("+titleEng+")\nIssued at "}else{text+="先ほど発表した、「"+title+"」を訂正します。\n発表日時は、"}var cancelKey=elm.eid+"_"+elm.ttl;var itAr=cancelStr[cancelKey];var it=JMAWebUtility.date.strftime(new Date(itAr[0]),"%GG%GY年%Zm月%Zd日%2ZH時%2ZM分");if(En)it=JMAWebUtility.date.strftime(new Date(itAr[0]),"%H:%M JST %d %ESm %Y");if(En){text+="["+it+"]\n\n"}else{text+="［"+it+"］\n\n"}}if("Forecast"in data.Body.Tsunami){var wrnTbl="";var impWrn=false;var sooWrn=false;var infTbl="";var listTd=[];var preCat="";var impFlg=false;var newFlg=false;var Categorys=[];var For=generateDataArray(data.Body.Tsunami.Forecast.Item);for(var i=0;i<For.length;i++){var Item=For[i];var Area=Item.Area;if("Category"in Item&&"Name"in Area){var CatN=Item.Category.Kind.Name;if(CatN=="大津波警報：発表")CatN="大津波警報";var aNam=Area.Name;var aCod=Area.Code}else{continue}var tClass="tsunami-bg-";if(CatN=="大津波警報")tClass+="MW";if(CatN=="津波警報")tClass+="TW";if(CatN=="津波注意報")tClass+="TA";if(CatN=="津波予報（若干の海面変動）")tClass+="TF";if(En&&"enName"in Area)aNam=Area.enName;if(En&&"enName"in Item.Category.Kind)CatN=Item.Category.Kind.enName;var ret=FstMaxHeight(Item);var fstT=ret.fstT;var fstI=ret.fstI;var maxT=ret.maxT;var maxH=ret.maxH;var mh=ret.mh;var revF=ret.revF;var revM=ret.revM;if(preCat!=tClass){if(En){wrnTbl+="\n["+CatN+"]\n"}else{wrnTbl+="\n＜"+CatN+"＞\n";Categorys.push(CatN)}}preCat=tClass;var wrnNam=aNam;if(Item.Category.Kind.Code=="53"){impWrn=true;if(En){wrnNam="$"+wrnNam}else{wrnNam="＄"+wrnNam}}if("FirstHeight"in Item&&"Condition"in Item.FirstHeight&&(Item.FirstHeight.Condition=="津波到達中と推測"||Item.FirstHeight.Condition=="ただちに津波来襲と予測")){sooWrn=true;if(En){wrnNam+="*"}else{wrnNam+="＊"}}if(En){wrnTbl+=wrnNam+"\n"}else{wrnTbl+=wrnNam+"、"}if(WorI){listTd.push({index:aCod,cls:tClass,tds:'<td class="quake-nowrap">'+aNam+"</td>"+'<td class="quake-nowrap">'+CatN+"</td>"+'<td class="quake-nowrap">'+revF+fstT+"</td>"+'<td class="talign_center quake-nowrap">'+revM+maxH+"</td>"});if(fstT!=""||maxH!=""){infTbl+="<tr><td>　"+aNam+"</td><td>"+revF+fstT+"</td><td>"+revM+maxH+"</td></tr>"}if(/\#/.test(revF)||/\#/.test(revM)||/＃/.test(revF)||/＃/.test(revM))newFlg=true;if(/\$/.test(revM)||/＄/.test(revM))impFlg=true}else if(title=="各地の満潮時刻・津波到達予想時刻に関する情報"&&"Station"in Item){listTd.push({index:aCod,cls:tClass,tds:'<td class="quake-nowrap">'+aNam+"</td>"+"<td></td>"+'<td class="quake-nowrap">'+revF+fstT+"</td>"});if(En){infTbl+='<tr><td colspan="2">'+aNam+" [Area of expected initial tsunami arrival]</td><td>"+revF+fstT+"</td></tr>"}else{infTbl+='<tr><td colspan="2">　'+aNam+"（津波到達が最も早い場所）</td><td>"+revF+fstT+"</td></tr>"}if(/\#/.test(revF)||/＃/.test(revF))newFlg=true;var Stations=generateDataArray(Item.Station);for(var j=0;j<Stations.length;j++){var Station=Stations[j];if("Name"in Station){var sNam=Station.Name;var sCod=Station.Code;if(En&&"enName"in Station)sNam=Station.enName}else{continue}if("HighTideDateTime"in Station){var htT=JMAWebUtility.date.strftime(new Date(Station.HighTideDateTime),"%Zd日%2ZH時%2ZM分");if(En)htT=JMAWebUtility.date.strftime(new Date(Station.HighTideDateTime),"%H:%M JST %d %ESm")}else{var htT="不明";if(En)htT="unknown"}var ret=FstMaxHeight(Station);var fstT=ret.fstT;var fstI=ret.fstI;var maxT=ret.maxT;var maxH=ret.maxH;var mh=ret.mh;var revF=ret.revF;var revM=ret.revM;listTd.push({index:sCod,cls:tClass,tds:'<td class="quake-nowrap">'+sNam+"</td>"+'<td class="quake-nowrap">'+htT+"</td>"+'<td class="quake-nowrap">'+revF+fstT+"</td>"});infTbl+="<tr><td>　　"+sNam+"</td><td>"+htT+"</td><td>"+revF+fstT+"</td></tr>";if(/\#/.test(revF)||/＃/.test(revF))newFlg=true}}}var infHd="";var listStr="クリックすると地図がズームします";if(En)listStr="Click a list to zoom in.";if(WorI){if(En){infHd="\n[Estimated tsunami arrival time and height]\n";if(impFlg)infHd+="$ indicates high-priority information.\n";if(newFlg)infHd+="# indicates new or revised announcements.\n";infHd+='<table class="quake-infoTableE"><tr><td>Individual regions</td><td>Estimated initial tsunami arrival time</td><td>Estimated maximum tsunami height</td></tr>'}else{infHd="\n［津波到達予想時刻・予想される津波の高さ］\n";if(impFlg)infHd+="＄印は優先度の高い重要な情報を示す記号です。\n";if(newFlg)infHd+="＃印は新たに発表、あるいは情報を更新した箇所です。\n";infHd+='<table class="quake-infoTable"><tr><td>津波予報区名</td><td>第１波の到達予想時刻</td><td>予想される津波の最大波の高さ</td></tr>'}if(En){var listTh='<tr class="contents-title"><th>Individual regions<br>for providing Tsunami Warning</th><th>Category</th><th>Estimated initial tsunami arrival time</th><th>Estimated maximum tsunami height</th></tr>'}else{var listTh='<tr class="contents-title"><th>津波予報区名</th><th>大津波警報・津波警報<br>津波注意報・津波予報<br>グレード</th><th>第１波の<br>到達予想時刻</th><th>予想される<br>津波の高さ</th></tr>'}}else if(title=="各地の満潮時刻・津波到達予想時刻に関する情報"){if(En){infHd="\n[High Tide Times and Estimated tsunami arrival times for individual locations]\n";if(impFlg)infHd+="$ indicates high-priority information.\n";if(newFlg)infHd+="# indicates new or revised announcements.\n";infHd+='<table class="quake-infoTableE"><tr><td>Individual regions and stations</td><td>High tide times</td><td>Estimated initial tsunami arrival time</td></tr>'}else{infHd="\n［各地の満潮時刻・津波到達予想時刻］\n";if(impFlg)infHd+="＄印は優先度の高い重要な情報を示す記号です。\n";if(newFlg)infHd+="＃印は新たに発表、あるいは情報を更新した箇所です。\n";infHd+='<table class="quake-infoTable"><tr><td>津波予報区名・地点名</td><td>満潮時刻</td><td>第１波の到達予想時刻</td></tr>'}if(En){var listTh='<tr class="contents-title"><th>Individual regions<br>and stations</th><th>High tide times</th><th>Estimated initial tsunami arrival time</th></tr>'}else{var listTh='<tr class="contents-title"><th>津波予報区名・地点名</th><th>満潮時刻</th><th>第１波の<br>到達予想時刻</th></tr>'}}wrnTbl=wrnTbl.replace(/、$/,"\n");wrnTbl=wrnTbl.replace(/、\n/g,"\n\n");if(WorI&&wrnTbl){if(En){if(sooWrn)wrnTbl="\nTsunamis are expected to arrive imminently in the following coastal regions of Japan (coastal regions above with asterisks)"+wrnTbl;if(impWrn)wrnTbl="\n$ indicates high-priority information."+wrnTbl}else{if(sooWrn)wrnTbl="\n＊印で示した沿岸ではただちに津波が来襲すると予想されます。"+wrnTbl;if(impWrn)wrnTbl="\n＄印は優先度の高い重要な情報を示す記号です。"+wrnTbl;wrnTbl=separator[1]+wrnTbl}text+=wrnTbl+"\n"}if(infTbl)text+=infHd+infTbl+"</table>\n";if(title=="各地の満潮時刻・津波到達予想時刻に関する情報"&&wrnTbl){if(!En)wrnTbl="［現在"+Categorys.join("・")+"を発表している沿岸］"+wrnTbl;text+=wrnTbl+"\n"}if(listTd.length)list=$("<div>").append(listStr,makeList(listTh,listTd))[0]}if("Observation"in data.Body.Tsunami&&title!="各地の満潮時刻・津波到達予想時刻に関する情報"){var infTbl="";var listTd=[];var impFlg=false;var newFlg=false;var risFlg=false;var Obs=generateDataArray(data.Body.Tsunami.Observation.Item);for(var i=0;i<Obs.length;i++){var Item=Obs[i];var Area=Item.Area;var Stations=generateDataArray(Item.Station);for(var j=0;j<Stations.length;j++){var Station=Stations[j];if("Name"in Station){var sNam=Station.Name;var sCod=Station.Code;if(En&&"enName"in Station)sNam=Station.enName}else{continue}var ret=FstMaxHeight(Station);var fstT=ret.fstT;var fstI=ret.fstI;var maxT=ret.maxT;var maxH=ret.maxH;var mh=ret.mh;var revF=ret.revF;var revM=ret.revM;infTbl+='<tr><td colspan="3">'+sNam+"</td></tr>";if(En){infTbl+="<tr><td>initial tsunami arrival time</td><td>"+revF+fstT+"</td><td>"+fstI+"</td></tr>"+"<tr><td>Current maximum tsunami observation</td><td>"+revM+maxT+"</td><td>"+maxH+"</td></tr>"}else{infTbl+="<tr><td>　第１波到達時刻</td><td>"+revF+fstT+"</td><td>"+fstI+"</td></tr>"+"<tr><td>　これまでの最大波</td><td>"+revM+maxT+"</td><td>"+maxH+"</td></tr>"}if(/\#/.test(revF)||/\#/.test(revM)||/＃/.test(revF)||/＃/.test(revM))newFlg=true;if(/\$/.test(revM)||/＄/.test(revM))impFlg=true;if(/\+/.test(maxH)||/＋/.test(maxH))risFlg=true;var tClass="tsunami-bg-";if(mh>3){tClass+="MW"}else if(mh>1){tClass+="TW"}else if(mh>=.2){tClass+="TA"}else if(mh>0){tClass+="TF"}else if(maxH=="観測中"||maxH=="Information pending"){tClass+="NT"}listTd.push({index:sCod,cls:tClass,tds:'<td class="quake-nowrap">'+sNam+"</td>"+'<td class="quake-nowrap">'+revF+fstT+"　"+fstI+"</td>"+'<td class="quake-nowrap">'+revM+maxT+"　"+maxH+"</td>"})}}var tgtT=JMAWebUtility.date.strftime(new Date(data.Head.TargetDateTime),"%Zd日%2ZH時%2ZM分")+"現在、沖合の観測値は次のとおりです。\n";if(En){tgtT=JMAWebUtility.date.strftime(new Date(data.Head.TargetDateTime),"%H:%M JST %d %ESm")+" Current tsunami observations are shown below.\n"}var infHd="";if(En)infHd="\n"+tgtT;var listStr="クリックすると地図がズームします";if(En)listStr="Click a list to zoom in";if(title=="沖合の津波観測に関する情報"){if(En){infHd+="[Tsunami observation at offshore gauge]\n"}else{infHd+="［沖合で観測した津波の観測値］\n"+tgtT}}else{if(En){infHd+="[Tsunami observation at tide station]\n"}else{infHd+="［各地の検潮所で観測した津波の観測値］\n"}}if(En){if(impFlg)infHd+="$ indicates high-priority information.\n";if(newFlg)infHd+="# indicates new or revised announcements.\n";if(risFlg)infHd+="+ tsunami height increasing\n";infHd+='<table class="quake-infoTableE">';var listTh='<tr class="contents-title"><th>stations</th><th>initial tsunami arrival time</th><th>Current maximum tsunami observation</th></tr>'}else{if(impFlg)infHd+="＄印は優先度の高い重要な情報を示す記号です。\n";if(newFlg)infHd+="＃印は新たに発表、あるいは情報を更新した箇所です。\n";if(risFlg)infHd+="＋印は現在潮位が上昇中であることを表します。\n";infHd+='<table class="quake-infoTable">';var listTh='<tr class="contents-title"><th>観測点名</th><th>第１波到達時刻</th><th>これまでの最大波</th></tr>'}if(infTbl)text+=infHd+infTbl+"</table>\n";if(title=="津波観測に関する情報"&&wrnTbl){if(!En)wrnTbl="［現在"+Categorys.join("・")+"を発表している沿岸］"+wrnTbl;text+=wrnTbl+"\n"}if(listTd.length)list=$("<div>").append(listStr,makeList(listTh,listTd))[0]}if("Estimation"in data.Body.Tsunami){var infTbl="";var impFlg=false;var newFlg=false;var Est=generateDataArray(data.Body.Tsunami.Estimation.Item);for(var i=0;i<Est.length;i++){var Item=Est[i];var Area=Item.Area;if("Name"in Area){var aNam=Area.Name;if(En&&"enName"in Area)aNam=Area.enName}else{continue}var ret=FstMaxHeight(Item);var fstT=ret.fstT;var fstI=ret.fstI;var maxT=ret.maxT;var maxH=ret.maxH;var mh=ret.mh;var revF=ret.revF;var revM=ret.revM;if(maxT==="")maxT=maxH;infTbl+='<tr><td colspan="2">'+aNam+"</td></tr>";if(En){infTbl+="<tr><td>Estimated initial tsunami arrival time based on offshore observation</td><td>"+revF+fstT+"</td></tr>"+"<tr><td>Estimated arrival time of current maximum tsunami based on offshore observation</td><td>"+revM+maxT+"</td></tr>"+"<tr><td>Estimated tsunami height based on offshore observation</td><td>"+revM+maxH+"</td></tr>"}else{infTbl+="<tr><td>　第１波の推定到達時刻</td><td>"+revF+fstT+"</td></tr>"+"<tr><td>　これまでの最大波の推定到達時刻</td><td>"+revM+maxT+"</td></tr>"+"<tr><td>　推定される津波の高さ</td><td>"+revM+maxH+"</td></tr>"}if(/\#/.test(revF)||/\#/.test(revM)||/＃/.test(revF)||/＃/.test(revM))newFlg=true;if(/\$/.test(revM)||/＄/.test(revM))impFlg=true}if(En){var infHd="\n[Estimated tsunami heights and arrival times in coastal areas based on offshore observation]\n";if(impFlg)infHd+="$ indicates high-priority information.\n";if(newFlg)infHd+="# indicates new or revised announcements.\n";infHd+='<table class="quake-infoTableE">'}else{var infHd="\n［沖合の観測値から推定される沿岸の津波の高さ］\n";if(impFlg)infHd+="＄印は優先度の高い重要な情報を示す記号です。\n";if(newFlg)infHd+="＃印は新たに発表、あるいは情報を更新した箇所です。\n";infHd+='<table class="quake-infoTable">'}if(infTbl)text+=infHd+infTbl+"</table>\n"}if(En){if("Comments"in data.Body){if("WarningComment"in data.Body.Comments)text+=data.Body.Comments.WarningComment.enText;if("ForecastComment"in data.Body.Comments)text+=data.Body.Comments.ForecastComment.enText;if("FreeFormComment"in data.Body.Comments){var fc=data.Body.Comments.FreeFormComment;if(/北西太平洋津波情報を発表/.test(fc))text+="The Northwest Pacific Tsunami Advisory has also been issued by JMA.\n";if(/太平洋津波警報センター.+津波情報を発表しています/.test(fc))text+="The Tsunami Bulletin has been issued by the Pacific Tsunami Warning Center.\n"}}}else{if("Comments"in data.Body){if(WorI)text+=separator[2];if("WarningComment"in data.Body.Comments)text+=data.Body.Comments.WarningComment.Text+"\n";if("ForecastComment"in data.Body.Comments)text+=data.Body.Comments.ForecastComment.Text+"\n";if("FreeFormComment"in data.Body.Comments)text+=data.Body.Comments.FreeFormComment+"\n"}if("Text"in data.Body)text+="\n"+data.Body.Text+"\n";if("NextAdvisory"in data.Body)text+="\n"+data.Body.NextAdvisory+"\n"}var HypNum=0;if("Earthquake"in data.Body){if(En){text+="[Epicenter element]\n"}else{text+=separator[3]+"［震源、規模］\n"}var EarthquakeAr=generateDataArray(data.Body.Earthquake);HypNum=EarthquakeAr.length;var hlLatestStr="";if(latestFlg){if(En){hlLatestStr=latestPast[latestFlg][1]}else{hlLatestStr=latestPast[latestFlg][0]}}if(HypNum>1){if(En){hlLatestStr+=latestPast[5][1]}else{hlLatestStr+=latestPast[5][0]}}hl='<div class="quake-hlBox">';if(hlLatestStr){hl+='<span class="quake-must fw_bold pl_10px pr_10px">'+hlLatestStr+"</span><br>"}for(var i=0;i<EarthquakeAr.length;i++){var Earthquake=EarthquakeAr[i];var coord=convCoordinate(Earthquake.Hypocenter.Area.Coordinate);var regNm=Earthquake.Hypocenter.Area.Name;var lat=coord.latD;var lon=coord.lonD;var dep=coord.dep+"";var mag=Earthquake.Magnitude;var atT=Earthquake.ArrivalTime;var hlAt="";var hlReg="";var hlDep="";var hlMag="";if(En){if("enName"in Earthquake.Hypocenter.Area)regNm=Earthquake.Hypocenter.Area.enName;text+='<table class="quake-infoTableE">';hlReg=regNm;if(atT!=""){text+="<tr><td>Occurrence at (JST)</td><td>"+JMAWebUtility.date.strftime(new Date(atT),"%H:%M JST %d %ESm %Y")+"</td></tr>";hlAt=JMAWebUtility.date.strftime(new Date(atT),"%H:%M JST %d %ESm %Y")}if(lat!=""){lat=lat.replace(/北緯(.+)$/,"$1 N");lat=lat.replace(/南緯(.+)$/,"$1 S");lon=lon.replace(/東経(.+)$/,"$1 E");lon=lon.replace(/西経(.+)$/,"$1 W");text+="<tr><td>Latitude (degree)</td><td>"+lat+"</td></tr>"+"<tr><td>Longitude (degree)</td><td>"+lon+"</td></tr>"}if(dep!=""&&dep<5){text+="<tr><td>Depth</td><td>very shallow</td></tr>";hlDep="very shallow"}else if(dep!=""){text+="<tr><td>Depth</td><td>"+dep+" km</td></tr>";hlDep=dep+"km"}if(dep==="")hlDep="---";if(/Ｍ８を超/.test(mag)){text+="<tr><td>Magnitude</td><td>Over M8</td></tr>";hlMag="Over M8"}else if(/不明/.test(mag)){text+="<tr><td>Magnitude</td><td>unknown</td></tr>";hlMag="---"}else if(mag!=""){text+="<tr><td>Magnitude</td><td>"+mag+"</td></tr>";hlMag="M"+mag}text+="<tr><td>Region name</td><td>"+regNm+"</td></tr>";text+="</table>";if("Source"in Earthquake.Hypocenter){if(Earthquake.Hypocenter.Source=="ＰＴＷＣ"){text+="Earthquake parameters by PTWC.\n"}else if(Earthquake.Hypocenter.Source=="ＵＳＧＳ"){text+="Earthquake parameters by NEIC/USGS.\n"}else if(Earthquake.Hypocenter.Source=="ＷＣＡＴＷＣ"){text+="Earthquake parameters by WCATWC.\n"}}}else{var addText=JMAWebUtility.date.strftime(new Date(atT),"%Zd日%2ZH時%2ZM分")+"頃地震がありました。\n";hlAt=JMAWebUtility.date.strftime(new Date(atT),"%m月%d日%H時%M分頃");hlReg=regNm;var NameFromMark="";if(typeof Earthquake.Hypocenter.Area.NameFromMark!=="undefined"){NameFromMark="、"+Earthquake.Hypocenter.Area.NameFromMark}if(lat!="")regNm+="（"+lat+"度、"+lon+"度"+NameFromMark+"）";addText+="震源地は、"+regNm;if(dep!=""&&dep<5){addText+="で、震源の深さはごく浅い";hlDep="ごく浅い"}else if(dep!=""){addText+="で、震源の深さは約"+dep+"ｋｍ";hlDep=dep+"km"}if(dep==="")hlDep="---";if(/Ｍ８を超/.test(mag)){addText+="、地震の規模（マグニチュード）は８を超える巨大地震と推定されます";hlMag="Ｍ８超"}else if(/不明/.test(mag)){addText+="と推定されます";hlMag="---"}else if(mag!=""){addText+="、地震の規模（マグニチュード）は"+mag+"と推定されます";hlMag="M"+mag}addText+="。\n";if("Source"in Earthquake.Hypocenter){if(Earthquake.Hypocenter.Source=="ＰＴＷＣ"){addText+="震源は太平洋津波警報センター（ＰＴＷＣ）による。\n"}else if(Earthquake.Hypocenter.Source=="ＵＳＧＳ"){addText+="震源は米国地質調査所国立地震情報センター（ＵＳＧＳ，ＮＥＩＣ）による。\n"}else if(Earthquake.Hypocenter.Source=="ＷＣＡＴＷＣ"){addText+="震源は西海岸アラスカ津波警報センター（ＷＣＡＴＷＣ）による。\n"}else{addText+="震源は"+Earthquake.Hypocenter.Source+"による。\n"}}if("DetailedName"in Earthquake.Hypocenter.Area){addText+="詳しい震源の位置は"+Earthquake.Hypocenter.Area.DetailedName+"です。\n"}text+=toZenkaku(addText)}text+="\n";hl+='<span class="quake-hlHeader">'+hlTableHeader[strI][0]+"</span><br>"+'<span class="quake-hlContents">'+hlAt+"</span><br>"+'<span class="quake-hlHeader">'+hlTableHeader[strI][1]+"</span><br>"+'<span class="quake-hlContents">'+hlReg+"</span><br>"+'<span class="quake-hlHeader">'+hlTableHeader[strI][2]+"</span><br>"+'<span class="quake-hlContents">'+hlDep+"</span><br>"+'<span class="quake-hlHeader">'+hlTableHeader[strI][3]+"</span><br>"+'<span class="quake-hlContents">'+hlMag+"</span><br>"}hl+="</div>"}if(/_K/.test(elm.ift)){if(En){text+="\n*** This is Drill Information ***\n"}else{text+="\n＊＊＊　これは訓練です　＊＊＊\n"}}text=text.replace(/\n/g,"<br>");if(En)text=text.replace(/　/g," ");return{text:text,list:list,hl:hl}};var makeList=function(listTh,listTd){var listTable=$("<table>").append(listTh);for(var i=0;i<listTd.length;i++){var index=listTd[i].index;var trCls=listTd[i].cls;var tdStr=listTd[i].tds;var tr=$("<tr>").addClass("contents-clickable contents-clickable-highlight "+trCls).attr("index",index).on("click",function(e){if(typeof e.target.parentNode.attributes.index.nodeValue!=="undefined")zoomTo(e.target.parentNode.attributes.index.nodeValue)});$(tr).append(tdStr);$(listTable).append(tr)}return listTable};var zoomTo=function(code){if(code in STATION_PRM){var zxy=[9,STATION_PRM[code].lat,STATION_PRM[code].lon]}else{var zxy={area:[code]}}UnitMap.makePage({duration:drawDataObj.duration,zxy:zxy})};var FstMaxHeight=function(Parents){var fstT="";var fstC="";var fstI="";var maxT="";var maxH="";var mh=0;var revF="";var revM="";if("FirstHeight"in Parents){if("Revise"in Parents.FirstHeight){revF="＃";if(En)revF="# "}if("ArrivalTime"in Parents.FirstHeight){fstT=JMAWebUtility.date.strftime(new Date(Parents.FirstHeight.ArrivalTime),"%Zd日%2ZH時%2ZM分");if(En)fstT=JMAWebUtility.date.strftime(new Date(Parents.FirstHeight.ArrivalTime),"%H:%M JST %d %ESm")}if("Initial"in Parents.FirstHeight){fstI=Parents.FirstHeight.Initial;if(En&&fstI=="押し")fstI="Rise";if(En&&fstI=="引き")fstI="Fall"}if("Condition"in Parents.FirstHeight){fstC=Parents.FirstHeight.Condition;if(En&&fstC=="第１波識別不能")fstC="Initial tsunami details unclear";if(En&&fstC=="ただちに津波来襲と予測")fstC="Tsunamis are expected to arrive imminently";if(En&&fstC=="津波到達中と推測")fstC="Tsunami arrival expected";if(En&&fstC=="第１波の到達を確認")fstC="Arrival of initial tsunami confirmed";if(En&&fstC=="早いところでは既に津波到達と推定")fstC="Tsunami imminent or already arrived";if(fstT){fstT+=" ("+fstC+")"}else{fstT=fstC}}}if("MaxHeight"in Parents){if("Revise"in Parents.MaxHeight){revM="＃";if(En)revM="# "}if("DateTime"in Parents.MaxHeight){maxT=JMAWebUtility.date.strftime(new Date(Parents.MaxHeight.DateTime),"%Zd日%2ZH時%2ZM分");if(En)maxT=JMAWebUtility.date.strftime(new Date(Parents.MaxHeight.DateTime),"%H:%M JST %d %ESm")}if("TsunamiHeight"in Parents.MaxHeight){mh=Parents.MaxHeight.TsunamiHeight.replace(/\+/,"");mh=mh.replace(/</,"");mh=mh.replace(/>/,"");if(!isNaN(mh)&&mh!=""){maxH=toZenkaku(mh)+"ｍ";if(En)maxH=mh+"m"}else{maxH=mh}if(/</.test(Parents.MaxHeight.TsunamiHeight)){if(En){maxH="under "+maxH}else{maxH+="未満"}}else if(/>/.test(Parents.MaxHeight.TsunamiHeight)){if(En){maxH="above "+maxH}else{maxH+="超"}}if(/\+/.test(Parents.MaxHeight.TsunamiHeight)){if(En){maxH+="+"}else{maxH+="＋"}}if("Condition"in Parents.MaxHeight&&Parents.MaxHeight.Condition=="重要"){if(En){revM="$"+revM}else{revM="＄"+revM}}}else if("Condition"in Parents.MaxHeight){maxH=Parents.MaxHeight.Condition}if(maxH=="微弱")mh=.01;if(maxH=="巨大")mh=10;if(maxH=="高い")mh=3;if(En){if(maxH=="観測中")maxH="Information pending";if(maxH=="推定中")maxH="Information pending";if(maxH=="微弱")maxH="Slight sea level changes";if(maxH=="巨大")maxH="Huge";if(maxH=="高い")maxH="High"}}return{fstT:fstT,fstI:fstI,maxT:maxT,maxH:maxH,mh:mh,revF:revF,revM:revM}};var generateDataArray=function(org){if(Array.isArray(org)){return org}else{return[org]}};var convInt=function(val){var shindoStrJ={9:"震度７",8:"震度６強",7:"震度６弱",6:"震度５強",5:"震度５弱",4:"震度４",3:"震度３",2:"震度２",1:"震度１",0:"震度０",M:"震度５弱以上と<br>考えられるが<br>現在震度を入手<br>していない"};var shindoStrE={9:"7",8:"6 Upper",7:"6 Lower",6:"5 Upper",5:"5 Lower",4:"4",3:"3",2:"2",1:"1",0:"0",M:"A station where the seismic intensity is<br>estimated at 5 Lower or more<br>in the absence of available data"};var shindoClass={9:"quake-bg-I7",8:"quake-bg-ID",7:"quake-bg-IC",6:"quake-bg-IB",5:"quake-bg-IA",4:"quake-bg-I4",3:"quake-bg-I3",2:"quake-bg-I2",1:"quake-bg-I1",0:"quake-bg-I0",M:"quake-bg-IA"};var shindoColor={9:"rgb(180,000,104)",8:"rgb(165,000,033)",7:"rgb(255,040,000)",6:"rgb(255,153,000)",5:"rgb(255,230,000)",4:"rgb(250,230,150)",3:"rgb(000,065,255)",2:"rgb(000,170,255)",1:"rgb(242,242,255)",0:"rgb(143,166,206)",M:"rgb(255,230,000)"};var shindoColorFG={9:"#FFFFFF",8:"#FFFFFF",7:"#FFFFFF",6:"#000000",5:"#000000",4:"#000000",3:"#FFFFFF",2:"#000000",1:"#000000",0:"#000000",M:"#000000"};var shindoSvg={9:"int9.svg",8:"int8.svg",7:"int7.svg",6:"int6.svg",5:"int5.svg",4:"int4.svg",3:"int3.svg",2:"int2.svg",1:"int1.svg",0:undefined,M:"abs.svg"};var key="0";var idx=99;if(val=="7"){key="9";idx=0}else if(val=="6+"){key="8";idx=1}else if(val=="6-"){key="7";idx=2}else if(val=="5+"){key="6";idx=3}else if(val=="5-"){key="5";idx=4}else if(val=="5@"||val=="震度５弱以上未入電"){key="M";idx=5}else if(val=="4"){key="4";idx=6}else if(val=="3"){key="3";idx=7}else if(val=="2"){key="2";idx=8}else if(val=="1"){key="1";idx=9}return{strJ:shindoStrJ[key],strE:shindoStrE[key],cls:shindoClass[key],color:shindoColor[key],cssMap:{"background-color":shindoColor[key],color:shindoColorFG[key]},svg:shindoSvg[key],idx:idx}};var setHypo=function(elm,idx,flg,TorQ){var atAr=multiHyp(elm.at);var regN=multiHyp(elm.anm);if(En)regN=multiHyp(elm.en_anm);var codAr=multiHyp(elm.cod);var magAr=multiHyp(elm.mag);var points=[];var onEvent="mouseover";if(isIOS)onEvent="click";for(var j=0;j<codAr.length;j++){var coord=convCoordinate(codAr[j]);if(coord.lat==="")return[];var lat=coord.lat;var lon=coord.lon;var dep=coord.dep;var mag=magAr[j];if(lon<-30)lon+=360;var it="";var at="";if(elm.rdt!=""){it=JMAWebUtility.date.strftime(new Date(elm.rdt),"%Y/%m/%d %H:%M")}if(atAr[j]!=""){at=JMAWebUtility.date.strftime(new Date(atAr[j]),"%Y/%m/%d %H:%M")}var regNm=regN[j];var ttl=elm.ttl;if(En)ttl=elm.en_ttl;var ret=convHypstr(ttl,mag,dep,elm.maxi);var title=ret.title;var magStr=ret.mag;var depStr=ret.dep;var intStr=ret.int;if(/_K/.test(elm.ift)){if(En){title+="[Drill]"}else{title+="【訓練】"}}var itTtl="発表日時　";var atTtl="検知日時　";var depTtl="　　深さ　";var magTtl="　　　Ｍ　";var intTtl="最大震度　";if(En){itTtl="Issued at : ";atTtl="Occurrence at : ";depTtl="Depth : ";magTtl="Magnitude : ";intTtl="Maximum seismic intensity : "}var titleStr='<div style="font-size: 16px; font-weight:bold; color: #272d79;">'+regNm+"</div>"+'<div style="font-size: 12px; color: #272d79">'+title+"</div>"+'<div style="font-size: 10px; color: black">'+itTtl+'<span style="font-weight: bold; font-size: 14px;">'+it+"</span></div>"+'<div style="font-size: 10px; color: black">'+atTtl+'<span style="font-weight: bold; font-size: 14px;">'+at+"</span></div>";if(depStr!="")titleStr+='<div style="font-size: 10px; color: black">'+depTtl+'<span style="font-weight: bold; font-size: 14px;">'+depStr+"</span></div>";titleStr+='<div style="font-size: 10px; color: black">'+magTtl+'<span style="font-weight: bold; font-size: 14px;">'+magStr+"</span></div>";if(intStr!=""&&TorQ)titleStr+='<div style="font-size: 10px; color: black">'+intTtl+'<span style="font-weight: bold; font-size: 14px;">'+intStr+"</span></div>";if(flg){var point={type:"dom",latlon:[lat,lon],domElement:'<img src="'+imgdir+'Hypo.svg" width="26" height="26">',svgConfig:{height:26,width:26},tooltip:{content:titleStr,on:onEvent}}}else{var point={type:"circle",latlon:[lat,lon],radius:getEqSize(mag),options:getEqColorD(dep,idx),tooltip:{content:titleStr,on:onEvent},events:{click:clickHypo}}}points.push(point)}return points};var getEqSize=function(mag){var sizeFactor=2.5;var size=0;if(parseFloat(mag)<1||mag===""||isNaN(parseFloat(mag))){size=1*sizeFactor}else if(parseFloat(mag)>8||/Ｍ８を超/.test(mag)){size=8*sizeFactor}else{size=parseFloat(mag)*sizeFactor}return size};var getEqColorD=function(dep,idx){var d=Number(dep);var h=0;var l=50;if(d<=10){h=0;l=50-25*((10-d)/10)}else if(d<=20){h=0+30*((d-10)/10)}else if(d<=30){h=30+30*((d-20)/10)}else if(d<=50){h=60}else if(d<=100){h=60+60*((d-50)/50);l=50+25*((50-d)/100)}else if(d<=200){h=120+90*((d-100)/100);l=25-30*((100-d)/100)}else if(d<=700){h=210+30*((d-200)/500);l=55+30*((200-d)/500)}else{h=240;l=25}return{idx:idx,weight:.5,color:"#000000",fillColor:"hsl("+h+", 100%, "+l+"%)",opacity:1,fillOpacity:.8}};var clickHypo=function(e){var idx=e.target.options.idx;if(idx==="")return;if(location.href.indexOf("contents=tsunami")==-1){Quake.common.redrawMap(false,idx,true)}else{redrawMap(false,idx,true,null)}};var convCoordinate=function(str){var lat="";var lon="";var dep="";var latD="";var latM="";var lonD="";var lonM="";if(/^[\+-]\d[\d\.]+[\+-]\d[\d\.]+[\+-][\d\.]+\/$/.test(str)){var reg=/^([\+-]\d[\d\.]+)([\+-]\d[\d\.]+)([\+-][\d\.]+)\/$/;var reArray=reg.exec(str);var latStr=reArray[1];var lonStr=reArray[2];dep=parseInt(reArray[3])/1e3*-1}else if(/^[\+-]\d[\d\.]+[\+-]\d[\d\.]+\/$/.test(str)){var reg=/^([\+-]\d[\d\.]+)([\+-]\d[\d\.]+)\/$/;var reArray=reg.exec(str);var latStr=reArray[1];var lonStr=reArray[2]}else{return{lat:lat,lon:lon,dep:dep,latD:latD,latM:latM,lonD:lonD,lonM:lonM}}if(/^[\+-]\d{6}.*/.test(latStr)){var reg=/^([\+-]\d{2})(\d{2})(\d{2}.*)$/;var reArray=reg.exec(latStr);latD=reArray[1];latM=reArray[2];var latS=reArray[3];var reg=/^([\+-]\d{3})(\d{2})(\d{2}.*)$/;var reArray=reg.exec(lonStr);lonD=reArray[1];lonM=reArray[2];var lonS=reArray[3];lat=parseInt(latD)+parseFloat(latM)/60+parseFloat(latS)/3600;lon=parseInt(lonD)+parseFloat(lonM)/60+parseFloat(lonS)/3600}else if(/^[\+-]\d{4}.*/.test(latStr)){var reg=/^([\+-]\d{2})(\d{2}.*)$/;var reArray=reg.exec(latStr);latD=reArray[1];latM=reArray[2];var reg=/^([\+-]\d{3})(\d{2}.*)$/;var reArray=reg.exec(lonStr);lonD=reArray[1];lonM=reArray[2];lat=parseInt(latD)+parseFloat(latM)/60;lon=parseInt(lonD)+parseFloat(lonM)/60}else{latD=latStr;lonD=lonStr;lat=parseFloat(latD);lon=parseFloat(lonD)}latD=latD.replace(/([\+\-])0(.+)$/,"$1$2");lonD=lonD.replace(/([\+\-])0{1,2}(.+)$/,"$1$2");latD=latD.replace("+","北緯");latD=latD.replace("-","南緯");lonD=lonD.replace("+","東経");lonD=lonD.replace("-","西経");return{lat:lat,lon:lon,dep:dep,latD:latD,latM:latM,lonD:lonD,lonM:lonM}};var convHypstr=function(title,mag,dep,int){var maxInt=convInt(int);if(En){if(/Ｍ８を超/.test(mag)){mag="Over M8"}else if(/不明/.test(mag)){mag="unknown"}if(String(dep)!=""){if(dep<5){dep="very shallow"}else{dep=dep+" km"}}if(int!="")int=maxInt.strE}else{if(/Ｍ８を超/.test(mag)){mag="８超"}else if(/不明/.test(mag)){mag="不明"}if(String(dep)!=""){if(dep<5){dep="ごく浅い"}else{dep=dep+" km"}}if(int!="")int=maxInt.strJ}return{title:title,mag:mag,dep:dep,int:int,intCls:maxInt.cls}};var multiHyp=function(buf){var ret=[];if(/_/.test(buf)){ret=buf.split("_")}else{ret.push(buf)}return ret};var toZenkaku=function(han){han=String(han);var zen=han.replace(/[\.0-9]/g,function(s){return String.fromCharCode(s.charCodeAt(0)+65248)});zen=zen.replace(/ /g,"　");return zen};var returnDis=function(lat_f,lat_t,lon_f,lon_t){var RADIAN=Math.PI/180;var R=6370.291;lat_f=lat_f*RADIAN;lon_f=lon_f*RADIAN;lat_t=lat_t*RADIAN;lon_t=lon_t*RADIAN;lat_f=lat_f-11.55/60*RADIAN*Math.sin(2*lat_f);lat_t=lat_t-11.55/60*RADIAN*Math.sin(2*lat_t);var Ae=Math.cos(lat_f)*Math.cos(lon_f);var Be=Math.cos(lat_f)*Math.sin(lon_f);var Ce=Math.sin(lat_f);var As=Math.cos(lat_t)*Math.cos(lon_t);var Bs=Math.cos(lat_t)*Math.sin(lon_t);var Cs=Math.sin(lat_t);var x=(Ae-As)*(Ae-As)+(Be-Bs)*(Be-Bs)+(Ce-Cs)*(Ce-Cs);var y=.5*Math.sqrt(x);var z=2*Math.atan2(y,Math.sqrt(1-y*y));var d=Math.round(R*z*1e3)/1e3;return d};var kunrenAuth=function(nteq){var ret=false;var passwd=prompt("パスワードを入力してください");var url="tsunami/js/"+passwd;if(nteq)url="../"+url;$.ajax({type:"GET",url:url,async:false}).done(function(data){alert("認証成功！");ret=true}).fail(function(jqXHR,textStatus,errorThrown){alert("認証失敗…");ret=false});return ret};Tsunami.common=function(){return{generateDataArray:generateDataArray,convInt:convInt,setHypo:setHypo,convCoordinate:convCoordinate,convHypstr:convHypstr,toZenkaku:toZenkaku,returnDis:returnDis,kunrenAuth:kunrenAuth,defaultZxy:defaultZxy}}()})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";root.Quake=root.Quake||{};var bosaiTop=false;var infoArray=[];var currentIdx=0;var idxList=[];var eidList=[];var skippedID=[];var isIOS=false;var En=false;if(location.href.indexOf("lang=en")!=-1)En=true;var kunren=false;if(location.href.indexOf("kunren=true")!=-1)kunren=0;var cancelStr={};var selectedCode="";var selectedName="";var selectPrefCity=null;var attentionBtn=null;var imgdir="quake/images/";var datadir="quake/data/";var prefCity_PRM={};var convCity_PRM={};var convCity_url="common/const/earthquake_area.json";var defaultZxy=Tsunami.common.defaultZxy;var preEvent=[38,135,0];var intMarkerSize=20;var DURATION_EQ_PN=1;var drawDataObj={data:{_hypo:{zindex:3e4,minZoom:1,maxZoom:18,display:false,data:[]},hypo:{zindex:3e4,minZoom:1,maxZoom:18,display:false,data:[]},int:{zindex:2e4,minZoom:8,maxZoom:18,display:false,data:[]},area:{mapKey:"earthquake",display:false,colorData:[],options:{opacity:0,fillOpacity:0,interactive:false}}},zxy:{},duration:1.5,infoTime:null,contentsInfo:null,freeSpace:null,legend:null,explain:null,textInfo:null,defaultOpen:"legend"};var buttonStr=[["最新の情報","The latest information"],["< 前地震","< Previous Earthquake"],["次地震 >","Next Earthquake >"],["< 前情報","< Previous Information"],["次情報 >","Next Information >"],["府県選択","Options of Prefectures"],["市町村選択","Options of Cities"],["小","Small"],["中","Medium"],["大","Large"],["震度５弱以上を観測した地震があります","There was observation of seismic intensity 5 Lower or more"]];var legendStr=[["震央","Epicenter"],["震度７","7"],["震度６強","6 Upper"],["震度６弱","6 Lower"],["震度５強","5 Upper"],["震度５弱","5 Lower"],["震度４","4"],["震度３","3"],["震度２","2"],["震度１","1"],["震度５弱以上と考えられるが現在震度を入手していない","Unable to get information about seismic intensity of 5-lower or stronger"]];var infoRemarks=[["最近３０日間に発表された地震情報はありません。","No earthquake information have been issued within the last 30 days."],["最近３０日間に発表された地震情報です。","Earthquake informations have been issued within the last 30 days."],["@@@ で震度１以上を観測した地震。","Earthquakes observed in @@@."]];var infoTableHeader=[["地震検知日時","震央地名","深さ","マグニチュード","最大震度","対象府県<br>市町村の<br>最大震度"],["Observed at (JST)","Region name","Depth","Magnitude","Maximum<br>seismic<br>intensity<br>(JMA<br>Seismic<br>Intensity)","Maximum<br>seismic<br>intensity<br>in target Pref./City"]];var hlTableHeader=[["地震の発生日時","震央地名","深さ","マグニチュード"],["Occurrence at (JST)","Region name","Depth","Magnitude"]];var intColor={I1:"rgb(242,242,255)",I2:"rgb(000,170,255)",I3:"rgb(000,065,255)",I4:"rgb(250,230,150)",IA:"rgb(255,230,000)",IB:"rgb(255,153,000)",IC:"rgb(255,040,000)",ID:"rgb(165,000,033)",I7:"rgb(180,000,104)",I9:"rgb(000,128,000)"};var strI=0;if(En)strI=1;root.Quake.draw=function(hashdata,opt,resolve){if(kunren===0)kunren=Tsunami.common.kunrenAuth(false);if(opt.devise.isIOS)isIOS=opt.devise.isIOS;if(opt.contentsType=="bosaiTop"){bosaiTop=true}else{bosaiTop=false}var ret=selectedPrefCity(hashdata.area_type,hashdata.area_code,opt);selectedCode=ret.selectedCode;selectedName=ret.selectedName;var flg=false;if(hashdata.elem=="int")flg=true;var argId=null;if("id"in hashdata){argId=hashdata.id;var newHash=document.location.hash.replace(/&id=\d{14}/,"");history.replaceState(null,null,newHash)}$.when(readParam(opt)).done(function(){$.when(readList(flg,argId)).done(function(){if(bosaiTop){drawDataObj["freeSpace"]=drawDataObj["contentsInfo"];if("area_type"in hashdata&&(hashdata.area_type=="offices"||hashdata.area_type=="class20s")){delete drawDataObj.zxy}}resolve(drawDataObj)})})};root.Quake.changeMap=function(hashdata,opt,resolve){var flg=false;if(hashdata.elem=="int")flg=true;$.when(readList(flg,null)).done(function(){drawDataObj["selectChange"]={elem:hashdata.elem};resolve(drawDataObj)})};var redrawMap=function(flg,argv,fit){if(flg){var promise=readList(argv,null)}else{var promise=makeData(argv)}$.when(promise).done(function(){if(!fit)delete drawDataObj.zxy;drawDataObj["selectChange"]={elem:"int"};UnitMap.makePage(drawDataObj)})};var readList=function(flg,argId){infoArray=[];currentIdx=0;idxList=[];eidList=[];skippedID=[];cancelStr={};if(!bosaiTop)selectPrefCity=makeSelectPrefCity();var def=$.Deferred();JMAWebUtility.parallelRequest({listJson:datadir+"list.json"},function(data){var listData=data.listJson;var seisList={};var latestID=-1;for(var i=0;i<listData.length;i++){var elm=listData[i];if(kunren){if(!/_K/.test(elm.ift))continue}else{if(/_K/.test(elm.ift))continue}var id=elm.eid;var it="";var at="";var itut=0;var atut=0;if(elm.rdt!=""){itut=Date.parse(elm.rdt);it=JMAWebUtility.date.strftime(new Date(itut),"%m月%d日%H時%M分");if(En)it=JMAWebUtility.date.strftime(new Date(itut),"%H:%M JST %d %ESm")}if(elm.at!=""){atut=Date.parse(elm.at);at=JMAWebUtility.date.strftime(new Date(atut),"%Y年%m月%d日%H時%M分");if(En)at=JMAWebUtility.date.strftime(new Date(atut),"%H:%M JST %d %ESm %Y")}var regNm=elm.anm;if(En)regNm=elm.en_anm;var coord=Tsunami.common.convCoordinate(elm.cod);var ret=Tsunami.common.convHypstr(elm.ttl,elm.mag,coord.dep,elm.maxi);var title=ret.title;var mag=ret.mag;var dep=ret.dep;var intStr=ret.int;var maxIntCls=ret.intCls;var cancelKey=elm.eid+"_"+elm.ttl;if(dep==""&&mag!="")dep="---";var maxiIdx=Tsunami.common.convInt(elm.maxi).idx;var filter=true;var targetIdx="";if(selectedCode!=""&&Object.keys(convCity_PRM).length>0){var selectedCityCodes=[];if(selectedCode in convCity_PRM.from_class20){selectedCityCodes=convCity_PRM.from_class20[selectedCode]}else if(selectedCode in convCity_PRM.from_office){selectedCityCodes=convCity_PRM.from_office[selectedCode]}else{selectedCityCodes.push(selectedCode)}for(var l=0;l<elm.int.length;l++){var intCity=elm.int[l].city;for(var m=0;m<intCity.length;m++){if(selectedCityCodes.indexOf(intCity[m].code)>-1){filter=false;var intIdx=Tsunami.common.convInt(intCity[m].maxi).idx;if(targetIdx==""||targetIdx>intIdx)targetIdx=intIdx}}}}else{filter=false}if(filter)continue;var tCls="T5";if(elm.ttl=="震度速報")tCls="T1";if(elm.ttl=="震源に関する情報")tCls="T2";if(elm.ttl=="震源・震度情報")tCls="T3";if(elm.ttl=="遠地地震に関する情報")tCls="T4";if((elm.ttl=="顕著な地震の震源要素更新のお知らせ"||elm.ttl=="地震回数に関する情報")&&!En)skippedID.push(id);if(cancelKey in cancelStr&&!/取消/.test(elm.ift)&&!/訂正/.test(elm.ift)){cancelStr[cancelKey].unshift(elm.rdt)}if(tCls=="T5"&&regNm=="")regNm=title;if(En){if(tCls=="T5")continue;if(/_K/.test(elm.ift))regNm+="[Drill]"}else{if(/_K/.test(elm.ift))regNm+="【訓練】"}if(tCls=="T3"&&intStr==""&&!/取消/.test(elm.ift))intStr="---";elm.json=datadir+elm.json;if(latestID==-1){if(argId!=null){if(argId==id)latestID=id}else{latestID=id}}infoArray[i]=elm;if(typeof idxList[id]==="undefined"){idxList[id]=[];eidList.push(id)}idxList[id].push(i);if(elm.ttl=="顕著な地震の震源要素更新のお知らせ"||elm.ttl=="地震回数に関する情報")continue;if(typeof seisList[id]==="undefined")seisList[id]=[];if(typeof seisList[id][0]==="undefined"||seisList[id][0]==="")seisList[id][0]=i;if(typeof seisList[id][1]==="undefined"||seisList[id][1]===""){seisList[id][1]=at;seisList[id][10]=atut}if(typeof seisList[id][2]==="undefined"||seisList[id][2]==="")seisList[id][2]=regNm;if(typeof seisList[id][3]==="undefined"||seisList[id][3]==="")seisList[id][3]=dep;if(typeof seisList[id][4]==="undefined"||seisList[id][4]==="")seisList[id][4]=mag;if(typeof seisList[id][6]==="undefined"||seisList[id][6]===""){seisList[id][6]=intStr;seisList[id][5]=maxIntCls;seisList[id][9]=maxiIdx}if(targetIdx!=""&&(typeof seisList[id][8]==="undefined"||seisList[id][8]==="")){var targetInt="1";if(targetIdx==0)targetInt="7";if(targetIdx==1)targetInt="6+";if(targetIdx==2)targetInt="6-";if(targetIdx==3)targetInt="5+";if(targetIdx==4)targetInt="5-";if(targetIdx==5)targetInt="5@";if(targetIdx==6)targetInt="4";if(targetIdx==7)targetInt="3";if(targetIdx==8)targetInt="2";if(En){seisList[id][8]=Tsunami.common.convInt(targetInt).strE;if(targetInt=="5@")seisList[id][8]="Estimated seismic intensity of<br>at least 5 Lower"}else{seisList[id][8]=Tsunami.common.convInt(targetInt).strJ;if(targetInt=="5@")seisList[id][8]="震度５弱<br>以上と推定"}seisList[id][7]=Tsunami.common.convInt(targetInt).cls}}var infoStr=$("<div>");var btnClear="";if(selectedName){$(infoStr).append(infoRemarks[2][strI].replace("@@@",selectedName)+"<br>");var btnClearStr="府県・市町村選択を解除";if(En)btnClearStr="Lifting for Pref./City";var btnClear=$("<div>").text(btnClearStr).addClass("contents-button").on("click",function(e){clearPrefCity()})}if(latestID==-1){NoInfo($(infoStr).append(infoRemarks[0][strI]),btnClear);def.resolve();return}var infoTableHeaderAr=infoTableHeader[strI].slice();if(selectedName=="")infoTableHeaderAr.pop();$(infoStr).append(infoRemarks[1][strI]);var infoTable=$("<table>").append('<tr class="contents-title"><th>'+infoTableHeaderAr.join("</th><th>")+"</th></tr>");eidList.sort(function(a,b){return b-a});attentionBtn=null;var attentionMaxi=9;var nowUt=new Date;var latestIdIdx=0;for(var i=0;i<eidList.length;i++){var id=eidList[i];var latestIdx=0;for(var j=0;j<skippedID.length;j++){if(id==skippedID[j])latestIdx++}if(argId!=null&&argId==id)latestIdIdx=latestIdx;var tr=$("<tr>").attr("index",idxList[id][latestIdx]).on("click",function(e){if(typeof e.target.parentNode.attributes.index.nodeValue!=="undefined")redrawMap(false,e.target.parentNode.attributes.index.nodeValue,true)});$(tr).addClass("contents-clickable contents-clickable-highlight").append($("<td>").html(seisList[id][1]).addClass("").attr("width","200px"),$("<td>").html(seisList[id][2]).addClass("").attr("width","200px"),$("<td>").html(seisList[id][3]).addClass("talign_center").attr("width","80px"),$("<td>").html(seisList[id][4]).addClass("talign_center").attr("width","60px"),$("<td>").addClass("talign_center").attr("width","60px").append($("<span>").html(seisList[id][6]).addClass(seisList[id][5]+" quake-badge-span")));if("8"in seisList[id]){$(tr).append($("<td>").addClass("talign_center").attr("width","60px").append($("<span>").html(seisList[id][8]).addClass(seisList[id][7]+" quake-badge-span")))}$(infoTable).append(tr);if(seisList[id][9]<5&&seisList[id][9]<attentionMaxi&&seisList[id][10]>nowUt-DURATION_EQ_PN*24*60*60*1e3){attentionMaxi=seisList[id][9];attentionBtn=$('<p class="mt_5px mb_5px talign_right">').append($("<div>").text(buttonStr[10][strI]).addClass("quake-attention-button").attr("index",idxList[id][latestIdx]).on("click",function(e){if(typeof e.target.attributes.index.nodeValue!=="undefined")redrawMap(false,e.target.attributes.index.nodeValue,true)}))}}drawDataObj["textInfo"]=$("<div>").addClass("contents-block").append(selectPrefCity,infoStr,infoTable)[0];if(flg){var promise=makeData(idxList[latestID][latestIdIdx])}else{var promise=makeData(-1)}$.when(promise).done(function(){def.resolve()})});return def.promise()};var selectedPrefCity=function(areaType,areaCode,opt){if(opt.areaInfo!=null){areaType=opt.areaInfo.areaType;areaCode=opt.areaInfo.areaCode}var code=areaCode;var name="";var nameKey="name";if(En)nameKey="enName";if(areaType in opt["areas"]){name=opt["areas"][areaType][code][nameKey];name=infoRemarks[2][strI].replace("@@@",name)+"<br>"}if(areaType!="offices"&&areaType!="class20s"){code="";name=""}return{selectedCode:code,selectedName:name}};var makeSelectPrefCity=function(){var pCod=$("#pref").val()||"";var cCod=$("#city").val()||"";if(selectedCode!=""&&selectedCode.length==7&&cCod==""){cCod=selectedCode;var eqCity=cCod;if(eqCity in convCity_PRM.from_class20)eqCity=convCity_PRM.from_class20[eqCity][0];pCod=convCity_PRM.to_office[eqCity][0]}else if(selectedCode!=""&&selectedCode.length==6&&pCod==""){pCod=selectedCode;cCod="9999999"}else{selectedCode="";selectedName=""}var prefSelect=$("<select>").attr("id","pref").addClass("quake-select").on("change",function(e){redrawMap(true,true,true)});var citySelect=$("<select>").attr("id","city").addClass("quake-select").on("change",function(e){redrawMap(true,true,true)});var selected="";if(pCod=="999999")selected=' selected="selected"';$(prefSelect).append('<option value="999999"'+selected+">"+buttonStr[5][strI]+"</option>");var selected="";if(cCod=="9999999")selected=' selected="selected"';$(citySelect).append('<option value="9999999"'+selected+">"+buttonStr[6][strI]+"</option>");for(var i in prefCity_PRM["pref"]){var pC=prefCity_PRM["pref"][i].code;var pN=prefCity_PRM["pref"][i].name;var selected="";if(pCod==pC){selected=' selected="selected"';selectedCode=pC;selectedName=pN}$(prefSelect).append('<option value="'+pC+'"'+selected+">"+pN+"</option>")}for(var i in prefCity_PRM["city"]){var cC=prefCity_PRM["city"][i].code;var cN=prefCity_PRM["city"][i].name;var eqCity=cC;if(eqCity in convCity_PRM.from_class20)eqCity=convCity_PRM.from_class20[eqCity][0];var pC=convCity_PRM.to_office[eqCity];if(pCod!=pC)continue;var selected="";if(cCod==cC){selected=' selected="selected"';selectedName=cN;selectedCode=cCod}$(citySelect).append('<option value="'+cC+'"'+selected+">"+cN+"</option>")}return $("<div>").append(prefSelect,citySelect)};var clearPrefCity=function(){selectedCode="";selectedName="";$("#pref").val("");$("#city").val("");redrawMap(true,true,true);return};var NoInfo=function(text,btnClear){var buttons=$("<div>");var btn0=$("<div>").text(buttonStr[0][strI]).addClass("contents-button").on("click",function(e){redrawMap(true,true,true)});$(buttons).append($('<p class="mb_5px talign_right">').append(btnClear,btn0));drawDataObj["data"]["_hypo"].display=false;drawDataObj["data"]["hypo"].display=false;drawDataObj["data"]["int"].display=false;drawDataObj["data"]["area"].display=false;drawDataObj["data"]["_hypo"].data=[];drawDataObj["data"]["hypo"].data=[];drawDataObj["data"]["int"].data=[];drawDataObj["zxy"]=defaultZxy;drawDataObj["infoTime"]=null;drawDataObj["contentsInfo"]=text[0];drawDataObj["freeSpace"]=buttons[0];drawDataObj["legend"]=null;drawDataObj["explain"]=null;drawDataObj["textInfo"]=null;drawDataObj["defaultOpen"]=null;return};var makeData=function(idx){var def=$.Deferred();if(idx==-9||isNaN(idx)||typeof idx=="undefined")idx=currentIdx;drawDataObj["zxy"]={};drawDataObj["infoTime"]=null;drawDataObj["contentsInfo"]=null;drawDataObj["freeSpace"]=null;drawDataObj["legend"]=null;drawDataObj["explain"]=null;drawDataObj["defaultOpen"]="legend";var buttons=$("<div>");var btn0=$("<div>").text(buttonStr[0][strI]).addClass("contents-button").on("click",function(e){redrawMap(true,true,true)});$(buttons).append($('<p class="mb_5px talign_right">').append(btn0,attentionBtn));if(idx<0){drawDataObj["data"]["_hypo"].display=true;drawDataObj["data"]["hypo"].display=false;drawDataObj["data"]["int"].display=false;drawDataObj["data"]["area"].display=false;drawDataObj["data"]["hypo"].data=[];drawDataObj["data"]["int"].data=[];var points=[];var dupli=[];for(var i=0;i<infoArray.length;i++){if(i in infoArray){var elm=infoArray[i]}else{continue}if(elm.ttl=="震度速報"||elm.ttl=="震源に関する情報"||elm.ttl=="顕著な地震の震源要素更新のお知らせ"||elm.ttl=="地震回数に関する情報")continue;if(dupli.indexOf(elm.eid)>-1)continue;dupli.push(elm.eid);if(kunren){if(!/_K/.test(elm.ift))continue}else{if(/_K/.test(elm.ift))continue}var point=Tsunami.common.setHypo(elm,i,false,true);if(point.length==0)continue;points=points.concat(point)}drawDataObj["data"]["_hypo"].data=points;if(points.length==0){drawDataObj["zxy"]=defaultZxy}else if(points.length<2){var hypoLatlon=points[0].latlon;drawDataObj["zxy"]=[7,hypoLatlon[0],hypoLatlon[1]]}else{drawDataObj["zxy"]["_hypo"]="all"}drawDataObj["freeSpace"]=buttons[0];drawDataObj["legend"]=imgdir+"hypLeg.svg";drawDataObj["duration"]=1.5;def.resolve()}else{drawDataObj["data"]["_hypo"].display=false;drawDataObj["data"]["hypo"].display=true;drawDataObj["data"]["int"].display=true;drawDataObj["data"]["area"].display=true;drawDataObj["data"]["_hypo"].data=[];currentIdx=parseInt(idx);if(idx in infoArray){var elm=infoArray[idx]}else{def.resolve();return}var id=elm.eid;var title=elm.ttl;var url=elm.json;var intLegend="";var intLegend1='<img src="'+imgdir+'Hypo.svg" width="18px" height="18px" /> '+legendStr[0][strI]+"<br>";var intLegend2='<img src="'+imgdir+'int9.svg" width="18px" height="18px" /> '+legendStr[1][strI]+"<br>"+'<img src="'+imgdir+'int8.svg" width="18px" height="18px" /> '+legendStr[2][strI]+"<br>"+'<img src="'+imgdir+'int7.svg" width="18px" height="18px" /> '+legendStr[3][strI]+"<br>"+'<img src="'+imgdir+'int6.svg" width="18px" height="18px" /> '+legendStr[4][strI]+"<br>"+'<img src="'+imgdir+'int5.svg" width="18px" height="18px" /> '+legendStr[5][strI]+"<br>"+'<img src="'+imgdir+'int4.svg" width="18px" height="18px" /> '+legendStr[6][strI]+"<br>"+'<img src="'+imgdir+'int3.svg" width="18px" height="18px" /> '+legendStr[7][strI]+"<br>"+'<img src="'+imgdir+'int2.svg" width="18px" height="18px" /> '+legendStr[8][strI]+"<br>"+'<img src="'+imgdir+'int1.svg" width="18px" height="18px" /> '+legendStr[9][strI]+"<br>";intLegend=intLegend1;if(title=="地震の活動状況等に関する情報"||title=="地震回数に関する情報"||/南海トラフ地震/.test(title)||/取消/.test(elm.ift)){intLegend=""}else if(title=="震源・震度情報"){intLegend=intLegend1+intLegend2}else if(title=="震度速報"){intLegend=intLegend2}if(En)title=elm.en_ttl;if(/_K/.test(elm.ift)){if(En){title+="[Drill]"}else{title+="【訓練】"}}var serial="";if(elm.ser>1&&!/取消/.test(elm.ift)&&!/南海トラフ地震/.test(elm.ttl)){if(En){serial="part "+elm.ser}else{serial=Tsunami.common.toZenkaku(elm.ser)+"報"}}var btn1=$("<div>").attr("id",id).text(buttonStr[1][strI]).addClass("contents-button").on("click",function(e){if(typeof e.target.attributes.id.nodeValue!=="undefined")backForwardE(+1,e.target.attributes.id.nodeValue)});var btn2=$("<div>").attr("id",id).text(buttonStr[2][strI]).addClass("contents-button").on("click",function(e){if(typeof e.target.attributes.id.nodeValue!=="undefined")backForwardE(-1,e.target.attributes.id.nodeValue)});var btn3=$("<div>").attr("id",id).text(buttonStr[3][strI]).addClass("contents-button").on("click",function(e){if(typeof e.target.attributes.id.nodeValue!=="undefined")backForwardI(+1,e.target.attributes.id.nodeValue)});var btn4=$("<div>").attr("id",id).text(buttonStr[4][strI]).addClass("contents-button").on("click",function(e){if(typeof e.target.attributes.id.nodeValue!=="undefined")backForwardI(-1,e.target.attributes.id.nodeValue)});var idIdx=eidList.indexOf(id);var lastI=eidList.length-1;if(idIdx<lastI&&idIdx==0||lastI==0){$(btn2).attr("disabled","disabled").addClass("quake-contents-button-disabled").off("click")}if(idIdx==lastI&&idIdx>0||lastI==0){$(btn1).attr("disabled","disabled").addClass("quake-contents-button-disabled").off("click")}$(buttons).append($('<p class="mb_5px talign_right">').append(btn1,btn2));var lastI=idxList[id].length-1;if(idx<idxList[id][lastI]&&idx==idxList[id][0]){$(btn4).attr("disabled","disabled").addClass("quake-contents-button-disabled").off("click")}else if(idx==idxList[id][lastI]&&idx>idxList[id][0]){$(btn3).attr("disabled","disabled").addClass("quake-contents-button-disabled").off("click")}if(idx<idxList[id][lastI]||idx>idxList[id][0]){$(buttons).append($('<p class="mb_5px talign_right">').append(btn3,btn4))}drawDataObj["freeSpace"]=buttons[0];var tCls="T5";if(elm.ttl=="震度速報")tCls="T1";if(elm.ttl=="震源に関する情報")tCls="T2";if(elm.ttl=="震源・震度情報")tCls="T3";if(elm.ttl=="遠地地震に関する情報")tCls="T4";if(En){var infoTime="Issued at "+JMAWebUtility.date.strftime(new Date(elm.rdt),"%H:%M JST %d %ESm %Y")}else{var infoTime=JMAWebUtility.date.strftime(new Date(elm.rdt),"%Y年%m月%d日%H時%M分発表")}drawDataObj["infoTime"]=infoTime+"<br>"+title+" "+serial;JMAWebUtility.parallelRequest({eventJson:url},function(data){var kunrenStr="";if(/_K/.test(elm.ift)){if(En){kunrenStr='<b class="quake-must">*** This is Drill Information ***</b>'}else{kunrenStr='<b class="quake-must talign_center">＊＊＊　これは訓練です　＊＊＊</b>'}}var ret=infoText(elm,data.eventJson,cancelStr);drawDataObj["explain"]=$("<div>").addClass("quake-explain-quake contents-explain").html(ret.text)[0];if(ret.hl!=""){var breadcrumb="";if(selectedName){var NationWide="全国";if(En)NationWide="Nation Wide";var LiNationWide=$("<li>").on("click",function(e){clearPrefCity()}).append("<a>"+NationWide+"</a>");var ulBreadcrumb=$("<ul>").addClass("contents-area-breadcrumb").append(LiNationWide,"<li>"+selectedName+"</li>");breadcrumb=$("<div>").addClass("quake-contentsInfoTitle").append(ulBreadcrumb)}drawDataObj["contentsInfo"]=$("<div>").append(kunrenStr,breadcrumb,ret.hl)[0]}if(ret.absenceF){intLegend+='<img src="'+imgdir+'abs.svg" width="30px" height="20px" /> '+legendStr[10][strI]}drawDataObj["data"]["hypo"].data=Tsunami.common.setHypo(elm,"",true,true);drawDataObj["zxy"]["hypo"]="all";if(drawDataObj["data"]["hypo"]["data"].length==0){delete drawDataObj.zxy.hypo;var hypoLatlon=[38,135]}else{var hypoLatlon=drawDataObj["data"]["hypo"]["data"][0].latlon}if(Tsunami.common.returnDis(hypoLatlon[0],preEvent[0],hypoLatlon[1],preEvent[1])>300&&id!=preEvent[2]){drawDataObj["duration"]=.01}else{drawDataObj["duration"]=1.5}preEvent=hypoLatlon;preEvent.push(id);if("Intensity"in data.eventJson.Body){var ret=setData(data.eventJson.Body.Intensity.Observation.Pref);if(tCls=="T1")ret.area["maxZoom"]=11;drawDataObj["data"]["area"]=ret.area;drawDataObj["data"]["int"].data=ret.stat;if(ret.stat.length==0)drawDataObj["zxy"]["area"]=ret.areaNums;drawDataObj["zxy"]["int"]="all"}else{drawDataObj["data"]["area"]={mapKey:"earthquake",display:false,colorData:[],options:{opacity:0,fillOpacity:0,interactive:false}};drawDataObj["data"]["int"].data=[];var zoomLevel=8;if(tCls="T4")zoomLevel=3;drawDataObj["zxy"]=[zoomLevel,hypoLatlon[0],hypoLatlon[1]];drawDataObj["defaultOpen"]="explain"}if(/地震回数に関する情報/.test(title)||/地震の活動状況等に関する情報/.test(title)||/取消/.test(elm.ift)){drawDataObj["zxy"]=defaultZxy}else if(/南海トラフ地震/.test(title)){drawDataObj["zxy"]=[7,33.5,135.5]}var markerRadio="";if(tCls=="T3"){var btn7=$("<div>").text(buttonStr[7][strI]).addClass("contents-radio-button contents-radio-button-enabled contents-radio-button-off").on("click",function(e){clickMarkerRadio(12,currentIdx)}).attr("id","markerRadio12");var btn8=$("<div>").text(buttonStr[8][strI]).addClass("contents-radio-button contents-radio-button-enabled contents-radio-button-off").on("click",function(e){clickMarkerRadio(20,currentIdx)}).attr("id","markerRadio20");var btn9=$("<div>").text(buttonStr[9][strI]).addClass("contents-radio-button contents-radio-button-enabled contents-radio-button-off").on("click",function(e){clickMarkerRadio(28,currentIdx)}).attr("id","markerRadio28");if(intMarkerSize==12){btn7.removeClass("contents-radio-button-off").addClass("contents-radio-button-on")}else if(intMarkerSize==28){btn9.removeClass("contents-radio-button-off").addClass("contents-radio-button-on")}else{btn8.removeClass("contents-radio-button-off").addClass("contents-radio-button-on")}markerRadio=$('<p class="mt_10px mb_5px">').append(btn7,btn8,btn9)}drawDataObj["legend"]=$("<div>").css({minWidth:"95px",maxWidth:"175px"}).append(intLegend,markerRadio)[0];def.resolve()})}return def.promise()};var clickMarkerRadio=function(size,currentIdx){intMarkerSize=size;$(".contents-radio-button").removeClass("contents-radio-button-on","contents-radio-button-off");$(".contents-radio-button").addClass("contents-radio-button-off");$("#markerRadio"+size).removeClass("contents-radio-button-off").addClass("contents-radio-button-on");$.when(makeData(currentIdx)).done(function(){delete drawDataObj.zxy;UnitMap.makePage(drawDataObj)});return};var backForwardI=function(i,id){var idS=String(id);currentIdx=parseInt(currentIdx);var idxIdx=idxList[idS].indexOf(currentIdx);currentIdx=idxList[idS][idxIdx+i];redrawMap(false,currentIdx,false)};var backForwardE=function(i,id){var idS=String(id);var idIdx=eidList.indexOf(idS);var newid=eidList[idIdx+i];var latestIdx=0;for(var j=0;j<skippedID.length;j++){if(newid==skippedID[j])latestIdx++}redrawMap(false,idxList[newid][latestIdx],true)};var setData=function(data){var points=[];var codePltenumber={};var codePopuptexts={};var areaNums=[];var onEvent="mouseover";if(isIOS)onEvent="click";var Prefs=Tsunami.common.generateDataArray(data);for(var i=0;i<Prefs.length;i++){var Pref=Prefs[i];var Areas=Tsunami.common.generateDataArray(Pref.Area);for(var j=0;j<Areas.length;j++){var Area=Areas[j];var maxInt=Tsunami.common.convInt(Area.MaxInt);var IntJ=maxInt.strJ;var IntE=maxInt.strE;if(IntJ==""){IntE="---";IntJ="震度---"}var aNam=Area.Name;var code=Area.Code;if(En){if("enName"in Area)aNam=Area.enName;var titleStr=aNam+" : "+IntE}else{var titleStr=aNam+"　"+IntJ}codePltenumber[code]=maxInt.idx;codePopuptexts[code]=titleStr;areaNums.push(code);if("City"in Area){var Citys=Tsunami.common.generateDataArray(Area.City);for(var k=0;k<Citys.length;k++){var City=Citys[k];var Istas=Tsunami.common.generateDataArray(City.IntensityStation);for(var l=0;l<Istas.length;l++){var Ista=Istas[l];var Int=Tsunami.common.convInt(Ista.Int);var IntJ=Int.strJ;var IntE=Int.strE;if(Ista.Int=="震度５弱以上未入電"){IntJ="<br>震度５弱以上と考えられるが<br>現在震度を入手していない";IntE="<br>A station where the seismic intensity is<br>estimated at 5 Lower or more<br>in the absence of available data"}var iNam=Ista.Name;if(En){if("enName"in Ista)iNam=Ista.enName;var titleStr=iNam+" : "+IntE}else{var titleStr=iNam+"　"+IntJ}if("latlon"in Ista){var lat=Ista.latlon.lat;var lon=Ista.latlon.lon}else{console.log(titleStr+"：緯度経度が存在しません");continue}var iconSize=intMarkerSize;if(Ista.Int=="震度５弱以上未入電")iconSize=intMarkerSize*1.5;var zIndex=(10-Int.idx)*1e3;points.push({type:"dom",latlon:[lat,lon],priority:zIndex,domElement:'<img src="'+imgdir+Int.svg+'" width="'+iconSize+'" height="'+iconSize+'">',svgConfig:{height:iconSize,width:iconSize},tooltip:{content:titleStr,on:onEvent}})}}}}}var colorPlte=[{weight:1,color:intColor.I7,opacity:.9,fillOpacity:.9,fillColor:intColor.I7,interactive:true},{weight:1,color:intColor.ID,opacity:.9,fillOpacity:.9,fillColor:intColor.ID,interactive:true},{weight:1,color:intColor.IC,opacity:.9,fillOpacity:.9,fillColor:intColor.IC,interactive:true},{weight:1,color:intColor.IB,opacity:.9,fillOpacity:.9,fillColor:intColor.IB,interactive:true},{weight:1,color:intColor.IA,opacity:.9,fillOpacity:.9,fillColor:intColor.IA,interactive:true},{weight:1,color:intColor.I9,opacity:.9,fillOpacity:.9,fillColor:intColor.I9,interactive:true},{weight:1,color:intColor.I4,opacity:.9,fillOpacity:.9,fillColor:intColor.I4,interactive:true},{weight:1,color:intColor.I3,opacity:.9,fillOpacity:.9,fillColor:intColor.I3,interactive:true},{weight:1,color:intColor.I2,opacity:.9,fillOpacity:.9,fillColor:intColor.I2,interactive:true},{weight:1,color:intColor.I1,opacity:.9,fillOpacity:.9,fillColor:intColor.I1,interactive:true}];var areas={mapKey:"earthquake",display:true,zindex:1e4,maxZoom:7,plte:colorPlte,colorData:codePltenumber,islandBold:true,options:{opacity:0,fillOpacity:0,interactive:false},tooltips:{contents:codePopuptexts,on:onEvent}};return{stat:points,area:areas,areaNums:areaNums}};var infoText=function(elm,data,cancelStr){var text="";var absenceF=false;var hl="";if(/^南海トラフ地震/.test(elm.ttl)){text=nankaiText(elm,data);return{text:text,absenceF:absenceF,hl:hl}}if(/_K/.test(elm.ift)){if(En){text+="*** This is Drill Information ***\n\n"}else{text+="＊＊＊　これは訓練です　＊＊＊\n\n"}}var title=elm.ttl;var titleEng=title;if(En){titleEng=elm.en_ttl;text+="Earthquake Information ("+titleEng+")\n"}else{text+="地震情報（"+title+"）\n"}if(elm.rdt!=""){if(En){text+="Issued at "+JMAWebUtility.date.strftime(new Date(elm.rdt),"%H:%M JST %d %ESm %Y")+"\n\n"}else{text+=JMAWebUtility.date.strftime(new Date(elm.rdt),"%GG%GY年%Zm月%Zd日%2ZH時%2ZM分")+"　"+data.Control.PublishingOffice+"発表\n\n"}}if(!En&&"Text"in data.Head.Headline)text+=data.Head.Headline.Text+"\n";if(/取消/.test(elm.ift)){text+="\n";if(En){text+="Lifting of previous Earthquake Information ("+titleEng+")\nIssued at "}else{text+="先ほど発表した、「"+title+"」を取り消します。\n発表日時は、"}var cancelKey=elm.eid+"_"+elm.ttl;var itAr=cancelStr[cancelKey];for(var i=0;i<itAr.length;i++){var it=JMAWebUtility.date.strftime(new Date(itAr[i]),"%GG%GY年%Zm月%Zd日%2ZH時%2ZM分");if(En){it=JMAWebUtility.date.strftime(new Date(itAr[i]),"%H:%M JST %d %ESm %Y");text+="["+it+"] "}else{text+="［"+it+"］"}}text+="\n\n";if(!En&&"Text"in data.Body)text+=data.Body.Text+"\n";return{text:text,absenceF:absenceF,hl:hl}}else if(/訂正/.test(elm.ift)){text+="\n";if(En){text+="Revision of previous Earthquake Information ("+titleEng+")\nIssued at "}else{text+="先ほど発表した、「"+title+"」を訂正します。\n発表日時は、"}var cancelKey=elm.eid+"_"+elm.ttl;var itAr=cancelStr[cancelKey];var it=JMAWebUtility.date.strftime(new Date(itAr[0]),"%GG%GY年%Zm月%Zd日%2ZH時%2ZM分");if(En){it=JMAWebUtility.date.strftime(new Date(itAr[0]),"%H:%M JST %d %ESm %Y");text+="["+it+"]\n\n"}else{text+="［"+it+"］\n\n"}}var regNm=elm.anm;var hlAt="";var hlReg="";var hlDep="";var hlMag="";if(regNm!=""){var coord=Tsunami.common.convCoordinate(elm.cod);var lat=coord.latD;var lon=coord.lonD;var dep=coord.dep+"";var mag=elm.mag;if(title=="顕著な地震の震源要素更新のお知らせ"){if(En)return{text:text,absenceF:absenceF,hl:hl};if(typeof data.Body.Earthquake.Hypocenter.Area.Coordinate_WGS==="undefined"){console.log("顕著な地震の震源要素更新のお知らせ：Coordinate_WGSが存在しない！");return{text:text,absenceF:absenceF,hl:hl}}var coordJgs=Tsunami.common.convCoordinate(data.Body.Earthquake.Hypocenter.Area.Coordinate);var LAT=coordJgs.lat;var LON=coordJgs.lon;var LATs=LAT.toFixed(1);var LONs=LON.toFixed(1);if(LAT>=0){LATs="北緯　　"+LATs}else{LATs="南緯　　"+LATs}if(LON>=0){LONs="東経　"+LONs}else{LONs="西経　"+LONs}var DEP=coordJgs.dep+"";var ot=data.Body.Earthquake.OriginTime;var addText=JMAWebUtility.date.strftime(new Date(ot),"%GG%GY年%Zm月%Zd日%2ZH時%2ZM分")+"</td><td>"+regNm+"の地震</td></tr>"+"<tr><td>"+lat.replace("緯","緯　　")+"度"+coord.latM+"分</td><td>（"+LATs+"度）</td></tr>"+"<tr><td>"+lon.replace("経","経　")+"度"+coord.lonM+"分</td><td>（"+LONs+"度）</td></tr>"+"<tr><td>深さ　　"+dep+"ｋｍ</td><td>（深さ　"+DEP+"ｋｍ）</td></tr>"+"<tr><td>規模（マグニチュード）　"+mag+"</td><td></td></tr>";text+='\n<table class="quake-infoTable quake-infoTable-quake"><tr><td>'+Tsunami.common.toZenkaku(addText)+"</table>\n";hlAt=JMAWebUtility.date.strftime(new Date(ot),"%m月%d日%H時%M分");hlReg=regNm;if(dep!=""&&dep<5){hlDep="ごく浅い"}else if(dep!=""){hlDep=dep+"km"}hlMag="M"+mag}else{if(En){regNm=elm.en_anm;text+='<table class="quake-infoTableE quake-infoTable-quake">';if(elm.at!=""){text+="<tr><td>Occurrence at (JST)</td><td>"+JMAWebUtility.date.strftime(new Date(elm.at),"%H:%M JST %d %ESm %Y")+"</td></tr>";hlAt=JMAWebUtility.date.strftime(new Date(elm.at),"%H:%M JST %d %ESm %Y")}hlReg=regNm;if(lat!=""){lat=lat.replace(/北緯(.+)$/,"$1 N");lat=lat.replace(/南緯(.+)$/,"$1 S");lon=lon.replace(/東経(.+)$/,"$1 E");lon=lon.replace(/西経(.+)$/,"$1 W");text+="<tr><td>Latitude (degree)</td><td>"+lat+"</td></tr>";text+="<tr><td>Longitude (degree)</td><td>"+lon+"</td></tr>"}if(dep!=""&&dep<5){text+="<tr><td>Depth</td><td>very shallow</td></tr>";hlDep="very shallow"}else if(dep!=""){text+="<tr><td>Depth</td><td>"+dep+" km</td></tr>";hlDep=dep+"km"}if(dep=="")hlDep="---";if(/Ｍ８を超/.test(mag)){text+="<tr><td>Magnitude</td><td>Over M8</td></tr>";hlMag="Over M8"}else if(/不明/.test(mag)){text+="<tr><td>Magnitude</td><td>unknown</td></tr>";hlMag="---"}else if(mag!=""){text+="<tr><td>Magnitude</td><td>"+mag+"</td></tr>";hlMag="M"+mag}text+="<tr><td>Region name</td><td>"+regNm+"</td></tr>";text+="</table>";if("Source"in data.Body.Earthquake.Hypocenter){if(data.Body.Earthquake.Hypocenter.Source=="ＰＴＷＣ"){text+="Earthquake parameters by PTWC.\n"}else if(data.Body.Earthquake.Hypocenter.Source=="ＵＳＧＳ"){text+="Earthquake parameters by NEIC/USGS.\n"}else if(data.Body.Earthquake.Hypocenter.Source=="ＷＣＡＴＷＣ"){text+="Earthquake parameters by WCATWC.\n"}}}else{if(elm.at!=""){hlAt=JMAWebUtility.date.strftime(new Date(elm.at),"%m月%d日%H時%M分頃")}hlReg=regNm;var NameFromMark="";if(typeof data.Body.Earthquake.Hypocenter.Area.NameFromMark!=="undefined"){NameFromMark="、"+data.Body.Earthquake.Hypocenter.Area.NameFromMark}if(lat!="")regNm+="（"+lat+"度、"+lon+"度"+NameFromMark+"）";var addText="震源地は、"+regNm;if(dep!=""&&dep<5){addText+="で、震源の深さはごく浅い";hlDep="ごく浅い"}else if(dep!=""){addText+="で、震源の深さは約"+dep+"ｋｍ";hlDep=dep+"km"}if(dep=="")hlDep="---";if(/Ｍ８を超/.test(mag)){addText+="、地震の規模（マグニチュード）は８を超える巨大地震と推定されます";hlMag="Ｍ８超"}else if(/不明/.test(mag)){addText+="と推定されます";hlMag="---"}else if(mag!=""){addText+="、地震の規模（マグニチュード）は"+mag+"と推定されます";hlMag="M"+mag}addText+="。\n";if("Source"in data.Body.Earthquake.Hypocenter){if(data.Body.Earthquake.Hypocenter.Source=="ＰＴＷＣ"){addText+="震源は太平洋津波警報センター（ＰＴＷＣ）による。\n"}else if(data.Body.Earthquake.Hypocenter.Source=="ＵＳＧＳ"){addText+="震源は米国地質調査所国立地震情報センター（ＵＳＧＳ，ＮＥＩＣ）による。\n"}else if(data.Body.Earthquake.Hypocenter.Source=="ＷＣＡＴＷＣ"){addText+="震源は西海岸アラスカ津波警報センター（ＷＣＡＴＷＣ）による。\n"}else{addText+="震源は"+data.Body.Earthquake.Hypocenter.Source+"による。\n"}}if("DetailedName"in data.Body.Earthquake.Hypocenter.Area){addText+="詳しい震源の位置は"+data.Body.Earthquake.Hypocenter.Area.DetailedName+"です。\n"}text+=Tsunami.common.toZenkaku(addText)}}text+="\n"}if(En&&title=="Seismic Intensity Information"){text+="Occurrence at "+JMAWebUtility.date.strftime(new Date(elm.at),"%H:%M JST %d %ESm %Y")+"\n\n"}if(En){if("Comments"in data.Body){if("ForecastComment"in data.Body.Comments)text+=data.Body.Comments.ForecastComment.enText;if("VarComment"in data.Body.Comments)text+=data.Body.Comments.VarComment.enText;if("FreeFormComment"in data.Body.Comments){var fc=data.Body.Comments.FreeFormComment;if(/北西太平洋津波情報を発表/.test(fc))text+="The Northwest Pacific Tsunami Advisory has also been issued by JMA.\n";if(/太平洋津波警報センター.+津波情報を発表しています/.test(fc))text+="The Tsunami Bulletin has been issued by the Pacific Tsunami Warning Center.\n";if(/ＰＴＷＣでは.+津波情報を発表しています/.test(fc))text+="The Pacific Tsunami Warning Center has issued a Tsunami Bulletin.\n"}}}else{if("Comments"in data.Body){if("ForecastComment"in data.Body.Comments)text+=data.Body.Comments.ForecastComment.Text+"\n";if("VarComment"in data.Body.Comments)text+=data.Body.Comments.VarComment.Text+"\n";if("FreeFormComment"in data.Body.Comments)text+=data.Body.Comments.FreeFormComment+"\n"}if("Text"in data.Body)text+="\n"+data.Body.Text+"\n";if("NextAdvisory"in data.Body)text+="\n"+data.Body.NextAdvisory+"\n"}if("Intensity"in data.Body){var prefCodes=[];var cityCodes=[];var istaCodes=[];var pref=[];var area=[];var city=[];var ista=[];var revFlg=false;var Prefs=Tsunami.common.generateDataArray(data.Body.Intensity.Observation.Pref);for(var i=0;i<Prefs.length;i++){var Pref=Prefs[i];var prefCode=parseInt(Pref.Code);prefCodes.push(prefCode);pref[prefCode]=Pref.Name;if(En)pref[prefCode]=Pref.enName;var Areas=Tsunami.common.generateDataArray(Pref.Area);for(var j=0;j<Areas.length;j++){var Area=Areas[j];var mustFlg=false;if(selectedCode.length==2&&selectedCode==prefCode)mustFlg=true;var aInt=Tsunami.common.convInt(Area.MaxInt).idx;var aNam=Area.Name;if(En&&"enName"in Area)aNam=Area.enName;if("Revise"in Area){aNam='<span class="quake-rev">'+aNam+"</span>";revFlg=true}if(mustFlg)aNam='<span class="quake-must">'+aNam+"</span>";if(typeof area[aInt]==="undefined")area[aInt]="";area[aInt]+=aNam;if(En){area[aInt]+="<br>"}else{area[aInt]+=" "}if("City"in Area){var Citys=Tsunami.common.generateDataArray(Area.City);for(var k=0;k<Citys.length;k++){var City=Citys[k];var CityMaxInt=City.MaxInt;if("Condition"in City)CityMaxInt=City.Condition;var mustFlg=false;if(selectedCode.length==7&&selectedCode==City.Code)mustFlg=true;var cInt=Tsunami.common.convInt(CityMaxInt).idx;var cNam=City.Name;if(En&&"enName"in City)cNam=City.enName;if("Revise"in City){cNam='<span class="quake-rev">'+cNam+"</span>";revFlg=true}if(mustFlg)cNam='<span class="quake-must">'+cNam+"</span>";var cityCode=parseInt(City.Code);if(typeof city[prefCode]==="undefined"){city[prefCode]=[];cityCodes[prefCode]=[]}if(typeof city[prefCode][cInt]==="undefined"){city[prefCode][cInt]=[];cityCodes[prefCode][cInt]=[]}city[prefCode][cInt][cityCode]=cNam;cityCodes[prefCode][cInt].push(cityCode);var Istas=Tsunami.common.generateDataArray(City.IntensityStation);for(var l=0;l<Istas.length;l++){var Ista=Istas[l];var IstaInt=Ista.Int;if("Condition"in Ista)IstaInt=Ista.Condition;var iInt=Tsunami.common.convInt(IstaInt).idx;var iNam=Ista.Name;if(En&&"enName"in Ista)iNam=Ista.enName;if("Revise"in City){iNam='<span class="quake-rev">'+iNam+"</span>";revFlg=true}if(mustFlg)iNam='<span class="quake-must">'+iNam+"</span>";var istaCode=parseInt(Ista.Code);if(typeof ista[prefCode]==="undefined"){ista[prefCode]=[];istaCodes[prefCode]=[]}if(typeof ista[prefCode][iInt]==="undefined"){ista[prefCode][iInt]=[];istaCodes[prefCode][iInt]=[]}ista[prefCode][iInt][istaCode]=iNam;istaCodes[prefCode][iInt].push(istaCode)}}}}}var areaInt="";var cityInt="";var istaInt="";for(var intIdx in area){if(intIdx>7)continue;var Str=area[intIdx];var cInt=Tsunami.common.convInt(convIdx(intIdx));var IntJ=cInt.strJ;var IntE=cInt.strE;if(convIdx(intIdx)==""){IntE="---";IntJ="震度---"}Str=Str.replace(/ $/,"");Str=Str.replace(/<br>$/,"");if(En){areaInt+="<tr><td>"+IntE+"</td><td>"+Str+"</td></tr>"}else{areaInt+='<tr><td class="quake-nowrap">'+IntJ+"</td><td>"+Str+"</td></tr>"}}for(var i=0;i<prefCodes.length;i++){var prefCode=prefCodes[i];var pName=pref[prefCode];var pRow=0;for(var intIdx in city[prefCode]){if(intIdx>7)continue;var cInt=Tsunami.common.convInt(convIdx(intIdx));var IntJ=cInt.strJ;var IntE=cInt.strE;if(convIdx(intIdx)=="震度５弱以上未入電"){IntE="Unable to get information about <br>seismic intensity of 5-lower or stronger"}var pStr='<td class="quake-nowrap" rowspan="@'+prefCode+'@">'+pName+"</td>";pRow++;if(pRow>1)pStr="";var Str="";var cityCodesCopy=cityCodes[prefCode][intIdx];cityCodesCopy.sort();for(var j=0;j<cityCodesCopy.length;j++){var cityCode=cityCodesCopy[j];Str+=city[prefCode][intIdx][cityCode];if(En){Str+="<br>"}else{Str+=" "}}Str=Str.replace(/ $/,"");Str=Str.replace(/<br>$/,"");if(En){cityInt+="<tr>"+pStr+"<td>"+IntE+"</td><td>"+Str+"</td></tr>"}else{cityInt+="<tr>"+pStr+'<td class="quake-nowrap">'+IntJ+"</td><td>"+Str+"</td></tr>"}}cityInt=cityInt.replace("@"+prefCode+"@",pRow)}for(var i=0;i<prefCodes.length;i++){var prefCode=prefCodes[i];var pName=pref[prefCode];var pRow=0;for(var intIdx in ista[prefCode]){var cInt=Tsunami.common.convInt(convIdx(intIdx));var IntJ=cInt.strJ;var IntE=cInt.strE;if(convIdx(intIdx)=="震度５弱以上未入電")absenceF=true;var pStr='<td class="quake-nowrap" rowspan="@'+prefCode+'@">'+pName+"</td>";pRow++;if(pRow>1)pStr="";var Str="";var istaCodesCopy=istaCodes[prefCode][intIdx];istaCodesCopy.sort();for(var j=0;j<istaCodesCopy.length;j++){var istaCode=istaCodesCopy[j];Str+=ista[prefCode][intIdx][istaCode];if(En){Str+="<br>"}else{Str+=" "}}Str=Str.replace(/ $/,"");Str=Str.replace(/<br>$/,"");if(En){istaInt+="<tr>"+pStr+"<td>"+IntE+"</td><td>"+Str+"</td></tr>"}else{istaInt+="<tr>"+pStr+'</td><td class="quake-nowrap">'+IntJ+"</td><td>"+Str+"</td></tr>"}}istaInt=istaInt.replace("@"+prefCode+"@",pRow)}text+="\n";if(!En){text+="この地震により観測された最大震度は"+Tsunami.common.toZenkaku(Tsunami.common.convInt(data.Body.Intensity.Observation.MaxInt).strJ)+"です。\n"}var acsStr=[["［震度３以上が観測された地域］","The areas where a seismic intensity of 3 or more was recorded."],["［震度３以上が観測された市町村］","The municipalities where a seismic intensity of 3 or more was recorded."],["［震度１以上が観測された地点］","The stations where a seismic intensity of 1 or more was recorded."]];var tblClass="quake-infoTable quake-infoTable-quake";if(En){tblClass="quake-infoTableE quake-infoTable-quake";if(areaInt!="")areaInt="<tr><td>JMA Seismic Intensity</td><td>Region name</td></tr>"+areaInt;if(cityInt!="")cityInt="<tr><td>Prefecture</td><td>JMA Seismic Intensity</td><td>City, town and village Name</td></tr>"+cityInt;if(istaInt!="")istaInt="<tr><td>Prefecture</td><td>JMA Seismic Intensity</td><td>Station name</td></tr>"+istaInt}if(areaInt!="")text+=acsStr[0][strI]+'\n<table class="'+tblClass+'">'+areaInt+"</table>\n";if(cityInt!="")text+=acsStr[1][strI]+'\n<table class="'+tblClass+'">'+cityInt+"</table>\n";if(istaInt!="")text+=acsStr[2][strI]+'\n<table class="'+tblClass+'">'+istaInt+"</table>\n";if(revFlg){if(En){text+="Change to underlined information.\n"}else{text+="下線付き表示の震度情報を更新しました。\n"}}}else if(title=="震源・震度情報"){if(En){text+="\nThere was no observation of seismic intensity 1 or above.\n"}else{text+="\nこの地震では、震度１以上が観測されていません。\n"}}if(/_K/.test(elm.ift)){if(En){text+="\n*** This is Drill Information ***\n"}else{text+="\n＊＊＊　これは訓練です　＊＊＊\n"}}if(hlReg){hl='<div class="quake-hlBox">'+'<span class="quake-hlHeader">'+hlTableHeader[strI][0]+"</span><br>"+'<span class="quake-hlContents">'+hlAt+"</span><br>"+'<span class="quake-hlHeader">'+hlTableHeader[strI][1]+"</span><br>"+'<span class="quake-hlContents">'+hlReg+"</span><br>"+'<span class="quake-hlHeader">'+hlTableHeader[strI][2]+"</span><br>"+'<span class="quake-hlContents">'+hlDep+"</span><br>"+'<span class="quake-hlHeader">'+hlTableHeader[strI][3]+"</span><br>"+'<span class="quake-hlContents">'+hlMag+"</span><br>"+"</div>"}text=text.replace(/\n/g,"<br>");return{text:text,absenceF:absenceF,hl:hl}};var nankaiText=function(elm,data){var text="";if(En)return text;if(/_K/.test(elm.ift)){text+='<p class="talign_center">＊＊＊　これは訓練です　＊＊＊</p>'}var title=elm.ttl;if(/取消/.test(elm.ift))title+="（取消）";text+='<p class="talign_right">'+JMAWebUtility.date.strftime(new Date(elm.rdt),"%GG%GY年%Zm月%Zd日%2ZH時%2ZM分")+"<br>"+data.Control.PublishingOffice+"</p>"+'<p class="talign_center">'+title+"</p>";if("Text"in data.Head.Headline){text+="\n＊＊　見出し　＊＊\n"+data.Head.Headline.Text+"\n"}if("EarthquakeInfo"in data.Body&&"Text"in data.Body.EarthquakeInfo){text+="\n＊＊　本文　＊＊\n"+data.Body.EarthquakeInfo.Text+"\n"}if("NextAdvisory"in data.Body){text+="\n＊＊　次回発表予定　＊＊\n"+data.Body.NextAdvisory+"\n"}if("EarthquakeInfo"in data.Body&&"Appendix"in data.Body.EarthquakeInfo){text+="\n"+data.Body.EarthquakeInfo.Appendix+"\n"}if("Text"in data.Body){text+="\n＊＊　本文　＊＊\n"+data.Body.Text+"\n"}if(/_K/.test(elm.ift)){text+='<p class="talign_center">＊＊＊　これは訓練です　＊＊＊</p>'}return text.replace(/\n/g,"<br>")};var convIdx=function(intIdx){if(intIdx==10)return"";if(intIdx==9)return"1";if(intIdx==8)return"2";if(intIdx==7)return"3";if(intIdx==6)return"4";if(intIdx==5)return"震度５弱以上未入電";if(intIdx==4)return"5-";if(intIdx==3)return"5+";if(intIdx==2)return"6-";if(intIdx==1)return"6+";if(intIdx==0)return"7";return""};var readParam=function(opt){var def=$.Deferred();if(Object.keys(convCity_PRM).length>0&&Object.keys(prefCity_PRM).length>0){def.resolve();return def.promise()}JMAWebUtility.parallelRequest({convCityJson:convCity_url},function(data){convCity_PRM=data.convCityJson;var nameKey="name";if(En)nameKey="enName";if(opt!=null){prefCity_PRM["pref"]={};for(var c in opt["areas"]["offices"]){var i=parseInt(c);if(i==460100)i=46e4;prefCity_PRM["pref"][i]={code:c,name:opt["areas"]["offices"][c][nameKey]}}prefCity_PRM["city"]={};for(var c in opt["areas"]["class20s"]){var i=parseInt(c);prefCity_PRM["city"][i]={code:c,name:opt["areas"]["class20s"][c][nameKey]}}}def.resolve()});return def.promise()};Quake.common=function(){return{redrawMap:redrawMap,selectedPrefCity:selectedPrefCity,nankaiText:nankaiText,datadir:datadir,convCity_url:convCity_url,infoRemarks:infoRemarks,infoTableHeader:infoTableHeader}}()})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";root.EstimatedIntensityMap=root.EstimatedIntensityMap||{};var infoArray=[];var currentIdx=0;var kunren=false;if(location.href.indexOf("kunren=true")!=-1)kunren=0;var imgdir="estimated_intensity_map/images/";var datadir="estimated_intensity_map/data/";var defaultZxy=Tsunami.common.defaultZxy;var preEvent=[38,135];var suikeiOpacity=.6;var drawDataObj={data:{hypo:{zindex:3e4,minZoom:1,maxZoom:18,display:true,data:[]},int:{zindex:1e4,minZoom:1,maxZoom:18,display:true,data:[]}},zxy:{},duration:1.5,infoTime:null,contentsInfo:null,freeSpace:null,legend:null,explain:null,textInfo:null,defaultOpen:"legend"};var infoStr="過去の推計震度分布図です。リストをクリックすれば内容をご覧いただけます。";var buttonStr=["最新の情報","薄い","通常","濃い"];var infoTableHeader=["地震検知日時","震央地名","深さ","マグニチュード","最大震度"];var hlTableHeader=["地震の発生日時","震央地名","深さ","マグニチュード"];root.EstimatedIntensityMap.draw=function(hashdata,opt,resolve){if(kunren===0)kunren=Tsunami.common.kunrenAuth(false);var promise=readList();$.when(promise).done(function(){if(opt.contentsType=="bosaiTop"){drawDataObj["freeSpace"]=drawDataObj["contentsInfo"];if("area_type"in hashdata&&(hashdata.area_type=="offices"||hashdata.area_type=="class20s")){delete drawDataObj.zxy}}resolve(drawDataObj)})};var redrawMap=function(flg,idx,fit){if(flg){var promise=readList();$.when(promise).done(function(){if(!fit)delete drawDataObj.zxy;UnitMap.makePage(drawDataObj)})}else{if(idx==null||isNaN(idx))idx=currentIdx;if(infoArray[idx]==="undefined")idx=0;makeData(idx);if(!fit)delete drawDataObj.zxy;UnitMap.makePage(drawDataObj)}};var readList=function(){var def=$.Deferred();JMAWebUtility.parallelRequest({listJson:datadir+"list.json"},function(data){var listData=data.listJson;var infoTable=$("<table>").append('<tr class="contents-title"><th>'+infoTableHeader.join("</th><th>")+"</th></tr>");var dupli=[];var latestIdx=-1;for(var i=0;i<listData.length;i++){var elm=listData[i];infoArray[i]=elm;var at="";if(elm.hypo.at!=""){at=JMAWebUtility.date.strftime(new Date(elm.hypo.at),"%Y年%m月%d日%H時%M分")}var lat=elm.hypo.lat;var lon=elm.hypo.lon;var dep=elm.hypo.dep;var mag=elm.hypo.mag;var epi=elm.hypo.epi;var kun=elm.hypo.kun;var int=ConvKeisoku(elm.hypo.maxi);var imageUrl=datadir+elm.url;if(dupli.indexOf(imageUrl)>-1)continue;dupli.push(imageUrl);if(String(mag)!=""){if(/Ｍ８を超/.test(mag)){mag="Ｍ８超"}else{mag=mag.toFixed(1)}}if(dep==0){dep="ごく浅い"}else if(String(dep)!=""){dep+="km"}if(kunren){if(kun==0)continue;epi+="【訓練】"}else{if(kun>0)continue}var tr=$("<tr>").attr("index",i).on("click",function(e){if(typeof e.target.parentNode.attributes.index.nodeValue!=="undefined")redrawMap(false,e.target.parentNode.attributes.index.nodeValue,true)});$(tr).addClass("contents-clickable contents-clickable-highlight").append($("<td>").html(at).addClass("").attr("width","200px"),$("<td>").html(epi).addClass("").attr("width","200px"),$("<td>").html(dep).addClass("talign_center ").attr("width","80px"),$("<td>").html(mag).addClass("talign_center").attr("width","80px"),$("<td>").addClass("talign_center").attr("width","80px").append($("<span>").html(int.str).addClass(int.cls+" quake-badge-span")));$(infoTable).append(tr);if(latestIdx==-1)latestIdx=i}if(latestIdx==-1){drawDataObj["data"]["hypo"].display=false;drawDataObj["data"]["int"].display=false;drawDataObj["zxy"]=defaultZxy;def.resolve();return}drawDataObj["textInfo"]=$("<div>").addClass("contents-block").append(infoStr,infoTable)[0];var buttons=$("<div>");var btn0=$("<div>").text(buttonStr[0]).addClass("contents-button").on("click",function(e){redrawMap(true,0,true)});var btn1=$("<div>").text(buttonStr[1]).addClass("contents-radio-button contents-radio-button-enabled contents-radio-button-off").on("click",function(e){clickOpacityRadio(3)}).attr("id","opacityRadio3");var btn2=$("<div>").text(buttonStr[2]).addClass("contents-radio-button contents-radio-button-enabled contents-radio-button-on").on("click",function(e){clickOpacityRadio(6)}).attr("id","opacityRadio6");var btn3=$("<div>").text(buttonStr[3]).addClass("contents-radio-button contents-radio-button-enabled contents-radio-button-off").on("click",function(e){clickOpacityRadio(9)}).attr("id","opacityRadio9");suikeiOpacity=.6;$(buttons).append($('<p class="mb_5px talign_right">').append(btn1,btn2,btn3));$(buttons).append($('<p class="mb_5px talign_right">').append(btn0));drawDataObj["freeSpace"]=buttons[0];makeData(latestIdx);def.resolve()});return def.promise()};var clickOpacityRadio=function(op){suikeiOpacity=op/10;$(".contents-radio-button").removeClass("contents-radio-button-on","contents-radio-button-off");$(".contents-radio-button").addClass("contents-radio-button-off");$("#opacityRadio"+op).removeClass("contents-radio-button-off").addClass("contents-radio-button-on");redrawMap(false,null,false);return};var makeData=function(idx){if(idx==-9)idx=currentIdx;currentIdx=idx;drawDataObj["data"]["hypo"].display=true;drawDataObj["data"]["int"].display=true;drawDataObj["zxy"]={};drawDataObj["infoTime"]=null;drawDataObj["contentsInfo"]=null;drawDataObj["legend"]=null;drawDataObj["explain"]=null;var elm=infoArray[idx];var itG="";var itS="";var at="";var hlAt="";var hlDep="";if(elm.hypo.it!=""){itG=JMAWebUtility.date.strftime(new Date(elm.hypo.it),"%GG%GY年%Zm月%Zd日%2ZH時%2ZM分");itS=JMAWebUtility.date.strftime(new Date(elm.hypo.it),"%Y年%m月%d日%H時%M分");if(parseInt(JMAWebUtility.date.strftime(new Date(elm.hypo.it),"%Y"))<2001){itG="";itS=""}}if(elm.hypo.at!=""){at=JMAWebUtility.date.strftime(new Date(elm.hypo.at),"%GG%GY年%Zm月%Zd日%2ZH時%2ZM分");if(itS==""){hlAt=JMAWebUtility.date.strftime(new Date(elm.hypo.at),"%Y年%m月%d日%H時%M分")}else{hlAt=JMAWebUtility.date.strftime(new Date(elm.hypo.at),"%m月%d日%H時%M分頃")}}var lat=elm.hypo.lat;var lon=elm.hypo.lon;var dep=elm.hypo.dep;var mag=elm.hypo.mag;var epi=elm.hypo.epi;var kun=elm.hypo.kun;var int=ConvKeisoku(elm.hypo.maxi);var meshNum=elm.mesh_num;var imageUrl=datadir+elm.url;var boundsAr=elm.bounds;if(itS!="")drawDataObj["infoTime"]=itS+"発表";drawDataObj["data"]["int"].data=setRaster(meshNum,imageUrl);if(String(mag)!=""&&!/Ｍ８を超/.test(mag)){mag="M"+mag.toFixed(1)}if(String(dep)!=""&&dep<5){hlDep="ごく浅い";dep="深さはごく浅い"}else if(dep!=""){hlDep=dep+"km";dep="深さ"+dep+"km"}var kunrenStr="";if(kun>0){epi+="【訓練】";kunrenStr='<b class="quake-must talign_center">＊＊＊　これは訓練です　＊＊＊</b><br>'}var titleStr=at+"<br>"+epi+"　"+dep+"　"+mag;drawDataObj["data"]["hypo"].data=[{type:"dom",latlon:[lat,lon],domElement:'<img src="'+imgdir+'Hypo.svg" width="26" height="26">',svgConfig:{height:26,width:26},popup:{content:titleStr,on:"click"}}];var hl='<div class="quake-hlBox">'+'<span class="quake-hlHeader">'+hlTableHeader[0]+"</span><br>"+'<span class="quake-hlContents">'+hlAt+"</span><br>"+'<span class="quake-hlHeader">'+hlTableHeader[1]+"</span><br>"+'<span class="quake-hlContents">'+epi+"</span><br>"+'<span class="quake-hlHeader">'+hlTableHeader[2]+"</span><br>"+'<span class="quake-hlContents">'+hlDep+"</span><br>"+'<span class="quake-hlHeader">'+hlTableHeader[3]+"</span><br>"+'<span class="quake-hlContents">'+mag+"</span><br>"+"</div>";drawDataObj["contentsInfo"]=kunrenStr+hl;drawDataObj["zxy"]["hypo"]="all";drawDataObj["zxy"]["int"]={_northEast:{lat:boundsAr[1][0],lng:boundsAr[1][1]},_southWest:{lat:boundsAr[0][0],lng:boundsAr[0][1]}};var cenLatlon=[(boundsAr[1][0]+boundsAr[0][0])/2,(boundsAr[1][1]+boundsAr[0][1])/2];if(Tsunami.common.returnDis(cenLatlon[0],preEvent[0],cenLatlon[1],preEvent[1])>300){drawDataObj["duration"]=.01}else{drawDataObj["duration"]=1.5}preEvent=cenLatlon;var ryuui="<br><br>＜推計震度分布図利用の留意事項＞<br>"+"　地震の際に観測される震度は、ごく近い場所でも地盤の違いなどにより１階級程度異なることがあります。"+"また、このほか震度を推計する際にも誤差が含まれますので、推計された震度と実際の震度が１階級程度ずれることがあります。<br>"+"　このため、個々のメッシュの位置や震度の値ではなく、大きな震度の面的な広がり具合とその形状に着目してご利用下さい。";var kaisetsu=readText(imageUrl);titleStr=titleStr.replace("<br>","　");var seisStr="（震源要素）<br>"+titleStr;if(itG!=""){seisStr+="<br>（情報時刻）<br>"+itG+"<br><br>"}else{seisStr+="<br><br>　※この図は、後日精査した震度および震源データを用いて再作成したものです。<br><br>"}if(kaisetsu!=""){seisStr+=kaisetsu}else if(elm.comment!=""){seisStr+="　"+elm.comment+ryuui}else{seisStr+=ryuui}if(kun>0){seisStr='<p class="talign_center">＊＊　これは訓練です！　＊＊</p>'+seisStr}drawDataObj["explain"]=$("<div>").addClass("quake-explain contents-explain").html(seisStr)[0];var intLegend='<img src="'+imgdir+'Hypo.svg" width="18px" height="18px" /> 震央<br>';if(elm.hypo.maxi>=4.5){intLegend+='<img src="'+imgdir+'int9.svg" width="18px" height="18px" /> 震度７<br>'+'<img src="'+imgdir+'int8.svg" width="18px" height="18px" /> 震度６強<br>'+'<img src="'+imgdir+'int7.svg" width="18px" height="18px" /> 震度６弱<br>'+'<img src="'+imgdir+'int6.svg" width="18px" height="18px" /> 震度５強<br>'+'<img src="'+imgdir+'int5.svg" width="18px" height="18px" /> 震度５弱<br>'+'<img src="'+imgdir+'int4.svg" width="18px" height="18px" /> 震度４'}else{intLegend+='<img src="'+imgdir+'int4.svg" width="18px" height="18px" /> 震度４<br>'+'<img src="'+imgdir+'int3.svg" width="18px" height="18px" /> 震度３<br>'+'<img src="'+imgdir+'int2.svg" width="18px" height="18px" /> 震度２'}drawDataObj["legend"]=$("<div>").css("min-width","95px").append(intLegend)[0];return};var setRaster=function(meshNum,imageUrl){var rasters=[];for(var i=0;i<meshNum.length;i++){var num=String(meshNum[i]);var url=imageUrl+"/"+num+".png";var swLat=parseInt(num.substr(0,2))/1.5;var swLon=parseInt(num.substr(2,2))+100;var neLat=swLat+40/60;var neLon=swLon+1;swLat=swLat-10695e-8*swLat+17464e-9*swLon+.0046017;swLon=swLon-46038e-9*swLat-83043e-9*swLon+.01004;neLat=neLat-10695e-8*neLat+17464e-9*neLon+.0046017;neLon=neLon-46038e-9*neLat-83043e-9*neLon+.01004;var imageBounds=[[swLat,swLon],[neLat,neLon]];var raster={type:"raster",latlon:imageBounds,src:url,options:{opacity:suikeiOpacity}};rasters.push(raster)}return rasters};var readText=function(imageUrl){var kaisetsu="";$.ajax({type:"GET",url:imageUrl+"/kaisetu.txt",beforeSend:function(xhr){xhr.overrideMimeType("text/plain; charset=UTF-8")},async:false}).done(function(data){kaisetsu=data.replace(/\n/g,"<br>")}).fail(function(jqXHR,textStatus,errorThrown){kaisetsu=""});return kaisetsu};var ConvKeisoku=function(val){var comments=["震度４の地域では、座りの悪い置物が倒れるなどしている可能性があります。","震度５弱のところでは、物が倒れたり、ガラスが割れるなどの被害が発生している可能性があります。","震度５弱以上のところでは、物が倒れたり、ガラスが割れるなどの被害が発生している可能性があります。","震度６弱のところでは、かなりの建物で壁のタイルや窓ガラスが破損、落下したり、耐震性の低い住宅が倒壊するなどの被害を生じている可能性があります。","震度６弱以上のところでは、多くの建物で壁のタイルや窓ガラスが破損、落下したり、耐震性の低い住宅が多数倒壊するなどの被害を生じている可能性があります。","震度６強以上のところでは、多くの建物で壁のタイルや窓ガラスが破損、落下したり、耐震性の低い住宅が多数倒壊するなどの被害を生じている可能性があります。"];var cls="";var str="";var com="";if(val>=.5){cls="quake-bg-I1";str="震度１"}if(val>=1.5){cls="quake-bg-I2";str="震度２"}if(val>=2.5){cls="quake-bg-I3";str="震度３"}if(val>=3.5){cls="quake-bg-I4";str="震度４";com=comments[0]}if(val>=4.5){cls="quake-bg-IA";str="震度５弱";com=comments[1]}if(val>=5){cls="quake-bg-IB";str="震度５強";com=comments[2]}if(val>=5.5){cls="quake-bg-IC";str="震度６弱";com=comments[3]}if(val>=6){cls="quake-bg-ID";str="震度６強";com=comments[4]}if(val>=6.5){cls="quake-bg-I7";str="震度７";com=comments[5]}return{cls:cls,str:str,com:com}}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var c=util.common;var UD=util.date;var makeImgPath=function(time,imgKind,elmPath){var base="himawari/data/satimg";return[base,time,imgKind,time,elmPath+"/{z}/{x}/{y}.jpg"].join("/")};var findPreviousIndex=function(timeList,dataType,stockTime){var slippedTime=c.filter(timeList,function(t){if(t>=stockTime)return false;if(dataType==="long"){return t.getMinutes()%30===0}else if(dataType==="middle"){return t.getMinutes()%10===0}return t<stockTime});return c.findIndex(timeList,function(t){return t===c.last(slippedTime)})+1};var detectBlank=function(timeList,targetTimeData){return c.chain(timeList).map(function(time,i){var stringTime=UD.strftime(time,"%Y%m%d%H%M%S",0);var targetExist=c.contains(targetTimeData,stringTime);if(targetExist===false)return i;return null}).reject(function(index){return index===""}).value()};var makeTimeList=function(time,dataCount,timeResolution){var originalDate=new Date(time);return c.chain(c.range(0,dataCount-1,1)).map(function(i){var t=new Date(time);t.setSeconds(t.getSeconds()-timeResolution*i);return t}).reverse().value()};var makeDescendList=function(num){return c.chain(new Array(num)).map(function(v,i){return i}).reverse().value()};root.Himawari=root.Himawari||{};root.Himawari.util={makeImgPath:makeImgPath,findPreviousIndex:findPreviousIndex,detectBlank:detectBlank,makeTimeList:makeTimeList,makeDescendList:makeDescendList}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var c=util.common;var UD=util.date;var HU=Himawari.util;var HC=JMAWebUtility.hashController;var TR=new Translator;var makeInfoText=function(time){return UD.strftime(time,TR.tr("%Y年%m月%d日%H時%M分%S秒").replace("JST","UTC"),TR.select(9,0))};var draw=function(info,opt,res){var requests=["movieConfig","explain","selectorObject","data","contentsInfo","infoTime","mapEvents"];util.parallelRequest({timeFD:"himawari/data/satimg/targetTimes_fd.json",timeJP:"himawari/data/satimg/targetTimes_jp.json",explain:"himawari/const/map_explain_himawari.html"},function(data){try{var elem=info.elem;var elemMatch=/^all/;var contentsType=opt.contentsType;MODE_GROBAL=info.mode?info.mode:null;FD_TIME=c.pluck(data.timeFD,"basetime").sort();JP_TIME=c.pluck(data.timeJP,"basetime").sort();if(elemMatch.test(elem))requests.push("zxy");TYPE_GROBAL=info.interval||"long";ELEM_GROBAL=elem;CONTENTS_GROBAL=contentsType;SLIDER_GROBAL.index=undefined;loadHimawariData(elem,res,requests,data.explain,contentsType)}catch(e){res({fail:"データの取得に失敗しました"})}})};var makeSelectorObj=function(){var selectors={key:"elem",values:[{name:"可視画像",enName:"Visible",value:"vis"},{name:"赤外画像",enName:"Infrared",value:"ir"},{name:"水蒸気画像",enName:"Water Vapor",value:"vap"},{name:"トゥルーカラー再現画像",enName:"True Color Reproduction",value:"color"},{name:"雲頂強調画像",enName:"Color Enhanced",value:"strengthen"}]};var boostedSelectorObj=[{name:"昼雲解析画像",enName:"Day Microphysics",value:"daymicro"},{name:"夜雲解析画像",enName:"Night Microphysics",value:"nightmicro"},{name:"日中自然色画像",enName:"Natural Color",value:"naturalcolor"},{name:"日中雪霧画像",enName:"Day Snow-Fog",value:"snowfog"}];var sphereSelectorObj=[{name:"全球可視画像",enName:"Visible(Full Disk)",value:"s_vis"},{name:"全球赤外画像",enName:"Infrared(Full Disk)",value:"s_ir"},{name:"全球水蒸気画像",enName:"Water Vapor(Full Disk)",value:"s_vap"},{name:"全球トゥルーカラー再現画像",enName:"True Color Reproduction(Full Disk)",value:"s_color"}];if(MODE_GROBAL==="jmh"){c.each(boostedSelectorObj,function(obj){selectors.values.push(obj)})}return[selectors]};var findInitialIndex=function(timeList,targetTimeData){var skipList=HU.detectBlank(timeList,targetTimeData);var targetIndex=timeList.length-1;return targetIndex-c.chain(timeList).findIndex(function(_time,i){return!c.contains(skipList,targetIndex-i)})};var changeMap=function(info,opt,res){var requests=["infoTime","contentsInfo","movieConfig","data","mapEvents"];var elem=info.elem;var elemMatch=/^all/;if(elemMatch.test(elem)!==elemMatch.test(ELEM_GROBAL)){requests.push("zxy")}ELEM_GROBAL=elem;loadHimawariData(elem,res,requests,null,CONTENTS_GROBAL)};var himawariRapid=function(index,res){var requests=["infoTime","contentsInfo","data","movieConfig"];var elem=ELEM_GROBAL;SLIDER_GROBAL.index=index;loadHimawariData(elem,res,requests,null,CONTENTS_GROBAL)};var loadHimawariData=function(elem,res,requests,explain,contentsType){var callBack={};var zoomLv=UnitMap.getStatus("himawari").center[0];var targetTimeData=zoomLv===6?JP_TIME:FD_TIME;var baseTimeString=findBaseTimeString(TYPE_GROBAL,targetTimeData);var baseTime=UD.createFromString(baseTimeString,0);var timeResolution=TIME_RESOLUTION[TYPE_GROBAL];var timeList=HU.makeTimeList(baseTime,DATACOUNT[TYPE_GROBAL],timeResolution);var index=SLIDER_GROBAL.index!==undefined?SLIDER_GROBAL.index:findInitialIndex(timeList,targetTimeData);var time=timeList[index];var movieConfig=makeMovieConfig(TYPE_GROBAL,index,targetTimeData,timeList);var makeZoomEvent=function(){var dataType;zoomLv=UnitMap.getStatus("himawari").center[0];targetTimeData=zoomLv===6||elem.match(/^s_/)?JP_TIME:FD_TIME;dataType=zoomLv<=5&&TYPE_GROBAL==="short"||elem.match(/^s_/)?"middle":TYPE_GROBAL;TYPE_GROBAL=dataType;movieStart(ELEM_GROBAL,dataType,targetTimeData,contentsType)};var elemMatch=/^all/;var zxyPosition=elemMatch.test(elem)?SPHERE_DEFAULT_ZXY:TILE_DEFAULT_ZXY;var targetExplain=$(explain).filter("div.himawari-explain-map-"+TR.select("ja","en"));var mapEssense={movieConfig:movieConfig,selectorObject:makeSelectorObj(),zxy:zxyPosition,data:makeDisplayData(elem,time),mapEvents:{zoomend:makeZoomEvent},contentsInfo:makeContentsInfo(elem,TYPE_GROBAL,contentsType)[0],explain:$("<div>").html(targetExplain).addClass("contents-explain")[0],infoTime:makeInfoText(time)};c.map(requests,function(request){callBack[request]=mapEssense[request]});if(contentsType==="bosaiTop")delete callBack.movieConfig;res(callBack);SLIDER_GROBAL.time=time;SLIDER_GROBAL.index=index};var makeMovieConfig=function(dataType,startPosition,targetTimeData,timeList){var skipList=HU.detectBlank(timeList,targetTimeData);return{slider:makeMainSliderList(timeList,dataType),subSliderList:makeSubSliderList(timeList),startPosition:startPosition,scaleStyle:"point",childHighlight:true,skipList:skipList,interval:1e3}};var makeMainSliderList=function(timeList,dataType){return c.map(timeList,function(target){if(dataType==="long"&&target.getMinutes()===0&&target.getHours()%6===0||dataType==="middle"&&target.getMinutes()===0&&target.getHours()%2===0||dataType==="short"&&target.getMinutes()%30===0){return UD.strftime(target,"%m/%d<br>%H:%M",TR.select(9,0))}return""})};var makeSubSliderList=function(timeList){return c.map(timeList,function(t){var subWrapDiv=document.createElement("div");var dateText=document.createElement("span");dateText.textContent=UD.strftime(t,TR.select("%d日%H:%M:%S","%m/%d %H:%M:%S UTC"),TR.select(9,0));subWrapDiv.appendChild(dateText);return subWrapDiv})};var makeDisplayData=function(elem,targetTime){var stringTime=UD.strftime(targetTime,"%Y%m%d%H%M%S",0);var dispObj={};makeSphereObj(dispObj,elem,stringTime);makeTileObj(dispObj,elem,stringTime);makeMapObj(dispObj,elem);if(elem.match(/^s_/)){dispObj.earth.display=true;dispObj.jp.display=false;dispObj.fd.display=false}else{dispObj.earth.display=false;dispObj.jp.display=true;dispObj.fd.display=true}return dispObj};var makeSphereObj=function(dispObj,elem,stringTime){var spherePath="himawari/img/sat_"+SPHERE_PATH[elem]+"_202101080010.jpg";dispObj.earth={display:false,minZoom:3,maxZoom:6,zindex:20,data:{type:"raster",latlon:[["30","120"],["53","151"]],src:spherePath}}};var makeTileObj=function(dispObj,elem,stringTime){dispObj.jp=createPictObj(stringTime,"jp",ELEM_PATH[elem]);dispObj.fd=createPictObj(stringTime,"fd",ELEM_PATH[elem])};var makeMapObj=function(dispObj,elem){dispObj.map={display:true,maxZoom:11,tileUrl:"/tile/jma/sat/{z}/{x}/{y}.png",className:"himawari-backgrouond",zindex:20};dispObj.map.display=elem.match(/^s_/)?false:true};var createPictObj=function(stringTime,imgKind,elemPath){var maxZoom,minZoom,zindex;if(imgKind==="jp"){maxZoom=6;minZoom=6;zindex=2}else if(imgKind==="fd"){maxZoom=5;minZoom=3;zindex=1}return{display:true,tileUrl:HU.makeImgPath(stringTime,imgKind,elemPath),maxZoom:maxZoom,minZoom:minZoom,zindex:zindex}};var makeContentsInfo=function(elem,dataType,contentsType){var buttons;var zoomLv=UnitMap.getStatus("himawari").center[0];var elemMatch=/^all/;var buttonOptions=[{type:"long",text:TR.select("30分毎","Every 30 min.")},{type:"middle",text:TR.select("10分毎","Every 10 min.")}];if(!(zoomLv<=5||elem.match(/^s_/))){buttonOptions.push({type:"short",text:TR.select("2分30秒毎","Every 2.5 min.")})}var defaultButton=c.findIndex(buttonOptions,function(button){return button.type===dataType});buttonOptions[defaultButton].default=true;buttons=ContentsCommon.makeRadioButtons(buttonOptions,function(type){var hash=HC.getHashData(location.hash);hash["interval"]=type;history.replaceState(null,null,HC.hashString(hash));UnitMap.memoryHash();var targetTimeData=zoomLv===6?JP_TIME:FD_TIME;movieStart(elem,type,targetTimeData,contentsType)});return $("<div>").append(buttons)};var movieStart=function(elem,dataType,targetTimeData,contentsType){var baseTimeString=findBaseTimeString(dataType,targetTimeData);var baseTime=UD.createFromString(baseTimeString,0);var timeResolution=TIME_RESOLUTION[dataType];var timeList=HU.makeTimeList(baseTime,DATACOUNT[dataType],timeResolution);var startPosition=findStartPosition(dataType,timeList,targetTimeData);var callBack={data:makeDisplayData(elem,timeList[startPosition]),contentsInfo:makeContentsInfo(elem,dataType)[0],movieConfig:makeMovieConfig(dataType,startPosition,targetTimeData,timeList),infoTime:makeInfoText(timeList[startPosition])};var callBackInfo=contentsType==="bosaiTop"?"himawari":undefined;SLIDER_GROBAL.index=startPosition;SLIDER_GROBAL.time=timeList[startPosition];TYPE_GROBAL=dataType;if(contentsType==="bosaiTop")delete callBack.movieConfig;UnitMap.makePage(callBack,callBackInfo)};var findStartPosition=function(dataType,timeList,targetTimeData){var previousIndex;var time=SLIDER_GROBAL.time;var topIndex=DATACOUNT[dataType]-1;var skipList=HU.detectBlank(timeList,targetTimeData);var timeListEpoc=c.map(timeList,function(t){return t.getTime()});var presentIndex=c.findIndex(timeListEpoc,function(v){return v===time.getTime()});var targetIndex=SLIDER_GROBAL.index===topIndex?topIndex:presentIndex;if(targetIndex===topIndex&&!c.contains(skipList,topIndex)){return topIndex}if(timeListEpoc[0]>time){return c.findIndex(timeList,function(_time,i){return!c.contains(skipList,i)})}if(c.last(timeListEpoc)<time){return c.chain(HU.makeDescendList(DATA_COUNT)).find(function(count){return!c.contains(skipList,count)})}if(c.contains(timeListEpoc,time.getTime())){return c.findIndex(timeList,function(t){return t.getTime()===time.getTime()})}previousIndex=HU.findPreviousIndex(timeList,dataType,time);return c.find(HU.makeDescendList(previousIndex),function(count){if(c.contains(skipList,count))return false;if(dataType==="long"&&timeList[count].getMinutes()%30===0)return true;if(dataType==="middle"&&timeList[count].getMinutes()%10===0)return true;return dataType==="short"})};var findBaseTimeString=function(dataType,timeList){return c.chain(timeList).reverse().find(function(v){var baseMinute=UD.createFromString(v).getMinutes();if(dataType==="long"&&baseMinute%LONG_MIN===0||dataType==="middle"&&baseMinute%MIDDLE_MIN===0||dataType==="short"){return v}return false})};var ELEM_PATH={ir:"B13/TBB",vis:"B03/ALBD",vap:"B08/TBB",color:"REP/ETC",strengthen:"SND/ETC",daymicro:"DMS/ETC",nightmicro:"NGT/ETC",naturalcolor:"DNC/ETC",snowfog:"DSL/ETC"};var SPHERE_PATH={s_ir:"ir",s_vis:"vs",s_vap:"wv",s_color:"rep"};var SPHERE_LIST=["all_ir","all_vis","all_vap","all_color"];var LONG_MIN=30;var MIDDLE_MIN=10;var SHORT_MIN=2.5;var TIME_RESOLUTION={short:SHORT_MIN*60,middle:MIDDLE_MIN*60,long:LONG_MIN*60};var DATA_COUNT=72;var DATACOUNT={short:3*3600/TIME_RESOLUTION.short,middle:12*3600/TIME_RESOLUTION.middle,long:36*3600/TIME_RESOLUTION.long};var TILE_DEFAULT_ZXY=[5,35,135];var SPHERE_DEFAULT_ZXY=[5,41,135];var TYPE_GROBAL,ELEM_GROBAL,CONTENTS_GROBAL,MODE_GROBAL;var FD_TIME=[];var JP_TIME=[];var SLIDER_GROBAL={};root.Himawari={};root.Himawari.draw=draw;root.Himawari.changeMap=changeMap;root.Himawari.rapidRequest=himawariRapid})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var c=util.common;var CC=ContentsCommon;var draw=function(info,opt,res){util.parallelRequest({time:"tidelevel/data/tide/tide_time.json",tidearea:"tidelevel/const/tide_area.json"},function(data){try{var mapData=createDisplayData(data.tidearea);var legend=makeLegend();res({data:mapData,legend:legend,defaultOpen:"legend",contentsInfo:makeContentsInfo(),infoTime:util.date.strftime(new Date(data.time.time),"%Y年%m月%d日%H時%M分")})}catch(e){res({fail:e})}})};var makeContentsInfo=function(){var div=$("<div>");div.addClass("tidelevel-description").html("観測所のアイコンをクリックするか、<br>"+"地図をズームしたときに表示される市町村（白色）<br>"+"をクリックすると、潮位をグラフで表示します。<br>");CC.makeLink("検潮所一覧へ",function(){document.location="tidelevel/pointlist.html"}).appendTo(div);return div[0]};var legendImg=function(svg,txt){return{img:"tidelevel/img/"+svg,text:txt}};var makeLegend=function(){var legendSet=[];legendSet.push([legendImg("jma.svg","気象庁")]);legendSet.push([legendImg("kaiho.svg","海上保安庁")]);legendSet.push([legendImg("chiriin.svg","国土地理院")]);legendSet.push([legendImg("kouwan.svg","港湾局")]);legendSet.push([legendImg("mizukanri.svg","水管理・国土保全局")]);legendSet.push([legendImg("jichitai.svg","自治体等")]);return CC.makeLegend(legendSet).addClass("contents-legend-map")[0]};var createDisplayData=function(tideArea){var displayData={};createMapObj(displayData,tideArea);createPlotObj(displayData,tideArea);return displayData};var createMapObj=function(displayData,tideArea){var colorData={};var class20sList=c.keys(tideArea);c.each(class20sList,function(code){colorData[code]=0});displayData.fillCity={display:true,plte:[MAP_OPTIONS.selectable],colorData:colorData,maxZoom:12,minZoom:8,mapKey:"class20s",options:MAP_OPTIONS.missing,zindex:10,events:{click:function(e){var code=e.target.feature.properties.code;var atWave=c.contains(class20sList,code);if(atWave)document.location="tidelevel/#area_type=class20s&area_code="+code}}}};var createPlotObj=function(displayData,tideArea){displayData.splot={display:true,minZoom:4,maxZoom:6,zindex:30};displayData.mplot={display:true,minZoom:7,maxZoom:12,zindex:30};var stations=c.chain(tideArea).values().flatMap(function(class20){return c.flatMap(class20.class30s,function(class30){return class30.stations})}).value();displayData.splot.data=c.map(stations,function(station){return makeIconData(station,"small")});displayData.mplot.data=c.map(stations,function(station){return makeIconData(station,"middle")})};var makeIconData=function(station,scale){var div=$("<div>");var stationType=station.type;var latlon=[station.lat,station.lon];var name=station.name;var shiftPlot=POSITION_OFFSET[station.code]?POSITION_OFFSET[station.code]:[0,0];$("<img>").attr({src:"tidelevel/img/"+CHITEN_IMG[stationType],title:name,class:"tidelevel-icon tidelevel-icon-"+scale}).appendTo(div);div.on("click",function(){document.location="tidelevel/#point_code="+station.code});return{type:"dom",latlon:latlon,positionShift:shiftPlot,domElement:div[0]}};var MAP_OPTIONS={selectable:{color:"#ffffff",weight:1,opacity:1,fillColor:"#ffffff",fillOpacity:1},missing:{color:"#c8c8cb",weight:1,opacity:1,fillColor:"#c8c8cb",fillOpacity:1}};var POSITION_OFFSET={124602:[5,0],124607:[-10,0],145602:[0,-10],188402:[10,0],188119:[5,0],188181:[0,-5],188205:[-5,0],188208:[0,5]};var CHITEN_IMG={jma:"jma.svg",jcg:"kaiho.svg",gsi:"chiriin.svg",phb:"kouwan.svg",rib:"mizukanri.svg",ack:"jichitai.svg",ykk:"jichitai.svg",hgk:"jichitai.svg",cbk:"jichitai.svg"};root.TideLevel={};root.TideLevel.draw=draw})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var selectHeight=1e3;var drawtime=null;var stations=null;var times=null;var wprData=null;var sliderTimes=[];var fromTop=null;var SLIDERLENGTH=null;var mode=null;var freeSpaceDiv=$("<div>").css("font-size","14px");var draw=function(_hashdata,option,res){fromTop=option.contentsType==="bosaiTop";if(!fromTop)window.addEventListener("keydown",checkKey);util.parallelRequest({stations:"windprofiler/const/station.json",data:"windprofiler/data/japan.json",times:"windprofiler/data/times.json",explain:"windprofiler/const/explain.html"},function(d){mode=UnitMap.getStatus().responsiveMode;stations=d.stations;wprData=d.data;times=d.times;var timeLists=Object.keys(wprData);SLIDERLENGTH=timeLists.length;var fromBosaiTop=option.contentsType==="bosaiTop";drawtime=wprData[times[times.length-1]]?times[times.length-1]:timeLists[timeLists.length-1];var data={};UnitMap.getStatus().activeKeys.forEach(function(k){if(k!=="BASEMAP"&&k!=="stations")data[k]={display:false}});data["yabanes_"+drawtime+"_"+selectHeight]={minZoom:4,mazZoom:fromBosaiTop?4:9,zindex:20,display:true,data:makeStaionList().concat(makeYabaneList(wprData[drawtime],fromBosaiTop))};res({data:data,contentsInfo:mktable(),infoTime:util.date.strftime(util.date.createFromString(drawtime,0),"%Y年%m月%d日%H時観測　上空"+selectHeight/1e3+"kmの風"),legend:$("<div>").css("text-align","center").append($("<img>").attr("src","windprofiler/png/legend.png"))[0],freeSpace:/^mobile/.test(mode)?null:freeSpaceDiv.text("矢羽にカーソルを載せるとデータの詳細を表示します。")[0],defaultOpen:"legend",mapEvents:{moveend:remakeTable},movieConfig:{slider:mkSlider(),subSliderList:mkSubSlider(),callback:changeTime,scaleStyle:"point",speedNotch:4},explain:$("<div>").addClass("contents-explain").append($(d.explain).filter("div.wpr-explain-map"))[0]})})};var remakeTable=function(){UnitMap.makePage({contentsInfo:mktable(),contentsInfoDefault:"keep"})};var makeStaionList=function(){return Object.keys(stations).map(function(stationCode){return{type:"circle",radius:4,zindex:10,events:{click:pagejump,mouseover:dispData,mouseout:removeTitle},options:{color:"#000000",fillColor:"#000000",fillOpacity:1,weight:5,name:stations[stationCode].jpname,code:stationCode},latlon:[stations[stationCode].lat,stations[stationCode].lon]}})};var makeYabaneList=function(data,mini){var rtn=[];for(var stationCode in stations){if(!data[stationCode]||!data[stationCode][selectHeight])continue;var u=data[stationCode][selectHeight].u;var v=data[stationCode][selectHeight].v;var w=data[stationCode][selectHeight].w;var direction=calcDirection(u,v);var wsp=Math.sqrt(u*u+v*v);var wspLevel=wsp>=50?"#982165":wsp>=40?"#da3f12":wsp>=30?"#e59b26":wsp>=20?"#f7f53b":wsp>=10?"#2e3ef9":"#c8e9f9";var size=mini?15:25;var yabane=wsp>=.4?{type:"yabane",arg:direction,size:size,events:{click:pagejump,mouseover:dispData,mouseout:removeTitle},options:{name:stations[stationCode].jpname,height:selectHeight,wsp:Math.sqrt(u*u+v*v),wdir:getJpnDir(getHoui(direction)),zwind:w,code:stationCode,fillColor:wspLevel,fillOpacity:1,color:"black",centerShift:.2,weight:2}}:{type:"circle",events:{click:pagejump,mouseover:dispData,mouseout:removeTitle},radius:mini?5:9,options:{color:"#3366ff",fillColor:"#f0f0f0",fillOpacity:1,opcity:1,weight:5,height:selectHeight,wsp:Math.sqrt(u*u+v*v),wdir:getJpnDir(direction),zwind:w,name:stations[stationCode].jpname,code:stationCode,renderer:L.svg()}};yabane.latlon=[stations[stationCode].lat,stations[stationCode].lon];rtn.push(yabane)}return rtn};var calcDirection=function(u,v){if(u===0){return v>0?8:v<0?0:null}var rad=0;if(u>0)rad=90+Math.atan(v/u)*180/Math.PI;else rad=Math.atan(v/u)*180/Math.PI-90;return-Math.floor((rad+11.25)/22.5)*22.5};var getHoui=function(rad){return Math.floor(rad/22.5)};var getJpnDir=function(d){if(d===0)return"北";if(d===-1)return"北北西";if(d===-2)return"北西";if(d===-3)return"西北西";if(d===-4)return"西";if(d===-5)return"西南西";if(d===-6)return"南西";if(d===-7)return"南南西";if(d===-8)return"南";if(d===1)return"北北東";if(d===2)return"北東";if(d===3)return"東北東";if(d===4)return"東";if(d===5)return"東南東";if(d===6)return"南東";if(d===7)return"南南東";if(d===8)return"南";return"-"};var checkRelm=function(relm,latlon){return relm._northEast.lat>latlon[0]&&relm._northEast.lng>latlon[1]&&(relm._southWest.lat<latlon[0]&&relm._southWest.lng<latlon[1])};var tdClick=function(e){var code=e.target.value;UnitMap.makePage({zxy:[9,stations[code].lat,stations[code].lon],duration:1})};var mktable=function(){var div=document.createElement("div");div.setAttribute("id","wpr-infotable");var stationtable=document.createElement("table");stationtable.setAttribute("id","wpr-staionselector");var tbody1=document.createElement("tbody");var headtr=document.createElement("tr");var headtd=document.createElement("td");headtd.innerHTML="表示地点一覧";headtr.appendChild(headtd);tbody1.appendChild(headtr);var stationlist=Object.keys(stations).sort();var relm=UnitMap.getStatus().bounds;var i,tr,td;for(i=0;i<stationlist.length;i++){tr=document.createElement("tr");td=document.createElement("td");td.innerHTML=stations[stationlist[i]].jpname;td.value=stationlist[i];td.onclick=tdClick;if(relm){var relmin=checkRelm(relm,[stations[stationlist[i]].lat,stations[stationlist[i]].lon]);td.setAttribute("class",relmin?"wpr-stationlist wpr-relmin":"wpr-stationlist wpr-relmout")}tr.appendChild(td);tbody1.appendChild(tr)}stationtable.appendChild(tbody1);div.appendChild(stationtable);var heighttable=document.createElement("table");heighttable.setAttribute("id","wpr-heightselector");var tbody2=document.createElement("tbody");for(i=12;i>0;i--){tr=document.createElement("tr");tr.setAttribute("id","wpr"+i+"km");td=document.createElement("td");if(i===selectHeight/1e3)td.setAttribute("class","wpr-heightselect");td.innerHTML=i+"km";td.value=i*1e3;td.onclick=changeHeight;tr.appendChild(td);tbody2.appendChild(tr)}heighttable.appendChild(tbody2);div.appendChild(heighttable);return div};var changeHeight=function(e){selectHeight=e.target.value;document.getElementsByClassName("wpr-heightselect")[0].classList.remove("wpr-heightselect");document.getElementById("wpr"+selectHeight/1e3+"km").setAttribute("class","wpr-heightselect");var data={};var registedKeys=UnitMap.getStatus().registedKeys;registedKeys.forEach(function(key){if(key!=="BASEMAP"&&key!=="stations")data[key]={display:false}});if(registedKeys.indexOf("yabanes_"+drawtime+"_"+selectHeight)<0)data["yabanes_"+drawtime+"_"+selectHeight]={minZoom:4,maxZoom:9,zindex:50,data:makeStaionList().concat(makeYabaneList(wprData[drawtime]))};else data["yabanes_"+drawtime+"_"+selectHeight]={display:true};UnitMap.makePage({infoTime:util.date.strftime(util.date.createFromString(drawtime,0),"%Yp年%mp月%dp日%Hp時観測　上空"+selectHeight/1e3+"kmの風"),freeSpace:/^mobile/.test(mode)?null:freeSpaceDiv.text("矢羽にカーソルを載せるとデータの詳細を表示します。")[0],data:data})};var rapidRequest=function(idx,res){res({argument:idx})};var changeTime=function(idx){drawtime=sliderTimes[idx];var data={};var registedKeys=UnitMap.getStatus().registedKeys;registedKeys.forEach(function(key){if(key!=="BASEMAP"&&key!=="stations")data[key]={display:false}});if(registedKeys.indexOf("yabanes_"+drawtime+"_"+selectHeight)<0)data["yabanes_"+drawtime+"_"+selectHeight]={minZoom:4,maxZoom:9,zindex:50,data:makeStaionList().concat(makeYabaneList(wprData[drawtime]))};else data["yabanes_"+drawtime+"_"+selectHeight]={display:true};UnitMap.makePage({data:data,infoTime:util.date.strftime(util.date.createFromString(drawtime,0),"%Yp年%mp月%dp日%Hp時観測　上空"+selectHeight/1e3+"kmの風")})};var dispData=function(e){if(/^mobile/.test(mode))return;document.getElementById("unitmap").setAttribute("title",e.target.options.name);UnitMap.makePage({freeSpace:freeSpaceDiv.html(display(e.target.options.icon?e.target.options.icon.options:e.target.options))[0]})};var removeTitle=function(e){document.getElementById("unitmap").setAttribute("title","")};var display=function(d){var rtn=util.date.strftime(util.date.createFromString(drawtime,0),"%Yp年%mp月%dp日%Hp時00分")+"<br>";rtn+="地点：<b>"+d.name+"</b><br>";rtn+="高度：<b>"+selectHeight/1e3+"km</b><br>";rtn+="風向：<b>"+(d.wdir?d.wdir:"-")+"</b><br>";rtn+="風速：<b>"+(d.wsp?Math.round(d.wsp):"-")+"m/s</b><br>";rtn+="鉛直速度：<b>"+(d.zwind?Math.round(d.zwind*10)/10:"-")+"m/s</b><br>";rtn+='<br><a href="windprofiler/#code='+d.code+"&time="+drawtime+'&type=chart">時間高度断面図へ</a>';rtn+='<br><a href="windprofiler/#code='+d.code+'&type=table">観測表へ</a>';return rtn};var pagejump=function(e){var code=e.target.options.code?e.target.options.code:e.target.options.icon.options.code;location.href="windprofiler/#code="+code+"&time="+drawtime+"&type=chart"};var mkSlider=function(){var rtn=[];var counter=0;for(var i=times.length-1;i>0;i--){if(times[i].substr(-4)==="0000"){sliderTimes.push(times[i]);var tstr="";var t=util.date.createFromString(times[i],0);var hour=util.date.getHours(t);if(hour%6===0)tstr=util.date.strftime(t,"%Hp:%M<br>%mp/%dp");rtn.push(tstr);if(counter===SLIDERLENGTH)break;counter++}}sliderTimes.reverse();return rtn.reverse()};var mkSubSlider=function(){var rtn=[];var counter=0;for(var i=times.length-1;i>0;i--){if(times[i].substr(-4)==="0000"){sliderTimes.push(times[i]);var tstr="";var t=util.date.createFromString(times[i],0);tstr=util.date.strftime(t,"%dp日%Hp時");rtn.push(tstr);if(counter===SLIDERLENGTH)break;counter++}}sliderTimes.reverse();return rtn.reverse()};var checkKey=function(e){if(UnitMap.getStatus().contentsName!=="windprofiler"){window.removeEventListener("keydown",checkKey);return}if(e.keyCode===38&&selectHeight!==12e3)selectHeight+=1e3;else if(e.keyCode===40&&selectHeight!==1e3)selectHeight-=1e3;changeHeight({target:{value:selectHeight}})};root.WindProfiler=root.WindProfiler||{};root.WindProfiler.draw=draw;root.WindProfiler.rapidRequest=rapidRequest})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var DICTIONARY={"日時表示":"Date time","中心線":"Lines that link centers<br>of forecast circles","進路予想図":"Track and Intensity Forecast","諸元表":"specifications","台風経路図":"Typhoon route","全ての台風":"All Tropical Cyclones","暴風域に入る確率":"50kt Wind Probability","全般台風情報":"Analysis Archive","表示":"ON","非表示":"OFF","大型":"Large","超大型":"Very large","熱帯低気圧":"Tropical Cyclone","実況":"Analisys","予報":"Forecast","種別":"Category","大きさ":"Scale","強さ":"Intensity","存在地域":"location","１時間後推計値":"Estimate for 1 hour ahead","強い":"Strong","非常に強い":"Very Strong","猛烈な":"Violent","移動速度":"Speed of movement","中心気圧":"Central pressure","ゆっくり":"Slowly","ほとんど停滞":"Almost Stationary","予報円":"Probability circle","最大風速":"Maximum wind speed","最大瞬間風速":"Maximum wind gust speed","中心付近":"Near center","暴風域":"Area of 50kt winds or more","強風域":"Area of 30kt winds or more","暴風警戒域":"Storm warning area","風速":"Wind speed","風速50ノット以上":"50kt winds or more","風速25メートル以上":"25m/s winds or more","温帯低気圧":"Extratropical cyclone","25m/s以上の暴風域":"50-kt wind area","15m/s以上の強風域":"30-kt wind area","方位":"Direction","北北東":"NNE","北東":"NE","東北東":"ENE","東":"E","東南東":"ESE","南東":"SE","南南東":"SSE","南":"S","南南西":"SSW","南西":"SW","西南西":"WSW","西":"W","西北西":"WNW","北西":"NW","北北西":"NNW","北":"N","全域":"WIDE"};root.Typhoon=root.Typhoon||{};root.Typhoon.translator=new Translator(DICTIONARY)})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var c=util.common;var UD=util.date;var TR=Typhoon.translator;var makeTcList=function(targetTc){return c.chain(targetTc).filter(function(value){return value.typhoonNumber}).map(function(value){return value.tropicalCyclone}).value()};var setLatLonDm=function(dm){var lat=TR.select("北緯"+dm[0][0]+"度"+dm[0][1]+"分","N"+dm[0][0]+"°"+dm[0][1]+"′");var lon=TR.select("東経"+dm[1][0]+"度"+dm[1][1]+"分","E"+dm[1][0]+"°"+dm[1][1]+"′");return[lat,lon]};var setLatLonDeg=function(deg){var lat=deg[0].toFixed(1)+TR.select("度","°");var lon=deg[1].toFixed(1)+TR.select("度","°");return[lat,lon]};var TYPHOON_OPTIONS={white:{color:"white",fill:"false",weight:2,interactive:false,fillOpacity:0},whitefill:{color:"white",fill:"white",interactive:false,fillOpacity:1},mesh:{color:"white",weight:0,fill:"white",interactive:false,fillOpacity:.5},red:{color:"red",fill:"false",interactive:false,fillOpacity:0},"red-thin":{color:"red",fill:"false",interactive:false,weight:1,fillOpacity:0},yellow:{color:"yellow",fill:"false",interactive:false,fillOpacity:0},whitedash:{color:"white",dashArray:"5 5",weight:2,fillOpacity:0},track:{color:"blue",interactive:false},trackdash:{color:"blue",fill:"false",dashArray:"5 5",interactive:false,weight:2,fillOpacity:0}};var makeToolTipObj=function(specification,header){return{content:TyphoonTable.make.makeToolTip(specification,header),on:"mouseover",off:"mouseout",options:{className:"contents-block",direction:"bottom",offset:[0,0]}}};var makeInfoText=function(time,validTime){var text=TR.select(UD.strftime(time,"%Y年%m月%d日%H時"),UD.strftime(time,"%Y/%m/%d %H:%M UTC",0));if(!validTime)return text;return text};var getValidTime=function(probTimeList,index,member,element){var timeInfo=c.filter(probTimeList,function(time){return time.member===member&&time.element===element})[index];var timeEnd=UD.createFromString(timeInfo.validtime,0);var timeStart=function(){if(element==="through"){return UD.createFromString(timeInfo.basetime,0)}return new Date(timeEnd.getTime()-3*36e5)}();return[timeStart,timeEnd]};var getLegend=function(){var legendSet=[];var legends=[];legends.push({box:"contents-level0",text:"0 - 5%"});legends.push({box:"contents-level20",text:"5 - 30%"});legends.push({box:"contents-level30",text:"30 - 70%"});legends.push({box:"contents-level40",text:"70 - 100%"});legendSet.push(legends);return ContentsCommon.makeLegend(legends)};var TYPHOON_DICTS={"-":"-","大型":"Large","超大型":"Very large"};root.TyphoonMap=root.TyphoonMap||{};root.TyphoonMap.Common={makeTcList:makeTcList,setLatLonDm:setLatLonDm,setLatLonDeg:setLatLonDeg,makeToolTipObj:makeToolTipObj,TYPHOON_OPTIONS:TYPHOON_OPTIONS,TYPHOON_DICTS:TYPHOON_DICTS,makeInfoText:makeInfoText,getValidTime:getValidTime,getLegend:getLegend}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var c=util.common;var UD=util.date;var TC=TyphoonMap.Common;var TR=Typhoon.translator;var makeToolTip=function(specificationData,tipHeaderData){var div=$("<div>").addClass("contents-block typhoon-panel");var table=new SimpleTable;setToolTipHeader(table,tipHeaderData);setSpecificationData(table,specificationData);table.make().appendTo(div);return div[0]};var makeExplain=function(specificationData,elm,flag){var threeFlag=flag.three;var tc=elm.split("_")[2];var targetSpecification=specificationData["specifications_"+tc];var headerData=c.find(targetSpecification,function(list){return list.part==="title"});var actualData=c.reject(targetSpecification,function(list){return list.part==="title"});var div=$("<div>").addClass("contents-block typhoon-explain");var table=new SimpleTable;setExplainHeader(table,headerData);c.each(actualData,function(data){var ft=data.advancedHours;if(ft!==0&&ft!==1&&ft!==10&&ft!==11&&ft!==12&&ft<22){if(threeFlag===true)setActualData(table,data)}else{setActualData(table,data)}});table.make().appendTo(div);return div[0]};var makeNumberText=function(data){var typhoonNumber=data.typhoonNumber;return Number(typhoonNumber)?TR.select("台風第"+Number(typhoonNumber.slice(-2))+"号("+data.name.jp+")","TY"+Number(typhoonNumber)+"("+data.name.en+")"):TR.tr("熱帯低気圧")+typhoonNumber};var setToolTipHeader=function(table,data){var numberText=makeNumberText(data);var time=data.issue;var issuedTime=TR.select(UD.strftime(new Date(time.JST),"%Y年%m月%d日%H時%M分発表"),UD.strftime(new Date(time.JST),"Issued at %Y/%m/%d %H:%M UTC",0));table.appendRow().addClass("contents-title");table.appendHeader(numberText).attr("colspan",2);table.appendRow();table.appendCell(issuedTime).attr("colspan",2);table.appendRow();table.appendCell().css({width:140,padding:0,borderBottom:"hidden"});table.appendCell().css({width:180,padding:0,borderBottom:"hidden"});return table};var setExplainHeader=function(table,data){var numberText=makeNumberText(data);var time=data.issue;var issuedTime=TR.select(UD.strftime(new Date(time.JST),"%Y年%m月%d日%H時%M分発表"),UD.strftime(new Date(time.JST),"Issued at %Y/%m/%d %H:%M UTC",0));table.appendRow().addClass("contents-title");table.appendHeader(numberText).attr("colspan",2);table.appendRow();table.appendCell(issuedTime).attr("colspan",2);table.appendRow();table.appendCell().css({width:140,padding:0,borderBottom:"hidden"});table.appendCell().css({width:180,padding:0,borderBottom:"hidden"})};var setSpecificationData=function(table,data){setRepresentationCells(data,table);setDataCells(table,data)};var setActualData=function(table,data){setRepresentationCells(data,table);setDataCells(table,data)};var setDataCells=function(table,data){var maxWind=data.maximumWind;if(data.category)setKindCells(data,table);if(data.scale)setSchaleCells(data,table);setStrengthCells(data,table);if(TR.isJapanese())setLocationCells(data,table);setCenterPointCells(data,table);setTyphoonSpeedCells(data,table);setCenterPressureCells(data,table);if(maxWind&&maxWind.gust["m/s"]!=="0"&&maxWind.sustained["m/s"]!=="0")setWindSpeedCells(data,table);if(data.probabilityCircleRadius)setProbabilityCircleRadius(data,table);if(data.stormWarning)setSWCells(data,table);if(data.galeWarning)setGWCells(data,table)};var setRepresentationCells=function(data,table){var validTime=TR.select(UD.strftime(new Date(data.validtime.JST),"%d日%H時"),UD.strftime(new Date(data.validtime.JST),"%m/%d %H UTC",0));var infoType=data.advancedHours===0?TR.tr("実況"):TR.tr("予報");var representation=TR.select(validTime+"の"+infoType,infoType+" at "+validTime);table.appendRow().addClass("contents-header");table.appendHeader(representation).addClass("typhoon-topbold").attr("colspan",2)};var setKindCells=function(data,table){table.appendRow();table.appendCell(TR.tr("種別"));table.appendCell(TR.select(data.category.jp,data.category.en))};var setSchaleCells=function(data,table){table.appendRow();table.appendCell(TR.tr("大きさ"));table.appendCell(TR.select(data.scale,TR.tr(data.scale)))};var setStrengthCells=function(data,table){table.appendRow();table.appendCell(TR.tr("強さ"));table.appendCell(TR.tr(data.intensity))};var setLocationCells=function(data,table){table.appendRow();table.appendCell(TR.tr("存在地域"));table.appendCell(data.location)};var setCenterPointCells=function(data,table){var centerName=data.advancedHours===0?TR.select("中心位置","Center Position"):TR.select("予報円の中心","Center of probability circle");var dm=data.position.dm;var deg=data.position.deg;var latlonDm=TC.setLatLonDm(dm);var latlonDeg=TC.setLatLonDeg(deg);var position=TC.setLatLonDm(dm)[0]+"("+TC.setLatLonDeg(deg)[0]+")<br>"+TC.setLatLonDm(dm)[1]+"("+TC.setLatLonDeg(deg)[1]+")";table.appendRow();table.appendCell(centerName);table.appendCell(position)};var setTyphoonSpeedCells=function(data,table){var texts=[];if(data.course!=="不定")texts.push(TR.tr(data.course));if(data.speed.note){texts.push(TR.select(data.speed.note.jp,data.speed.note.en))}else{texts.push(data.speed["km/h"]+"km/h("+data.speed.kt+"kt)")}table.appendRow();table.appendCell(TR.select("進行方向、速さ","Direction and speed of movement"));table.appendCell(texts.join(" "))};var setCenterPressureCells=function(data,table){table.appendRow();table.appendCell(TR.tr("中心気圧"));table.appendCell(data.pressure+"hPa")};var setWindSpeedCells=function(data,table){var maxWind=data.maximumWind;var sustainedMax=maxWind.sustained["m/s"]===0?"-":maxWind.sustained["m/s"]+"m/s("+maxWind.sustained.kt+"kt)";var gustMax=maxWind.gust["m/s"]===0?"-":maxWind.gust["m/s"]+"m/s("+maxWind.gust.kt+"kt)";table.appendRow();if(maxWind.sustained.note==="中心付近"){table.appendCell(TR.select("中心付近の最大風速","Maximum wind speed near the center"))}else{table.appendCell(TR.select("最大風速","Maximum wind speed"))}table.appendCell(sustainedMax);table.appendRow();table.appendCell(TR.select("最大瞬間風速","Maximum wind gust speed"));table.appendCell(gustMax)};var setProbabilityCircleRadius=function(data,table){var rad=data.probabilityCircleRadius;table.appendRow();table.appendCell(TR.select("予報円の半径","Radius of probability circle"));table.appendCell(rad.km+"km("+rad.nm+"NM)")};var setSWCells=function(data,table){var t=new SimpleTable;c.each(data.stormWarning,function(obj){var range=obj.area.jp?obj.area.jp:obj.area;var gawa=data.stormWarning.length>1?"側 ":" ";t.appendRow();t.appendCell(TR.select(range+gawa,TR.tr(range))+obj.range.km+"km("+obj.range.nm+"NM)")});t.prependMergedCell(data.advancedHours===0?TR.tr("25m/s以上の暴風域"):TR.tr("暴風警戒域"));table.appendRows(t)};var setGWCells=function(data,table){var t=new SimpleTable;c.each(data.galeWarning,function(obj){var range=obj.area.jp?obj.area.jp:obj.area;var gawa=data.galeWarning.length>1?"側 ":" ";t.appendRow();t.appendCell(TR.select(range+gawa,TR.tr(range))+obj.range.km+"km("+obj.range.nm+"NM)")});t.prependMergedCell(TR.tr("15m/s以上の強風域"));table.appendRows(t)};root.TyphoonTable={};root.TyphoonTable.make={makeToolTip:makeToolTip,makeExplain:makeExplain}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var c=util.common;var CC=ContentsCommon;var UD=util.date;var TC=TyphoonMap.Common;var js=JSON.stringify;var hashC=util.hashController;var TARGET_TC,PROB_TARGET_TIMES,DATA_GROBAL,ELEM_GROBAL,AREA_GROBAL,PAST_TRACKS,CONTENTS_GROBAL,EXPLAIN_GROBAL,TCLIST;var FLAG_GROBAL={};var TR=Typhoon.translator;var BASE_DIR="typhoon/data/";var draw=function(info,opt,res){util.parallelRequest({explainHtml:"typhoon/const/explain.html",targetTc:BASE_DIR+"targetTc.json",pastTracks:BASE_DIR+"pastTracks.json",targetTimes:BASE_DIR+"prob50kt/targetTimes.json",area:"common/const/area.json"},function(data){try{if(data.targetTc.length===0){loadNoTyphoonProcess(res);return}var explainHtml=data.explainHtml;var elm=getElm(info);var targetTimes=data.targetTimes;var targetTc=data.targetTc;var pastTracks=data.pastTracks;var contentsType=opt.contentsType;var tcList=c.map(targetTc,function(obj){return obj.tropicalCyclone});TCLIST=tcList;if(elm!=="typhoon_all"&&!c.contains(tcList,elm.split("_")[2]))elm="typhoon_all";TARGET_TC=targetTc;PAST_TRACKS=pastTracks;PROB_TARGET_TIMES=targetTimes;AREA_GROBAL=data.area;CONTENTS_GROBAL=contentsType;EXPLAIN_GROBAL=explainHtml;readyData(contentsType,targetTimes,pastTracks,targetTc,data.area,elm,explainHtml,res,info)}catch(e){loadNoTyphoonProcess(res)}})};var loadNoTyphoonProcess=function(res){var noTyphoonMsg=TR.select("現在台風情報は<br>発表していません","Currently, there is no tropical cyclone of Tropical Storm(TS) intensity or higher");FLAG_GROBAL.notyphoon=true;var div=$("<div>").html(noTyphoonMsg).addClass("center-text");res({centerText:div[0],data:{map:{display:true,maxZoom:11,tileUrl:"/tile/jma/green-class20s/{z}/{x}/{y}.png",zindex:20}}})};var makeSelectorObj=function(targetTc,probTcList,info,probTimeList){var selectors={key:"elem",group:[{name:TR.tr("台風経路図"),enName:TR.tr("台風経路図"),value:"root",key:"typhoon",values:[{name:TR.tr("全ての台風（台風経路図）"),enName:TR.tr("全ての台風")+"（"+TR.tr("台風経路図")+"）",value:"all"}]}]};var tcToNumberObj=c.chain(targetTc).map(function(obj){return[obj.tropicalCyclone,obj.typhoonNumber]}).toHash().value();targetTc.sort(function(a,b){if(a.typhoonNumber>b.typhoonNumber)return-1;if(a.typhoonNumber<b.typhoonNumber)return 1;return 0});targetTc.reverse();c.each(targetTc,function(tc){var no=tc.typhoonNumber.slice(-2);var typhoonCount=Number(no)?TR.select("台風第"+Number(no)+"号","TY "+Number(no))+"（"+TR.tr("台風経路図")+"）":TR.tr("熱帯低気圧")+" "+no+"（"+TR.tr("台風経路図")+"）";getLastGroup(selectors).values.push({name:"　"+typhoonCount,enName:"　"+typhoonCount,value:tc.tropicalCyclone})});var existProbTcList=c.chain(probTimeList).map(function(obj){return obj.member}).uniq().value();if(existProbTcList.length>0){selectors.group.push({name:TR.tr("暴風域に入る確率"),enName:TR.tr("暴風域に入る確率"),value:"prob",key:"typhoon",values:[]});var probNumberList=c.map(existProbTcList,function(tc){return tcToNumberObj[tc]}).sort();c.each(probNumberList,function(num){var no=num.slice(-2);var typhoonCount=Number(no)?TR.select("台風第"+Number(no)+"号","TY "+Number(no))+"（"+TR.tr("暴風域に入る確率")+"）":TR.tr("熱帯低気圧")+" "+no+"（"+TR.tr("暴風域に入る確率")+"）";var noToTc=c.find(targetTc,function(tc){return num===tc.typhoonNumber});getLastGroup(selectors).values.push({name:typhoonCount,enName:typhoonCount,value:noToTc.tropicalCyclone})})}if(TR.isEnglish())return[selectors];selectors.group.push({name:TR.tr("全般台風情報"),enName:TR.tr("全般台風情報"),value:"info",key:"typhoon",values:[{name:TR.tr("全ての台風（全般台風情報）"),enName:TR.tr("全ての台風")+"（"+TR.tr("全般台風情報")+"）",value:"all"}]});c.each(targetTc,function(tc){var tcNo=tc.typhoonNumber.slice(-2);var typhoonCount=Number(tcNo)?TR.select("台風第"+Number(tcNo)+"号","TY "+Number(tcNo))+"（"+TR.tr("全般台風情報")+"）":TR.tr("熱帯低気圧")+" "+tcNo+"（"+TR.tr("全般台風情報")+"）";getLastGroup(selectors).values.push({name:"　"+typhoonCount,enName:"　"+typhoonCount,value:tc.tropicalCyclone})});c.each(selectors.group,function(grp){if(grp.value!==info.elem)return;c.each(grp.values,function(value){if(value.value!==info.typhoon)return;value.selected=true})});return[selectors]};var getLastGroup=function(selectors){return selectors.group[selectors.group.length-1]};var readyData=function(contentsType,probTimeList,pastTracks,targetTc,area,elm,explainHtml,res,info){var flag={center:contentsType==="mapInsert",prob:true,first:false,three:false,time:true,table:true};var requests=makeRequests(targetTc);util.parallelRequest(requests,function(data){try{var typhoonData=makeTyphoonDataObj(data);var index=flag.prob?4:0;DATA_GROBAL=typhoonData;loadTyphoonData(contentsType,typhoonData,area,targetTc,pastTracks,probTimeList,index,flag,elm,explainHtml,res,info)}catch(e){res({fail:e})}})};var makeTyphoonDataObj=function(data){var rtn={};rtn.figureData={};rtn.specificationData={};rtn.probabilityData={};rtn.probabilityTimeSeries={};c.each(data,function(k,value){if(k.match(/^forecast_TC/))rtn.figureData[k]=value;if(k.match(/^specifications_TC/))rtn.specificationData[k]=value;if(k.match(/^probabilityThrough/))rtn.probabilityData[k]=value;if(k.match(/^probabilityTimeSeries/))rtn.probabilityTimeSeries[k]=value});return rtn};var makeRequests=function(targetTc){var TcList=TC.makeTcList(targetTc);var rtn={};c.each(TcList,function(tc){var dir=BASE_DIR+tc+"/";rtn["forecast_"+tc]=dir+"forecast.json";rtn["specifications_"+tc]=dir+"specifications.json";rtn["probabilityThrough_"+tc]=dir+"probabilityThrough.json";rtn["probabilityTimeSeries_"+tc]=dir+"probabilityTimeseries.json"});return rtn};var changeMap=function(info,opt,res){var elm=getElm(info);if(elm!=="typhoon_all"&&elm!=="typhoon_info_all"&&!c.contains(TCLIST,elm.split("_")[2]))elm="typhoon_all";if(FLAG_GROBAL.notyphoon)res({});if(elm.match(/^typhoon_info/)){var hash=hashC.getHashData();var tcNo=elm.split("_")[2];var eventId=tcNo==="all"?"":"#event_id="+tcNo;setHashByElm(hash,ELEM_GROBAL);hashC.setHashData(hash,false,true);window.open("information/typhoon.html"+eventId,"_blank");res({selectChange:{elem:hash.elem,typhoon:hash.typhoon}});return}var initialIndex=FLAG_GROBAL.prob?4:0;loadTyphoonData(CONTENTS_GROBAL,DATA_GROBAL,AREA_GROBAL,TARGET_TC,PAST_TRACKS,PROB_TARGET_TIMES,initialIndex,FLAG_GROBAL,elm,EXPLAIN_GROBAL,res)};var findAnalisysTime=function(figureData,elm){var timeStringList=c.map(figureData,function(_key,value){var analIndex=c.findIndex(value,function(obj){return obj.advancedHours===0});return new Date(value[analIndex].validtime.JST).getTime()});var targetObj=c.find(figureData["forecast_"+elm.split("_")[2]],function(obj){return obj.advancedHours===0});if(elm==="typhoon_all")return new Date(c.max(timeStringList));return new Date(targetObj.validtime.JST)};var typhoonRapid=function(index,res){var typhoonData=DATA_GROBAL;var area=AREA_GROBAL;var targetTc=TARGET_TC;var pastTracks=PAST_TRACKS;var probTimeList=PROB_TARGET_TIMES;var flag=FLAG_GROBAL;var elm=ELEM_GROBAL;var dispData=makeDisplayData(probTimeList,index,elm,flag,typhoonData,area,targetTc,pastTracks);judgeDisplayFlag(dispData,elm,flag);res({data:dispData})};var loadTyphoonData=function(contentsType,typhoonData,area,targetTc,pastTracks,probTimeList,index,flag,elm,explainHtml,res,info){var callback={};var elmKind=elm.split("_")[1];var analysisTime=findAnalisysTime(typhoonData.figureData,elm);var dispData=makeDisplayData(probTimeList,index,elm,flag,typhoonData,area,targetTc,pastTracks);var probTcList=c.chain(probTimeList).filter(function(obj){return obj.validtime!=="none"}).map(function(obj){return obj.member}).uniq().value();var movieConfig=elmKind==="prob"&&c.contains(probTcList,elm.split("_")[2])?makeMovieConfig(probTimeList,elm,flag):null;var legend=function(){var targetImage=flag.first?TR.select("typhoon/image/legend_estimated.png","typhoon/image/legend_estimated_en.png"):TR.select("typhoon/image/legend.png","typhoon/image/legend_en.png");if(elmKind==="prob")return TC.getLegend()[0];if(elmKind==="all"||elmKind==="root")return $("<div>").css("text-align","center").append($("<img>").attr("src",targetImage))[0];return null}();var defaultOpen=function(){if(elmKind==="root"&&elm!=="typhoon_all")return"textinfo";if(elm.match(/^typhoon_root/))return null;if(elmKind==="prob"||elmKind==="all")return"legend";return"explain"}();var contentsInfo=elmKind==="prob"&&!c.contains(probTcList,elm.split("_")[2])?null:makeContentsInfo(probTimeList,index,elm,flag,typhoonData,area,targetTc)[0];var validTime=function(){if(!elm.match(/^typhoon_prob/))return null;if(!c.contains(probTcList,elm.split("_")[2]))return null;return TC.getValidTime(probTimeList,index,elm.replace("typhoon_prob_",""),flag.prob?"through":"timeseries")}();var explainFilter=elmKind==="prob"?TR.select("div.typhoon-prob-map","div.typhoon-prob-map-en"):TR.select("div.typhoon-explain-map","div.typhoon-explain-map-en");var explain=$("<div>").addClass("contents-explain").append($(explainHtml).filter(explainFilter))[0];var textInfo=elmKind==="root"&&elm!=="typhoon_all"?$("<div>").append(TyphoonTable.make.makeExplain(typhoonData.specificationData,elm,flag))[0]:null;var centerText=function(){var msg=TR.select("現在暴風域に入る確率は発表していません。","Currently, there is no 50kt Wind Probability.");if(!elm.match(/^typhoon_prob/))return null;if(c.contains(probTcList,elm.split("_")[2]))return null;return $("<div>").html(msg).addClass("center-text")[0]}();judgeDisplayFlag(dispData,elm,flag);FLAG_GROBAL.center=flag.center;FLAG_GROBAL.first=flag.first;FLAG_GROBAL.prob=flag.prob;FLAG_GROBAL.three=flag.three;FLAG_GROBAL.time=flag.time;FLAG_GROBAL.table=flag.table;ELEM_GROBAL=elm;callback={data:dispData,movieConfig:movieConfig,contentsInfo:contentsInfo,legend:legend,textInfo:textInfo,explain:explain,infoTime:TC.makeInfoText(analysisTime,validTime),defaultOpen:defaultOpen};if(info)callback.selectorObject=makeSelectorObj(targetTc,probTcList,info,probTimeList);if(contentsType==="bosaiTop"){delete callback.legend;delete callback.explain;delete callback.defaultOpen}callback.centerText=centerText;if(!elm.match(/^typhoon_prob/))callback.zxy=findArrivalIndex(dispData,targetTc,elm);res(callback)};var findArrivalIndex=function(dispData,targetTc,elm){var indexList;var typhoonObj=dispData.typhoon.data;var typhoonType=c.chain(typhoonObj).map(function(typhoon){return typhoon.type}).uniq().value();var whiteCircle=c.map(typhoonObj,function(obj){if(obj.type==="circle"&&obj.options.color==="white")return obj.type});if(elm.match(/^typhoon_all/)&&targetTc.length>1&&!c.contains(typhoonType,"circle")){indexList=c.map(typhoonObj,function(typhoon,i){if(typhoon.option&&typhoon.option.icon===true)return i});return{typhoon:indexList}}if(whiteCircle.length<2&&!c.contains(typhoonType,"circle")){var centerPoint=c.find(typhoonObj,function(typhoon){return typhoon.option&&typhoon.option.icon===true}).latlon;return[5,centerPoint[0],centerPoint[1]]}indexList=c.map(typhoonObj,function(typhoon,i){if(typhoon.type==="circle"||typhoon.option&&typhoon.option.icon===true)return i});return{typhoon:indexList}};var judgeDisplayFlag=function(dispData,elm,flag){var elmKind=elm.split("_")[1];var tileKey=c.filter(dispData,function(dataKey){return dataKey.match(/^tile/)});dispData.typhoon.display=elmKind==="root"||elmKind==="all";dispData.mesh.display=elmKind==="prob";c.each(tileKey,function(key){var keyContents=key.split("_")[1];var keyTCNum=key.split("_")[2];dispData[key].display=false;if(elmKind!=="prob"||keyTCNum!==elm.split("_")[2])return;if(keyContents==="long")dispData[key].display=flag.prob;if(keyContents==="movie")dispData[key].display=!flag.prob});return dispData};var makeMovieConfig=function(probTimeList,elm,flag){var member=elm.split("_")[2];var element=flag.prob===true?"through":"timeseries";var timeList=c.chain(probTimeList).filter(function(timeObj){return timeObj.member===member&&timeObj.element===element}).map(function(timeObj){return timeObj.validtime}).value().sort();var stormMovieObj={slider:makeStormMovieSliderList(timeList),subSliderList:makeSubSliderList(timeList),startPosition:0,scaleStyle:"point",interval:1e3};var longSlider=TR.select(["1日先まで","2日先まで","3日先まで","4日先まで","5日先まで"],["1 Day","2 Day","3 Day","4 Day","5 Day"]);var stormLongObj={slider:longSlider,startPosition:4,startButton:false,interval:1e3};var rtn=flag.prob===true?stormLongObj:stormMovieObj;return rtn.slider.length>0?rtn:null};var makeStormMovieSliderList=function(timeList){return c.map(timeList,function(time){var t=UD.createFromString(time,0);return TR.select(UD.getHours(t)%12===0?UD.strftime(t,"%m/%d<br>%H:%M"):"",UD.getHours(t,0)%12===0?UD.strftime(t,"%m/%d<br>%H:%M",0):"")})};var makeSubSliderList=function(timeList){return c.map(timeList,function(time){var endTime=UD.createFromString(time,0);var startTime=new Date(endTime.getTime()-3*3600*1e3);return TR.select(UD.strftime(startTime,"%d日%H")+"-"+UD.strftime(endTime,"%Hp時"),UD.strftime(startTime,"%m/%d %H",0)+"-"+UD.strftime(endTime,"%Hp UTC",0))})};var makeContentsInfo=function(probTimeList,index,elm,flag,typhoonData,area,targetTc,pastTracks){var tileFlagButtons;var hasEstimate=function(){if(elm.match(/^typhoon_prob_/))return false;return c.chain(typhoonData.figureData).flatMap(function(key,forecasts){if(elm==="typhoon_all")return forecasts;if(key===elm.replace("typhoon_root_","forecast_"))return forecasts;return[]}).some(function(forecast){return forecast.advancedHours===1})}();var hasThree=function(){var targetAdvancedHourList=c.chain(typhoonData.figureData).map(function(numberKey,dataObj){var hourList=c.map(dataObj,function(obj){if(obj.advancedHours<=24)return obj.advancedHours;return undefined});return[numberKey.split("_")[1],hourList]}).toHash().value();var eachFlag=c.chain(targetAdvancedHourList).map(function(k,v){if(v.length>4)return[k,true];return[k,false]}).toHash().value();var wholeFlag=c.chain(eachFlag).map(function(_tc,isTrue){return isTrue}).some(function(isTrue){return isTrue===true});if(elm.match(/^typhoon_prob_/))return false;if(elm==="typhoon_all")return wholeFlag;return eachFlag[elm.split("_")[2]]}();var description=function(){if(elm.match(/^typhoon_prob_/))return makeDescription();return null}();if(elm.match(/^typhoon_prob_/)){tileFlagButtons=makeTileFlagButtons(flag,probTimeList,elm,typhoonData,area,targetTc,pastTracks);return $("<div>").append(tileFlagButtons).append(description)}var estimateButtons=function(){if(!hasEstimate)return null;return makeEstimateButtons(flag,probTimeList,index,elm,typhoonData,area,targetTc,pastTracks)}();var centerLineButtons=makeCenterLineButtons(flag,probTimeList,index,elm,typhoonData,area,targetTc,pastTracks);var timeTextButtons=makeTimeTextButtons(flag,probTimeList,index,elm,typhoonData,area,targetTc,pastTracks);var shortTimeButtons=function(){if(!hasThree)return null;return makeShortTimeButtons(flag,probTimeList,index,elm,typhoonData,area,targetTc,pastTracks)}();var typhoonTableButtons=function(){if(!elm.match(/^typhoon_root_/))return null;return makeTyphoonTableButtons(flag,probTimeList,elm,typhoonData,area,targetTc,pastTracks)}();var typhoonTable=function(){if(!elm.match(/^typhoon_root_/))return null;if(!flag.table)return null;return TyphoonTable.make.makeExplain(typhoonData.specificationData,elm,flag)}();return $("<div>").append(estimateButtons).append(centerLineButtons).append(timeTextButtons).append(shortTimeButtons)};var makeTyphoonTableButtons=function(flag,probTimeList,elm,typhoonData,area,targetTc,pastTracks){var buttons;var buttonOptions=[{type:"on",text:TR.tr("表示")},{type:"off",text:TR.tr("非表示")}];var defaultButton=flag.table===true?0:1;buttonOptions[defaultButton].default=true;buttons=CC.makeRadioButtons(buttonOptions,function(type){flag.table=type==="on";movieStart(probTimeList,0,elm,flag,typhoonData,area,targetTc,pastTracks)});return $("<div>").addClass("typhoon-map-radio-buttons").append($("<div>").text(TR.tr("諸元表")+" ").addClass("typhoon-map-radio-caption")).append(buttons)};var makeTileFlagButtons=function(flag,probTimeList,elm,typhoonData,area,targetTc,pastTracks){var buttons;var buttonOptions=[{type:"24h",text:TR.select("5日先まで","for 5 days")},{type:"3h",text:TR.select("3時間毎","per 3 hours")}];var defaultButton=flag.prob===true?0:1;buttonOptions[defaultButton].default=true;buttons=CC.makeRadioButtons(buttonOptions,function(type){flag.prob=type==="24h";var index=flag.prob?4:0;movieStart(probTimeList,index,elm,flag,typhoonData,area,targetTc,pastTracks)});return $("<div>").addClass("typhoon-map-radio-buttons").append(buttons)};var makeEstimateButtons=function(flag,probTimeList,index,elm,typhoonData,area,targetTc,pastTracks){var buttons;var buttonOptions=[{type:"default",text:TR.tr("進路予想図")},{type:"1h",text:TR.tr("１時間後推計値")}];var defaultButton=flag.first===true?1:0;buttonOptions[defaultButton].default=true;buttons=CC.makeRadioButtons(buttonOptions,function(type){flag.first=type==="1h";movieStart(probTimeList,index,elm,flag,typhoonData,area,targetTc,pastTracks)});return $("<div>").addClass("typhoon-map-radio-buttons").append(buttons)};var makeCenterLineButtons=function(flag,probTimeList,index,elm,typhoonData,area,targetTc,pastTracks){var buttons;var buttonOptions=[{type:"on",text:TR.tr("表示")},{type:"off",text:TR.tr("非表示")}];var defaultButton=flag.center===true?0:1;buttonOptions[defaultButton].default=true;buttons=CC.makeRadioButtons(buttonOptions,function(type){flag.center=type==="on";movieStart(probTimeList,index,elm,flag,typhoonData,area,targetTc,pastTracks)});var centerDoc=TR.tr("中心線")+" ";return $("<div>").addClass("typhoon-map-radio-buttons").append($("<div>").html(centerDoc).addClass("typhoon-map-radio-caption")).append(buttons)};var makeTimeTextButtons=function(flag,probTimeList,index,elm,typhoonData,area,targetTc,pastTracks){var buttons;var buttonOptions=[{type:"on",text:TR.tr("表示")},{type:"off",text:TR.tr("非表示")}];var defaultButton=flag.time===true?0:1;buttonOptions[defaultButton].default=true;buttons=CC.makeRadioButtons(buttonOptions,function(type){flag.time=type==="on";movieStart(probTimeList,index,elm,flag,typhoonData,area,targetTc,pastTracks)});var dateDoc=TR.tr("日時表示")+" ";return $("<div>").addClass("typhoon-map-radio-buttons").append($("<div>").text(dateDoc).addClass("typhoon-map-radio-caption")).append(buttons)};var makeShortTimeButtons=function(flag,probTimeList,index,elm,typhoonData,area,targetTc,pastTracks){var buttons;var buttonOptions=[{type:"on",text:TR.tr("表示")},{type:"off",text:TR.tr("非表示")}];var defaultButton=flag.three===true?0:1;buttonOptions[defaultButton].default=true;buttons=CC.makeRadioButtons(buttonOptions,function(type){flag.three=type==="on";movieStart(probTimeList,index,elm,flag,typhoonData,area,targetTc,pastTracks)});return $("<div>").addClass("typhoon-map-radio-buttons").append($("<div>").text(TR.select("３時間毎","per 3 hours")).addClass("typhoon-map-radio-caption")).append(buttons)};var makeDescription=function(){return $("<div>").addClass("typhoon-map-description").html(TR.select("地図をクリックするとその地域の暴風<br>"+"域に入る確率をグラフで表示します。<br>"+"（灰色の地域は表示なし）","Click areas and you can watch graph<br>"+"that shows probability of area of 50kg winds or more<br>"+"(Information of Gray areas cannot available)"))};var movieStart=function(probTimeList,index,elm,flag,typhoonData,area,targetTc,pastTracks){var elmKind=elm.split("_")[1];var analysisTime=findAnalisysTime(typhoonData.figureData,elm);var probTcList=c.chain(probTimeList).filter(function(obj){return obj.validtime!=="none"}).map(function(obj){return obj.member}).uniq().value();var validTime=function(){if(!elm.match(/^typhoon_prob/))return null;if(!c.contains(probTcList,elm.split("_")[2]))return null;return TC.getValidTime(probTimeList,index,elm.replace("typhoon_prob_",""),flag.prob?"through":"timeseries")}();var legend=function(){var targetImage=flag.first?TR.select("typhoon/image/legend_estimated.png","typhoon/image/legend_estimated_en.png"):TR.select("typhoon/image/legend.png","typhoon/image/legend_en.png");if(elmKind==="prob")return TC.getLegend()[0];if(elmKind==="all"||elmKind==="root")return $("<div>").css("text-align","center").append($("<img>").attr("src",targetImage))[0];return null}();var contentsInfo=makeContentsInfo(probTimeList,index,elm,flag,typhoonData,area,targetTc)[0];var dispData=makeDisplayData(probTimeList,index,elm,flag,typhoonData,area,targetTc,pastTracks);var movieConfig=elm.match(/^typhoon_prob/)?makeMovieConfig(probTimeList,elm,flag):null;judgeDisplayFlag(dispData,elm,flag);FLAG_GROBAL.center=flag.center;FLAG_GROBAL.first=flag.first;FLAG_GROBAL.prob=flag.prob;FLAG_GROBAL.time=flag.time;FLAG_GROBAL.table=flag.table;UnitMap.makePage({data:dispData,movieConfig:movieConfig,legend:legend,contentsInfo:contentsInfo,infoTime:TC.makeInfoText(analysisTime,validTime)})};var makeDisplayData=function(probTimeList,index,elm,flag,typhoonData,area,targetTc,pastTracks){var dispData={};var TcList=TC.makeTcList(targetTc);var pictObj=makePictObj(typhoonData,flag,targetTc,pastTracks);setIndividualInfo(typhoonData,targetTc,dispData);setMapObj(dispData,elm,typhoonData.probabilityData,area);if(probTimeList.length>0&&elm.match(/^typhoon_prob/))setProbTile(dispData,probTimeList,index,targetTc);if(!elm.match(/^typhoon_prob/)){c.each(TcList,function(TcNumber){var movieKey="tile_movie_"+TcNumber;var longKey="tile_long_"+TcNumber;dispData[movieKey]={display:false};dispData[longKey]={display:false}})}setTyphoonData(dispData,pictObj,elm);return dispData};var makePictObj=function(typhoonData,flag,targetTc,pastTracks){var pictObj={};var tcList=TC.makeTcList(targetTc);var figureData=typhoonData.figureData;var specificationData=typhoonData.specificationData;c.each(tcList,function(tc){var targetPastTrack=c.find(pastTracks,function(track){return track.tropicalCyclone===tc});var dispData=[];var targetSpecification=specificationData["specifications_"+tc];var targetFigure=figureData["forecast_"+tc];var figureMain=c.reject(targetFigure,function(d){return d.part==="title"});var specificationMain=c.reject(targetSpecification,function(d){return d.part==="title"});var tipHeaderData=targetSpecification[0];var center=figureMain[0].center;var figureCircleKey=c.map(figureMain,function(obj){return obj.probabilityCircle?obj.probabilityCircle.tangent_3h:""});var threeTangent=c.compact(figureCircleKey);if(flag.first){makeEstimateOrbit(dispData,figureMain,center,targetPastTrack,specificationMain[0],tipHeaderData,tc)}else{dispData.push(putCommonIcon(center,figureMain[0],specificationMain[0],tipHeaderData,tc));makeTrack(dispData,figureMain[0].track,targetPastTrack);c.each(figureMain,function(v,i){if(v.advancedHours!==1){makeForecastOrbit(dispData,v,specificationMain[i],tipHeaderData,flag,threeTangent,tc)}});var stormWarningData=c.map(figureMain,function(obj){return obj.stormWarningArea});if(stormWarningData.length>0)setStormWarningArea(figureMain,dispData);if(flag.center&&figureMain.length>=2)makeCenterLine(dispData,figureMain)}pictObj[tc]=dispData});return pictObj};var setIndividualInfo=function(typhoonData,targetTc,dispData){var tcList=TC.makeTcList(targetTc);var figureData=typhoonData.figureData;var specificationData=typhoonData.specificationData;c.each(tcList,function(tc){var targetSpecification=specificationData["specifications_"+tc];var targetFigure=figureData["forecast_"+tc];var figureMain=c.reject(targetFigure,function(d){return d.part==="title"});var specificationMain=c.reject(targetSpecification,function(d){return d.part==="title"});var tipHeaderData=targetSpecification[0];c.each(figureMain,function(v,i){if(v.advancedHours!==1){setInfoObj(dispData,v,specificationMain[i],tipHeaderData,tc,false)}})})};var setInfoObj=function(dispData,target,specification,tipHeaderData,tc,isDisplay){var ft=target.advancedHours;var infoKey="panel_"+tc+"_"+ft;var latlon=target.center;var reach,offsetY;if(target.advancedHours===0&&target.galeWarningArea){reach=0;offsetY=35}else if(target.probabilityCircle){reach=target.probabilityCircle.radius;offsetY=20}else{reach=0;offsetY=35}var panel=TyphoonTable.make.makeToolTip(specification,tipHeaderData);var latState=latlon[0]-reach/111111;var lonState=latlon[1];dispData[infoKey]={data:{type:"dom",latlon:[latState,lonState],positionShift:[-155,offsetY],priority:1e3,domElement:panel},display:isDisplay,zindex:50}};var makeTrack=function(dispData,track,targetPastTrack){var preTrack=track.preTyphoon;var typhoonTrack=track.typhoon;if(!track.preTyphoon){dispData.push({type:"path",latlon:track,options:TC.TYPHOON_OPTIONS.track,priority:10});return}if(typhoonTrack.length>0){dispData.push({type:"path",latlon:typhoonTrack,options:TC.TYPHOON_OPTIONS.track,priority:10})}if(preTrack.length>0){dispData.push({type:"path",latlon:preTrack,options:TC.TYPHOON_OPTIONS.trackdash,priority:10})}if(targetPastTrack){var trackList=makeTrackList(targetPastTrack);var pastToPresentPath=makePastToPresentPath(trackList,track);dispData.push({type:"path",latlon:pastToPresentPath,options:TC.TYPHOON_OPTIONS.trackdash,priority:10});c.each(trackList,function(list){dispData.push({type:"path",latlon:list.typhoon,options:TC.TYPHOON_OPTIONS.track,priority:10});dispData.push({type:"path",latlon:list.preTyphoon,options:TC.TYPHOON_OPTIONS.trackdash,priority:10})})}};var makePastToPresentPath=function(pastTrack,track){var rtnTrack=[];var targetPastTrack=c.last(pastTrack);rtnTrack.push(findPathTerminal(targetPastTrack,false));var trackLatlons=c.flatMap(track,function(_key,list){return list});if(trackLatlons.length===1){rtnTrack.push(trackLatlons[0])}else{rtnTrack.push(findPathTerminal(track,true))}return rtnTrack};var findPathTerminal=function(targetTrack,isPresent){var preData=targetTrack.preTyphoon;var nowData=targetTrack.typhoon;var firstPrePoint=preData[0];var lastPrePoint=c.last(preData);var firstPoint=nowData[0];var lastPoint=c.last(nowData);if(isPresent){if(js(lastPrePoint)===js(firstPoint))return firstPoint;if(js(lastPoint)===js(firstPrePoint))return firstPrePoint;if(preData.length===0)return nowData[0];if(nowData.length===0)return preData[0]}if(js(lastPrePoint)===js(firstPoint))return lastPoint;if(js(lastPoint)===js(firstPrePoint))return lastPrePoint;if(preData.length===0)return c.last(nowData);if(nowData.length===0)return c.last(preData);return undefined};var makeTrackList=function(targetPastTrack){var rtn=[];c.times(targetPastTrack.count,function(i){rtn.push(targetPastTrack["track"+(i+1)])});return rtn};var makeCenterLine=function(dispData,targetList){var centerPoint=c.map(targetList,function(target){return target.center});c.each(centerPoint,function(_point,i){dispData.push({type:"path",latlon:[centerPoint[i],centerPoint[i+1]],options:TC.TYPHOON_OPTIONS.whitedash,priority:20});if(i===centerPoint.length-2)return false;return true});return dispData};var makeTileLink=function(targetTimeData,targetElm){var tileBase=BASE_DIR+"prob50kt/";targetTimeData.sort(function(a,b){if(a.validtime<b.validtime)return-1;return 1});return c.chain(targetTimeData).filter(function(obj){return obj.element===targetElm}).map(function(obj){return tileBase+obj.basetime+"/"+obj.member+"/"+obj.validtime+"/surf/"+obj.element+"/{z}/{x}/{y}.png"}).value()};var setProbTile=function(dispData,probTimeList,index,targetTc){var TcList=TC.makeTcList(targetTc);c.each(TcList,function(TcNumber){var targetTimeData=c.filter(probTimeList,function(timeObj){return timeObj.member===TcNumber});var timeSeriesTileLink=makeTileLink(targetTimeData,"timeseries");var throughTileLink=makeTileLink(targetTimeData,"through");dispData["tile_movie_"+TcNumber]={display:true,tileUrl:timeSeriesTileLink[index],maxZoom:10,minZoom:3,zindex:40,options:{className:"typhoon-data-tile"}};dispData["tile_long_"+TcNumber]={display:true,tileUrl:throughTileLink[index],maxZoom:10,minZoom:3,zindex:40,options:{className:"typhoon-data-tile"}}});return dispData};var setTyphoonData=function(dispData,pictObj,elm){var targetDataList=function(){if(elm==="typhoon_all"){return c.chain(pictObj).map(function(_tc,pict){return pict}).flatten().value()}else if(elm.match(/^typhoon_root/)){return pictObj[elm.split("_")[2]]}return[]}();targetDataList.sort(function(a,b){if(a.type<b.type)return-1;return 1});dispData.typhoon={display:true,data:targetDataList,zindex:40};return dispData};var makeEstimateOrbit=function(dispData,figureList,departure,targetPastTrack,specification,tipHeaderData,tc){var target=figureList[0];var track=figureList[0].track;var estimateData,center;var estimateIndex=c.findIndex(figureList,function(obj){return obj.advancedHours===1});if(estimateIndex===-1)return dispData;estimateData=figureList[estimateIndex];center=estimateData.center;dispData.push(putCommonIcon(departure,target,specification,tipHeaderData,tc));makeTrack(dispData,track,targetPastTrack);dispData.push(putCenterCircle(center));dispData.push({type:"path",latlon:[departure,center],options:TC.TYPHOON_OPTIONS.track,priority:10});dispData.push({type:"circle",latlon:estimateData.galeWarningArea.center,radius:estimateData.galeWarningArea.radius+"m",options:TC.TYPHOON_OPTIONS.yellow,priority:30});if(estimateData.stormWarningArea){c.each(estimateData.stormWarningArea.arc,function(arc){dispData.push({type:"circle",latlon:arc[0],radius:arc[1]+"m",arg:arc[2],options:TC.TYPHOON_OPTIONS.red,priority:40})})}return dispData};var setStormWarningArea=function(data,dispData){var firstArc;var targetList=c.filter(data,function(obj){return obj.stormWarningArea});var lastData=c.last(targetList);if(targetList.length>0&&targetList[0].advancedHours===0){firstArc=targetList[0].stormWarningArea.arc[0];dispData.push({type:"circle",latlon:firstArc[0],radius:firstArc[1]+"m",options:TC.TYPHOON_OPTIONS.red,priority:40})}c.each(lastData.stormWarningArea.arc,function(arc){dispData.push({type:"circle",latlon:arc[0],radius:arc[1]+"m",arg:arc[2],options:TC.TYPHOON_OPTIONS["red-thin"],priority:40})});c.each(lastData.stormWarningArea.line,function(line){dispData.push({type:"path",latlon:line,options:TC.TYPHOON_OPTIONS["red-thin"],priority:40})});return dispData};var setMapObj=function(dispData,elm,probabilityData,area){elm.match(/^typhoon_prob/)?setProbMap(dispData,elm,probabilityData,area):setOrbitMap(dispData);setOutSideMap(dispData);return dispData};var setOutSideMap=function(dispData){var latlon=[[[-60,250],[80,250],[80,20],[-60,20]],[[20,150],[50,150],[50,120],[20,120]]];dispData.mesh={data:[{type:"polygon",latlon:latlon,options:TC.TYPHOON_OPTIONS.mesh}],zindex:40,className:"typhoon-mesh"}};var setOrbitMap=function(dispData){dispData.map={display:true,maxZoom:11,tileUrl:"/tile/jma/green-class20s/{z}/{x}/{y}.png",zindex:20};dispData.prefline={display:false};dispData.citybold={display:false}};var setProbMap=function(dispData,elm,probabilityData,area){var tcNo=elm.split("_")[2];var targetKey="probabilityThrough_"+tcNo;var targetData=probabilityData[targetKey].probability;var prefObj={display:true,maxZoom:7,minZoom:4,mapKey:"class10s",zindex:10,islandBold:true,options:ContentsCommon.getMapOptions("missing")};var cityObj={display:true,maxZoom:10,minZoom:8,mapKey:"class20s",zindex:10,options:ContentsCommon.getMapOptions("missing")};dispData.map={display:true,maxZoom:11,tileUrl:"/tile/jma/base/{z}/{x}/{y}.png",zindex:20};if(!targetData){dispData.prefline=prefObj;dispData.citybold=cityObj;dispData.prefline.colorData=null;dispData.prefline.plte=null;dispData.prefline.events=null;dispData.citybold.colorData=null;dispData.citybold.plte=null;dispData.citybold.events=null;return dispData}var class15ProbExists=c.chain(targetData).map(function(class15,prob){var isAllProb=c.all(prob,function(i){return i===0});if(isAllProb)return[class15,0];return[class15,1]}).toHash().value();var class20ProbExists=c.chain(area.class20s).map(function(class20,value){return[class20,class15ProbExists[value.parent]]}).toHash().value();var officeProbExists=c.chain(area.offices).map(function(officeCode,office){return[officeCode,c.some(office.children,function(class10Code){return c.some(area.class10s[class10Code].children,function(class15Code){return class15ProbExists[class15Code]===1})})?1:0]}).toHash().value();var class10ProbExists=c.chain(area.class10s).map(function(class10Code,class10){return[class10Code,officeProbExists[class10.parent]]}).toHash().value();var areaPlte=[{color:"#c8c8cb",interactive:false,weight:1,opacity:1,fillColor:"#c8c8cb",fillOpacity:1},{color:"#ffffff",interactive:true,weight:1,opacity:1,fillColor:"#ffffff",fillOpacity:1}];prefObj.plte=areaPlte;prefObj.colorData=class10ProbExists;prefObj.events={click:function(e){if(e.target.feature.properties.code==="hoppo")return;setMapLinks(e,class10ProbExists,"class10s",area,elm)}};cityObj.plte=areaPlte;cityObj.colorData=class20ProbExists;cityObj.events={click:function(e){if(e.target.feature.properties.code==="hoppo")return;setMapLinks(e,class20ProbExists,"class20s",area,elm)}};dispData.prefline=prefObj;dispData.citybold=cityObj;return dispData};var setMapLinks=function(e,colorData,type,area,elm){var clickableArea=c.map(colorData,function(code,v){if(v===1)return code});var tc=elm.split("_")[2];var code=e.target.feature.properties.code;if(c.contains(clickableArea,code)){if(type==="class10s"){type="offices";code=area.class10s[code].parent}var url="typhoon/#area_type="+type+"&area_code="+code+"&tc_num="+tc+TR.select("","&lang=en");document.location=url}};var setOrbitParts=function(dispData,tipHeaderData,specification,target,flag,mapText,tc){var centerFlag=flag.center;var pointRadius="2";dispData.push({type:"circle",latlon:target.center,radius:target.probabilityCircle.radius+"m",events:makeMouseEvent(target,specification,tipHeaderData,tc),options:TC.TYPHOON_OPTIONS.whitedash});if(centerFlag){dispData.push({type:"circle",latlon:target.center,radius:pointRadius,options:TC.TYPHOON_OPTIONS.whitefill,priority:20})}if(flag.time)dispData.push(mapText)};var setTangentPath=function(dispData,tangent){c.each(tangent,function(list){dispData.push({type:"path",latlon:list,options:TC.TYPHOON_OPTIONS.white,proiroty:20})})};var makeForecastOrbit=function(dispData,target,specification,tipHeaderData,flag,threeTangent,tc){var threeFlag=flag.three;var time=new Date(target.validtime.JST);var displayTime=TR.select(UD.strftime(time,"%d日%H時"),UD.strftime(time,"%m/%d %H UTC",0));var ft=target.advancedHours;var mapText=makeMapText(target,displayTime,ft,tc,tipHeaderData,specification);var circleObj=target.probabilityCircle;var typhoonNo=tipHeaderData.typhoonNumber;var no=Number(typhoonNo)?typhoonNo.slice(-2):typhoonNo;var tcText=makeTCText(target,specification,tipHeaderData,tc,no);if(ft===0)dispData.push(tcText);if(target.galeWarningArea){dispData.push({type:"circle",latlon:target.galeWarningArea.center,radius:target.galeWarningArea.radius+"m",options:TC.TYPHOON_OPTIONS.yellow,priority:30})}if(!circleObj)return dispData;if(ft!==10&&ft!==11&&ft!==12&&ft<22){if(threeFlag===true)setOrbitParts(dispData,tipHeaderData,specification,target,flag,mapText,tc)}else{setOrbitParts(dispData,tipHeaderData,specification,target,flag,mapText,tc)}if(threeFlag===false||ft>24||threeTangent.length===0){setTangentPath(dispData,circleObj.tangent)}if(threeFlag===true)setTangentPath(dispData,circleObj.tangent_3h);return dispData};var putCommonIcon=function(latlon,target,specification,tipHeaderData,tc){var div=$("<div>").css("line-height",0);$("<img>").attr({src:"typhoon/image/cross.svg"}).addClass("typhoon-img").appendTo(div);return{type:"dom",latlon:latlon,domElement:div[0],option:{icon:true},priority:50,events:makeMouseEvent(target,specification,tipHeaderData,tc)}};var putCenterCircle=function(latlon){return{type:"circle",latlon:latlon,radius:3,options:{color:"blue",fillOpacity:1,interactive:false},priority:50}};var makeMapText=function(target,date,advancedHours,tc,tipHeaderData,specification){var latlon=target.center;var reach;if(target.advancedHours===0&&target.galeWarningArea){reach=target.galeWarningArea.radius}else if(target.probabilityCircle){reach=target.probabilityCircle.radius}else{reach=0}var div=$("<div>");$("<span>").text(date).addClass("typhoon-text").appendTo(div);return{type:"dom",latlon:[latlon[0]-reach/111111,latlon[1]],positionShift:[-27,5],priority:1e3-advancedHours,domElement:div[0],events:makeMouseEvent(target,specification,tipHeaderData,tc)}};var setOrHidePanel=function(target,specification,tipHeaderData,tc,isDisplay){var renewData={};setInfoObj(renewData,target,specification,tipHeaderData,tc,isDisplay);UnitMap.makePage({data:renewData})};var makeTCText=function(target,specification,tipHeaderData,tc,no){var num=Number(no)?Number(no):no;var offset=function(){if(num<10)return 0;return-4}();var div=$("<div>");$("<span>").text(num).addClass("typhoon-no-text").appendTo(div);return{type:"dom",latlon:target.center,positionShift:[offset,20],priority:1e3,domElement:div[0],events:makeMouseEvent(target,specification,tipHeaderData,tc)}};var makeMouseEvent=function(target,specification,tipHeaderData,tc){var url="map.html#elem=root"+"&typhoon="+tc+"&contents=typhoon"+TR.select("","&lang=en");return{click:function(e){document.location=url},mouseover:function(e){setOrHidePanel(target,specification,tipHeaderData,tc,true)},mouseout:function(e){setOrHidePanel(target,specification,tipHeaderData,tc,false)}}};var getElm=function(info){if(!info.elem||!info.typhoon)return"typhoon_all";if(info.elem==="root"&&info.typhoon==="all")return"typhoon_all";return"typhoon_"+info.elem+"_"+info.typhoon};var setHashByElm=function(hash,elm){if(elm==="typhoon_all"){hash.elem="root";hash.typhoon="all"}else{hash.elem=elm.split("_")[1];hash.typhoon=elm.split("_")[2];if(!hash.elem||!hash.typhoon){hash.elem="root";hash.typhoon="all"}}};root.Typhoon={};root.Typhoon.draw=draw;root.Typhoon.changeMap=changeMap;root.Typhoon.rapidRequest=typhoonRapid})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";root.Hypo=root.Hypo||{};var prefCity_PRM={};var convCity_PRM={};var zxyLatlon_PRM={};var convCity_url="common/const/earthquake_area.json";var zxyLatlon_url="common/const/zxy.json";var imgdir="hypo/images/";var time_url="hypo/data/time.json";var latestTime;var imgdir="hypo/images/";var movieData=new Array(7);var tmpRes=[];var drawDataObj={data:{hypo:{zindex:21e3,minZoom:1,maxZoom:18,display:false,data:[]},fault:{zindex:25e3,minZoom:1,maxZoom:18,display:false,data:[]},vol:{zindex:3e4,minZoom:1,maxZoom:18,display:false,data:[]},trench:{zindex:500,minZoom:1,maxZoom:18,display:true,data:[]}},zxy:{},duration:1.5,infoTime:"",contentsInfo:$("<div>")[0],freeSpace:$("<div>")[0],legend:$("<div>")[0],explain:null,movieConfig:$("<div>")[0],freeSpaceDefault:"close",centerText:null};root.Hypo.draw=function(hashdata,opt,resolve){makeLegends();$.when(readEelements(opt)).done(function(){$.when(readData(0)).done(function(){makeSlider(latestTime);drawDataObj["freeSpaceDefault"]="close";delete drawDataObj.zxy;resolve(drawDataObj)})})};var readrawMap=function(opt){movieData=[];$.when(readData(opt)).done(function(){makeSlider(latestTime);delete drawDataObj.zxy;UnitMap.makePage(drawDataObj)})};var readEelements=function(opt){var def=$.Deferred();JMAWebUtility.parallelRequest({fault:"hypo/const/faultDL.geojson",vol:"hypo/const/volcano_list.json",trench:"hypo/const/trench.geojson",explain:"hypo/const/explain.txt",convCity:convCity_url,zxyLatlon:zxyLatlon_url},function(data){drawDataObj["data"]["fault"].data=chgFault(data.fault);drawDataObj["data"]["vol"].data=chgVol(data.vol);drawDataObj["data"]["trench"].data=chgTrench(data.trench);drawDataObj["explain"]=$("<div>").addClass("contents-explain").append(data.explain)[0];convCity_PRM=data.convCity;zxyLatlon_PRM=data.zxyLatlon;if(opt!=null){prefCity_PRM["pref"]={};for(var c in opt["areas"]["offices"]){var i=parseInt(c);prefCity_PRM["pref"][i]={code:c,name:opt["areas"]["offices"][c].name,z:zxyLatlon_PRM.offices[c][0],x:zxyLatlon_PRM.offices[c][1],y:zxyLatlon_PRM.offices[c][2]}}prefCity_PRM["city"]={};for(var c in opt["areas"]["class20s"]){var i=parseInt(c);prefCity_PRM["city"][i]={code:c,name:opt["areas"]["class20s"][c].name}}}makeButtons();def.resolve()});return def.promise()};var readData=function(opt){var def=$.Deferred();latestTime=[];JMAWebUtility.parallelRequest({timeJson:time_url},function(data){latestTime=data.timeJson;readSelectbox(latestTime);var Info=getInfoTime(latestTime,opt);drawDataObj["infoTime"]=Info.term;$.when(readJson(Info)).done(function(){def.resolve()})});return def.promise()};var readJson=function(Info){var def2=$.Deferred();if(!Info.fN){var listStr="検索期間を見直してください。";drawDataObj["data"]["hypo"].display=false;drawDataObj["centerText"]=$("<div>").append(listStr)[0];def2.resolve()}else if(Object.keys(Info.fN).length>32){var listStr="1か月より長い期間のデータは表示できません。検索期間を見直してください。";drawDataObj["data"]["hypo"].display=false;drawDataObj["centerText"]=$("<div>").append(listStr)[0];def2.resolve()}else{var filename=Info.fN;drawDataObj["data"]["hypo"].data=[];var tmpHypo=[];tmpRes=[];var tmpCount=0;var idx=Object.keys(filename).length;var fileRequests={};for(var j=1;j<=idx;j++){var dN="data"+j;fileRequests[dN]=filename[dN]}var def=$.Deferred();JMAWebUtility.parallelRequest(fileRequests,function(data){for(var k in data){$.when(chgJson(data[k],Info)).done(function(){tmpHypo=tmpHypo.concat(tmpRes.cnvJson);tmpCount=tmpCount+tmpRes.count})}def.resolve()});def.promise().then(function(){if(tmpCount==0){var listStr="対象の震源はありません。検索条件を見直してください。";drawDataObj["centerText"]=$("<div>").append(listStr)[0]}else{var listStr="対象の震源を表示しました。";drawDataObj["data"]["hypo"].data=tmpHypo;drawDataObj["data"]["hypo"].display=true;drawDataObj["centerText"]=null}def2.resolve()})}return def2.promise()};var makeSelectMap=function(dataTime){var stD=document.getElementById("stD").value;var stH=document.getElementById("stH").value;var etD=document.getElementById("etD").value;var etH=document.getElementById("etH").value;var sm=document.getElementById("sm").value;var em=document.getElementById("em").value;var sd=document.getElementById("sd").value;var ed=document.getElementById("ed").value;var si=document.getElementById("si").value;var ei=document.getElementById("ei").value;var YYYY1=stD.slice(0,4);var MM1=stD.slice(5,7);var DD1=stD.slice(8,10);var YYYY2=etD.slice(0,4);var MM2=etD.slice(5,7);var DD2=etD.slice(8,10);var term="データ表示期間　";term+=YYYY1+"年"+MM1+"月"+DD1+"日"+stH+"～"+YYYY2+"年"+MM2+"月"+DD2+"日"+etH;var strDateS=new Date(stD.replace(/-/g,"/")+" 00:00:00");var strDateE=new Date(etD.replace(/-/g,"/")+" 00:00:00");var strTimeS=new Date(stD.replace(/-/g,"/")+" "+stH+":00");var strTimeE=new Date(etD.replace(/-/g,"/")+" "+etH+":00");var TimeS=strTimeS.getTime();var TimeE=strTimeE.getTime();var diff=(strDateE.getTime()-strDateS.getTime())/(1e3*60*60*24);var dt=new Date(dataTime.time);var diffDt0=dt.getTime()-strDateS.getTime();var diffDt1=dt.getTime()-strDateE.getTime();dt.setFullYear(dt.getFullYear()-1);var diffDt2=strDateS.getTime()-dt.getTime();var diffDt3=strDateE.getTime()-dt.getTime();if(diffDt0<0||diffDt1<0||diffDt2<0||diffDt3<0||!stD||!stH||!etD||!etH||diff<0){var Info={term:term}}else{var requests={};for(var i=1;i<=Number(diff)+1;i++){var DD=("00"+DD1).slice(-2);var MM=("00"+MM1).slice(-2);var fN="hypo/data/"+YYYY1+"/"+MM+"/hypo"+YYYY1+MM+DD+".geojson";var idx="data"+i;requests[idx]=fN;strDateS.setDate(strDateS.getDate()+1);var YYYY1=strDateS.getFullYear();var MM1=strDateS.getMonth()+1;var DD1=strDateS.getDate()}var Info={term:term,fN:requests,stH:TimeS,etH:TimeE,sm:sm,em:em,sd:sd,ed:ed,si:si,ei:ei}}drawDataObj["infoTime"]=Info.term;$.when(readJson(Info)).done(function(){drawDataObj["freeSpaceDefault"]="keep";UnitMap.makePage({data:{hypo:drawDataObj.data.hypo},freeSpaceDefault:drawDataObj.freeSpaceDefault,infoTime:drawDataObj.infoTime,centerText:drawDataObj.centerText})})};var chgFault=function(geo){var cnvJson=[];for(var i=0;i<geo.features.length;i++){if(geo.features[i].geometry){var g=geo.features[i].geometry;var latlon=g.coordinates}if(geo.features[i].properties){var p=geo.features[i].properties;var titleStr='<div style="font-size: 16px; font-weight:bold; color: #272d79;">'+p.name+"</div>"+'<div style="font-size: 12px; color: #272d79">'+p.name1+"</div>"+'<div style="font-size: 12px; color: #272d79">'+p.active+"</div>"+'<div style="font-size: 10px; color: black">地震規模 : <span style="font-weight: bold; font-size: 14px;">'+p.size+"</div>"+'<div style="font-size: 10px; color: black">確率 : <span style="font-weight: bold; font-size: 14px;">'+p.rank+"</div>"}for(var j=0;j<latlon.length;j++){for(var k=0;k<latlon[j].length;k++){latlon[j][k].reverse(latlon[j][k])}}cnvJson.push({type:"path",latlon:latlon,options:{color:p.color,weight:p.id=="aaa"?4:2,opacity:.8},popup:{content:titleStr,on:"click"}})}return cnvJson};var chgVol=function(geo){var cnvJson=[];for(var i=0;i<geo.length;i++){if(geo[i].code!=900){var titleStr='<div style="font-weight: bold; font-size: 14px;">'+geo[i].name_jp+"</div>"+geo[i].name_en;cnvJson.push({type:"dom",latlon:geo[i].latlon,domElement:'<img src="'+imgdir+'vol.svg" width="15px" height="15px" />',svgConfig:{height:20,width:20},popup:{content:titleStr,on:"click"}})}}return cnvJson};var chgTrench=function(geo){var cnvJson=[];for(var i=0;i<geo.features.length;i++){if(geo.features[i].geometry){var g=geo.features[i].geometry;var latlon=g.coordinates}for(var j=0;j<latlon.length;j++){for(var k=0;k<latlon[j].length;k++){latlon[j][k].reverse(latlon[j][k])}}cnvJson.push({type:"path",latlon:latlon,options:{color:"#808080",weight:.5,opacity:.8}})}return cnvJson};var chgJson=function(geo,Info){var def=$.Deferred();var cnvJson=[];var count=0;if(geo&&geo.features){for(var i=0;i<geo.features.length;i++){if(geo.features[i].geometry){var g=geo.features[i].geometry}if(geo.features[i].properties){var p=geo.features[i].properties}var eqLon=g.coordinates[0];var eqLat=g.coordinates[1];var eqdate=p.date;var eqdate1=eqdate.substr(0,16)+":00";var eqdate2=new Date(eqdate1.replace("."," "));var eqdateNum=eqdate2.getTime();var eqdep=p.dep;var eqmag=p.mag;var eqaflag=p.aflag;var eqflag=p.flag;var eqmj=p.mj;var kinF="";if(eqmj=="J"){var kinF="情報発表した地震"}if(p.si=="A"){var eqsi="5弱";var eqsinum=4.5}else if(p.si=="B"){var eqsi="5強";var eqsinum=5}else if(p.si=="C"){var eqsi="6弱";var eqsinum=5.5}else if(p.si=="D"){var eqsi="6強";var eqsinum=6}else{var eqsi=p.si;var eqsinum=p.si}var eqplace=p.place;if(p.si==1||p.si==2||p.si==3||p.si==4||p.si=="A"||p.si=="B"||p.si=="C"||p.si=="D"||p.si==7){var titleStr='<div style="font-size: 14px; font-weight:bold; color: #272d79;">最大震度：'+eqsi+"</div>"+'<div style="font-size: 10px;">発生時刻：<span style="font-size: 14px; font-weight:bold;">'+eqdate.substr(0,10)+"&nbsp;"+eqdate.substr(11,5)+"</div>"+'<div style="font-size: 10px;">マグニチュード：<span style="font-size: 14px; font-weight:bold; color: #000000;">'+eqmag+"</div>"+'<div style="font-size: 10px;">深さ：<span style="font-size: 14px; font-weight:bold; color: #000000;">'+eqdep+"km"+"</div>"}else{var titleStr='<div style="font-size: 14px; font-weight:bold; color: #272d79;">'+kinF+"</div>"+'<div style="font-size: 10px;">発生時刻：<span style="font-size: 14px; font-weight:bold;">'+eqdate.substr(0,10)+"&nbsp;"+eqdate.substr(11,5)+"</div>"+'<div style="font-size: 10px;">マグニチュード：<span style="font-size: 14px; font-weight:bold;">'+eqmag+"</div>"+'<div style="font-size: 10px;">深さ：<span style="font-size: 14px; font-weight:bold;">'+eqdep+"km"+"</div>"}if(Info.opt<11&&Info.stH<=eqdateNum&&eqdateNum<=Info.etH&&(eqflag=="K"||eqflag=="k"||eqflag=="A"||eqflag==" ")){cnvJson.push({type:"circle",latlon:[eqLat,eqLon],radius:getEqSize(eqmag),svgConfig:{},options:getEqColorD(eqdep,eqmag,eqaflag),popup:{content:titleStr,on:"click"}});count=count+1}else if(Info.stH<=eqdateNum&&eqdateNum<=Info.etH&&(Info.sm<=Number(eqmag)&&Number(eqmag)<=Info.em||Info.sm==-2&&eqmag=="")&&Info.sd<=Number(eqdep)&&Number(eqdep)<=Info.ed&&Info.si<=Number(eqsinum)&&Number(eqsinum)<=Info.ei&&(eqflag=="K"||eqflag=="k"||eqflag=="A"||eqflag==" ")){cnvJson.push({type:"circle",latlon:[eqLat,eqLon],radius:getEqSize(eqmag),svgConfig:{},options:getEqColorD(eqdep,eqmag,eqaflag),popup:{content:titleStr,on:"click"}});count=count+1}}}def.resolve();tmpRes["cnvJson"]=cnvJson;tmpRes["count"]=count;return def.promise()};var makeButtons=function(){var btnStr0=["最新（24時間）","Latest Earthquake"];var btnStr1=["府県選択","Options of Prefectures"];var btnStr2=["活断層表示　","Display of Active faults"];var btnStr3=["活火山表示　","Display of Active volcano"];var strI=0;var buttons=document.createElement("div");var btn0=$("<div>").text(btnStr0[strI]).addClass("contents-button").on("click",function(e){readrawMap(0)});$(buttons).append(btn0).append("<br>");var prefSelects=document.createElement("div");var prefSelect0=$("<select>").attr("id","pref").addClass("hypo-select").on("change",function(e){moveMap($("#pref").val())});$(prefSelect0).append('<option value="999999" selected="selected">'+btnStr1[strI]+"</option>");for(var i in prefCity_PRM["pref"]){var pC=prefCity_PRM["pref"][i].code;var pN=prefCity_PRM["pref"][i].name;$(prefSelect0).append('<option value="'+pC+'">'+pN+"</option>")}$(prefSelects).append(prefSelect0);var checkboxes=document.createElement("div");var checkbox0='<input type = "checkbox" name="checkF" id="checkF" value="fault"><label for="checkF">'+btnStr2[strI]+"</label>";var checkbox1='<input type = "checkbox" name="checkH" id="checkH" value="vol"><label for="checkH">'+btnStr3[strI]+"</label>";drawDataObj["data"]["fault"].display=false;drawDataObj["data"]["vol"].display=false;$(checkboxes).append($("<span>").html(checkbox0)).on("change","#checkF",function(){drawDataObj["freeSpaceDefault"]="keep";if($("#checkF").prop("checked")){drawDataObj["data"]["fault"].display=true;UnitMap.makePage({data:{fault:{display:true}},freeSpaceDefault:drawDataObj.freeSpaceDefault})}else{drawDataObj["data"]["fault"].display=false;UnitMap.makePage({data:{fault:{display:false}},freeSpaceDefault:drawDataObj.freeSpaceDefault})}});$(checkboxes).append($("<span>").html(checkbox1)).on("change","#checkH",function(){drawDataObj["freeSpaceDefault"]="keep";if($("#checkH").prop("checked")){drawDataObj["data"]["vol"].display=true;UnitMap.makePage({data:{vol:{display:true}},freeSpaceDefault:drawDataObj.freeSpaceDefault})}else{drawDataObj["data"]["vol"].display=false;UnitMap.makePage({data:{vol:{display:false}},freeSpaceDefault:drawDataObj.freeSpaceDefault})}});$(checkboxes).addClass("smbox");$(buttons).append(checkboxes).append(prefSelects).addClass("box");drawDataObj["contentsInfo"]=buttons};var moveMap=function(code){if(code=="999999"){drawDataObj["zxy"]=[5,35.295,134.836]}else{drawDataObj["zxy"]=[prefCity_PRM["pref"][Number(code)].z-1,prefCity_PRM["pref"][Number(code)].x,prefCity_PRM["pref"][Number(code)].y]}drawDataObj["freeSpaceDefault"]="keep";UnitMap.makePage({zxy:drawDataObj.zxy,freeSpaceDefault:drawDataObj.freeSpaceDefault})};var getEqSize=function(mag){var sizeFactor=2.5;var size=0;if(parseFloat(mag)<1||mag==""||isNaN(parseFloat(mag))){size=1*sizeFactor}else if(parseFloat(mag)>8||/Ｍ８を超/.test(mag)){size=8*sizeFactor}else{size=parseFloat(mag)*sizeFactor}return size};var getEqColorD=function(dep){var h=0;var d=Number(dep);var l=50;if(d<=10){l=50-25*((10-d)/10);h=0}else if(d<=20){h=0+30*((d-10)/10)}else if(d<=30){h=30+30*((d-20)/10)}else if(d<=50){h=60}else if(d<=100){h=60+60*((d-50)/50);l=50+25*((50-d)/100)}else if(d<=200){h=120+90*((d-100)/100);l=25-30*((100-d)/100)}else if(d<=700){h=210+30*((d-200)/500);l=55+30*((200-d)/500)}else{h=240;l=25}return{weight:.5,color:"#000000",fillColor:"hsl("+h+", 100%, "+l+"%)",opacity:1,fillOpacity:.8}};var makeLegends=function(){drawDataObj["legend"]=imgdir+"hypLeg.svg"};var getInfoTime=function(dataTime,opt){var dayE=new Date(dataTime.time);var dayS=new Date(dataTime.time);var term="データ表示期間　";dayS.setDate(dayS.getDate()-(opt+1));dayS.setHours(dayS.getHours()+1,0);dayE.setDate(dayE.getDate()-opt);if(opt!=0){dayE.setHours(dayE.getHours()+1,0)}term+=JMAWebUtility.date.strftime(dayS,"%Y年%m月%d日%H:%M")+"～"+JMAWebUtility.date.strftime(dayE,"%Y年%m月%d日%H:%M");var YYYY1=JMAWebUtility.date.strftime(dayS,"%Y");var MM1=JMAWebUtility.date.strftime(dayS,"%m");var DD1=JMAWebUtility.date.strftime(dayS,"%d");var YYYY2=JMAWebUtility.date.strftime(dayE,"%Y");var MM2=JMAWebUtility.date.strftime(dayE,"%m");var DD2=JMAWebUtility.date.strftime(dayE,"%d");var fN1="hypo/data/"+YYYY1+"/"+MM1+"/hypo"+YYYY1+MM1+DD1+".geojson";var fN2="hypo/data/"+YYYY2+"/"+MM2+"/hypo"+YYYY2+MM2+DD2+".geojson";var requests={data1:fN1,data2:fN2};var TimeS=dayS.getTime();var TimeE=dayE.getTime();var Info={term:term,fN:requests,opt:opt,stH:TimeS,etH:TimeE,now:dataTime};return Info};var makeSlider=function(dataTime){var dayS=new Date(dataTime.time);var term={};for(var i=0;i<7;i++){dayS.setDate(dayS.getDate()-1);if(i==0){dayS.setHours(dayS.getHours()+1)}term[i]=JMAWebUtility.date.strftime(dayS,"%d日%H時")+"～"}drawDataObj["movieConfig"]={slider:[term[6],term[5],term[4],term[3],term[2],term[1],term[0]],startPosition:6,interval:1e3}};root.Hypo.rapidRequest=function(i,resolve){var opt=6-i;if(!movieData[opt]){movieData[opt]=[];$.when(readData(opt)).done(function(){delete drawDataObj.zxy;drawDataObj["freeSpaceDefault"]="keep";movieData[opt]=$.extend(true,{},drawDataObj);movieData[opt].data=$.extend(true,{},drawDataObj.data);movieData[opt].data.hypo=$.extend(true,{},drawDataObj.data.hypo);movieData[opt].data.hypo.data=$.extend(true,[],drawDataObj.data.hypo.data);resolve({data:movieData[opt].data,display:movieData[opt].display,infoTime:movieData[opt].infoTime,freeSpaceDefault:drawDataObj.freeSpaceDefault,centerText:drawDataObj.centerText});delete movieData[opt]["data"]["fault"].display;delete movieData[opt]["data"]["vol"].display})}else{if($("#checkF").prop("checked")){movieData["data"]["fault"].display=true}else{movieData["data"]["fault"].display=false}if($("#checkH").prop("checked")){movieData["data"]["vol"].display=true}else{movieData["data"]["vol"].display=false}drawDataObj["freeSpaceDefault"]="keep";resolve({data:movieData[opt].data,display:movieData[opt].display,infoTime:movieData[opt].infoTime,freeSpaceDefault:drawDataObj.freeSpaceDefault,centerText:drawDataObj.centerText})}};var chgDate=function(opt,dataTime){var stD=document.getElementById("stD").value;var stH=document.getElementById("stH").value;var etD=document.getElementById("etD").value;var etH=document.getElementById("etH").value;var strDateS=new Date(stD.replace(/-/g,"/")+" 00:00:00");var strDateE=new Date(etD.replace(/-/g,"/")+" 23:59:00");var dayS=new Date(dataTime.time);var dayE=new Date(dataTime.time);if(opt==0){strDateE=dayE;var newDateS=JMAWebUtility.date.strftime(strDateE,"%Y-%m-%d");var newDateE=newDateS;var newTimeS="00:00";var newTimeE=JMAWebUtility.date.strftime(strDateE,"%H:%M:%S").slice(0,5)}if(opt==1){strDateE.setDate(strDateE.getDate()-opt);var newDateS=JMAWebUtility.date.strftime(strDateE,"%Y-%m-%d");var newDateE=newDateS;var newTimeS="00:00";var newTimeE=JMAWebUtility.date.strftime(strDateE,"%H:%M:%S").slice(0,5)}if(opt==2){strDateE.setDate(strDateE.getDate()+1);if(strDateE.getTime()-dayE.getTime()>0){strDateE=dayE}var newDateS=JMAWebUtility.date.strftime(strDateE,"%Y-%m-%d");var newDateE=newDateS;var newTimeS=JMAWebUtility.date.strftime(strDateS,"%H:%M:%S").slice(0,5);var newTimeE=JMAWebUtility.date.strftime(strDateE,"%H:%M:%S").slice(0,5)}if(opt==3){var newTimeS=JMAWebUtility.date.strftime(strDateS,"%H:%M:%S").slice(0,5);strDateE=dayE;strDateS=dayS;strDateS.setDate(1);var newDateS=JMAWebUtility.date.strftime(strDateS,"%Y-%m-%d");var newDateE=JMAWebUtility.date.strftime(strDateE,"%Y-%m-%d");var newTimeE=JMAWebUtility.date.strftime(strDateE,"%H:%M:%S").slice(0,5)}if(opt==4){var newTimeS=JMAWebUtility.date.strftime(strDateS,"%H:%M:%S").slice(0,5);var newTimeE=JMAWebUtility.date.strftime(strDateE,"%H:%M:%S").slice(0,5);strDateE=new Date(strDateS.getFullYear(),strDateS.getMonth(),0);strDateS=new Date(strDateS.getFullYear(),strDateS.getMonth(),0);strDateS.setDate(1);var newDateS=JMAWebUtility.date.strftime(strDateS,"%Y-%m-%d");var newDateE=JMAWebUtility.date.strftime(strDateE,"%Y-%m-%d")}if(opt==5){var newTimeS=JMAWebUtility.date.strftime(strDateS,"%H:%M:%S").slice(0,5);var newTimeE=JMAWebUtility.date.strftime(strDateE,"%H:%M:%S").slice(0,5);strDateE=new Date(strDateS.getFullYear(),strDateS.getMonth()+2,0);strDateS=new Date(strDateS.getFullYear(),strDateS.getMonth()+2,0);if(strDateE.getTime()-dayE.getTime()>0){strDateS=dayS;strDateE=dayE;newTimeE=JMAWebUtility.date.strftime(strDateE,"%H:%M:%S").slice(0,5)}strDateS.setDate(1);var newDateS=JMAWebUtility.date.strftime(strDateS,"%Y-%m-%d");var newDateE=JMAWebUtility.date.strftime(strDateE,"%Y-%m-%d")}document.getElementById("stD").value=newDateS;document.getElementById("stH").value=newTimeS;document.getElementById("etD").value=newDateE;document.getElementById("etH").value=newTimeE};var readSelectbox=function(dataTime){var dayS=new Date(dataTime.time);var dayE=new Date(dataTime.time);dayS.setDate(dayS.getDate()-1);var YMD1=JMAWebUtility.date.strftime(dayS,"%Y-%m-%d");var HM1="00:00";var YMD2=JMAWebUtility.date.strftime(dayE,"%Y-%m-%d");var HM2=JMAWebUtility.date.strftime(dayE,"%H:%M:%S").slice(0,5);var searchTitle='<div style="font-size: 18px; font-weight:bold; color: #272d79;">震源検索条件設定<hr color="#272d79"></div>'+'<div style="font-size: 12px;">・一回の検索期間は30日程度。<br>・検索条件により表示に時間がかかります。<br>・過去の地震(1年程度以上)は<a href="https://www.data.jma.go.jp/eqev/data/daily_map/index.html" >震源リスト</a>参照。</div>';var seisList=["期間","マグニチュード","深さ(km)","最大震度"];var datePick=$("<div>");var datePickerS='<input type="date" class="hypo-input" name="stD" id="stD" value='+YMD1+' min="2000-01-01" maxlength="10" required> <input type="time" class="hypo-input" name="stH" id="stH" value='+HM1+' min="00:00" maxlength="10" required>';var datePickerE='<input type="date" class="hypo-input" name="etD" id="etD" value='+YMD2+' min="2000-01-01" maxlength="10" required> <input type="time" class="hypo-input" name="etH" id="etH" value='+HM2+' min="00:00" maxlength="10" required>';var mdiSelect=$("<span>");var mSelectS=$("<select>").attr("id","sm");var mSelectE=$("<select>").attr("id","em");var dSelectS=$("<select>").attr("id","sd");var dSelectE=$("<select>").attr("id","ed");var iSelectS=$("<select>").attr("id","si");var iSelectE=$("<select>").attr("id","ei");var btnStr0=["今日","Latest Earthquake"];var btnStr1=["< 前日","Previous Earthquake"];var btnStr2=["翌日 >","Next Earthquake"];var btnStr3=["今月","Latest Earthquake"];var btnStr4=["< 前月","Previous Earthquake"];var btnStr5=["翌月 >","Next Earthquake"];var strI=0;var btn0=$("<div>").text(btnStr0[strI]).addClass("hypo-Button").on("click",function(e){chgDate(0,dataTime)});var btn1=$("<div>").text(btnStr1[strI]).addClass("hypo-Button").on("click",function(e){chgDate(1,dataTime)});var btn2=$("<div>").text(btnStr2[strI]).addClass("hypo-Button").on("click",function(e){chgDate(2,dataTime)});var btn3=$("<div>").text(btnStr3[strI]).addClass("hypo-Button").on("click",function(e){chgDate(3,dataTime)});var btn4=$("<div>").text(btnStr4[strI]).addClass("hypo-Button").on("click",function(e){chgDate(4,dataTime)});var btn5=$("<div>").text(btnStr5[strI]).addClass("hypo-Button").on("click",function(e){chgDate(5,dataTime)});$(datePick).append($('<p style="margin-bottom: 0.5em;">').html(searchTitle),$('<span style="font-weight: bold;">').html(seisList[0]),$('<p style="margin-bottom: 0.2em;">').html(datePickerS+"～<br>"+datePickerE+"<br>"),$('<p style="margin-bottom: 0.5em;">').append(btn1,btn0,btn2));$(mSelectS).append("<option value=-2.0 selected>指定なし</option>");for(var i=0;i<9.5;i+=.5){var selectedS='">';var selectedE='">';$(mSelectS).append('<option value="'+i.toFixed(1)+selectedS+i.toFixed(1)+"</option>");$(mSelectE).append('<option value="'+i.toFixed(1)+selectedE+i.toFixed(1)+"</option>")}$(mSelectE).append("<option value=9.5 selected>指定なし</option>");$(mSelectS).addClass("hypo-select");$(mSelectE).addClass("hypo-select");$(dSelectS).append('<option value="0" selected>0</option>'+'<option value="10">10</option>'+'<option value="20">20</option>'+'<option value="30">30</option>'+'<option value="40">40</option>'+'<option value="50">50</option>'+'<option value="60">60</option>'+'<option value="70">70</option>'+'<option value="80">80</option>'+'<option value="90">90</option>'+'<option value="100">100</option>'+'<option value="300">300</option>').addClass("hypo-select");$(dSelectE).append('<option value="10">10</option>'+'<option value="20">20</option>'+'<option value="30">30</option>'+'<option value="40">40</option>'+'<option value="50">50</option>'+'<option value="60">60</option>'+'<option value="70">70</option>'+'<option value="80">80</option>'+'<option value="90">90</option>'+'<option value="100">100</option>'+'<option value="300">300</option>'+'<option value="700" selected>700</option>').addClass("hypo-select");$(iSelectS).append('<option value="0" selected>指定なし</option>'+'<option value="1">震度1</option>'+'<option value="2">震度2</option>'+'<option value="3">震度3</option>'+'<option value="4">震度4</option>'+'<option value="4.5">震度5弱</option>'+'<option value="5.0">震度5強</option>'+'<option value="5.5">震度6弱</option>'+'<option value="6.0">震度6強</option>'+'<option value="7.0">震度7</option>').addClass("hypo-select");$(iSelectE).append('<option value="1">震度1</option>'+'<option value="2">震度2</option>'+'<option value="3">震度3</option>'+'<option value="4">震度4</option>'+'<option value="4.5">震度5弱</option>'+'<option value="5.0">震度5強</option>'+'<option value="5.5">震度6弱</option>'+'<option value="6.0">震度6強</option>'+'<option value="7.0">震度7</option>'+'<option value="7.5" selected>指定なし</option>').addClass("hypo-select");var searchBtn=$("<div>").text("条件を満たす地震を検索").addClass("contents-button").on("click",function(e){makeSelectMap(dataTime)});$(mdiSelect).append($('<span style="font-weight: bold;">').html(seisList[1]+"<br>"),$('<p style="margin-bottom: 0.5em;">').append(mSelectS).append("～").append(mSelectE),$('<span style="font-weight: bold;">').html(seisList[2]+"<br>"),$('<p style="margin-bottom: 0.5em;">').append(dSelectS).append("～").append(dSelectE),$('<span style="font-weight: bold;">').html(seisList[3]+"<br>"),$('<p style="margin-bottom: 0.5em;">').append(iSelectS).append("～").append(iSelectE));drawDataObj["freeSpace"]=$(datePick).css("max-width","290px").append(mdiSelect).append($('<p style="margin-top: 1em; margin-bottom: 0;">').append(searchBtn)).addClass("box")[0]}})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
<script>
(function(root){"use strict";var util=JMAWebUtility;var _c=util.common;var Const={message:"Most recent Messages within one month",legend:'Notes<img src="pacifictsunami/image/hypo.svg" width="26" height="26" class="ml_1em mr_5px">Epicenter',marker:'<img src="pacifictsunami/image/hypo.svg" width="26" height="26">',list:"pacifictsunami/data/list.json",info:"pacifictsunami/const/info.json",dir:"pacifictsunami/data/wepa40/"};var draw=function(_hashdata,opt,resolve){util.parallelRequest({list:Const.list,info:Const.info},function(data){if(data.list.length===0){resolve({zxy:[3,5,179],centerText:data.info.centerText})}else{util.parallelRequest({text:Const.dir+data.list[0].fname},function(file){resolve({data:makeData(data.list[0],opt.devise.responsiveMode),zxy:makePosition(data.list[0].epicenter,true),infoTime:makeInfoTime(data.list[0].time),explain:data.info.explain,contentsInfo:'<p class="pacifictsunami-contents-info">'+data.info.contentsInfo+"</p>",legend:makeLegend(),textInfo:file.text?makeTextInfo(file.text):null,freeSpace:makeFreeSpace(data.list.length),defaultOpen:"textinfo"})})}})};var makeInfoTime=function(time){return util.date.strftime(new Date(time),"Issued at %H:%M UTC %d %EFm %Y",0)};var makeLegend=function(){var div=document.createElement("div");div.innerHTML=Const.legend;return div};var makeTextInfo=function(text){return text.slice(-1)==="="?text.slice(0,-1).replace(/\r?\n/g,"<br>"):text.replace(/\r?\n/g,"<br>")};var makePopupText=function(obj){var text="";var ns=Number(obj.epicenter.lat)>=0?" N<br>":" S<br>";var ew=Number(obj.epicenter.lon)>=0?" E<br>":" W<br>";text+="LAT : "+obj.epicenter.lat.slice(1)+ns;text+="LON : "+obj.epicenter.lon.slice(1)+ew;if(obj.depth){text+="DEPTH : "+obj.depth+"KM<br>"}text+="MAG : "+obj.mag;return text};var makePosition=function(obj,zoom){var ary=_c.map(obj,function(key,value){var num=Number(value);if(key==="lon"&&num<0){num+=360}return num});if(zoom)ary.unshift(3);return ary};var makeData=function(value,mode){var key={};var obj={};var ary=[];var str=mode.slice(0,1);ary.push({type:"dom",latlon:makePosition(value.epicenter),domElement:Const.marker,popup:{content:makePopupText(value),on:str==="m"?"click":"mouseover",off:str==="m"?"click":"mouseout"},options:{iconAnchor:[13,13]}});obj.data=ary;key.pt=obj;return key};var changeData=function(a,b){return{infoTime:makeInfoTime(a.time),data:makeData(a,UnitMap.getStatus().responsiveMode),textInfo:b?makeTextInfo(b):null,contentsInfoDefault:"keep",zxy:makePosition(a.epicenter,true),defaultOpen:"textinfo"}};var makeFreeSpace=function(length){var wrapper,message,latestInfoWrapper,latestInfo,forwardBackWrapper,previousInfo,nextInfo;message=document.createElement("p");message.textContent=Const.message;latestInfo=document.createElement("div");latestInfo.className="contents-button";latestInfo.setAttribute("data-max",length);latestInfo.setAttribute("id","pacifictsunami-latest");latestInfo.innerHTML="Latest Information";latestInfo.onclick=function(){var previous,next;util.parallelRequest({list:Const.list},function(a){util.parallelRequest({text:Const.dir+a.list[0].fname},function(b){UnitMap.makePage(changeData(a.list[0],b.text))})});if(length>1){previous=document.getElementById("pacifictsunami-previous");previous.setAttribute("data-value",1);previous.classList.remove("pacifictsunami-disable");next=document.getElementById("pacifictsunami-next");next.setAttribute("data-value",0)}};latestInfoWrapper=document.createElement("div");latestInfoWrapper.className="mb_5px talign_right";latestInfoWrapper.appendChild(latestInfo);previousInfo=document.createElement("div");previousInfo.className="contents-button";previousInfo.setAttribute("data-value",length===1?0:1);previousInfo.setAttribute("id","pacifictsunami-previous");previousInfo.innerHTML="&lt; Previous Information";previousInfo.onclick=function(e){var max,value,previousValue,nextValue,next;max=document.getElementById("pacifictsunami-latest");max=Number(max.getAttribute("data-max"));value=Number(e.target.getAttribute("data-value"));util.parallelRequest({list:Const.list},function(a){util.parallelRequest({text:Const.dir+a.list[value].fname},function(b){UnitMap.makePage(changeData(a.list[value],b.text))})});previousValue=value+1;nextValue=previousValue-1;next=document.getElementById("pacifictsunami-next");next.setAttribute("data-value",nextValue);e.target.setAttribute("data-value",previousValue);if(previousValue===max){e.target.classList.add("pacifictsunami-disable")}};nextInfo=document.createElement("div");nextInfo.className="contents-button";nextInfo.setAttribute("data-value",0);nextInfo.setAttribute("id","pacifictsunami-next");nextInfo.innerHTML="Next Information &gt;";nextInfo.onclick=function(e){var value,nextValue,previous;value=Number(e.target.getAttribute("data-value"));nextValue=value-1;util.parallelRequest({list:Const.list},function(a){util.parallelRequest({text:Const.dir+a.list[nextValue].fname},function(b){UnitMap.makePage(changeData(a.list[nextValue],b.text))})});previous=document.getElementById("pacifictsunami-previous");previous.setAttribute("data-value",value);previous.classList.remove("pacifictsunami-disable");e.target.setAttribute("data-value",nextValue)};forwardBackWrapper=document.createElement("div");forwardBackWrapper.appendChild(previousInfo);forwardBackWrapper.appendChild(nextInfo);wrapper=document.createElement("div");wrapper.className="pacifictsunami-free-space";wrapper.appendChild(message);wrapper.appendChild(latestInfoWrapper);wrapper.appendChild(forwardBackWrapper);return wrapper};root.PacificTsunami=root.PacificTsunami||{};root.PacificTsunami.draw=draw})(typeof window==="object"?window:typeof global==="object"?global:this);
</script>
    <script>UnitMap.init();</script>
  </body>
</html>
